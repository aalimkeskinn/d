function B_(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var wH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var b0={exports:{}},uh={},B0={exports:{}},br={};var rx;function E_(){if(rx)return br;rx=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),v=Symbol.iterator;function x(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function E(z,S,K){this.props=z,this.context=S,this.refs=N,this.updater=K||y}E.prototype.isReactComponent={},E.prototype.setState=function(z,S){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,S,"setState")},E.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function _(){}_.prototype=E.prototype;function P(z,S,K){this.props=z,this.context=S,this.refs=N,this.updater=K||y}var H=P.prototype=new _;H.constructor=P,C(H,E.prototype),H.isPureReactComponent=!0;var D=Array.isArray,J=Object.prototype.hasOwnProperty,Z={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function Q(z,S,K){var Y,G={},oe=null,ye=null;if(S!=null)for(Y in S.ref!==void 0&&(ye=S.ref),S.key!==void 0&&(oe=""+S.key),S)J.call(S,Y)&&!O.hasOwnProperty(Y)&&(G[Y]=S[Y]);var Le=arguments.length-2;if(Le===1)G.children=K;else if(1<Le){for(var be=Array(Le),je=0;je<Le;je++)be[je]=arguments[je+2];G.children=be}if(z&&z.defaultProps)for(Y in Le=z.defaultProps,Le)G[Y]===void 0&&(G[Y]=Le[Y]);return{$$typeof:r,type:z,key:oe,ref:ye,props:G,_owner:Z.current}}function U(z,S){return{$$typeof:r,type:z.type,key:S,ref:z.ref,props:z.props,_owner:z._owner}}function V(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function I(z){var S={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(K){return S[K]})}var L=/\/+/g;function F(z,S){return typeof z=="object"&&z!==null&&z.key!=null?I(""+z.key):S.toString(36)}function ee(z,S,K,Y,G){var oe=typeof z;(oe==="undefined"||oe==="boolean")&&(z=null);var ye=!1;if(z===null)ye=!0;else switch(oe){case"string":case"number":ye=!0;break;case"object":switch(z.$$typeof){case r:case e:ye=!0}}if(ye)return ye=z,G=G(ye),z=Y===""?"."+F(ye,0):Y,D(G)?(K="",z!=null&&(K=z.replace(L,"$&/")+"/"),ee(G,S,K,"",function(je){return je})):G!=null&&(V(G)&&(G=U(G,K+(!G.key||ye&&ye.key===G.key?"":(""+G.key).replace(L,"$&/")+"/")+z)),S.push(G)),1;if(ye=0,Y=Y===""?".":Y+":",D(z))for(var Le=0;Le<z.length;Le++){oe=z[Le];var be=Y+F(oe,Le);ye+=ee(oe,S,K,be,G)}else if(be=x(z),typeof be=="function")for(z=be.call(z),Le=0;!(oe=z.next()).done;)oe=oe.value,be=Y+F(oe,Le++),ye+=ee(oe,S,K,be,G);else if(oe==="object")throw S=String(z),Error("Objects are not valid as a React child (found: "+(S==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":S)+"). If you meant to render a collection of children, use an array instead.");return ye}function ge(z,S,K){if(z==null)return z;var Y=[],G=0;return ee(z,Y,"","",function(oe){return S.call(K,oe,G++)}),Y}function ue(z){if(z._status===-1){var S=z._result;S=S(),S.then(function(K){(z._status===0||z._status===-1)&&(z._status=1,z._result=K)},function(K){(z._status===0||z._status===-1)&&(z._status=2,z._result=K)}),z._status===-1&&(z._status=0,z._result=S)}if(z._status===1)return z._result.default;throw z._result}var fe={current:null},ae={transition:null},$={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:ae,ReactCurrentOwner:Z};function me(){throw Error("act(...) is not supported in production builds of React.")}return br.Children={map:ge,forEach:function(z,S,K){ge(z,function(){S.apply(this,arguments)},K)},count:function(z){var S=0;return ge(z,function(){S++}),S},toArray:function(z){return ge(z,function(S){return S})||[]},only:function(z){if(!V(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},br.Component=E,br.Fragment=t,br.Profiler=s,br.PureComponent=P,br.StrictMode=n,br.Suspense=u,br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,br.act=me,br.cloneElement=function(z,S,K){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Y=C({},z.props),G=z.key,oe=z.ref,ye=z._owner;if(S!=null){if(S.ref!==void 0&&(oe=S.ref,ye=Z.current),S.key!==void 0&&(G=""+S.key),z.type&&z.type.defaultProps)var Le=z.type.defaultProps;for(be in S)J.call(S,be)&&!O.hasOwnProperty(be)&&(Y[be]=S[be]===void 0&&Le!==void 0?Le[be]:S[be])}var be=arguments.length-2;if(be===1)Y.children=K;else if(1<be){Le=Array(be);for(var je=0;je<be;je++)Le[je]=arguments[je+2];Y.children=Le}return{$$typeof:r,type:z.type,key:G,ref:oe,props:Y,_owner:ye}},br.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:i,_context:z},z.Consumer=z},br.createElement=Q,br.createFactory=function(z){var S=Q.bind(null,z);return S.type=z,S},br.createRef=function(){return{current:null}},br.forwardRef=function(z){return{$$typeof:c,render:z}},br.isValidElement=V,br.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:ue}},br.memo=function(z,S){return{$$typeof:d,type:z,compare:S===void 0?null:S}},br.startTransition=function(z){var S=ae.transition;ae.transition={};try{z()}finally{ae.transition=S}},br.unstable_act=me,br.useCallback=function(z,S){return fe.current.useCallback(z,S)},br.useContext=function(z){return fe.current.useContext(z)},br.useDebugValue=function(){},br.useDeferredValue=function(z){return fe.current.useDeferredValue(z)},br.useEffect=function(z,S){return fe.current.useEffect(z,S)},br.useId=function(){return fe.current.useId()},br.useImperativeHandle=function(z,S,K){return fe.current.useImperativeHandle(z,S,K)},br.useInsertionEffect=function(z,S){return fe.current.useInsertionEffect(z,S)},br.useLayoutEffect=function(z,S){return fe.current.useLayoutEffect(z,S)},br.useMemo=function(z,S){return fe.current.useMemo(z,S)},br.useReducer=function(z,S,K){return fe.current.useReducer(z,S,K)},br.useRef=function(z){return fe.current.useRef(z)},br.useState=function(z){return fe.current.useState(z)},br.useSyncExternalStore=function(z,S,K){return fe.current.useSyncExternalStore(z,S,K)},br.useTransition=function(){return fe.current.useTransition()},br.version="18.3.1",br}var nx;function Mv(){return nx||(nx=1,B0.exports=E_()),B0.exports}var sx;function I_(){if(sx)return uh;sx=1;var r=Mv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(c,u,d){var f,v={},x=null,y=null;d!==void 0&&(x=""+d),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(y=u.ref);for(f in u)n.call(u,f)&&!i.hasOwnProperty(f)&&(v[f]=u[f]);if(c&&c.defaultProps)for(f in u=c.defaultProps,u)v[f]===void 0&&(v[f]=u[f]);return{$$typeof:e,type:c,key:x,ref:y,props:v,_owner:s.current}}return uh.Fragment=t,uh.jsx=l,uh.jsxs=l,uh}var ix;function __(){return ix||(ix=1,b0.exports=I_()),b0.exports}var A=__(),Ee=Mv();const gA=C_(Ee),N_=B_({__proto__:null,default:gA},[Ee]);var Ap={},C0={exports:{}},pa={},E0={exports:{}},I0={};var ax;function S_(){return ax||(ax=1,(function(r){function e(ae,$){var me=ae.length;ae.push($);e:for(;0<me;){var z=me-1>>>1,S=ae[z];if(0<s(S,$))ae[z]=$,ae[me]=S,me=z;else break e}}function t(ae){return ae.length===0?null:ae[0]}function n(ae){if(ae.length===0)return null;var $=ae[0],me=ae.pop();if(me!==$){ae[0]=me;e:for(var z=0,S=ae.length,K=S>>>1;z<K;){var Y=2*(z+1)-1,G=ae[Y],oe=Y+1,ye=ae[oe];if(0>s(G,me))oe<S&&0>s(ye,G)?(ae[z]=ye,ae[oe]=me,z=oe):(ae[z]=G,ae[Y]=me,z=Y);else if(oe<S&&0>s(ye,me))ae[z]=ye,ae[oe]=me,z=oe;else break e}}return $}function s(ae,$){var me=ae.sortIndex-$.sortIndex;return me!==0?me:ae.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();r.unstable_now=function(){return l.now()-c}}var u=[],d=[],f=1,v=null,x=3,y=!1,C=!1,N=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(ae){for(var $=t(d);$!==null;){if($.callback===null)n(d);else if($.startTime<=ae)n(d),$.sortIndex=$.expirationTime,e(u,$);else break;$=t(d)}}function D(ae){if(N=!1,H(ae),!C)if(t(u)!==null)C=!0,ue(J);else{var $=t(d);$!==null&&fe(D,$.startTime-ae)}}function J(ae,$){C=!1,N&&(N=!1,_(Q),Q=-1),y=!0;var me=x;try{for(H($),v=t(u);v!==null&&(!(v.expirationTime>$)||ae&&!I());){var z=v.callback;if(typeof z=="function"){v.callback=null,x=v.priorityLevel;var S=z(v.expirationTime<=$);$=r.unstable_now(),typeof S=="function"?v.callback=S:v===t(u)&&n(u),H($)}else n(u);v=t(u)}if(v!==null)var K=!0;else{var Y=t(d);Y!==null&&fe(D,Y.startTime-$),K=!1}return K}finally{v=null,x=me,y=!1}}var Z=!1,O=null,Q=-1,U=5,V=-1;function I(){return!(r.unstable_now()-V<U)}function L(){if(O!==null){var ae=r.unstable_now();V=ae;var $=!0;try{$=O(!0,ae)}finally{$?F():(Z=!1,O=null)}}else Z=!1}var F;if(typeof P=="function")F=function(){P(L)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ge=ee.port2;ee.port1.onmessage=L,F=function(){ge.postMessage(null)}}else F=function(){E(L,0)};function ue(ae){O=ae,Z||(Z=!0,F())}function fe(ae,$){Q=E(function(){ae(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ae){ae.callback=null},r.unstable_continueExecution=function(){C||y||(C=!0,ue(J))},r.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ae?Math.floor(1e3/ae):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(ae){switch(x){case 1:case 2:case 3:var $=3;break;default:$=x}var me=x;x=$;try{return ae()}finally{x=me}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ae,$){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var me=x;x=ae;try{return $()}finally{x=me}},r.unstable_scheduleCallback=function(ae,$,me){var z=r.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?z+me:z):me=z,ae){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=me+S,ae={id:f++,callback:$,priorityLevel:ae,startTime:me,expirationTime:S,sortIndex:-1},me>z?(ae.sortIndex=me,e(d,ae),t(u)===null&&ae===t(d)&&(N?(_(Q),Q=-1):N=!0,fe(D,me-z))):(ae.sortIndex=S,e(u,ae),C||y||(C=!0,ue(J))),ae},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(ae){var $=x;return function(){var me=x;x=$;try{return ae.apply(this,arguments)}finally{x=me}}}})(I0)),I0}var Ax;function k_(){return Ax||(Ax=1,E0.exports=S_()),E0.exports}var ox;function F_(){if(ox)return pa;ox=1;var r=Mv(),e=k_();function t(a){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(a,o){l(a,o),l(a+"Capture",o)}function l(a,o){for(s[a]=o,a=0;a<o.length;a++)n.add(o[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},v={};function x(a){return u.call(v,a)?!0:u.call(f,a)?!1:d.test(a)?v[a]=!0:(f[a]=!0,!1)}function y(a,o,h,g){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function C(a,o,h,g){if(o===null||typeof o>"u"||y(a,o,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function N(a,o,h,g,B,j,te){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=g,this.attributeNamespace=B,this.mustUseProperty=h,this.propertyName=a,this.type=o,this.sanitizeURL=j,this.removeEmptyString=te}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=new N(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var o=a[0];E[o]=new N(o,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new N(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new N(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=new N(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){E[a]=new N(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){E[a]=new N(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){E[a]=new N(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){E[a]=new N(a,5,!1,a.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function P(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var o=a.replace(_,P);E[o]=new N(o,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var o=a.replace(_,P);E[o]=new N(o,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var o=a.replace(_,P);E[o]=new N(o,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){E[a]=new N(a,1,!1,a.toLowerCase(),null,!1,!1)}),E.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){E[a]=new N(a,1,!1,a.toLowerCase(),null,!0,!0)});function H(a,o,h,g){var B=E.hasOwnProperty(o)?E[o]:null;(B!==null?B.type!==0:g||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(C(o,h,B,g)&&(h=null),g||B===null?x(o)&&(h===null?a.removeAttribute(o):a.setAttribute(o,""+h)):B.mustUseProperty?a[B.propertyName]=h===null?B.type===3?!1:"":h:(o=B.attributeName,g=B.attributeNamespace,h===null?a.removeAttribute(o):(B=B.type,h=B===3||B===4&&h===!0?"":""+h,g?a.setAttributeNS(g,o,h):a.setAttribute(o,h))))}var D=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),Z=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),ae=Symbol.iterator;function $(a){return a===null||typeof a!="object"?null:(a=ae&&a[ae]||a["@@iterator"],typeof a=="function"?a:null)}var me=Object.assign,z;function S(a){if(z===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);z=o&&o[1]||""}return`
`+z+a}var K=!1;function Y(a,o){if(!a||K)return"";K=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(nt){var g=nt}Reflect.construct(a,[],o)}else{try{o.call()}catch(nt){g=nt}a.call(o.prototype)}else{try{throw Error()}catch(nt){g=nt}a()}}catch(nt){if(nt&&g&&typeof nt.stack=="string"){for(var B=nt.stack.split(`
`),j=g.stack.split(`
`),te=B.length-1,Ne=j.length-1;1<=te&&0<=Ne&&B[te]!==j[Ne];)Ne--;for(;1<=te&&0<=Ne;te--,Ne--)if(B[te]!==j[Ne]){if(te!==1||Ne!==1)do if(te--,Ne--,0>Ne||B[te]!==j[Ne]){var Oe=`
`+B[te].replace(" at new "," at ");return a.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",a.displayName)),Oe}while(1<=te&&0<=Ne);break}}}finally{K=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?S(a):""}function G(a){switch(a.tag){case 5:return S(a.type);case 16:return S("Lazy");case 13:return S("Suspense");case 19:return S("SuspenseList");case 0:case 2:case 15:return a=Y(a.type,!1),a;case 11:return a=Y(a.type.render,!1),a;case 1:return a=Y(a.type,!0),a;default:return""}}function oe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case O:return"Fragment";case Z:return"Portal";case U:return"Profiler";case Q:return"StrictMode";case F:return"Suspense";case ee:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case I:return(a.displayName||"Context")+".Consumer";case V:return(a._context.displayName||"Context")+".Provider";case L:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ge:return o=a.displayName||null,o!==null?o:oe(a.type)||"Memo";case ue:o=a._payload,a=a._init;try{return oe(a(o))}catch{}}return null}function ye(a){var o=a.type;switch(a.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=o.render,a=a.displayName||a.name||"",o.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(o);case 8:return o===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Le(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function be(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function je(a){var o=be(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),g=""+a[o];if(!a.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var B=h.get,j=h.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return B.call(this)},set:function(te){g=""+te,j.call(this,te)}}),Object.defineProperty(a,o,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(te){g=""+te},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Ge(a){a._valueTracker||(a._valueTracker=je(a))}function tt(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var h=o.getValue(),g="";return a&&(g=be(a)?a.checked?"true":"false":a.value),a=g,a!==h?(o.setValue(a),!0):!1}function it(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function It(a,o){var h=o.checked;return me({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function le(a,o){var h=o.defaultValue==null?"":o.defaultValue,g=o.checked!=null?o.checked:o.defaultChecked;h=Le(o.value!=null?o.value:h),a._wrapperState={initialChecked:g,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ft(a,o){o=o.checked,o!=null&&H(a,"checked",o,!1)}function ct(a,o){ft(a,o);var h=Le(o.value),g=o.type;if(h!=null)g==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}o.hasOwnProperty("value")?he(a,o.type,h):o.hasOwnProperty("defaultValue")&&he(a,o.type,Le(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(a.defaultChecked=!!o.defaultChecked)}function pt(a,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var g=o.type;if(!(g!=="submit"&&g!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+a._wrapperState.initialValue,h||o===a.value||(a.value=o),a.defaultValue=o}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function he(a,o,h){(o!=="number"||it(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var Se=Array.isArray;function Qe(a,o,h,g){if(a=a.options,o){o={};for(var B=0;B<h.length;B++)o["$"+h[B]]=!0;for(h=0;h<a.length;h++)B=o.hasOwnProperty("$"+a[h].value),a[h].selected!==B&&(a[h].selected=B),B&&g&&(a[h].defaultSelected=!0)}else{for(h=""+Le(h),o=null,B=0;B<a.length;B++){if(a[B].value===h){a[B].selected=!0,g&&(a[B].defaultSelected=!0);return}o!==null||a[B].disabled||(o=a[B])}o!==null&&(o.selected=!0)}}function X(a,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return me({},o,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ne(a,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(t(92));if(Se(h)){if(1<h.length)throw Error(t(93));h=h[0]}o=h}o==null&&(o=""),h=o}a._wrapperState={initialValue:Le(h)}}function pe(a,o){var h=Le(o.value),g=Le(o.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),o.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),g!=null&&(a.defaultValue=""+g)}function Ie(a){var o=a.textContent;o===a._wrapperState.initialValue&&o!==""&&o!==null&&(a.value=o)}function se(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Te(a,o){return a==null||a==="http://www.w3.org/1999/xhtml"?se(o):a==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var we,Be=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,g,B){MSApp.execUnsafeLocalFunction(function(){return a(o,h,g,B)})}:a})(function(a,o){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=o;else{for(we=we||document.createElement("div"),we.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=we.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;o.firstChild;)a.appendChild(o.firstChild)}});function Fe(a,o){if(o){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=o;return}}a.textContent=o}var De={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},At=["Webkit","ms","Moz","O"];Object.keys(De).forEach(function(a){At.forEach(function(o){o=o+a.charAt(0).toUpperCase()+a.substring(1),De[o]=De[a]})});function _e(a,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||De.hasOwnProperty(a)&&De[a]?(""+o).trim():o+"px"}function Pe(a,o){a=a.style;for(var h in o)if(o.hasOwnProperty(h)){var g=h.indexOf("--")===0,B=_e(h,o[h],g);h==="float"&&(h="cssFloat"),g?a.setProperty(h,B):a[h]=B}}var Ye=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(a,o){if(o){if(Ye[a]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ke(a,o){if(a.indexOf("-")===-1)return typeof o.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var We=null;function Me(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var rt=null,mt=null,bt=null;function dt(a){if(a=Nl(a)){if(typeof rt!="function")throw Error(t(280));var o=a.stateNode;o&&(o=Qc(o),rt(a.stateNode,a.type,o))}}function _t(a){mt?bt?bt.push(a):bt=[a]:mt=a}function Wt(){if(mt){var a=mt,o=bt;if(bt=mt=null,dt(a),o)for(a=0;a<o.length;a++)dt(o[a])}}function Ar(a,o){return a(o)}function vn(){}var _r=!1;function Ot(a,o,h){if(_r)return a(o,h);_r=!0;try{return Ar(a,o,h)}finally{_r=!1,(mt!==null||bt!==null)&&(vn(),Wt())}}function yr(a,o){var h=a.stateNode;if(h===null)return null;var g=Qc(h);if(g===null)return null;h=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(t(231,o,typeof h));return h}var _n=!1;if(c)try{var Nr={};Object.defineProperty(Nr,"passive",{get:function(){_n=!0}}),window.addEventListener("test",Nr,Nr),window.removeEventListener("test",Nr,Nr)}catch{_n=!1}function An(a,o,h,g,B,j,te,Ne,Oe){var nt=Array.prototype.slice.call(arguments,3);try{o.apply(h,nt)}catch(xt){this.onError(xt)}}var Ur=!1,Xr=null,Hr=!1,Hi=null,ta={onError:function(a){Ur=!0,Xr=a}};function ys(a,o,h,g,B,j,te,Ne,Oe){Ur=!1,Xr=null,An.apply(ta,arguments)}function yi(a,o,h,g,B,j,te,Ne,Oe){if(ys.apply(this,arguments),Ur){if(Ur){var nt=Xr;Ur=!1,Xr=null}else throw Error(t(198));Hr||(Hr=!0,Hi=nt)}}function Rn(a){var o=a,h=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(h=o.return),a=o.return;while(a)}return o.tag===3?h:null}function Fs(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function Nn(a){if(Rn(a)!==a)throw Error(t(188))}function Ha(a){var o=a.alternate;if(!o){if(o=Rn(a),o===null)throw Error(t(188));return o!==a?null:a}for(var h=a,g=o;;){var B=h.return;if(B===null)break;var j=B.alternate;if(j===null){if(g=B.return,g!==null){h=g;continue}break}if(B.child===j.child){for(j=B.child;j;){if(j===h)return Nn(B),a;if(j===g)return Nn(B),o;j=j.sibling}throw Error(t(188))}if(h.return!==g.return)h=B,g=j;else{for(var te=!1,Ne=B.child;Ne;){if(Ne===h){te=!0,h=B,g=j;break}if(Ne===g){te=!0,g=B,h=j;break}Ne=Ne.sibling}if(!te){for(Ne=j.child;Ne;){if(Ne===h){te=!0,h=j,g=B;break}if(Ne===g){te=!0,g=j,h=B;break}Ne=Ne.sibling}if(!te)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?a:o}function vi(a){return a=Ha(a),a!==null?ra(a):null}function ra(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var o=ra(a);if(o!==null)return o;a=a.sibling}return null}var Ba=e.unstable_scheduleCallback,Va=e.unstable_cancelCallback,vA=e.unstable_shouldYield,Ec=e.unstable_requestPaint,Rr=e.unstable_now,So=e.unstable_getCurrentPriorityLevel,Ka=e.unstable_ImmediatePriority,is=e.unstable_UserBlockingPriority,Hs=e.unstable_NormalPriority,qA=e.unstable_LowPriority,WA=e.unstable_IdlePriority,za=null,Vs=null;function ko(a){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(za,a,void 0,(a.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:wn,Ga=Math.log,hl=Math.LN2;function wn(a){return a>>>=0,a===0?32:31-(Ga(a)/hl|0)|0}var wA=64,ri=4194304;function Vi(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function $a(a,o){var h=a.pendingLanes;if(h===0)return 0;var g=0,B=a.suspendedLanes,j=a.pingedLanes,te=h&268435455;if(te!==0){var Ne=te&~B;Ne!==0?g=Vi(Ne):(j&=te,j!==0&&(g=Vi(j)))}else te=h&~B,te!==0?g=Vi(te):j!==0&&(g=Vi(j));if(g===0)return 0;if(o!==0&&o!==g&&(o&B)===0&&(B=g&-g,j=o&-o,B>=j||B===16&&(j&4194240)!==0))return o;if((g&4)!==0&&(g|=h&16),o=a.entangledLanes,o!==0)for(a=a.entanglements,o&=g;0<o;)h=31-dn(o),B=1<<h,g|=a[h],o&=~B;return g}function wi(a,o){switch(a){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zr(a,o){for(var h=a.suspendedLanes,g=a.pingedLanes,B=a.expirationTimes,j=a.pendingLanes;0<j;){var te=31-dn(j),Ne=1<<te,Oe=B[te];Oe===-1?((Ne&h)===0||(Ne&g)!==0)&&(B[te]=wi(Ne,o)):Oe<=o&&(a.expiredLanes|=Ne),j&=~Ne}}function On(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function qa(){var a=wA;return wA<<=1,(wA&4194240)===0&&(wA=64),a}function Wa(a){for(var o=[],h=0;31>h;h++)o.push(a);return o}function Ya(a,o,h){a.pendingLanes|=o,o!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,o=31-dn(o),a[o]=h}function vr(a,o){var h=a.pendingLanes&~o;a.pendingLanes=o,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=o,a.mutableReadLanes&=o,a.entangledLanes&=o,o=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<h;){var B=31-dn(h),j=1<<B;o[B]=0,g[B]=-1,a[B]=-1,h&=~j}}function Ca(a,o){var h=a.entangledLanes|=o;for(a=a.entanglements;h;){var g=31-dn(h),B=1<<g;B&o|a[g]&o&&(a[g]|=o),h&=~B}}var pr=0;function Ki(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ja,YA,fl,pl,JA,XA=!1,qn=[],as=null,Ts=null,ni=null,Xa=new Map,Yt=new Map,na=[],Ic="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ml(a,o){switch(a){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Xa.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yt.delete(o.pointerId)}}function Sn(a,o,h,g,B,j){return a===null||a.nativeEvent!==j?(a={blockedOn:o,domEventName:h,eventSystemFlags:g,nativeEvent:j,targetContainers:[B]},o!==null&&(o=Nl(o),o!==null&&YA(o)),a):(a.eventSystemFlags|=g,o=a.targetContainers,B!==null&&o.indexOf(B)===-1&&o.push(B),a)}function Ea(a,o,h,g,B){switch(o){case"focusin":return as=Sn(as,a,o,h,g,B),!0;case"dragenter":return Ts=Sn(Ts,a,o,h,g,B),!0;case"mouseover":return ni=Sn(ni,a,o,h,g,B),!0;case"pointerover":var j=B.pointerId;return Xa.set(j,Sn(Xa.get(j)||null,a,o,h,g,B)),!0;case"gotpointercapture":return j=B.pointerId,Yt.set(j,Sn(Yt.get(j)||null,a,o,h,g,B)),!0}return!1}function gl(a){var o=Ao(a.target);if(o!==null){var h=Rn(o);if(h!==null){if(o=h.tag,o===13){if(o=Fs(h),o!==null){a.blockedOn=o,JA(a.priority,function(){fl(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ia(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var h=eA(a.domEventName,a.eventSystemFlags,o[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var g=new h.constructor(h.type,h);We=g,h.target.dispatchEvent(g),We=null}else return o=Nl(h),o!==null&&YA(o),a.blockedOn=h,!1;o.shift()}return!0}function sa(a,o,h){Ia(a)&&h.delete(o)}function ZA(){XA=!1,as!==null&&Ia(as)&&(as=null),Ts!==null&&Ia(Ts)&&(Ts=null),ni!==null&&Ia(ni)&&(ni=null),Xa.forEach(sa),Yt.forEach(sa)}function Us(a,o){a.blockedOn===o&&(a.blockedOn=null,XA||(XA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ZA)))}function zi(a){function o(B){return Us(B,a)}if(0<qn.length){Us(qn[0],a);for(var h=1;h<qn.length;h++){var g=qn[h];g.blockedOn===a&&(g.blockedOn=null)}}for(as!==null&&Us(as,a),Ts!==null&&Us(Ts,a),ni!==null&&Us(ni,a),Xa.forEach(o),Yt.forEach(o),h=0;h<na.length;h++)g=na[h],g.blockedOn===a&&(g.blockedOn=null);for(;0<na.length&&(h=na[0],h.blockedOn===null);)gl(h),h.blockedOn===null&&na.shift()}var js=D.ReactCurrentBatchConfig,Za=!0;function zr(a,o,h,g){var B=pr,j=js.transition;js.transition=null;try{pr=1,eo(a,o,h,g)}finally{pr=B,js.transition=j}}function Fo(a,o,h,g){var B=pr,j=js.transition;js.transition=null;try{pr=4,eo(a,o,h,g)}finally{pr=B,js.transition=j}}function eo(a,o,h,g){if(Za){var B=eA(a,o,h,g);if(B===null)Uc(a,o,g,si,h),ml(a,g);else if(Ea(B,a,o,h,g))g.stopPropagation();else if(ml(a,g),o&4&&-1<Ic.indexOf(a)){for(;B!==null;){var j=Nl(B);if(j!==null&&Ja(j),j=eA(a,o,h,g),j===null&&Uc(a,o,g,si,h),j===B)break;B=j}B!==null&&g.stopPropagation()}else Uc(a,o,g,null,h)}}var si=null;function eA(a,o,h,g){if(si=null,a=Me(g),a=Ao(a),a!==null)if(o=Rn(a),o===null)a=null;else if(h=o.tag,h===13){if(a=Fs(o),a!==null)return a;a=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null);return si=a,null}function tA(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(So()){case Ka:return 1;case is:return 4;case Hs:case qA:return 16;case WA:return 536870912;default:return 16}default:return 16}}var Ls=null,ia=null,vs=null;function to(){if(vs)return vs;var a,o=ia,h=o.length,g,B="value"in Ls?Ls.value:Ls.textContent,j=B.length;for(a=0;a<h&&o[a]===B[a];a++);var te=h-a;for(g=1;g<=te&&o[h-g]===B[j-g];g++);return vs=B.slice(a,1<g?1-g:void 0)}function xA(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function ws(){return!0}function Gi(){return!1}function Wn(a){function o(h,g,B,j,te){this._reactName=h,this._targetInst=B,this.type=g,this.nativeEvent=j,this.target=te,this.currentTarget=null;for(var Ne in a)a.hasOwnProperty(Ne)&&(h=a[Ne],this[Ne]=h?h(j):j[Ne]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?ws:Gi,this.isPropagationStopped=Gi,this}return me(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),o}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bA=Wn(Qs),b=me({},Qs,{view:0,detail:0}),q=Wn(b),Ce,Ue,Ke,lt=me({},b,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bi,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ke&&(Ke&&a.type==="mousemove"?(Ce=a.screenX-Ke.screenX,Ue=a.screenY-Ke.screenY):Ue=Ce=0,Ke=a),Ce)},movementY:function(a){return"movementY"in a?a.movementY:Ue}}),gt=Wn(lt),Ut=me({},lt,{dataTransfer:0}),Mt=Wn(Ut),Zt=me({},b,{relatedTarget:0}),rr=Wn(Zt),wr=me({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),jr=Wn(wr),xn=me({},Qs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Vr=Wn(xn),kn=me({},Qs,{data:0}),hn=Wn(kn),Fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aa(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=xi[a])?!!o[a]:!1}function bi(){return aa}var m=me({},b,{key:function(a){if(a.key){var o=Fn[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=xA(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?bn[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bi,charCode:function(a){return a.type==="keypress"?xA(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?xA(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),T=Wn(m),M=me({},lt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ce=Wn(M),ze=me({},b,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bi}),et=Wn(ze),Nt=me({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Br=Wn(Nt),Bn=me({},lt,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),mr=Wn(Bn),kr=[9,13,27,32],Gr=c&&"CompositionEvent"in window,Ps=null;c&&"documentMode"in document&&(Ps=document.documentMode);var Ks=c&&"TextEvent"in window&&!Ps,xs=c&&(!Gr||Ps&&8<Ps&&11>=Ps),Aa=" ",yl=!1;function vl(a,o){switch(a){case"keyup":return kr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BA(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var oa=!1;function $i(a,o){switch(a){case"compositionend":return BA(o);case"keypress":return o.which!==32?null:(yl=!0,Aa);case"textInput":return a=o.data,a===Aa&&yl?null:a;default:return null}}function qi(a,o){if(oa)return a==="compositionend"||!Gr&&vl(a,o)?(a=to(),vs=ia=Ls=null,oa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return xs&&o.locale!=="ko"?null:o.data;default:return null}}var ro={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rA(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!ro[a.type]:o==="textarea"}function CA(a,o,h,g){_t(g),o=Bu(o,"onChange"),0<o.length&&(h=new bA("onChange","change",null,h,g),a.push({event:h,listeners:o}))}var EA=null,nA=null;function Mn(a){Fc(a,0)}function To(a){var o=Ho(a);if(tt(o))return a}function sA(a,o){if(a==="change")return o}var _a=!1;if(c){var Uo;if(c){var jo="oninput"in document;if(!jo){var wl=document.createElement("div");wl.setAttribute("oninput","return;"),jo=typeof wl.oninput=="function"}Uo=jo}else Uo=!1;_a=Uo&&(!document.documentMode||9<document.documentMode)}function xl(){EA&&(EA.detachEvent("onpropertychange",IA),nA=EA=null)}function IA(a){if(a.propertyName==="value"&&To(nA)){var o=[];CA(o,nA,a,Me(a)),Ot(Mn,o)}}function no(a,o,h){a==="focusin"?(xl(),EA=o,nA=h,EA.attachEvent("onpropertychange",IA)):a==="focusout"&&xl()}function so(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return To(nA)}function Lo(a,o){if(a==="click")return To(o)}function io(a,o){if(a==="input"||a==="change")return To(o)}function Qo(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Tn=typeof Object.is=="function"?Object.is:Qo;function Bi(a,o){if(Tn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var h=Object.keys(a),g=Object.keys(o);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var B=h[g];if(!u.call(o,B)||!Tn(a[B],o[B]))return!1}return!0}function Lr(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function $r(a,o){var h=Lr(a);a=0;for(var g;h;){if(h.nodeType===3){if(g=a+h.textContent.length,a<=o&&g>=o)return{node:h,offset:o-a};a=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Lr(h)}}function Un(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Un(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Yn(){for(var a=window,o=it();o instanceof a.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)a=o.contentWindow;else break;o=it(a.document)}return o}function Na(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}function _c(a){var o=Yn(),h=a.focusedElem,g=a.selectionRange;if(o!==h&&h&&h.ownerDocument&&Un(h.ownerDocument.documentElement,h)){if(g!==null&&Na(h)){if(o=g.start,a=g.end,a===void 0&&(a=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(a,h.value.length);else if(a=(o=h.ownerDocument||document)&&o.defaultView||window,a.getSelection){a=a.getSelection();var B=h.textContent.length,j=Math.min(g.start,B);g=g.end===void 0?j:Math.min(g.end,B),!a.extend&&j>g&&(B=g,g=j,j=B),B=$r(h,j);var te=$r(h,g);B&&te&&(a.rangeCount!==1||a.anchorNode!==B.node||a.anchorOffset!==B.offset||a.focusNode!==te.node||a.focusOffset!==te.offset)&&(o=o.createRange(),o.setStart(B.node,B.offset),a.removeAllRanges(),j>g?(a.addRange(o),a.extend(te.node,te.offset)):(o.setEnd(te.node,te.offset),a.addRange(o)))}}for(o=[],a=h;a=a.parentNode;)a.nodeType===1&&o.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)a=o[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var bl=c&&"documentMode"in document&&11>=document.documentMode,_A=null,vu=null,Bl=null,wu=!1;function Md(a,o,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;wu||_A==null||_A!==it(g)||(g=_A,"selectionStart"in g&&Na(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Bl&&Bi(Bl,g)||(Bl=g,g=Bu(vu,"onSelect"),0<g.length&&(o=new bA("onSelect","select",null,o,h),a.push({event:o,listeners:g}),o.target=_A)))}function Nc(a,o){var h={};return h[a.toLowerCase()]=o.toLowerCase(),h["Webkit"+a]="webkit"+o,h["Moz"+a]="moz"+o,h}var Po={animationend:Nc("Animation","AnimationEnd"),animationiteration:Nc("Animation","AnimationIteration"),animationstart:Nc("Animation","AnimationStart"),transitionend:Nc("Transition","TransitionEnd")},Do={},Hd={};c&&(Hd=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Sc(a){if(Do[a])return Do[a];if(!Po[a])return a;var o=Po[a],h;for(h in o)if(o.hasOwnProperty(h)&&h in Hd)return Do[a]=o[h];return a}var Vd=Sc("animationend"),Kd=Sc("animationiteration"),zd=Sc("animationstart"),Gd=Sc("transitionend"),$d=new Map,qd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function iA(a,o){$d.set(a,o),i(o,[a])}for(var Cl=0;Cl<qd.length;Cl++){var ii=qd[Cl],la=ii.toLowerCase(),xu=ii[0].toUpperCase()+ii.slice(1);iA(la,"on"+xu)}iA(Vd,"onAnimationEnd"),iA(Kd,"onAnimationIteration"),iA(zd,"onAnimationStart"),iA("dblclick","onDoubleClick"),iA("focusin","onFocus"),iA("focusout","onBlur"),iA(Gd,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_f=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function kc(a,o,h){var g=a.type||"unknown-event";a.currentTarget=h,yi(g,o,void 0,a),a.currentTarget=null}function Fc(a,o){o=(o&4)!==0;for(var h=0;h<a.length;h++){var g=a[h],B=g.event;g=g.listeners;e:{var j=void 0;if(o)for(var te=g.length-1;0<=te;te--){var Ne=g[te],Oe=Ne.instance,nt=Ne.currentTarget;if(Ne=Ne.listener,Oe!==j&&B.isPropagationStopped())break e;kc(B,Ne,nt),j=Oe}else for(te=0;te<g.length;te++){if(Ne=g[te],Oe=Ne.instance,nt=Ne.currentTarget,Ne=Ne.listener,Oe!==j&&B.isPropagationStopped())break e;kc(B,Ne,nt),j=Oe}}}if(Hr)throw a=Hi,Hr=!1,Hi=null,a}function en(a,o){var h=o[Ei];h===void 0&&(h=o[Ei]=new Set);var g=a+"__bubble";h.has(g)||(Tc(o,a,2,!1),h.add(g))}function bu(a,o,h){var g=0;o&&(g|=4),Tc(h,a,g,o)}var El="_reactListening"+Math.random().toString(36).slice(2);function Ro(a){if(!a[El]){a[El]=!0,n.forEach(function(h){h!=="selectionchange"&&(_f.has(h)||bu(h,!1,a),bu(h,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[El]||(o[El]=!0,bu("selectionchange",!1,o))}}function Tc(a,o,h,g){switch(tA(o)){case 1:var B=zr;break;case 4:B=Fo;break;default:B=eo}h=B.bind(null,o,h,a),B=void 0,!_n||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(B=!0),g?B!==void 0?a.addEventListener(o,h,{capture:!0,passive:B}):a.addEventListener(o,h,!0):B!==void 0?a.addEventListener(o,h,{passive:B}):a.addEventListener(o,h,!1)}function Uc(a,o,h,g,B){var j=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var te=g.tag;if(te===3||te===4){var Ne=g.stateNode.containerInfo;if(Ne===B||Ne.nodeType===8&&Ne.parentNode===B)break;if(te===4)for(te=g.return;te!==null;){var Oe=te.tag;if((Oe===3||Oe===4)&&(Oe=te.stateNode.containerInfo,Oe===B||Oe.nodeType===8&&Oe.parentNode===B))return;te=te.return}for(;Ne!==null;){if(te=Ao(Ne),te===null)return;if(Oe=te.tag,Oe===5||Oe===6){g=j=te;continue e}Ne=Ne.parentNode}}g=g.return}Ot(function(){var nt=j,xt=Me(h),Et=[];e:{var wt=$d.get(a);if(wt!==void 0){var Tt=bA,Ht=a;switch(a){case"keypress":if(xA(h)===0)break e;case"keydown":case"keyup":Tt=T;break;case"focusin":Ht="focus",Tt=rr;break;case"focusout":Ht="blur",Tt=rr;break;case"beforeblur":case"afterblur":Tt=rr;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Tt=gt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Tt=Mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Tt=et;break;case Vd:case Kd:case zd:Tt=jr;break;case Gd:Tt=Br;break;case"scroll":Tt=q;break;case"wheel":Tt=mr;break;case"copy":case"cut":case"paste":Tt=Vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Tt=ce}var Kt=(o&4)!==0,ls=!Kt&&a==="scroll",Je=Kt?wt!==null?wt+"Capture":null:wt;Kt=[];for(var Ve=nt,Ze;Ve!==null;){Ze=Ve;var St=Ze.stateNode;if(Ze.tag===5&&St!==null&&(Ze=St,Je!==null&&(St=yr(Ve,Je),St!=null&&Kt.push(jc(Ve,St,Ze)))),ls)break;Ve=Ve.return}0<Kt.length&&(wt=new Tt(wt,Ht,null,h,xt),Et.push({event:wt,listeners:Kt}))}}if((o&7)===0){e:{if(wt=a==="mouseover"||a==="pointerover",Tt=a==="mouseout"||a==="pointerout",wt&&h!==We&&(Ht=h.relatedTarget||h.fromElement)&&(Ao(Ht)||Ht[zs]))break e;if((Tt||wt)&&(wt=xt.window===xt?xt:(wt=xt.ownerDocument)?wt.defaultView||wt.parentWindow:window,Tt?(Ht=h.relatedTarget||h.toElement,Tt=nt,Ht=Ht?Ao(Ht):null,Ht!==null&&(ls=Rn(Ht),Ht!==ls||Ht.tag!==5&&Ht.tag!==6)&&(Ht=null)):(Tt=null,Ht=nt),Tt!==Ht)){if(Kt=gt,St="onMouseLeave",Je="onMouseEnter",Ve="mouse",(a==="pointerout"||a==="pointerover")&&(Kt=ce,St="onPointerLeave",Je="onPointerEnter",Ve="pointer"),ls=Tt==null?wt:Ho(Tt),Ze=Ht==null?wt:Ho(Ht),wt=new Kt(St,Ve+"leave",Tt,h,xt),wt.target=ls,wt.relatedTarget=Ze,St=null,Ao(xt)===nt&&(Kt=new Kt(Je,Ve+"enter",Ht,h,xt),Kt.target=Ze,Kt.relatedTarget=ls,St=Kt),ls=St,Tt&&Ht)t:{for(Kt=Tt,Je=Ht,Ve=0,Ze=Kt;Ze;Ze=Oo(Ze))Ve++;for(Ze=0,St=Je;St;St=Oo(St))Ze++;for(;0<Ve-Ze;)Kt=Oo(Kt),Ve--;for(;0<Ze-Ve;)Je=Oo(Je),Ze--;for(;Ve--;){if(Kt===Je||Je!==null&&Kt===Je.alternate)break t;Kt=Oo(Kt),Je=Oo(Je)}Kt=null}else Kt=null;Tt!==null&&Nf(Et,wt,Tt,Kt,!1),Ht!==null&&ls!==null&&Nf(Et,ls,Ht,Kt,!0)}}e:{if(wt=nt?Ho(nt):window,Tt=wt.nodeName&&wt.nodeName.toLowerCase(),Tt==="select"||Tt==="input"&&wt.type==="file")var $t=sA;else if(rA(wt))if(_a)$t=io;else{$t=so;var er=no}else(Tt=wt.nodeName)&&Tt.toLowerCase()==="input"&&(wt.type==="checkbox"||wt.type==="radio")&&($t=Lo);if($t&&($t=$t(a,nt))){CA(Et,$t,h,xt);break e}er&&er(a,wt,nt),a==="focusout"&&(er=wt._wrapperState)&&er.controlled&&wt.type==="number"&&he(wt,"number",wt.value)}switch(er=nt?Ho(nt):window,a){case"focusin":(rA(er)||er.contentEditable==="true")&&(_A=er,vu=nt,Bl=null);break;case"focusout":Bl=vu=_A=null;break;case"mousedown":wu=!0;break;case"contextmenu":case"mouseup":case"dragend":wu=!1,Md(Et,h,xt);break;case"selectionchange":if(bl)break;case"keydown":case"keyup":Md(Et,h,xt)}var tr;if(Gr)e:{switch(a){case"compositionstart":var ir="onCompositionStart";break e;case"compositionend":ir="onCompositionEnd";break e;case"compositionupdate":ir="onCompositionUpdate";break e}ir=void 0}else oa?vl(a,h)&&(ir="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(ir="onCompositionStart");ir&&(xs&&h.locale!=="ko"&&(oa||ir!=="onCompositionStart"?ir==="onCompositionEnd"&&oa&&(tr=to()):(Ls=xt,ia="value"in Ls?Ls.value:Ls.textContent,oa=!0)),er=Bu(nt,ir),0<er.length&&(ir=new hn(ir,a,null,h,xt),Et.push({event:ir,listeners:er}),tr?ir.data=tr:(tr=BA(h),tr!==null&&(ir.data=tr)))),(tr=Ks?$i(a,h):qi(a,h))&&(nt=Bu(nt,"onBeforeInput"),0<nt.length&&(xt=new hn("onBeforeInput","beforeinput",null,h,xt),Et.push({event:xt,listeners:nt}),xt.data=tr))}Fc(Et,o)})}function jc(a,o,h){return{instance:a,listener:o,currentTarget:h}}function Bu(a,o){for(var h=o+"Capture",g=[];a!==null;){var B=a,j=B.stateNode;B.tag===5&&j!==null&&(B=j,j=yr(a,h),j!=null&&g.unshift(jc(a,j,B)),j=yr(a,o),j!=null&&g.push(jc(a,j,B))),a=a.return}return g}function Oo(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Nf(a,o,h,g,B){for(var j=o._reactName,te=[];h!==null&&h!==g;){var Ne=h,Oe=Ne.alternate,nt=Ne.stateNode;if(Oe!==null&&Oe===g)break;Ne.tag===5&&nt!==null&&(Ne=nt,B?(Oe=yr(h,j),Oe!=null&&te.unshift(jc(h,Oe,Ne))):B||(Oe=yr(h,j),Oe!=null&&te.push(jc(h,Oe,Ne)))),h=h.return}te.length!==0&&a.push({event:o,listeners:te})}var Qg=/\r\n?/g,Pg=/\u0000|\uFFFD/g;function Sf(a){return(typeof a=="string"?a:""+a).replace(Qg,`
`).replace(Pg,"")}function Cu(a,o,h){if(o=Sf(o),Sf(a)!==o&&h)throw Error(t(425))}function Il(){}var Lc=null,Mo=null;function Wd(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Yd=typeof setTimeout=="function"?setTimeout:void 0,kf=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,Dg=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(a){return Ff.resolve(null).then(a).catch(Rg)}:Yd;function Rg(a){setTimeout(function(){throw a})}function Jd(a,o){var h=o,g=0;do{var B=h.nextSibling;if(a.removeChild(h),B&&B.nodeType===8)if(h=B.data,h==="/$"){if(g===0){a.removeChild(B),zi(o);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=B}while(h);zi(o)}function ai(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return a}function ca(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return a;o--}else h==="/$"&&o++}a=a.previousSibling}return null}var Ci=Math.random().toString(36).slice(2),aA="__reactFiber$"+Ci,_l="__reactProps$"+Ci,zs="__reactContainer$"+Ci,Ei="__reactEvents$"+Ci,Og="__reactListeners$"+Ci,Mg="__reactHandles$"+Ci;function Ao(a){var o=a[aA];if(o)return o;for(var h=a.parentNode;h;){if(o=h[zs]||h[aA]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(a=ca(a);a!==null;){if(h=a[aA])return h;a=ca(a)}return o}a=h,h=a.parentNode}return null}function Nl(a){return a=a[aA]||a[zs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ho(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function Qc(a){return a[_l]||null}var Xd=[],NA=-1;function Sa(a){return{current:a}}function Kr(a){0>NA||(a.current=Xd[NA],Xd[NA]=null,NA--)}function qr(a,o){NA++,Xd[NA]=a.current,a.current=o}var oo={},Ds=Sa(oo),Ii=Sa(!1),Vo=oo;function Sl(a,o){var h=a.type.contextTypes;if(!h)return oo;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===o)return g.__reactInternalMemoizedMaskedChildContext;var B={},j;for(j in h)B[j]=o[j];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=o,a.__reactInternalMemoizedMaskedChildContext=B),B}function _i(a){return a=a.childContextTypes,a!=null}function Eu(){Kr(Ii),Kr(Ds)}function Tf(a,o,h){if(Ds.current!==oo)throw Error(t(168));qr(Ds,o),qr(Ii,h)}function Zd(a,o,h){var g=a.stateNode;if(o=o.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var B in g)if(!(B in o))throw Error(t(108,ye(a)||"Unknown",B));return me({},h,g)}function Ko(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||oo,Vo=Ds.current,qr(Ds,a),qr(Ii,Ii.current),!0}function Uf(a,o,h){var g=a.stateNode;if(!g)throw Error(t(169));h?(a=Zd(a,o,Vo),g.__reactInternalMemoizedMergedChildContext=a,Kr(Ii),Kr(Ds),qr(Ds,a)):Kr(Ii),qr(Ii,h)}var SA=null,Pc=!1,p=!1;function w(a){SA===null?SA=[a]:SA.push(a)}function k(a){Pc=!0,w(a)}function R(){if(!p&&SA!==null){p=!0;var a=0,o=pr;try{var h=SA;for(pr=1;a<h.length;a++){var g=h[a];do g=g(!0);while(g!==null)}SA=null,Pc=!1}catch(B){throw SA!==null&&(SA=SA.slice(a+1)),Ba(Ka,R),B}finally{pr=o,p=!1}}return null}var W=[],re=0,ie=null,Ae=0,de=[],ve=0,Re=null,qe=1,xe="";function He(a,o){W[re++]=Ae,W[re++]=ie,ie=a,Ae=o}function $e(a,o,h){de[ve++]=qe,de[ve++]=xe,de[ve++]=Re,Re=a;var g=qe;a=xe;var B=32-dn(g)-1;g&=~(1<<B),h+=1;var j=32-dn(o)+B;if(30<j){var te=B-B%5;j=(g&(1<<te)-1).toString(32),g>>=te,B-=te,qe=1<<32-dn(o)+B|h<<B|g,xe=j+a}else qe=1<<j|h<<B|g,xe=a}function ot(a){a.return!==null&&(He(a,1),$e(a,1,0))}function Xe(a){for(;a===ie;)ie=W[--re],W[re]=null,Ae=W[--re],W[re]=null;for(;a===Re;)Re=de[--ve],de[ve]=null,xe=de[--ve],de[ve]=null,qe=de[--ve],de[ve]=null}var st=null,at=null,ut=!1,ht=null;function Gt(a,o){var h=uA(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=a,o=a.deletions,o===null?(a.deletions=[h],a.flags|=16):o.push(h)}function Lt(a,o){switch(a.tag){case 5:var h=a.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(a.stateNode=o,st=a,at=ai(o.firstChild),!0):!1;case 6:return o=a.pendingProps===""||o.nodeType!==3?null:o,o!==null?(a.stateNode=o,st=a,at=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=Re!==null?{id:qe,overflow:xe}:null,a.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=uA(18,null,null,0),h.stateNode=o,h.return=a,a.child=h,st=a,at=null,!0):!1;default:return!1}}function cr(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Rt(a){if(ut){var o=at;if(o){var h=o;if(!Lt(a,o)){if(cr(a))throw Error(t(418));o=ai(h.nextSibling);var g=st;o&&Lt(a,o)?Gt(g,h):(a.flags=a.flags&-4097|2,ut=!1,st=a)}}else{if(cr(a))throw Error(t(418));a.flags=a.flags&-4097|2,ut=!1,st=a}}}function xr(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;st=a}function jn(a){if(a!==st)return!1;if(!ut)return xr(a),ut=!0,!1;var o;if((o=a.tag!==3)&&!(o=a.tag!==5)&&(o=a.type,o=o!=="head"&&o!=="body"&&!Wd(a.type,a.memoizedProps)),o&&(o=at)){if(cr(a))throw ur(),Error(t(418));for(;o;)Gt(a,o),o=ai(o.nextSibling)}if(xr(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(o===0){at=ai(a.nextSibling);break e}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}a=a.nextSibling}at=null}}else at=st?ai(a.stateNode.nextSibling):null;return!0}function ur(){for(var a=at;a;)a=ai(a.nextSibling)}function Qt(){at=st=null,ut=!1}function kt(a){ht===null?ht=[a]:ht.push(a)}var Hn=D.ReactCurrentBatchConfig;function nr(a,o,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,a));var B=g,j=""+a;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===j?o.ref:(o=function(te){var Ne=B.refs;te===null?delete Ne[j]:Ne[j]=te},o._stringRef=j,o)}if(typeof a!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,a))}return a}function gr(a,o){throw a=Object.prototype.toString.call(o),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a))}function on(a){var o=a._init;return o(a._payload)}function bs(a){function o(Je,Ve){if(a){var Ze=Je.deletions;Ze===null?(Je.deletions=[Ve],Je.flags|=16):Ze.push(Ve)}}function h(Je,Ve){if(!a)return null;for(;Ve!==null;)o(Je,Ve),Ve=Ve.sibling;return null}function g(Je,Ve){for(Je=new Map;Ve!==null;)Ve.key!==null?Je.set(Ve.key,Ve):Je.set(Ve.index,Ve),Ve=Ve.sibling;return Je}function B(Je,Ve){return Je=Rl(Je,Ve),Je.index=0,Je.sibling=null,Je}function j(Je,Ve,Ze){return Je.index=Ze,a?(Ze=Je.alternate,Ze!==null?(Ze=Ze.index,Ze<Ve?(Je.flags|=2,Ve):Ze):(Je.flags|=2,Ve)):(Je.flags|=1048576,Ve)}function te(Je){return a&&Je.alternate===null&&(Je.flags|=2),Je}function Ne(Je,Ve,Ze,St){return Ve===null||Ve.tag!==6?(Ve=m0(Ze,Je.mode,St),Ve.return=Je,Ve):(Ve=B(Ve,Ze),Ve.return=Je,Ve)}function Oe(Je,Ve,Ze,St){var $t=Ze.type;return $t===O?xt(Je,Ve,Ze.props.children,St,Ze.key):Ve!==null&&(Ve.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===ue&&on($t)===Ve.type)?(St=B(Ve,Ze.props),St.ref=nr(Je,Ve,Ze),St.return=Je,St):(St=Zf(Ze.type,Ze.key,Ze.props,null,Je.mode,St),St.ref=nr(Je,Ve,Ze),St.return=Je,St)}function nt(Je,Ve,Ze,St){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==Ze.containerInfo||Ve.stateNode.implementation!==Ze.implementation?(Ve=g0(Ze,Je.mode,St),Ve.return=Je,Ve):(Ve=B(Ve,Ze.children||[]),Ve.return=Je,Ve)}function xt(Je,Ve,Ze,St,$t){return Ve===null||Ve.tag!==7?(Ve=zc(Ze,Je.mode,St,$t),Ve.return=Je,Ve):(Ve=B(Ve,Ze),Ve.return=Je,Ve)}function Et(Je,Ve,Ze){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Ve=m0(""+Ve,Je.mode,Ze),Ve.return=Je,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case J:return Ze=Zf(Ve.type,Ve.key,Ve.props,null,Je.mode,Ze),Ze.ref=nr(Je,null,Ve),Ze.return=Je,Ze;case Z:return Ve=g0(Ve,Je.mode,Ze),Ve.return=Je,Ve;case ue:var St=Ve._init;return Et(Je,St(Ve._payload),Ze)}if(Se(Ve)||$(Ve))return Ve=zc(Ve,Je.mode,Ze,null),Ve.return=Je,Ve;gr(Je,Ve)}return null}function wt(Je,Ve,Ze,St){var $t=Ve!==null?Ve.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number")return $t!==null?null:Ne(Je,Ve,""+Ze,St);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case J:return Ze.key===$t?Oe(Je,Ve,Ze,St):null;case Z:return Ze.key===$t?nt(Je,Ve,Ze,St):null;case ue:return $t=Ze._init,wt(Je,Ve,$t(Ze._payload),St)}if(Se(Ze)||$(Ze))return $t!==null?null:xt(Je,Ve,Ze,St,null);gr(Je,Ze)}return null}function Tt(Je,Ve,Ze,St,$t){if(typeof St=="string"&&St!==""||typeof St=="number")return Je=Je.get(Ze)||null,Ne(Ve,Je,""+St,$t);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case J:return Je=Je.get(St.key===null?Ze:St.key)||null,Oe(Ve,Je,St,$t);case Z:return Je=Je.get(St.key===null?Ze:St.key)||null,nt(Ve,Je,St,$t);case ue:var er=St._init;return Tt(Je,Ve,Ze,er(St._payload),$t)}if(Se(St)||$(St))return Je=Je.get(Ze)||null,xt(Ve,Je,St,$t,null);gr(Ve,St)}return null}function Ht(Je,Ve,Ze,St){for(var $t=null,er=null,tr=Ve,ir=Ve=0,Ys=null;tr!==null&&ir<Ze.length;ir++){tr.index>ir?(Ys=tr,tr=null):Ys=tr.sibling;var Or=wt(Je,tr,Ze[ir],St);if(Or===null){tr===null&&(tr=Ys);break}a&&tr&&Or.alternate===null&&o(Je,tr),Ve=j(Or,Ve,ir),er===null?$t=Or:er.sibling=Or,er=Or,tr=Ys}if(ir===Ze.length)return h(Je,tr),ut&&He(Je,ir),$t;if(tr===null){for(;ir<Ze.length;ir++)tr=Et(Je,Ze[ir],St),tr!==null&&(Ve=j(tr,Ve,ir),er===null?$t=tr:er.sibling=tr,er=tr);return ut&&He(Je,ir),$t}for(tr=g(Je,tr);ir<Ze.length;ir++)Ys=Tt(tr,Je,ir,Ze[ir],St),Ys!==null&&(a&&Ys.alternate!==null&&tr.delete(Ys.key===null?ir:Ys.key),Ve=j(Ys,Ve,ir),er===null?$t=Ys:er.sibling=Ys,er=Ys);return a&&tr.forEach(function(Ol){return o(Je,Ol)}),ut&&He(Je,ir),$t}function Kt(Je,Ve,Ze,St){var $t=$(Ze);if(typeof $t!="function")throw Error(t(150));if(Ze=$t.call(Ze),Ze==null)throw Error(t(151));for(var er=$t=null,tr=Ve,ir=Ve=0,Ys=null,Or=Ze.next();tr!==null&&!Or.done;ir++,Or=Ze.next()){tr.index>ir?(Ys=tr,tr=null):Ys=tr.sibling;var Ol=wt(Je,tr,Or.value,St);if(Ol===null){tr===null&&(tr=Ys);break}a&&tr&&Ol.alternate===null&&o(Je,tr),Ve=j(Ol,Ve,ir),er===null?$t=Ol:er.sibling=Ol,er=Ol,tr=Ys}if(Or.done)return h(Je,tr),ut&&He(Je,ir),$t;if(tr===null){for(;!Or.done;ir++,Or=Ze.next())Or=Et(Je,Or.value,St),Or!==null&&(Ve=j(Or,Ve,ir),er===null?$t=Or:er.sibling=Or,er=Or);return ut&&He(Je,ir),$t}for(tr=g(Je,tr);!Or.done;ir++,Or=Ze.next())Or=Tt(tr,Je,ir,Or.value,St),Or!==null&&(a&&Or.alternate!==null&&tr.delete(Or.key===null?ir:Or.key),Ve=j(Or,Ve,ir),er===null?$t=Or:er.sibling=Or,er=Or);return a&&tr.forEach(function(b_){return o(Je,b_)}),ut&&He(Je,ir),$t}function ls(Je,Ve,Ze,St){if(typeof Ze=="object"&&Ze!==null&&Ze.type===O&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case J:e:{for(var $t=Ze.key,er=Ve;er!==null;){if(er.key===$t){if($t=Ze.type,$t===O){if(er.tag===7){h(Je,er.sibling),Ve=B(er,Ze.props.children),Ve.return=Je,Je=Ve;break e}}else if(er.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===ue&&on($t)===er.type){h(Je,er.sibling),Ve=B(er,Ze.props),Ve.ref=nr(Je,er,Ze),Ve.return=Je,Je=Ve;break e}h(Je,er);break}else o(Je,er);er=er.sibling}Ze.type===O?(Ve=zc(Ze.props.children,Je.mode,St,Ze.key),Ve.return=Je,Je=Ve):(St=Zf(Ze.type,Ze.key,Ze.props,null,Je.mode,St),St.ref=nr(Je,Ve,Ze),St.return=Je,Je=St)}return te(Je);case Z:e:{for(er=Ze.key;Ve!==null;){if(Ve.key===er)if(Ve.tag===4&&Ve.stateNode.containerInfo===Ze.containerInfo&&Ve.stateNode.implementation===Ze.implementation){h(Je,Ve.sibling),Ve=B(Ve,Ze.children||[]),Ve.return=Je,Je=Ve;break e}else{h(Je,Ve);break}else o(Je,Ve);Ve=Ve.sibling}Ve=g0(Ze,Je.mode,St),Ve.return=Je,Je=Ve}return te(Je);case ue:return er=Ze._init,ls(Je,Ve,er(Ze._payload),St)}if(Se(Ze))return Ht(Je,Ve,Ze,St);if($(Ze))return Kt(Je,Ve,Ze,St);gr(Je,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"?(Ze=""+Ze,Ve!==null&&Ve.tag===6?(h(Je,Ve.sibling),Ve=B(Ve,Ze),Ve.return=Je,Je=Ve):(h(Je,Ve),Ve=m0(Ze,Je.mode,St),Ve.return=Je,Je=Ve),te(Je)):h(Je,Ve)}return ls}var Jn=bs(!0),Cn=bs(!1),As=Sa(null),Bs=null,fn=null,Cr=null;function Qr(){Cr=fn=Bs=null}function pn(a){var o=As.current;Kr(As),a._currentValue=o}function Pr(a,o,h){for(;a!==null;){var g=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),a===h)break;a=a.return}}function Ln(a,o){Bs=a,Cr=fn=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&o)!==0&&(da=!0),a.firstContext=null)}function Qn(a){var o=a._currentValue;if(Cr!==a)if(a={context:a,memoizedValue:o,next:null},fn===null){if(Bs===null)throw Error(t(308));fn=a,Bs.dependencies={lanes:0,firstContext:a}}else fn=fn.next=a;return o}var tn=null;function Gs(a){tn===null?tn=[a]:tn.push(a)}function Wr(a,o,h,g){var B=o.interleaved;return B===null?(h.next=h,Gs(o)):(h.next=B.next,B.next=h),o.interleaved=h,rn(a,g)}function rn(a,o){a.lanes|=o;var h=a.alternate;for(h!==null&&(h.lanes|=o),h=a,a=a.return;a!==null;)a.childLanes|=o,h=a.alternate,h!==null&&(h.childLanes|=o),h=a,a=a.return;return h.tag===3?h.stateNode:null}var Xn=!1;function Rs(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ni(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Vn(a,o){return{eventTime:a,lane:o,tag:0,payload:null,callback:null,next:null}}function Kn(a,o,h){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Dr&2)!==0){var B=g.pending;return B===null?o.next=o:(o.next=B.next,B.next=o),g.pending=o,rn(a,h)}return B=g.interleaved,B===null?(o.next=o,Gs(g)):(o.next=B.next,B.next=o),g.interleaved=o,rn(a,h)}function $s(a,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var g=o.lanes;g&=a.pendingLanes,h|=g,o.lanes=h,Ca(a,h)}}function nn(a,o){var h=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var B=null,j=null;if(h=h.firstBaseUpdate,h!==null){do{var te={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};j===null?B=j=te:j=j.next=te,h=h.next}while(h!==null);j===null?B=j=o:j=j.next=o}else B=j=o;h={baseState:g.baseState,firstBaseUpdate:B,lastBaseUpdate:j,shared:g.shared,effects:g.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=o:a.next=o,h.lastBaseUpdate=o}function qs(a,o,h,g){var B=a.updateQueue;Xn=!1;var j=B.firstBaseUpdate,te=B.lastBaseUpdate,Ne=B.shared.pending;if(Ne!==null){B.shared.pending=null;var Oe=Ne,nt=Oe.next;Oe.next=null,te===null?j=nt:te.next=nt,te=Oe;var xt=a.alternate;xt!==null&&(xt=xt.updateQueue,Ne=xt.lastBaseUpdate,Ne!==te&&(Ne===null?xt.firstBaseUpdate=nt:Ne.next=nt,xt.lastBaseUpdate=Oe))}if(j!==null){var Et=B.baseState;te=0,xt=nt=Oe=null,Ne=j;do{var wt=Ne.lane,Tt=Ne.eventTime;if((g&wt)===wt){xt!==null&&(xt=xt.next={eventTime:Tt,lane:0,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null});e:{var Ht=a,Kt=Ne;switch(wt=o,Tt=h,Kt.tag){case 1:if(Ht=Kt.payload,typeof Ht=="function"){Et=Ht.call(Tt,Et,wt);break e}Et=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Kt.payload,wt=typeof Ht=="function"?Ht.call(Tt,Et,wt):Ht,wt==null)break e;Et=me({},Et,wt);break e;case 2:Xn=!0}}Ne.callback!==null&&Ne.lane!==0&&(a.flags|=64,wt=B.effects,wt===null?B.effects=[Ne]:wt.push(Ne))}else Tt={eventTime:Tt,lane:wt,tag:Ne.tag,payload:Ne.payload,callback:Ne.callback,next:null},xt===null?(nt=xt=Tt,Oe=Et):xt=xt.next=Tt,te|=wt;if(Ne=Ne.next,Ne===null){if(Ne=B.shared.pending,Ne===null)break;wt=Ne,Ne=wt.next,wt.next=null,B.lastBaseUpdate=wt,B.shared.pending=null}}while(!0);if(xt===null&&(Oe=Et),B.baseState=Oe,B.firstBaseUpdate=nt,B.lastBaseUpdate=xt,o=B.shared.interleaved,o!==null){B=o;do te|=B.lane,B=B.next;while(B!==o)}else j===null&&(B.shared.lanes=0);Mc|=te,a.lanes=te,a.memoizedState=Et}}function ua(a,o,h){if(a=o.effects,o.effects=null,a!==null)for(o=0;o<a.length;o++){var g=a[o],B=g.callback;if(B!==null){if(g.callback=null,g=h,typeof B!="function")throw Error(t(191,B));B.call(g)}}}var ka={},Cs=Sa(ka),zn=Sa(ka),lo=Sa(ka);function kA(a){if(a===ka)throw Error(t(174));return a}function kl(a,o){switch(qr(lo,o),qr(zn,a),qr(Cs,ka),a=o.nodeType,a){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Te(null,"");break;default:a=a===8?o.parentNode:o,o=a.namespaceURI||null,a=a.tagName,o=Te(o,a)}Kr(Cs),qr(Cs,o)}function AA(){Kr(Cs),Kr(zn),Kr(lo)}function jf(a){kA(lo.current);var o=kA(Cs.current),h=Te(o,a.type);o!==h&&(qr(zn,a),qr(Cs,h))}function eh(a){zn.current===a&&(Kr(Cs),Kr(zn))}var cn=Sa(0);function Fa(a){for(var o=a;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var th=[];function rh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var Iu=D.ReactCurrentDispatcher,_u=D.ReactCurrentBatchConfig,oA=0,mn=null,Zn=null,Gn=null,Fl=!1,FA=!1,Tl=0,Hg=0;function os(){throw Error(t(321))}function Nu(a,o){if(o===null)return!1;for(var h=0;h<o.length&&h<a.length;h++)if(!Tn(a[h],o[h]))return!1;return!0}function Dc(a,o,h,g,B,j){if(oA=j,mn=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Iu.current=a===null||a.memoizedState===null?q4:W4,a=h(g,B),FA){j=0;do{if(FA=!1,Tl=0,25<=j)throw Error(t(301));j+=1,Gn=Zn=null,o.updateQueue=null,Iu.current=Y4,a=h(g,B)}while(FA)}if(Iu.current=Rf,o=Zn!==null&&Zn.next!==null,oA=0,Gn=Zn=mn=null,Fl=!1,o)throw Error(t(300));return a}function lA(){var a=Tl!==0;return Tl=0,a}function Ta(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?mn.memoizedState=Gn=a:Gn=Gn.next=a,Gn}function Wi(){if(Zn===null){var a=mn.alternate;a=a!==null?a.memoizedState:null}else a=Zn.next;var o=Gn===null?mn.memoizedState:Gn.next;if(o!==null)Gn=o,Zn=a;else{if(a===null)throw Error(t(310));Zn=a,a={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},Gn===null?mn.memoizedState=Gn=a:Gn=Gn.next=a}return Gn}function Rc(a,o){return typeof o=="function"?o(a):o}function Su(a){var o=Wi(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var g=Zn,B=g.baseQueue,j=h.pending;if(j!==null){if(B!==null){var te=B.next;B.next=j.next,j.next=te}g.baseQueue=B=j,h.pending=null}if(B!==null){j=B.next,g=g.baseState;var Ne=te=null,Oe=null,nt=j;do{var xt=nt.lane;if((oA&xt)===xt)Oe!==null&&(Oe=Oe.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),g=nt.hasEagerState?nt.eagerState:a(g,nt.action);else{var Et={lane:xt,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};Oe===null?(Ne=Oe=Et,te=g):Oe=Oe.next=Et,mn.lanes|=xt,Mc|=xt}nt=nt.next}while(nt!==null&&nt!==j);Oe===null?te=g:Oe.next=Ne,Tn(g,o.memoizedState)||(da=!0),o.memoizedState=g,o.baseState=te,o.baseQueue=Oe,h.lastRenderedState=g}if(a=h.interleaved,a!==null){B=a;do j=B.lane,mn.lanes|=j,Mc|=j,B=B.next;while(B!==a)}else B===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function co(a){var o=Wi(),h=o.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var g=h.dispatch,B=h.pending,j=o.memoizedState;if(B!==null){h.pending=null;var te=B=B.next;do j=a(j,te.action),te=te.next;while(te!==B);Tn(j,o.memoizedState)||(da=!0),o.memoizedState=j,o.baseQueue===null&&(o.baseState=j),h.lastRenderedState=j}return[j,g]}function Lf(){}function nh(a,o){var h=mn,g=Wi(),B=o(),j=!Tn(g.memoizedState,B);if(j&&(g.memoizedState=B,da=!0),g=g.queue,Tu(Pf.bind(null,h,g,a),[a]),g.getSnapshot!==o||j||Gn!==null&&Gn.memoizedState.tag&1){if(h.flags|=2048,Yi(9,sh.bind(null,h,g,B,o),void 0,null),Ws===null)throw Error(t(349));(oA&30)!==0||Qf(h,o,B)}return B}function Qf(a,o,h){a.flags|=16384,a={getSnapshot:o,value:h},o=mn.updateQueue,o===null?(o={lastEffect:null,stores:null},mn.updateQueue=o,o.stores=[a]):(h=o.stores,h===null?o.stores=[a]:h.push(a))}function sh(a,o,h,g){o.value=h,o.getSnapshot=g,Ul(o)&&ku(a)}function Pf(a,o,h){return h(function(){Ul(o)&&ku(a)})}function Ul(a){var o=a.getSnapshot;a=a.value;try{var h=o();return!Tn(a,h)}catch{return!0}}function ku(a){var o=rn(a,1);o!==null&&QA(o,a,1,-1)}function Oc(a){var o=Ta();return typeof a=="function"&&(a=a()),o.memoizedState=o.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rc,lastRenderedState:a},o.queue=a,a=a.dispatch=$4.bind(null,mn,a),[o.memoizedState,a]}function Yi(a,o,h,g){return a={tag:a,create:o,destroy:h,deps:g,next:null},o=mn.updateQueue,o===null?(o={lastEffect:null,stores:null},mn.updateQueue=o,o.lastEffect=a.next=a):(h=o.lastEffect,h===null?o.lastEffect=a.next=a:(g=h.next,h.next=a,a.next=g,o.lastEffect=a)),a}function TA(){return Wi().memoizedState}function Ua(a,o,h,g){var B=Ta();mn.flags|=a,B.memoizedState=Yi(1|o,h,void 0,g===void 0?null:g)}function zo(a,o,h,g){var B=Wi();g=g===void 0?null:g;var j=void 0;if(Zn!==null){var te=Zn.memoizedState;if(j=te.destroy,g!==null&&Nu(g,te.deps)){B.memoizedState=Yi(o,h,j,g);return}}mn.flags|=a,B.memoizedState=Yi(1|o,h,j,g)}function Fu(a,o){return Ua(8390656,8,a,o)}function Tu(a,o){return zo(2048,8,a,o)}function Df(a,o){return zo(4,2,a,o)}function Uu(a,o){return zo(4,4,a,o)}function ju(a,o){if(typeof o=="function")return a=a(),o(a),function(){o(null)};if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function ew(a,o,h){return h=h!=null?h.concat([a]):null,zo(4,4,ju.bind(null,o,a),h)}function Vg(){}function tw(a,o){var h=Wi();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&Nu(o,g[1])?g[0]:(h.memoizedState=[a,o],a)}function rw(a,o){var h=Wi();o=o===void 0?null:o;var g=h.memoizedState;return g!==null&&o!==null&&Nu(o,g[1])?g[0]:(a=a(),h.memoizedState=[a,o],a)}function nw(a,o,h){return(oA&21)===0?(a.baseState&&(a.baseState=!1,da=!0),a.memoizedState=h):(Tn(h,o)||(h=qa(),mn.lanes|=h,Mc|=h,a.baseState=!0),o)}function z4(a,o){var h=pr;pr=h!==0&&4>h?h:4,a(!0);var g=_u.transition;_u.transition={};try{a(!1),o()}finally{pr=h,_u.transition=g}}function sw(){return Wi().memoizedState}function G4(a,o,h){var g=Pl(a);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},iw(a))aw(o,h);else if(h=Wr(a,o,h,g),h!==null){var B=Xi();QA(h,a,g,B),Aw(h,o,g)}}function $4(a,o,h){var g=Pl(a),B={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(iw(a))aw(o,B);else{var j=a.alternate;if(a.lanes===0&&(j===null||j.lanes===0)&&(j=o.lastRenderedReducer,j!==null))try{var te=o.lastRenderedState,Ne=j(te,h);if(B.hasEagerState=!0,B.eagerState=Ne,Tn(Ne,te)){var Oe=o.interleaved;Oe===null?(B.next=B,Gs(o)):(B.next=Oe.next,Oe.next=B),o.interleaved=B;return}}catch{}h=Wr(a,o,B,g),h!==null&&(B=Xi(),QA(h,a,g,B),Aw(h,o,g))}}function iw(a){var o=a.alternate;return a===mn||o!==null&&o===mn}function aw(a,o){FA=Fl=!0;var h=a.pending;h===null?o.next=o:(o.next=h.next,h.next=o),a.pending=o}function Aw(a,o,h){if((h&4194240)!==0){var g=o.lanes;g&=a.pendingLanes,h|=g,o.lanes=h,Ca(a,h)}}var Rf={readContext:Qn,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useInsertionEffect:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useSyncExternalStore:os,useId:os,unstable_isNewReconciler:!1},q4={readContext:Qn,useCallback:function(a,o){return Ta().memoizedState=[a,o===void 0?null:o],a},useContext:Qn,useEffect:Fu,useImperativeHandle:function(a,o,h){return h=h!=null?h.concat([a]):null,Ua(4194308,4,ju.bind(null,o,a),h)},useLayoutEffect:function(a,o){return Ua(4194308,4,a,o)},useInsertionEffect:function(a,o){return Ua(4,2,a,o)},useMemo:function(a,o){var h=Ta();return o=o===void 0?null:o,a=a(),h.memoizedState=[a,o],a},useReducer:function(a,o,h){var g=Ta();return o=h!==void 0?h(o):o,g.memoizedState=g.baseState=o,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:o},g.queue=a,a=a.dispatch=G4.bind(null,mn,a),[g.memoizedState,a]},useRef:function(a){var o=Ta();return a={current:a},o.memoizedState=a},useState:Oc,useDebugValue:Vg,useDeferredValue:function(a){return Ta().memoizedState=a},useTransition:function(){var a=Oc(!1),o=a[0];return a=z4.bind(null,a[1]),Ta().memoizedState=a,[o,a]},useMutableSource:function(){},useSyncExternalStore:function(a,o,h){var g=mn,B=Ta();if(ut){if(h===void 0)throw Error(t(407));h=h()}else{if(h=o(),Ws===null)throw Error(t(349));(oA&30)!==0||Qf(g,o,h)}B.memoizedState=h;var j={value:h,getSnapshot:o};return B.queue=j,Fu(Pf.bind(null,g,j,a),[a]),g.flags|=2048,Yi(9,sh.bind(null,g,j,h,o),void 0,null),h},useId:function(){var a=Ta(),o=Ws.identifierPrefix;if(ut){var h=xe,g=qe;h=(g&~(1<<32-dn(g)-1)).toString(32)+h,o=":"+o+"R"+h,h=Tl++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=Hg++,o=":"+o+"r"+h.toString(32)+":";return a.memoizedState=o},unstable_isNewReconciler:!1},W4={readContext:Qn,useCallback:tw,useContext:Qn,useEffect:Tu,useImperativeHandle:ew,useInsertionEffect:Df,useLayoutEffect:Uu,useMemo:rw,useReducer:Su,useRef:TA,useState:function(){return Su(Rc)},useDebugValue:Vg,useDeferredValue:function(a){var o=Wi();return nw(o,Zn.memoizedState,a)},useTransition:function(){var a=Su(Rc)[0],o=Wi().memoizedState;return[a,o]},useMutableSource:Lf,useSyncExternalStore:nh,useId:sw,unstable_isNewReconciler:!1},Y4={readContext:Qn,useCallback:tw,useContext:Qn,useEffect:Tu,useImperativeHandle:ew,useInsertionEffect:Df,useLayoutEffect:Uu,useMemo:rw,useReducer:co,useRef:TA,useState:function(){return co(Rc)},useDebugValue:Vg,useDeferredValue:function(a){var o=Wi();return Zn===null?o.memoizedState=a:nw(o,Zn.memoizedState,a)},useTransition:function(){var a=co(Rc)[0],o=Wi().memoizedState;return[a,o]},useMutableSource:Lf,useSyncExternalStore:nh,useId:sw,unstable_isNewReconciler:!1};function UA(a,o){if(a&&a.defaultProps){o=me({},o),a=a.defaultProps;for(var h in a)o[h]===void 0&&(o[h]=a[h]);return o}return o}function Kg(a,o,h,g){o=a.memoizedState,h=h(g,o),h=h==null?o:me({},o,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Of={isMounted:function(a){return(a=a._reactInternals)?Rn(a)===a:!1},enqueueSetState:function(a,o,h){a=a._reactInternals;var g=Xi(),B=Pl(a),j=Vn(g,B);j.payload=o,h!=null&&(j.callback=h),o=Kn(a,j,B),o!==null&&(QA(o,a,B,g),$s(o,a,B))},enqueueReplaceState:function(a,o,h){a=a._reactInternals;var g=Xi(),B=Pl(a),j=Vn(g,B);j.tag=1,j.payload=o,h!=null&&(j.callback=h),o=Kn(a,j,B),o!==null&&(QA(o,a,B,g),$s(o,a,B))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var h=Xi(),g=Pl(a),B=Vn(h,g);B.tag=2,o!=null&&(B.callback=o),o=Kn(a,B,g),o!==null&&(QA(o,a,g,h),$s(o,a,g))}};function ow(a,o,h,g,B,j,te){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,j,te):o.prototype&&o.prototype.isPureReactComponent?!Bi(h,g)||!Bi(B,j):!0}function lw(a,o,h){var g=!1,B=oo,j=o.contextType;return typeof j=="object"&&j!==null?j=Qn(j):(B=_i(o)?Vo:Ds.current,g=o.contextTypes,j=(g=g!=null)?Sl(a,B):oo),o=new o(h,j),a.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Of,a.stateNode=o,o._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=B,a.__reactInternalMemoizedMaskedChildContext=j),o}function cw(a,o,h,g){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,g),o.state!==a&&Of.enqueueReplaceState(o,o.state,null)}function zg(a,o,h,g){var B=a.stateNode;B.props=h,B.state=a.memoizedState,B.refs={},Rs(a);var j=o.contextType;typeof j=="object"&&j!==null?B.context=Qn(j):(j=_i(o)?Vo:Ds.current,B.context=Sl(a,j)),B.state=a.memoizedState,j=o.getDerivedStateFromProps,typeof j=="function"&&(Kg(a,o,j,h),B.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(o=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),o!==B.state&&Of.enqueueReplaceState(B,B.state,null),qs(a,h,B,g),B.state=a.memoizedState),typeof B.componentDidMount=="function"&&(a.flags|=4194308)}function Lu(a,o){try{var h="",g=o;do h+=G(g),g=g.return;while(g);var B=h}catch(j){B=`
Error generating stack: `+j.message+`
`+j.stack}return{value:a,source:o,stack:B,digest:null}}function Gg(a,o,h){return{value:a,source:null,stack:h??null,digest:o??null}}function $g(a,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var J4=typeof WeakMap=="function"?WeakMap:Map;function uw(a,o,h){h=Vn(-1,h),h.tag=3,h.payload={element:null};var g=o.value;return h.callback=function(){$f||($f=!0,o0=g),$g(a,o)},h}function dw(a,o,h){h=Vn(-1,h),h.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var B=o.value;h.payload=function(){return g(B)},h.callback=function(){$g(a,o)}}var j=a.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(h.callback=function(){$g(a,o),typeof g!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var te=o.stack;this.componentDidCatch(o.value,{componentStack:te!==null?te:""})}),h}function hw(a,o,h){var g=a.pingCache;if(g===null){g=a.pingCache=new J4;var B=new Set;g.set(o,B)}else B=g.get(o),B===void 0&&(B=new Set,g.set(o,B));B.has(h)||(B.add(h),a=u_.bind(null,a,o,h),o.then(a,a))}function fw(a){do{var o;if((o=a.tag===13)&&(o=a.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return a;a=a.return}while(a!==null);return null}function pw(a,o,h,g,B){return(a.mode&1)===0?(a===o?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=Vn(-1,1),o.tag=2,Kn(h,o,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=B,a)}var X4=D.ReactCurrentOwner,da=!1;function Ji(a,o,h,g){o.child=a===null?Cn(o,null,h,g):Jn(o,a.child,h,g)}function mw(a,o,h,g,B){h=h.render;var j=o.ref;return Ln(o,B),g=Dc(a,o,h,g,j,B),h=lA(),a!==null&&!da?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~B,Go(a,o,B)):(ut&&h&&ot(o),o.flags|=1,Ji(a,o,g,B),o.child)}function gw(a,o,h,g,B){if(a===null){var j=h.type;return typeof j=="function"&&!p0(j)&&j.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=j,yw(a,o,j,g,B)):(a=Zf(h.type,null,g,o,o.mode,B),a.ref=o.ref,a.return=o,o.child=a)}if(j=a.child,(a.lanes&B)===0){var te=j.memoizedProps;if(h=h.compare,h=h!==null?h:Bi,h(te,g)&&a.ref===o.ref)return Go(a,o,B)}return o.flags|=1,a=Rl(j,g),a.ref=o.ref,a.return=o,o.child=a}function yw(a,o,h,g,B){if(a!==null){var j=a.memoizedProps;if(Bi(j,g)&&a.ref===o.ref)if(da=!1,o.pendingProps=g=j,(a.lanes&B)!==0)(a.flags&131072)!==0&&(da=!0);else return o.lanes=a.lanes,Go(a,o,B)}return qg(a,o,h,g,B)}function vw(a,o,h){var g=o.pendingProps,B=g.children,j=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},qr(Pu,ja),ja|=h;else{if((h&1073741824)===0)return a=j!==null?j.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:a,cachePool:null,transitions:null},o.updateQueue=null,qr(Pu,ja),ja|=a,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=j!==null?j.baseLanes:h,qr(Pu,ja),ja|=g}else j!==null?(g=j.baseLanes|h,o.memoizedState=null):g=h,qr(Pu,ja),ja|=g;return Ji(a,o,B,h),o.child}function ww(a,o){var h=o.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function qg(a,o,h,g,B){var j=_i(h)?Vo:Ds.current;return j=Sl(o,j),Ln(o,B),h=Dc(a,o,h,g,j,B),g=lA(),a!==null&&!da?(o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~B,Go(a,o,B)):(ut&&g&&ot(o),o.flags|=1,Ji(a,o,h,B),o.child)}function xw(a,o,h,g,B){if(_i(h)){var j=!0;Ko(o)}else j=!1;if(Ln(o,B),o.stateNode===null)Hf(a,o),lw(o,h,g),zg(o,h,g,B),g=!0;else if(a===null){var te=o.stateNode,Ne=o.memoizedProps;te.props=Ne;var Oe=te.context,nt=h.contextType;typeof nt=="object"&&nt!==null?nt=Qn(nt):(nt=_i(h)?Vo:Ds.current,nt=Sl(o,nt));var xt=h.getDerivedStateFromProps,Et=typeof xt=="function"||typeof te.getSnapshotBeforeUpdate=="function";Et||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Ne!==g||Oe!==nt)&&cw(o,te,g,nt),Xn=!1;var wt=o.memoizedState;te.state=wt,qs(o,g,te,B),Oe=o.memoizedState,Ne!==g||wt!==Oe||Ii.current||Xn?(typeof xt=="function"&&(Kg(o,h,xt,g),Oe=o.memoizedState),(Ne=Xn||ow(o,h,Ne,g,wt,Oe,nt))?(Et||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(o.flags|=4194308)):(typeof te.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=Oe),te.props=g,te.state=Oe,te.context=nt,g=Ne):(typeof te.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{te=o.stateNode,Ni(a,o),Ne=o.memoizedProps,nt=o.type===o.elementType?Ne:UA(o.type,Ne),te.props=nt,Et=o.pendingProps,wt=te.context,Oe=h.contextType,typeof Oe=="object"&&Oe!==null?Oe=Qn(Oe):(Oe=_i(h)?Vo:Ds.current,Oe=Sl(o,Oe));var Tt=h.getDerivedStateFromProps;(xt=typeof Tt=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(Ne!==Et||wt!==Oe)&&cw(o,te,g,Oe),Xn=!1,wt=o.memoizedState,te.state=wt,qs(o,g,te,B);var Ht=o.memoizedState;Ne!==Et||wt!==Ht||Ii.current||Xn?(typeof Tt=="function"&&(Kg(o,h,Tt,g),Ht=o.memoizedState),(nt=Xn||ow(o,h,nt,g,wt,Ht,Oe)||!1)?(xt||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(g,Ht,Oe),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(g,Ht,Oe)),typeof te.componentDidUpdate=="function"&&(o.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof te.componentDidUpdate!="function"||Ne===a.memoizedProps&&wt===a.memoizedState||(o.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Ne===a.memoizedProps&&wt===a.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=Ht),te.props=g,te.state=Ht,te.context=Oe,g=nt):(typeof te.componentDidUpdate!="function"||Ne===a.memoizedProps&&wt===a.memoizedState||(o.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||Ne===a.memoizedProps&&wt===a.memoizedState||(o.flags|=1024),g=!1)}return Wg(a,o,h,g,j,B)}function Wg(a,o,h,g,B,j){ww(a,o);var te=(o.flags&128)!==0;if(!g&&!te)return B&&Uf(o,h,!1),Go(a,o,j);g=o.stateNode,X4.current=o;var Ne=te&&typeof h.getDerivedStateFromError!="function"?null:g.render();return o.flags|=1,a!==null&&te?(o.child=Jn(o,a.child,null,j),o.child=Jn(o,null,Ne,j)):Ji(a,o,Ne,j),o.memoizedState=g.state,B&&Uf(o,h,!0),o.child}function bw(a){var o=a.stateNode;o.pendingContext?Tf(a,o.pendingContext,o.pendingContext!==o.context):o.context&&Tf(a,o.context,!1),kl(a,o.containerInfo)}function Bw(a,o,h,g,B){return Qt(),kt(B),o.flags|=256,Ji(a,o,h,g),o.child}var Yg={dehydrated:null,treeContext:null,retryLane:0};function Jg(a){return{baseLanes:a,cachePool:null,transitions:null}}function Cw(a,o,h){var g=o.pendingProps,B=cn.current,j=!1,te=(o.flags&128)!==0,Ne;if((Ne=te)||(Ne=a!==null&&a.memoizedState===null?!1:(B&2)!==0),Ne?(j=!0,o.flags&=-129):(a===null||a.memoizedState!==null)&&(B|=1),qr(cn,B&1),a===null)return Rt(o),a=o.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((o.mode&1)===0?o.lanes=1:a.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(te=g.children,a=g.fallback,j?(g=o.mode,j=o.child,te={mode:"hidden",children:te},(g&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=te):j=ep(te,g,0,null),a=zc(a,g,h,null),j.return=o,a.return=o,j.sibling=a,o.child=j,o.child.memoizedState=Jg(h),o.memoizedState=Yg,a):Xg(o,te));if(B=a.memoizedState,B!==null&&(Ne=B.dehydrated,Ne!==null))return Z4(a,o,te,g,Ne,B,h);if(j){j=g.fallback,te=o.mode,B=a.child,Ne=B.sibling;var Oe={mode:"hidden",children:g.children};return(te&1)===0&&o.child!==B?(g=o.child,g.childLanes=0,g.pendingProps=Oe,o.deletions=null):(g=Rl(B,Oe),g.subtreeFlags=B.subtreeFlags&14680064),Ne!==null?j=Rl(Ne,j):(j=zc(j,te,h,null),j.flags|=2),j.return=o,g.return=o,g.sibling=j,o.child=g,g=j,j=o.child,te=a.child.memoizedState,te=te===null?Jg(h):{baseLanes:te.baseLanes|h,cachePool:null,transitions:te.transitions},j.memoizedState=te,j.childLanes=a.childLanes&~h,o.memoizedState=Yg,g}return j=a.child,a=j.sibling,g=Rl(j,{mode:"visible",children:g.children}),(o.mode&1)===0&&(g.lanes=h),g.return=o,g.sibling=null,a!==null&&(h=o.deletions,h===null?(o.deletions=[a],o.flags|=16):h.push(a)),o.child=g,o.memoizedState=null,g}function Xg(a,o){return o=ep({mode:"visible",children:o},a.mode,0,null),o.return=a,a.child=o}function Mf(a,o,h,g){return g!==null&&kt(g),Jn(o,a.child,null,h),a=Xg(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Z4(a,o,h,g,B,j,te){if(h)return o.flags&256?(o.flags&=-257,g=Gg(Error(t(422))),Mf(a,o,te,g)):o.memoizedState!==null?(o.child=a.child,o.flags|=128,null):(j=g.fallback,B=o.mode,g=ep({mode:"visible",children:g.children},B,0,null),j=zc(j,B,te,null),j.flags|=2,g.return=o,j.return=o,g.sibling=j,o.child=g,(o.mode&1)!==0&&Jn(o,a.child,null,te),o.child.memoizedState=Jg(te),o.memoizedState=Yg,j);if((o.mode&1)===0)return Mf(a,o,te,null);if(B.data==="$!"){if(g=B.nextSibling&&B.nextSibling.dataset,g)var Ne=g.dgst;return g=Ne,j=Error(t(419)),g=Gg(j,g,void 0),Mf(a,o,te,g)}if(Ne=(te&a.childLanes)!==0,da||Ne){if(g=Ws,g!==null){switch(te&-te){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=(B&(g.suspendedLanes|te))!==0?0:B,B!==0&&B!==j.retryLane&&(j.retryLane=B,rn(a,B),QA(g,a,B,-1))}return f0(),g=Gg(Error(t(421))),Mf(a,o,te,g)}return B.data==="$?"?(o.flags|=128,o.child=a.child,o=d_.bind(null,a),B._reactRetry=o,null):(a=j.treeContext,at=ai(B.nextSibling),st=o,ut=!0,ht=null,a!==null&&(de[ve++]=qe,de[ve++]=xe,de[ve++]=Re,qe=a.id,xe=a.overflow,Re=o),o=Xg(o,g.children),o.flags|=4096,o)}function Ew(a,o,h){a.lanes|=o;var g=a.alternate;g!==null&&(g.lanes|=o),Pr(a.return,o,h)}function Zg(a,o,h,g,B){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:B}:(j.isBackwards=o,j.rendering=null,j.renderingStartTime=0,j.last=g,j.tail=h,j.tailMode=B)}function Iw(a,o,h){var g=o.pendingProps,B=g.revealOrder,j=g.tail;if(Ji(a,o,g.children,h),g=cn.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Ew(a,h,o);else if(a.tag===19)Ew(a,h,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(qr(cn,g),(o.mode&1)===0)o.memoizedState=null;else switch(B){case"forwards":for(h=o.child,B=null;h!==null;)a=h.alternate,a!==null&&Fa(a)===null&&(B=h),h=h.sibling;h=B,h===null?(B=o.child,o.child=null):(B=h.sibling,h.sibling=null),Zg(o,!1,B,h,j);break;case"backwards":for(h=null,B=o.child,o.child=null;B!==null;){if(a=B.alternate,a!==null&&Fa(a)===null){o.child=B;break}a=B.sibling,B.sibling=h,h=B,B=a}Zg(o,!0,h,null,j);break;case"together":Zg(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Hf(a,o){(o.mode&1)===0&&a!==null&&(a.alternate=null,o.alternate=null,o.flags|=2)}function Go(a,o,h){if(a!==null&&(o.dependencies=a.dependencies),Mc|=o.lanes,(h&o.childLanes)===0)return null;if(a!==null&&o.child!==a.child)throw Error(t(153));if(o.child!==null){for(a=o.child,h=Rl(a,a.pendingProps),o.child=h,h.return=o;a.sibling!==null;)a=a.sibling,h=h.sibling=Rl(a,a.pendingProps),h.return=o;h.sibling=null}return o.child}function e_(a,o,h){switch(o.tag){case 3:bw(o),Qt();break;case 5:jf(o);break;case 1:_i(o.type)&&Ko(o);break;case 4:kl(o,o.stateNode.containerInfo);break;case 10:var g=o.type._context,B=o.memoizedProps.value;qr(As,g._currentValue),g._currentValue=B;break;case 13:if(g=o.memoizedState,g!==null)return g.dehydrated!==null?(qr(cn,cn.current&1),o.flags|=128,null):(h&o.child.childLanes)!==0?Cw(a,o,h):(qr(cn,cn.current&1),a=Go(a,o,h),a!==null?a.sibling:null);qr(cn,cn.current&1);break;case 19:if(g=(h&o.childLanes)!==0,(a.flags&128)!==0){if(g)return Iw(a,o,h);o.flags|=128}if(B=o.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),qr(cn,cn.current),g)break;return null;case 22:case 23:return o.lanes=0,vw(a,o,h)}return Go(a,o,h)}var _w,e0,Nw,Sw;_w=function(a,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},e0=function(){},Nw=function(a,o,h,g){var B=a.memoizedProps;if(B!==g){a=o.stateNode,kA(Cs.current);var j=null;switch(h){case"input":B=It(a,B),g=It(a,g),j=[];break;case"select":B=me({},B,{value:void 0}),g=me({},g,{value:void 0}),j=[];break;case"textarea":B=X(a,B),g=X(a,g),j=[];break;default:typeof B.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=Il)}vt(h,g);var te;h=null;for(nt in B)if(!g.hasOwnProperty(nt)&&B.hasOwnProperty(nt)&&B[nt]!=null)if(nt==="style"){var Ne=B[nt];for(te in Ne)Ne.hasOwnProperty(te)&&(h||(h={}),h[te]="")}else nt!=="dangerouslySetInnerHTML"&&nt!=="children"&&nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(s.hasOwnProperty(nt)?j||(j=[]):(j=j||[]).push(nt,null));for(nt in g){var Oe=g[nt];if(Ne=B?.[nt],g.hasOwnProperty(nt)&&Oe!==Ne&&(Oe!=null||Ne!=null))if(nt==="style")if(Ne){for(te in Ne)!Ne.hasOwnProperty(te)||Oe&&Oe.hasOwnProperty(te)||(h||(h={}),h[te]="");for(te in Oe)Oe.hasOwnProperty(te)&&Ne[te]!==Oe[te]&&(h||(h={}),h[te]=Oe[te])}else h||(j||(j=[]),j.push(nt,h)),h=Oe;else nt==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Ne=Ne?Ne.__html:void 0,Oe!=null&&Ne!==Oe&&(j=j||[]).push(nt,Oe)):nt==="children"?typeof Oe!="string"&&typeof Oe!="number"||(j=j||[]).push(nt,""+Oe):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&(s.hasOwnProperty(nt)?(Oe!=null&&nt==="onScroll"&&en("scroll",a),j||Ne===Oe||(j=[])):(j=j||[]).push(nt,Oe))}h&&(j=j||[]).push("style",h);var nt=j;(o.updateQueue=nt)&&(o.flags|=4)}},Sw=function(a,o,h,g){h!==g&&(o.flags|=4)};function ih(a,o){if(!ut)switch(a.tailMode){case"hidden":o=a.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Si(a){var o=a.alternate!==null&&a.alternate.child===a.child,h=0,g=0;if(o)for(var B=a.child;B!==null;)h|=B.lanes|B.childLanes,g|=B.subtreeFlags&14680064,g|=B.flags&14680064,B.return=a,B=B.sibling;else for(B=a.child;B!==null;)h|=B.lanes|B.childLanes,g|=B.subtreeFlags,g|=B.flags,B.return=a,B=B.sibling;return a.subtreeFlags|=g,a.childLanes=h,o}function t_(a,o,h){var g=o.pendingProps;switch(Xe(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(o),null;case 1:return _i(o.type)&&Eu(),Si(o),null;case 3:return g=o.stateNode,AA(),Kr(Ii),Kr(Ds),rh(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(jn(o)?o.flags|=4:a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ht!==null&&(u0(ht),ht=null))),e0(a,o),Si(o),null;case 5:eh(o);var B=kA(lo.current);if(h=o.type,a!==null&&o.stateNode!=null)Nw(a,o,h,g,B),a.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!g){if(o.stateNode===null)throw Error(t(166));return Si(o),null}if(a=kA(Cs.current),jn(o)){g=o.stateNode,h=o.type;var j=o.memoizedProps;switch(g[aA]=o,g[_l]=j,a=(o.mode&1)!==0,h){case"dialog":en("cancel",g),en("close",g);break;case"iframe":case"object":case"embed":en("load",g);break;case"video":case"audio":for(B=0;B<ao.length;B++)en(ao[B],g);break;case"source":en("error",g);break;case"img":case"image":case"link":en("error",g),en("load",g);break;case"details":en("toggle",g);break;case"input":le(g,j),en("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!j.multiple},en("invalid",g);break;case"textarea":ne(g,j),en("invalid",g)}vt(h,j),B=null;for(var te in j)if(j.hasOwnProperty(te)){var Ne=j[te];te==="children"?typeof Ne=="string"?g.textContent!==Ne&&(j.suppressHydrationWarning!==!0&&Cu(g.textContent,Ne,a),B=["children",Ne]):typeof Ne=="number"&&g.textContent!==""+Ne&&(j.suppressHydrationWarning!==!0&&Cu(g.textContent,Ne,a),B=["children",""+Ne]):s.hasOwnProperty(te)&&Ne!=null&&te==="onScroll"&&en("scroll",g)}switch(h){case"input":Ge(g),pt(g,j,!0);break;case"textarea":Ge(g),Ie(g);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(g.onclick=Il)}g=B,o.updateQueue=g,g!==null&&(o.flags|=4)}else{te=B.nodeType===9?B:B.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=se(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=te.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=te.createElement(h,{is:g.is}):(a=te.createElement(h),h==="select"&&(te=a,g.multiple?te.multiple=!0:g.size&&(te.size=g.size))):a=te.createElementNS(a,h),a[aA]=o,a[_l]=g,_w(a,o,!1,!1),o.stateNode=a;e:{switch(te=ke(h,g),h){case"dialog":en("cancel",a),en("close",a),B=g;break;case"iframe":case"object":case"embed":en("load",a),B=g;break;case"video":case"audio":for(B=0;B<ao.length;B++)en(ao[B],a);B=g;break;case"source":en("error",a),B=g;break;case"img":case"image":case"link":en("error",a),en("load",a),B=g;break;case"details":en("toggle",a),B=g;break;case"input":le(a,g),B=It(a,g),en("invalid",a);break;case"option":B=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},B=me({},g,{value:void 0}),en("invalid",a);break;case"textarea":ne(a,g),B=X(a,g),en("invalid",a);break;default:B=g}vt(h,B),Ne=B;for(j in Ne)if(Ne.hasOwnProperty(j)){var Oe=Ne[j];j==="style"?Pe(a,Oe):j==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&Be(a,Oe)):j==="children"?typeof Oe=="string"?(h!=="textarea"||Oe!=="")&&Fe(a,Oe):typeof Oe=="number"&&Fe(a,""+Oe):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(s.hasOwnProperty(j)?Oe!=null&&j==="onScroll"&&en("scroll",a):Oe!=null&&H(a,j,Oe,te))}switch(h){case"input":Ge(a),pt(a,g,!1);break;case"textarea":Ge(a),Ie(a);break;case"option":g.value!=null&&a.setAttribute("value",""+Le(g.value));break;case"select":a.multiple=!!g.multiple,j=g.value,j!=null?Qe(a,!!g.multiple,j,!1):g.defaultValue!=null&&Qe(a,!!g.multiple,g.defaultValue,!0);break;default:typeof B.onClick=="function"&&(a.onclick=Il)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Si(o),null;case 6:if(a&&o.stateNode!=null)Sw(a,o,a.memoizedProps,g);else{if(typeof g!="string"&&o.stateNode===null)throw Error(t(166));if(h=kA(lo.current),kA(Cs.current),jn(o)){if(g=o.stateNode,h=o.memoizedProps,g[aA]=o,(j=g.nodeValue!==h)&&(a=st,a!==null))switch(a.tag){case 3:Cu(g.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Cu(g.nodeValue,h,(a.mode&1)!==0)}j&&(o.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[aA]=o,o.stateNode=g}return Si(o),null;case 13:if(Kr(cn),g=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(ut&&at!==null&&(o.mode&1)!==0&&(o.flags&128)===0)ur(),Qt(),o.flags|=98560,j=!1;else if(j=jn(o),g!==null&&g.dehydrated!==null){if(a===null){if(!j)throw Error(t(318));if(j=o.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(t(317));j[aA]=o}else Qt(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Si(o),j=!1}else ht!==null&&(u0(ht),ht=null),j=!0;if(!j)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=h,o):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(o.child.flags|=8192,(o.mode&1)!==0&&(a===null||(cn.current&1)!==0?Os===0&&(Os=3):f0())),o.updateQueue!==null&&(o.flags|=4),Si(o),null);case 4:return AA(),e0(a,o),a===null&&Ro(o.stateNode.containerInfo),Si(o),null;case 10:return pn(o.type._context),Si(o),null;case 17:return _i(o.type)&&Eu(),Si(o),null;case 19:if(Kr(cn),j=o.memoizedState,j===null)return Si(o),null;if(g=(o.flags&128)!==0,te=j.rendering,te===null)if(g)ih(j,!1);else{if(Os!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(te=Fa(a),te!==null){for(o.flags|=128,ih(j,!1),g=te.updateQueue,g!==null&&(o.updateQueue=g,o.flags|=4),o.subtreeFlags=0,g=h,h=o.child;h!==null;)j=h,a=g,j.flags&=14680066,te=j.alternate,te===null?(j.childLanes=0,j.lanes=a,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=te.childLanes,j.lanes=te.lanes,j.child=te.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=te.memoizedProps,j.memoizedState=te.memoizedState,j.updateQueue=te.updateQueue,j.type=te.type,a=te.dependencies,j.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return qr(cn,cn.current&1|2),o.child}a=a.sibling}j.tail!==null&&Rr()>Du&&(o.flags|=128,g=!0,ih(j,!1),o.lanes=4194304)}else{if(!g)if(a=Fa(te),a!==null){if(o.flags|=128,g=!0,h=a.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),ih(j,!0),j.tail===null&&j.tailMode==="hidden"&&!te.alternate&&!ut)return Si(o),null}else 2*Rr()-j.renderingStartTime>Du&&h!==1073741824&&(o.flags|=128,g=!0,ih(j,!1),o.lanes=4194304);j.isBackwards?(te.sibling=o.child,o.child=te):(h=j.last,h!==null?h.sibling=te:o.child=te,j.last=te)}return j.tail!==null?(o=j.tail,j.rendering=o,j.tail=o.sibling,j.renderingStartTime=Rr(),o.sibling=null,h=cn.current,qr(cn,g?h&1|2:h&1),o):(Si(o),null);case 22:case 23:return h0(),g=o.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(o.flags|=8192),g&&(o.mode&1)!==0?(ja&1073741824)!==0&&(Si(o),o.subtreeFlags&6&&(o.flags|=8192)):Si(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function r_(a,o){switch(Xe(o),o.tag){case 1:return _i(o.type)&&Eu(),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return AA(),Kr(Ii),Kr(Ds),rh(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 5:return eh(o),null;case 13:if(Kr(cn),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Qt()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return Kr(cn),null;case 4:return AA(),null;case 10:return pn(o.type._context),null;case 22:case 23:return h0(),null;case 24:return null;default:return null}}var Vf=!1,ki=!1,n_=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function Qu(a,o){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){es(a,o,g)}else h.current=null}function t0(a,o,h){try{h()}catch(g){es(a,o,g)}}var kw=!1;function s_(a,o){if(Lc=Za,a=Yn(),Na(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var B=g.anchorOffset,j=g.focusNode;g=g.focusOffset;try{h.nodeType,j.nodeType}catch{h=null;break e}var te=0,Ne=-1,Oe=-1,nt=0,xt=0,Et=a,wt=null;t:for(;;){for(var Tt;Et!==h||B!==0&&Et.nodeType!==3||(Ne=te+B),Et!==j||g!==0&&Et.nodeType!==3||(Oe=te+g),Et.nodeType===3&&(te+=Et.nodeValue.length),(Tt=Et.firstChild)!==null;)wt=Et,Et=Tt;for(;;){if(Et===a)break t;if(wt===h&&++nt===B&&(Ne=te),wt===j&&++xt===g&&(Oe=te),(Tt=Et.nextSibling)!==null)break;Et=wt,wt=Et.parentNode}Et=Tt}h=Ne===-1||Oe===-1?null:{start:Ne,end:Oe}}else h=null}h=h||{start:0,end:0}}else h=null;for(Mo={focusedElem:a,selectionRange:h},Za=!1,Dt=o;Dt!==null;)if(o=Dt,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Dt=a;else for(;Dt!==null;){o=Dt;try{var Ht=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ht!==null){var Kt=Ht.memoizedProps,ls=Ht.memoizedState,Je=o.stateNode,Ve=Je.getSnapshotBeforeUpdate(o.elementType===o.type?Kt:UA(o.type,Kt),ls);Je.__reactInternalSnapshotBeforeUpdate=Ve}break;case 3:var Ze=o.stateNode.containerInfo;Ze.nodeType===1?Ze.textContent="":Ze.nodeType===9&&Ze.documentElement&&Ze.removeChild(Ze.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(St){es(o,o.return,St)}if(a=o.sibling,a!==null){a.return=o.return,Dt=a;break}Dt=o.return}return Ht=kw,kw=!1,Ht}function ah(a,o,h){var g=o.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var B=g=g.next;do{if((B.tag&a)===a){var j=B.destroy;B.destroy=void 0,j!==void 0&&t0(o,h,j)}B=B.next}while(B!==g)}}function Kf(a,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&a)===a){var g=h.create;h.destroy=g()}h=h.next}while(h!==o)}}function r0(a){var o=a.ref;if(o!==null){var h=a.stateNode;a.tag,a=h,typeof o=="function"?o(a):o.current=a}}function Fw(a){var o=a.alternate;o!==null&&(a.alternate=null,Fw(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&(delete o[aA],delete o[_l],delete o[Ei],delete o[Og],delete o[Mg])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Tw(a){return a.tag===5||a.tag===3||a.tag===4}function Uw(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Tw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function n0(a,o,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(a,o):h.insertBefore(a,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(a,h)):(o=h,o.appendChild(a)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Il));else if(g!==4&&(a=a.child,a!==null))for(n0(a,o,h),a=a.sibling;a!==null;)n0(a,o,h),a=a.sibling}function s0(a,o,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,o?h.insertBefore(a,o):h.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(s0(a,o,h),a=a.sibling;a!==null;)s0(a,o,h),a=a.sibling}var Ai=null,jA=!1;function jl(a,o,h){for(h=h.child;h!==null;)jw(a,o,h),h=h.sibling}function jw(a,o,h){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(za,h)}catch{}switch(h.tag){case 5:ki||Qu(h,o);case 6:var g=Ai,B=jA;Ai=null,jl(a,o,h),Ai=g,jA=B,Ai!==null&&(jA?(a=Ai,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):Ai.removeChild(h.stateNode));break;case 18:Ai!==null&&(jA?(a=Ai,h=h.stateNode,a.nodeType===8?Jd(a.parentNode,h):a.nodeType===1&&Jd(a,h),zi(a)):Jd(Ai,h.stateNode));break;case 4:g=Ai,B=jA,Ai=h.stateNode.containerInfo,jA=!0,jl(a,o,h),Ai=g,jA=B;break;case 0:case 11:case 14:case 15:if(!ki&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){B=g=g.next;do{var j=B,te=j.destroy;j=j.tag,te!==void 0&&((j&2)!==0||(j&4)!==0)&&t0(h,o,te),B=B.next}while(B!==g)}jl(a,o,h);break;case 1:if(!ki&&(Qu(h,o),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(Ne){es(h,o,Ne)}jl(a,o,h);break;case 21:jl(a,o,h);break;case 22:h.mode&1?(ki=(g=ki)||h.memoizedState!==null,jl(a,o,h),ki=g):jl(a,o,h);break;default:jl(a,o,h)}}function Lw(a){var o=a.updateQueue;if(o!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new n_),o.forEach(function(g){var B=h_.bind(null,a,g);h.has(g)||(h.add(g),g.then(B,B))})}}function LA(a,o){var h=o.deletions;if(h!==null)for(var g=0;g<h.length;g++){var B=h[g];try{var j=a,te=o,Ne=te;e:for(;Ne!==null;){switch(Ne.tag){case 5:Ai=Ne.stateNode,jA=!1;break e;case 3:Ai=Ne.stateNode.containerInfo,jA=!0;break e;case 4:Ai=Ne.stateNode.containerInfo,jA=!0;break e}Ne=Ne.return}if(Ai===null)throw Error(t(160));jw(j,te,B),Ai=null,jA=!1;var Oe=B.alternate;Oe!==null&&(Oe.return=null),B.return=null}catch(nt){es(B,o,nt)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Qw(o,a),o=o.sibling}function Qw(a,o){var h=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(LA(o,a),uo(a),g&4){try{ah(3,a,a.return),Kf(3,a)}catch(Kt){es(a,a.return,Kt)}try{ah(5,a,a.return)}catch(Kt){es(a,a.return,Kt)}}break;case 1:LA(o,a),uo(a),g&512&&h!==null&&Qu(h,h.return);break;case 5:if(LA(o,a),uo(a),g&512&&h!==null&&Qu(h,h.return),a.flags&32){var B=a.stateNode;try{Fe(B,"")}catch(Kt){es(a,a.return,Kt)}}if(g&4&&(B=a.stateNode,B!=null)){var j=a.memoizedProps,te=h!==null?h.memoizedProps:j,Ne=a.type,Oe=a.updateQueue;if(a.updateQueue=null,Oe!==null)try{Ne==="input"&&j.type==="radio"&&j.name!=null&&ft(B,j),ke(Ne,te);var nt=ke(Ne,j);for(te=0;te<Oe.length;te+=2){var xt=Oe[te],Et=Oe[te+1];xt==="style"?Pe(B,Et):xt==="dangerouslySetInnerHTML"?Be(B,Et):xt==="children"?Fe(B,Et):H(B,xt,Et,nt)}switch(Ne){case"input":ct(B,j);break;case"textarea":pe(B,j);break;case"select":var wt=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!j.multiple;var Tt=j.value;Tt!=null?Qe(B,!!j.multiple,Tt,!1):wt!==!!j.multiple&&(j.defaultValue!=null?Qe(B,!!j.multiple,j.defaultValue,!0):Qe(B,!!j.multiple,j.multiple?[]:"",!1))}B[_l]=j}catch(Kt){es(a,a.return,Kt)}}break;case 6:if(LA(o,a),uo(a),g&4){if(a.stateNode===null)throw Error(t(162));B=a.stateNode,j=a.memoizedProps;try{B.nodeValue=j}catch(Kt){es(a,a.return,Kt)}}break;case 3:if(LA(o,a),uo(a),g&4&&h!==null&&h.memoizedState.isDehydrated)try{zi(o.containerInfo)}catch(Kt){es(a,a.return,Kt)}break;case 4:LA(o,a),uo(a);break;case 13:LA(o,a),uo(a),B=a.child,B.flags&8192&&(j=B.memoizedState!==null,B.stateNode.isHidden=j,!j||B.alternate!==null&&B.alternate.memoizedState!==null||(A0=Rr())),g&4&&Lw(a);break;case 22:if(xt=h!==null&&h.memoizedState!==null,a.mode&1?(ki=(nt=ki)||xt,LA(o,a),ki=nt):LA(o,a),uo(a),g&8192){if(nt=a.memoizedState!==null,(a.stateNode.isHidden=nt)&&!xt&&(a.mode&1)!==0)for(Dt=a,xt=a.child;xt!==null;){for(Et=Dt=xt;Dt!==null;){switch(wt=Dt,Tt=wt.child,wt.tag){case 0:case 11:case 14:case 15:ah(4,wt,wt.return);break;case 1:Qu(wt,wt.return);var Ht=wt.stateNode;if(typeof Ht.componentWillUnmount=="function"){g=wt,h=wt.return;try{o=g,Ht.props=o.memoizedProps,Ht.state=o.memoizedState,Ht.componentWillUnmount()}catch(Kt){es(g,h,Kt)}}break;case 5:Qu(wt,wt.return);break;case 22:if(wt.memoizedState!==null){Rw(Et);continue}}Tt!==null?(Tt.return=wt,Dt=Tt):Rw(Et)}xt=xt.sibling}e:for(xt=null,Et=a;;){if(Et.tag===5){if(xt===null){xt=Et;try{B=Et.stateNode,nt?(j=B.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(Ne=Et.stateNode,Oe=Et.memoizedProps.style,te=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Ne.style.display=_e("display",te))}catch(Kt){es(a,a.return,Kt)}}}else if(Et.tag===6){if(xt===null)try{Et.stateNode.nodeValue=nt?"":Et.memoizedProps}catch(Kt){es(a,a.return,Kt)}}else if((Et.tag!==22&&Et.tag!==23||Et.memoizedState===null||Et===a)&&Et.child!==null){Et.child.return=Et,Et=Et.child;continue}if(Et===a)break e;for(;Et.sibling===null;){if(Et.return===null||Et.return===a)break e;xt===Et&&(xt=null),Et=Et.return}xt===Et&&(xt=null),Et.sibling.return=Et.return,Et=Et.sibling}}break;case 19:LA(o,a),uo(a),g&4&&Lw(a);break;case 21:break;default:LA(o,a),uo(a)}}function uo(a){var o=a.flags;if(o&2){try{e:{for(var h=a.return;h!==null;){if(Tw(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var B=g.stateNode;g.flags&32&&(Fe(B,""),g.flags&=-33);var j=Uw(a);s0(a,j,B);break;case 3:case 4:var te=g.stateNode.containerInfo,Ne=Uw(a);n0(a,Ne,te);break;default:throw Error(t(161))}}catch(Oe){es(a,a.return,Oe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function i_(a,o,h){Dt=a,Pw(a)}function Pw(a,o,h){for(var g=(a.mode&1)!==0;Dt!==null;){var B=Dt,j=B.child;if(B.tag===22&&g){var te=B.memoizedState!==null||Vf;if(!te){var Ne=B.alternate,Oe=Ne!==null&&Ne.memoizedState!==null||ki;Ne=Vf;var nt=ki;if(Vf=te,(ki=Oe)&&!nt)for(Dt=B;Dt!==null;)te=Dt,Oe=te.child,te.tag===22&&te.memoizedState!==null?Ow(B):Oe!==null?(Oe.return=te,Dt=Oe):Ow(B);for(;j!==null;)Dt=j,Pw(j),j=j.sibling;Dt=B,Vf=Ne,ki=nt}Dw(a)}else(B.subtreeFlags&8772)!==0&&j!==null?(j.return=B,Dt=j):Dw(a)}}function Dw(a){for(;Dt!==null;){var o=Dt;if((o.flags&8772)!==0){var h=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:ki||Kf(5,o);break;case 1:var g=o.stateNode;if(o.flags&4&&!ki)if(h===null)g.componentDidMount();else{var B=o.elementType===o.type?h.memoizedProps:UA(o.type,h.memoizedProps);g.componentDidUpdate(B,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var j=o.updateQueue;j!==null&&ua(o,j,g);break;case 3:var te=o.updateQueue;if(te!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}ua(o,te,h)}break;case 5:var Ne=o.stateNode;if(h===null&&o.flags&4){h=Ne;var Oe=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&h.focus();break;case"img":Oe.src&&(h.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var nt=o.alternate;if(nt!==null){var xt=nt.memoizedState;if(xt!==null){var Et=xt.dehydrated;Et!==null&&zi(Et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ki||o.flags&512&&r0(o)}catch(wt){es(o,o.return,wt)}}if(o===a){Dt=null;break}if(h=o.sibling,h!==null){h.return=o.return,Dt=h;break}Dt=o.return}}function Rw(a){for(;Dt!==null;){var o=Dt;if(o===a){Dt=null;break}var h=o.sibling;if(h!==null){h.return=o.return,Dt=h;break}Dt=o.return}}function Ow(a){for(;Dt!==null;){var o=Dt;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Kf(4,o)}catch(Oe){es(o,h,Oe)}break;case 1:var g=o.stateNode;if(typeof g.componentDidMount=="function"){var B=o.return;try{g.componentDidMount()}catch(Oe){es(o,B,Oe)}}var j=o.return;try{r0(o)}catch(Oe){es(o,j,Oe)}break;case 5:var te=o.return;try{r0(o)}catch(Oe){es(o,te,Oe)}}}catch(Oe){es(o,o.return,Oe)}if(o===a){Dt=null;break}var Ne=o.sibling;if(Ne!==null){Ne.return=o.return,Dt=Ne;break}Dt=o.return}}var a_=Math.ceil,zf=D.ReactCurrentDispatcher,i0=D.ReactCurrentOwner,cA=D.ReactCurrentBatchConfig,Dr=0,Ws=null,Es=null,oi=0,ja=0,Pu=Sa(0),Os=0,Ah=null,Mc=0,Gf=0,a0=0,oh=null,ha=null,A0=0,Du=1/0,$o=null,$f=!1,o0=null,Ll=null,qf=!1,Ql=null,Wf=0,lh=0,l0=null,Yf=-1,Jf=0;function Xi(){return(Dr&6)!==0?Rr():Yf!==-1?Yf:Yf=Rr()}function Pl(a){return(a.mode&1)===0?1:(Dr&2)!==0&&oi!==0?oi&-oi:Hn.transition!==null?(Jf===0&&(Jf=qa()),Jf):(a=pr,a!==0||(a=window.event,a=a===void 0?16:tA(a.type)),a)}function QA(a,o,h,g){if(50<lh)throw lh=0,l0=null,Error(t(185));Ya(a,h,g),((Dr&2)===0||a!==Ws)&&(a===Ws&&((Dr&2)===0&&(Gf|=h),Os===4&&Dl(a,oi)),fa(a,g),h===1&&Dr===0&&(o.mode&1)===0&&(Du=Rr()+500,Pc&&R()))}function fa(a,o){var h=a.callbackNode;Zr(a,o);var g=$a(a,a===Ws?oi:0);if(g===0)h!==null&&Va(h),a.callbackNode=null,a.callbackPriority=0;else if(o=g&-g,a.callbackPriority!==o){if(h!=null&&Va(h),o===1)a.tag===0?k(Hw.bind(null,a)):w(Hw.bind(null,a)),Dg(function(){(Dr&6)===0&&R()}),h=null;else{switch(Ki(g)){case 1:h=Ka;break;case 4:h=is;break;case 16:h=Hs;break;case 536870912:h=WA;break;default:h=Hs}h=Yw(h,Mw.bind(null,a))}a.callbackPriority=o,a.callbackNode=h}}function Mw(a,o){if(Yf=-1,Jf=0,(Dr&6)!==0)throw Error(t(327));var h=a.callbackNode;if(Ru()&&a.callbackNode!==h)return null;var g=$a(a,a===Ws?oi:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||o)o=Xf(a,g);else{o=g;var B=Dr;Dr|=2;var j=Kw();(Ws!==a||oi!==o)&&($o=null,Du=Rr()+500,Vc(a,o));do try{l_();break}catch(Ne){Vw(a,Ne)}while(!0);Qr(),zf.current=j,Dr=B,Es!==null?o=0:(Ws=null,oi=0,o=Os)}if(o!==0){if(o===2&&(B=On(a),B!==0&&(g=B,o=c0(a,B))),o===1)throw h=Ah,Vc(a,0),Dl(a,g),fa(a,Rr()),h;if(o===6)Dl(a,g);else{if(B=a.current.alternate,(g&30)===0&&!A_(B)&&(o=Xf(a,g),o===2&&(j=On(a),j!==0&&(g=j,o=c0(a,j))),o===1))throw h=Ah,Vc(a,0),Dl(a,g),fa(a,Rr()),h;switch(a.finishedWork=B,a.finishedLanes=g,o){case 0:case 1:throw Error(t(345));case 2:Kc(a,ha,$o);break;case 3:if(Dl(a,g),(g&130023424)===g&&(o=A0+500-Rr(),10<o)){if($a(a,0)!==0)break;if(B=a.suspendedLanes,(B&g)!==g){Xi(),a.pingedLanes|=a.suspendedLanes&B;break}a.timeoutHandle=Yd(Kc.bind(null,a,ha,$o),o);break}Kc(a,ha,$o);break;case 4:if(Dl(a,g),(g&4194240)===g)break;for(o=a.eventTimes,B=-1;0<g;){var te=31-dn(g);j=1<<te,te=o[te],te>B&&(B=te),g&=~j}if(g=B,g=Rr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*a_(g/1960))-g,10<g){a.timeoutHandle=Yd(Kc.bind(null,a,ha,$o),g);break}Kc(a,ha,$o);break;case 5:Kc(a,ha,$o);break;default:throw Error(t(329))}}}return fa(a,Rr()),a.callbackNode===h?Mw.bind(null,a):null}function c0(a,o){var h=oh;return a.current.memoizedState.isDehydrated&&(Vc(a,o).flags|=256),a=Xf(a,o),a!==2&&(o=ha,ha=h,o!==null&&u0(o)),a}function u0(a){ha===null?ha=a:ha.push.apply(ha,a)}function A_(a){for(var o=a;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var B=h[g],j=B.getSnapshot;B=B.value;try{if(!Tn(j(),B))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Dl(a,o){for(o&=~a0,o&=~Gf,a.suspendedLanes|=o,a.pingedLanes&=~o,a=a.expirationTimes;0<o;){var h=31-dn(o),g=1<<h;a[h]=-1,o&=~g}}function Hw(a){if((Dr&6)!==0)throw Error(t(327));Ru();var o=$a(a,0);if((o&1)===0)return fa(a,Rr()),null;var h=Xf(a,o);if(a.tag!==0&&h===2){var g=On(a);g!==0&&(o=g,h=c0(a,g))}if(h===1)throw h=Ah,Vc(a,0),Dl(a,o),fa(a,Rr()),h;if(h===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=o,Kc(a,ha,$o),fa(a,Rr()),null}function d0(a,o){var h=Dr;Dr|=1;try{return a(o)}finally{Dr=h,Dr===0&&(Du=Rr()+500,Pc&&R())}}function Hc(a){Ql!==null&&Ql.tag===0&&(Dr&6)===0&&Ru();var o=Dr;Dr|=1;var h=cA.transition,g=pr;try{if(cA.transition=null,pr=1,a)return a()}finally{pr=g,cA.transition=h,Dr=o,(Dr&6)===0&&R()}}function h0(){ja=Pu.current,Kr(Pu)}function Vc(a,o){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,kf(h)),Es!==null)for(h=Es.return;h!==null;){var g=h;switch(Xe(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Eu();break;case 3:AA(),Kr(Ii),Kr(Ds),rh();break;case 5:eh(g);break;case 4:AA();break;case 13:Kr(cn);break;case 19:Kr(cn);break;case 10:pn(g.type._context);break;case 22:case 23:h0()}h=h.return}if(Ws=a,Es=a=Rl(a.current,null),oi=ja=o,Os=0,Ah=null,a0=Gf=Mc=0,ha=oh=null,tn!==null){for(o=0;o<tn.length;o++)if(h=tn[o],g=h.interleaved,g!==null){h.interleaved=null;var B=g.next,j=h.pending;if(j!==null){var te=j.next;j.next=B,g.next=te}h.pending=g}tn=null}return a}function Vw(a,o){do{var h=Es;try{if(Qr(),Iu.current=Rf,Fl){for(var g=mn.memoizedState;g!==null;){var B=g.queue;B!==null&&(B.pending=null),g=g.next}Fl=!1}if(oA=0,Gn=Zn=mn=null,FA=!1,Tl=0,i0.current=null,h===null||h.return===null){Os=1,Ah=o,Es=null;break}e:{var j=a,te=h.return,Ne=h,Oe=o;if(o=oi,Ne.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var nt=Oe,xt=Ne,Et=xt.tag;if((xt.mode&1)===0&&(Et===0||Et===11||Et===15)){var wt=xt.alternate;wt?(xt.updateQueue=wt.updateQueue,xt.memoizedState=wt.memoizedState,xt.lanes=wt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var Tt=fw(te);if(Tt!==null){Tt.flags&=-257,pw(Tt,te,Ne,j,o),Tt.mode&1&&hw(j,nt,o),o=Tt,Oe=nt;var Ht=o.updateQueue;if(Ht===null){var Kt=new Set;Kt.add(Oe),o.updateQueue=Kt}else Ht.add(Oe);break e}else{if((o&1)===0){hw(j,nt,o),f0();break e}Oe=Error(t(426))}}else if(ut&&Ne.mode&1){var ls=fw(te);if(ls!==null){(ls.flags&65536)===0&&(ls.flags|=256),pw(ls,te,Ne,j,o),kt(Lu(Oe,Ne));break e}}j=Oe=Lu(Oe,Ne),Os!==4&&(Os=2),oh===null?oh=[j]:oh.push(j),j=te;do{switch(j.tag){case 3:j.flags|=65536,o&=-o,j.lanes|=o;var Je=uw(j,Oe,o);nn(j,Je);break e;case 1:Ne=Oe;var Ve=j.type,Ze=j.stateNode;if((j.flags&128)===0&&(typeof Ve.getDerivedStateFromError=="function"||Ze!==null&&typeof Ze.componentDidCatch=="function"&&(Ll===null||!Ll.has(Ze)))){j.flags|=65536,o&=-o,j.lanes|=o;var St=dw(j,Ne,o);nn(j,St);break e}}j=j.return}while(j!==null)}Gw(h)}catch($t){o=$t,Es===h&&h!==null&&(Es=h=h.return);continue}break}while(!0)}function Kw(){var a=zf.current;return zf.current=Rf,a===null?Rf:a}function f0(){(Os===0||Os===3||Os===2)&&(Os=4),Ws===null||(Mc&268435455)===0&&(Gf&268435455)===0||Dl(Ws,oi)}function Xf(a,o){var h=Dr;Dr|=2;var g=Kw();(Ws!==a||oi!==o)&&($o=null,Vc(a,o));do try{o_();break}catch(B){Vw(a,B)}while(!0);if(Qr(),Dr=h,zf.current=g,Es!==null)throw Error(t(261));return Ws=null,oi=0,Os}function o_(){for(;Es!==null;)zw(Es)}function l_(){for(;Es!==null&&!vA();)zw(Es)}function zw(a){var o=Ww(a.alternate,a,ja);a.memoizedProps=a.pendingProps,o===null?Gw(a):Es=o,i0.current=null}function Gw(a){var o=a;do{var h=o.alternate;if(a=o.return,(o.flags&32768)===0){if(h=t_(h,o,ja),h!==null){Es=h;return}}else{if(h=r_(h,o),h!==null){h.flags&=32767,Es=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Os=6,Es=null;return}}if(o=o.sibling,o!==null){Es=o;return}Es=o=a}while(o!==null);Os===0&&(Os=5)}function Kc(a,o,h){var g=pr,B=cA.transition;try{cA.transition=null,pr=1,c_(a,o,h,g)}finally{cA.transition=B,pr=g}return null}function c_(a,o,h,g){do Ru();while(Ql!==null);if((Dr&6)!==0)throw Error(t(327));h=a.finishedWork;var B=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var j=h.lanes|h.childLanes;if(vr(a,j),a===Ws&&(Es=Ws=null,oi=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||qf||(qf=!0,Yw(Hs,function(){return Ru(),null})),j=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||j){j=cA.transition,cA.transition=null;var te=pr;pr=1;var Ne=Dr;Dr|=4,i0.current=null,s_(a,h),Qw(h,a),_c(Mo),Za=!!Lc,Mo=Lc=null,a.current=h,i_(h),Ec(),Dr=Ne,pr=te,cA.transition=j}else a.current=h;if(qf&&(qf=!1,Ql=a,Wf=B),j=a.pendingLanes,j===0&&(Ll=null),ko(h.stateNode),fa(a,Rr()),o!==null)for(g=a.onRecoverableError,h=0;h<o.length;h++)B=o[h],g(B.value,{componentStack:B.stack,digest:B.digest});if($f)throw $f=!1,a=o0,o0=null,a;return(Wf&1)!==0&&a.tag!==0&&Ru(),j=a.pendingLanes,(j&1)!==0?a===l0?lh++:(lh=0,l0=a):lh=0,R(),null}function Ru(){if(Ql!==null){var a=Ki(Wf),o=cA.transition,h=pr;try{if(cA.transition=null,pr=16>a?16:a,Ql===null)var g=!1;else{if(a=Ql,Ql=null,Wf=0,(Dr&6)!==0)throw Error(t(331));var B=Dr;for(Dr|=4,Dt=a.current;Dt!==null;){var j=Dt,te=j.child;if((Dt.flags&16)!==0){var Ne=j.deletions;if(Ne!==null){for(var Oe=0;Oe<Ne.length;Oe++){var nt=Ne[Oe];for(Dt=nt;Dt!==null;){var xt=Dt;switch(xt.tag){case 0:case 11:case 15:ah(8,xt,j)}var Et=xt.child;if(Et!==null)Et.return=xt,Dt=Et;else for(;Dt!==null;){xt=Dt;var wt=xt.sibling,Tt=xt.return;if(Fw(xt),xt===nt){Dt=null;break}if(wt!==null){wt.return=Tt,Dt=wt;break}Dt=Tt}}}var Ht=j.alternate;if(Ht!==null){var Kt=Ht.child;if(Kt!==null){Ht.child=null;do{var ls=Kt.sibling;Kt.sibling=null,Kt=ls}while(Kt!==null)}}Dt=j}}if((j.subtreeFlags&2064)!==0&&te!==null)te.return=j,Dt=te;else e:for(;Dt!==null;){if(j=Dt,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:ah(9,j,j.return)}var Je=j.sibling;if(Je!==null){Je.return=j.return,Dt=Je;break e}Dt=j.return}}var Ve=a.current;for(Dt=Ve;Dt!==null;){te=Dt;var Ze=te.child;if((te.subtreeFlags&2064)!==0&&Ze!==null)Ze.return=te,Dt=Ze;else e:for(te=Ve;Dt!==null;){if(Ne=Dt,(Ne.flags&2048)!==0)try{switch(Ne.tag){case 0:case 11:case 15:Kf(9,Ne)}}catch($t){es(Ne,Ne.return,$t)}if(Ne===te){Dt=null;break e}var St=Ne.sibling;if(St!==null){St.return=Ne.return,Dt=St;break e}Dt=Ne.return}}if(Dr=B,R(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(za,a)}catch{}g=!0}return g}finally{pr=h,cA.transition=o}}return!1}function $w(a,o,h){o=Lu(h,o),o=uw(a,o,1),a=Kn(a,o,1),o=Xi(),a!==null&&(Ya(a,1,o),fa(a,o))}function es(a,o,h){if(a.tag===3)$w(a,a,h);else for(;o!==null;){if(o.tag===3){$w(o,a,h);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ll===null||!Ll.has(g))){a=Lu(h,a),a=dw(o,a,1),o=Kn(o,a,1),a=Xi(),o!==null&&(Ya(o,1,a),fa(o,a));break}}o=o.return}}function u_(a,o,h){var g=a.pingCache;g!==null&&g.delete(o),o=Xi(),a.pingedLanes|=a.suspendedLanes&h,Ws===a&&(oi&h)===h&&(Os===4||Os===3&&(oi&130023424)===oi&&500>Rr()-A0?Vc(a,0):a0|=h),fa(a,o)}function qw(a,o){o===0&&((a.mode&1)===0?o=1:(o=ri,ri<<=1,(ri&130023424)===0&&(ri=4194304)));var h=Xi();a=rn(a,o),a!==null&&(Ya(a,o,h),fa(a,h))}function d_(a){var o=a.memoizedState,h=0;o!==null&&(h=o.retryLane),qw(a,h)}function h_(a,o){var h=0;switch(a.tag){case 13:var g=a.stateNode,B=a.memoizedState;B!==null&&(h=B.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(o),qw(a,h)}var Ww;Ww=function(a,o,h){if(a!==null)if(a.memoizedProps!==o.pendingProps||Ii.current)da=!0;else{if((a.lanes&h)===0&&(o.flags&128)===0)return da=!1,e_(a,o,h);da=(a.flags&131072)!==0}else da=!1,ut&&(o.flags&1048576)!==0&&$e(o,Ae,o.index);switch(o.lanes=0,o.tag){case 2:var g=o.type;Hf(a,o),a=o.pendingProps;var B=Sl(o,Ds.current);Ln(o,h),B=Dc(null,o,g,a,B,h);var j=lA();return o.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,_i(g)?(j=!0,Ko(o)):j=!1,o.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,Rs(o),B.updater=Of,o.stateNode=B,B._reactInternals=o,zg(o,g,a,h),o=Wg(null,o,g,!0,j,h)):(o.tag=0,ut&&j&&ot(o),Ji(null,o,B,h),o=o.child),o;case 16:g=o.elementType;e:{switch(Hf(a,o),a=o.pendingProps,B=g._init,g=B(g._payload),o.type=g,B=o.tag=p_(g),a=UA(g,a),B){case 0:o=qg(null,o,g,a,h);break e;case 1:o=xw(null,o,g,a,h);break e;case 11:o=mw(null,o,g,a,h);break e;case 14:o=gw(null,o,g,UA(g.type,a),h);break e}throw Error(t(306,g,""))}return o;case 0:return g=o.type,B=o.pendingProps,B=o.elementType===g?B:UA(g,B),qg(a,o,g,B,h);case 1:return g=o.type,B=o.pendingProps,B=o.elementType===g?B:UA(g,B),xw(a,o,g,B,h);case 3:e:{if(bw(o),a===null)throw Error(t(387));g=o.pendingProps,j=o.memoizedState,B=j.element,Ni(a,o),qs(o,g,null,h);var te=o.memoizedState;if(g=te.element,j.isDehydrated)if(j={element:g,isDehydrated:!1,cache:te.cache,pendingSuspenseBoundaries:te.pendingSuspenseBoundaries,transitions:te.transitions},o.updateQueue.baseState=j,o.memoizedState=j,o.flags&256){B=Lu(Error(t(423)),o),o=Bw(a,o,g,h,B);break e}else if(g!==B){B=Lu(Error(t(424)),o),o=Bw(a,o,g,h,B);break e}else for(at=ai(o.stateNode.containerInfo.firstChild),st=o,ut=!0,ht=null,h=Cn(o,null,g,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Qt(),g===B){o=Go(a,o,h);break e}Ji(a,o,g,h)}o=o.child}return o;case 5:return jf(o),a===null&&Rt(o),g=o.type,B=o.pendingProps,j=a!==null?a.memoizedProps:null,te=B.children,Wd(g,B)?te=null:j!==null&&Wd(g,j)&&(o.flags|=32),ww(a,o),Ji(a,o,te,h),o.child;case 6:return a===null&&Rt(o),null;case 13:return Cw(a,o,h);case 4:return kl(o,o.stateNode.containerInfo),g=o.pendingProps,a===null?o.child=Jn(o,null,g,h):Ji(a,o,g,h),o.child;case 11:return g=o.type,B=o.pendingProps,B=o.elementType===g?B:UA(g,B),mw(a,o,g,B,h);case 7:return Ji(a,o,o.pendingProps,h),o.child;case 8:return Ji(a,o,o.pendingProps.children,h),o.child;case 12:return Ji(a,o,o.pendingProps.children,h),o.child;case 10:e:{if(g=o.type._context,B=o.pendingProps,j=o.memoizedProps,te=B.value,qr(As,g._currentValue),g._currentValue=te,j!==null)if(Tn(j.value,te)){if(j.children===B.children&&!Ii.current){o=Go(a,o,h);break e}}else for(j=o.child,j!==null&&(j.return=o);j!==null;){var Ne=j.dependencies;if(Ne!==null){te=j.child;for(var Oe=Ne.firstContext;Oe!==null;){if(Oe.context===g){if(j.tag===1){Oe=Vn(-1,h&-h),Oe.tag=2;var nt=j.updateQueue;if(nt!==null){nt=nt.shared;var xt=nt.pending;xt===null?Oe.next=Oe:(Oe.next=xt.next,xt.next=Oe),nt.pending=Oe}}j.lanes|=h,Oe=j.alternate,Oe!==null&&(Oe.lanes|=h),Pr(j.return,h,o),Ne.lanes|=h;break}Oe=Oe.next}}else if(j.tag===10)te=j.type===o.type?null:j.child;else if(j.tag===18){if(te=j.return,te===null)throw Error(t(341));te.lanes|=h,Ne=te.alternate,Ne!==null&&(Ne.lanes|=h),Pr(te,h,o),te=j.sibling}else te=j.child;if(te!==null)te.return=j;else for(te=j;te!==null;){if(te===o){te=null;break}if(j=te.sibling,j!==null){j.return=te.return,te=j;break}te=te.return}j=te}Ji(a,o,B.children,h),o=o.child}return o;case 9:return B=o.type,g=o.pendingProps.children,Ln(o,h),B=Qn(B),g=g(B),o.flags|=1,Ji(a,o,g,h),o.child;case 14:return g=o.type,B=UA(g,o.pendingProps),B=UA(g.type,B),gw(a,o,g,B,h);case 15:return yw(a,o,o.type,o.pendingProps,h);case 17:return g=o.type,B=o.pendingProps,B=o.elementType===g?B:UA(g,B),Hf(a,o),o.tag=1,_i(g)?(a=!0,Ko(o)):a=!1,Ln(o,h),lw(o,g,B),zg(o,g,B,h),Wg(null,o,g,!0,a,h);case 19:return Iw(a,o,h);case 22:return vw(a,o,h)}throw Error(t(156,o.tag))};function Yw(a,o){return Ba(a,o)}function f_(a,o,h,g){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uA(a,o,h,g){return new f_(a,o,h,g)}function p0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function p_(a){if(typeof a=="function")return p0(a)?1:0;if(a!=null){if(a=a.$$typeof,a===L)return 11;if(a===ge)return 14}return 2}function Rl(a,o){var h=a.alternate;return h===null?(h=uA(a.tag,o,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=o,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,o=a.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Zf(a,o,h,g,B,j){var te=2;if(g=a,typeof a=="function")p0(a)&&(te=1);else if(typeof a=="string")te=5;else e:switch(a){case O:return zc(h.children,B,j,o);case Q:te=8,B|=8;break;case U:return a=uA(12,h,o,B|2),a.elementType=U,a.lanes=j,a;case F:return a=uA(13,h,o,B),a.elementType=F,a.lanes=j,a;case ee:return a=uA(19,h,o,B),a.elementType=ee,a.lanes=j,a;case fe:return ep(h,B,j,o);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case V:te=10;break e;case I:te=9;break e;case L:te=11;break e;case ge:te=14;break e;case ue:te=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return o=uA(te,h,o,B),o.elementType=a,o.type=g,o.lanes=j,o}function zc(a,o,h,g){return a=uA(7,a,g,o),a.lanes=h,a}function ep(a,o,h,g){return a=uA(22,a,g,o),a.elementType=fe,a.lanes=h,a.stateNode={isHidden:!1},a}function m0(a,o,h){return a=uA(6,a,null,o),a.lanes=h,a}function g0(a,o,h){return o=uA(4,a.children!==null?a.children:[],a.key,o),o.lanes=h,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}function m_(a,o,h,g,B){this.tag=o,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wa(0),this.expirationTimes=Wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.identifierPrefix=g,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function y0(a,o,h,g,B,j,te,Ne,Oe){return a=new m_(a,o,h,Ne,Oe),o===1?(o=1,j===!0&&(o|=8)):o=0,j=uA(3,null,null,o),a.current=j,j.stateNode=a,j.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(j),a}function g_(a,o,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:g==null?null:""+g,children:a,containerInfo:o,implementation:h}}function Jw(a){if(!a)return oo;a=a._reactInternals;e:{if(Rn(a)!==a||a.tag!==1)throw Error(t(170));var o=a;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(_i(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(a.tag===1){var h=a.type;if(_i(h))return Zd(a,h,o)}return o}function Xw(a,o,h,g,B,j,te,Ne,Oe){return a=y0(h,g,!0,a,B,j,te,Ne,Oe),a.context=Jw(null),h=a.current,g=Xi(),B=Pl(h),j=Vn(g,B),j.callback=o??null,Kn(h,j,B),a.current.lanes=B,Ya(a,B,g),fa(a,g),a}function tp(a,o,h,g){var B=o.current,j=Xi(),te=Pl(B);return h=Jw(h),o.context===null?o.context=h:o.pendingContext=h,o=Vn(j,te),o.payload={element:a},g=g===void 0?null:g,g!==null&&(o.callback=g),a=Kn(B,o,te),a!==null&&(QA(a,B,te,j),$s(a,B,te)),te}function rp(a){return a=a.current,a.child?(a.child.tag===5,a.child.stateNode):null}function Zw(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<o?h:o}}function v0(a,o){Zw(a,o),(a=a.alternate)&&Zw(a,o)}function y_(){return null}var ex=typeof reportError=="function"?reportError:function(a){console.error(a)};function w0(a){this._internalRoot=a}np.prototype.render=w0.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(t(409));tp(a,o,null,null)},np.prototype.unmount=w0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Hc(function(){tp(null,a,null,null)}),o[zs]=null}};function np(a){this._internalRoot=a}np.prototype.unstable_scheduleHydration=function(a){if(a){var o=pl();a={blockedOn:null,target:a,priority:o};for(var h=0;h<na.length&&o!==0&&o<na[h].priority;h++);na.splice(h,0,a),h===0&&gl(a)}};function x0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function sp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function tx(){}function v_(a,o,h,g,B){if(B){if(typeof g=="function"){var j=g;g=function(){var nt=rp(te);j.call(nt)}}var te=Xw(o,g,a,0,null,!1,!1,"",tx);return a._reactRootContainer=te,a[zs]=te.current,Ro(a.nodeType===8?a.parentNode:a),Hc(),te}for(;B=a.lastChild;)a.removeChild(B);if(typeof g=="function"){var Ne=g;g=function(){var nt=rp(Oe);Ne.call(nt)}}var Oe=y0(a,0,!1,null,null,!1,!1,"",tx);return a._reactRootContainer=Oe,a[zs]=Oe.current,Ro(a.nodeType===8?a.parentNode:a),Hc(function(){tp(o,Oe,h,g)}),Oe}function ip(a,o,h,g,B){var j=h._reactRootContainer;if(j){var te=j;if(typeof B=="function"){var Ne=B;B=function(){var Oe=rp(te);Ne.call(Oe)}}tp(o,te,a,B)}else te=v_(h,o,a,B,g);return rp(te)}Ja=function(a){switch(a.tag){case 3:var o=a.stateNode;if(o.current.memoizedState.isDehydrated){var h=Vi(o.pendingLanes);h!==0&&(Ca(o,h|1),fa(o,Rr()),(Dr&6)===0&&(Du=Rr()+500,R()))}break;case 13:Hc(function(){var g=rn(a,1);if(g!==null){var B=Xi();QA(g,a,1,B)}}),v0(a,1)}},YA=function(a){if(a.tag===13){var o=rn(a,134217728);if(o!==null){var h=Xi();QA(o,a,134217728,h)}v0(a,134217728)}},fl=function(a){if(a.tag===13){var o=Pl(a),h=rn(a,o);if(h!==null){var g=Xi();QA(h,a,o,g)}v0(a,o)}},pl=function(){return pr},JA=function(a,o){var h=pr;try{return pr=a,o()}finally{pr=h}},rt=function(a,o,h){switch(o){case"input":if(ct(a,h),o=h.name,h.type==="radio"&&o!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var g=h[o];if(g!==a&&g.form===a.form){var B=Qc(g);if(!B)throw Error(t(90));tt(g),ct(g,B)}}}break;case"textarea":pe(a,h);break;case"select":o=h.value,o!=null&&Qe(a,!!h.multiple,o,!1)}},Ar=d0,vn=Hc;var w_={usingClientEntryPoint:!1,Events:[Nl,Ho,Qc,_t,Wt,d0]},ch={findFiberByHostInstance:Ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x_={bundleType:ch.bundleType,version:ch.version,rendererPackageName:ch.rendererPackageName,rendererConfig:ch.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=vi(a),a===null?null:a.stateNode},findFiberByHostInstance:ch.findFiberByHostInstance||y_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ap.isDisabled&&ap.supportsFiber)try{za=ap.inject(x_),Vs=ap}catch{}}return pa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w_,pa.createPortal=function(a,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x0(o))throw Error(t(200));return g_(a,o,null,h)},pa.createRoot=function(a,o){if(!x0(a))throw Error(t(299));var h=!1,g="",B=ex;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onRecoverableError!==void 0&&(B=o.onRecoverableError)),o=y0(a,1,!1,null,null,h,!1,g,B),a[zs]=o.current,Ro(a.nodeType===8?a.parentNode:a),new w0(o)},pa.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=vi(o),a=a===null?null:a.stateNode,a},pa.flushSync=function(a){return Hc(a)},pa.hydrate=function(a,o,h){if(!sp(o))throw Error(t(200));return ip(null,a,o,!0,h)},pa.hydrateRoot=function(a,o,h){if(!x0(a))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,B=!1,j="",te=ex;if(h!=null&&(h.unstable_strictMode===!0&&(B=!0),h.identifierPrefix!==void 0&&(j=h.identifierPrefix),h.onRecoverableError!==void 0&&(te=h.onRecoverableError)),o=Xw(o,null,a,1,h??null,B,!1,j,te),a[zs]=o.current,Ro(a),g)for(a=0;a<g.length;a++)h=g[a],B=h._getVersion,B=B(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,B]:o.mutableSourceEagerHydrationData.push(h,B);return new np(o)},pa.render=function(a,o,h){if(!sp(o))throw Error(t(200));return ip(null,a,o,!1,h)},pa.unmountComponentAtNode=function(a){if(!sp(a))throw Error(t(40));return a._reactRootContainer?(Hc(function(){ip(null,null,a,!1,function(){a._reactRootContainer=null,a[zs]=null})}),!0):!1},pa.unstable_batchedUpdates=d0,pa.unstable_renderSubtreeIntoContainer=function(a,o,h,g){if(!sp(h))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return ip(a,o,h,!1,g)},pa.version="18.3.1-next-f1338f8080-20240426",pa}var lx;function i5(){if(lx)return C0.exports;lx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),C0.exports=F_(),C0.exports}var cx;function T_(){if(cx)return Ap;cx=1;var r=i5();return Ap.createRoot=r.createRoot,Ap.hydrateRoot=r.hydrateRoot,Ap}var U_=T_();i5();function zh(){return zh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},zh.apply(this,arguments)}var Jl;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Jl||(Jl={}));const ux="popstate";function j_(r){r===void 0&&(r={});function e(n,s){let{pathname:i,search:l,hash:c}=n.location;return ky("",{pathname:i,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:mm(s)}return Q_(e,t,null,r)}function ss(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Hv(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L_(){return Math.random().toString(36).substr(2,8)}function dx(r,e){return{usr:r.state,key:r.key,idx:e}}function ky(r,e,t,n){return t===void 0&&(t=null),zh({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof e=="string"?kd(e):e,{state:t,key:e&&e.key||n||L_()})}function mm(r){let{pathname:e="/",search:t="",hash:n=""}=r;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function kd(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substr(t),r=r.substr(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substr(n),r=r.substr(0,n)),r&&(e.pathname=r)}return e}function Q_(r,e,t,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,c=Jl.Pop,u=null,d=f();d==null&&(d=0,l.replaceState(zh({},l.state,{idx:d}),""));function f(){return(l.state||{idx:null}).idx}function v(){c=Jl.Pop;let E=f(),_=E==null?null:E-d;d=E,u&&u({action:c,location:N.location,delta:_})}function x(E,_){c=Jl.Push;let P=ky(N.location,E,_);d=f()+1;let H=dx(P,d),D=N.createHref(P);try{l.pushState(H,"",D)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;s.location.assign(D)}i&&u&&u({action:c,location:N.location,delta:1})}function y(E,_){c=Jl.Replace;let P=ky(N.location,E,_);d=f();let H=dx(P,d),D=N.createHref(P);l.replaceState(H,"",D),i&&u&&u({action:c,location:N.location,delta:0})}function C(E){let _=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof E=="string"?E:mm(E);return P=P.replace(/ $/,"%20"),ss(_,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,_)}let N={get action(){return c},get location(){return r(s,l)},listen(E){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ux,v),u=E,()=>{s.removeEventListener(ux,v),u=null}},createHref(E){return e(s,E)},createURL:C,encodeLocation(E){let _=C(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:y,go(E){return l.go(E)}};return N}var hx;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(hx||(hx={}));function P_(r,e,t){return t===void 0&&(t="/"),D_(r,e,t)}function D_(r,e,t,n){let s=typeof e=="string"?kd(e):e,i=pd(s.pathname||"/",t);if(i==null)return null;let l=a5(r);R_(l);let c=null;for(let u=0;c==null&&u<l.length;++u){let d=Y_(i);c=q_(l[u],d)}return c}function a5(r,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let s=(i,l,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};u.relativePath.startsWith("/")&&(ss(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=nc([n,u.relativePath]),f=t.concat(u);i.children&&i.children.length>0&&(ss(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),a5(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:G_(d,i.index),routesMeta:f})};return r.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,l);else for(let u of A5(i.path))s(i,l,u)}),e}function A5(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=A5(n.join("/")),c=[];return c.push(...l.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...l),c.map(u=>r.startsWith("/")&&u===""?"/":u)}function R_(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:$_(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const O_=/^:[\w-]+$/,M_=3,H_=2,V_=1,K_=10,z_=-2,fx=r=>r==="*";function G_(r,e){let t=r.split("/"),n=t.length;return t.some(fx)&&(n+=z_),e&&(n+=H_),t.filter(s=>!fx(s)).reduce((s,i)=>s+(O_.test(i)?M_:i===""?V_:K_),n)}function $_(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function q_(r,e,t){let{routesMeta:n}=r,s={},i="/",l=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",v=Fy({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),x=u.route;if(!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:nc([i,v.pathname]),pathnameBase:tN(nc([i,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(i=nc([i,v.pathnameBase]))}return l}function Fy(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=W_(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((d,f,v)=>{let{paramName:x,isOptional:y}=f;if(x==="*"){let N=c[v]||"";l=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const C=c[v];return y&&!C?d[x]=void 0:d[x]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:r}}function W_(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Hv(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Y_(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hv(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),r}}function pd(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}const J_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,X_=r=>J_.test(r);function Z_(r,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?kd(r):r,i;if(t)if(X_(t))i=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),Hv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+t))}t.startsWith("/")?i=px(t.substring(1),"/"):i=px(t,e)}else i=e;return{pathname:i,search:rN(n),hash:nN(s)}}function px(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function _0(r,e,t,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eN(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function o5(r,e){let t=eN(r);return e?t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function l5(r,e,t,n){n===void 0&&(n=!1);let s;typeof r=="string"?s=kd(r):(s=zh({},r),ss(!s.pathname||!s.pathname.includes("?"),_0("?","pathname","search",s)),ss(!s.pathname||!s.pathname.includes("#"),_0("#","pathname","hash",s)),ss(!s.search||!s.search.includes("#"),_0("#","search","hash",s)));let i=r===""||s.pathname==="",l=i?"/":s.pathname,c;if(l==null)c=t;else{let v=e.length-1;if(!n&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}c=v>=0?e[v]:"/"}let u=Z_(s,c),d=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const nc=r=>r.join("/").replace(/\/\/+/g,"/"),tN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),rN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,nN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function sN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const c5=["post","put","patch","delete"];new Set(c5);const iN=["get",...c5];new Set(iN);function Gh(){return Gh=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Gh.apply(this,arguments)}const Jm=Ee.createContext(null),u5=Ee.createContext(null),vc=Ee.createContext(null),Xm=Ee.createContext(null),wc=Ee.createContext({outlet:null,matches:[],isDataRoute:!1}),d5=Ee.createContext(null);function aN(r,e){let{relative:t}=e===void 0?{}:e;cf()||ss(!1);let{basename:n,navigator:s}=Ee.useContext(vc),{hash:i,pathname:l,search:c}=Zm(r,{relative:t}),u=l;return n!=="/"&&(u=l==="/"?n:nc([n,l])),s.createHref({pathname:u,search:c,hash:i})}function cf(){return Ee.useContext(Xm)!=null}function Bo(){return cf()||ss(!1),Ee.useContext(Xm).location}function h5(r){Ee.useContext(vc).static||Ee.useLayoutEffect(r)}function xc(){let{isDataRoute:r}=Ee.useContext(wc);return r?xN():AN()}function AN(){cf()||ss(!1);let r=Ee.useContext(Jm),{basename:e,future:t,navigator:n}=Ee.useContext(vc),{matches:s}=Ee.useContext(wc),{pathname:i}=Bo(),l=JSON.stringify(o5(s,t.v7_relativeSplatPath)),c=Ee.useRef(!1);return h5(()=>{c.current=!0}),Ee.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let v=l5(d,JSON.parse(l),i,f.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:nc([e,v.pathname])),(f.replace?n.replace:n.push)(v,f.state,f)},[e,n,l,i,r])}const oN=Ee.createContext(null);function lN(r){let e=Ee.useContext(wc).outlet;return e&&Ee.createElement(oN.Provider,{value:r},e)}function Zm(r,e){let{relative:t}=e===void 0?{}:e,{future:n}=Ee.useContext(vc),{matches:s}=Ee.useContext(wc),{pathname:i}=Bo(),l=JSON.stringify(o5(s,n.v7_relativeSplatPath));return Ee.useMemo(()=>l5(r,JSON.parse(l),i,t==="path"),[r,l,i,t])}function cN(r,e){return uN(r,e)}function uN(r,e,t,n){cf()||ss(!1);let{navigator:s}=Ee.useContext(vc),{matches:i}=Ee.useContext(wc),l=i[i.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=Bo(),f;if(e){var v;let E=typeof e=="string"?kd(e):e;u==="/"||(v=E.pathname)!=null&&v.startsWith(u)||ss(!1),f=E}else f=d;let x=f.pathname||"/",y=x;if(u!=="/"){let E=u.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(E.length).join("/")}let C=P_(r,{pathname:y}),N=mN(C&&C.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:nc([u,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?u:nc([u,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,t,n);return e&&N?Ee.createElement(Xm.Provider,{value:{location:Gh({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Jl.Pop}},N):N}function dN(){let r=wN(),e=sN(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ee.createElement(Ee.Fragment,null,Ee.createElement("h2",null,"Unexpected Application Error!"),Ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?Ee.createElement("pre",{style:s},t):null,null)}const hN=Ee.createElement(dN,null);class fN extends Ee.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Ee.createElement(wc.Provider,{value:this.props.routeContext},Ee.createElement(d5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pN(r){let{routeContext:e,match:t,children:n}=r,s=Ee.useContext(Jm);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Ee.createElement(wc.Provider,{value:e},n)}function mN(r,e,t,n){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),r==null){var i;if(!t)return null;if(t.errors)r=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=(s=t)==null?void 0:s.errors;if(c!=null){let f=l.findIndex(v=>v.route.id&&c?.[v.route.id]!==void 0);f>=0||ss(!1),l=l.slice(0,Math.min(l.length,f+1))}let u=!1,d=-1;if(t&&n&&n.v7_partialHydration)for(let f=0;f<l.length;f++){let v=l[f];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=f),v.route.id){let{loaderData:x,errors:y}=t,C=v.route.loader&&x[v.route.id]===void 0&&(!y||y[v.route.id]===void 0);if(v.route.lazy||C){u=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((f,v,x)=>{let y,C=!1,N=null,E=null;t&&(y=c&&v.route.id?c[v.route.id]:void 0,N=v.route.errorElement||hN,u&&(d<0&&x===0?(bN("route-fallback"),C=!0,E=null):d===x&&(C=!0,E=v.route.hydrateFallbackElement||null)));let _=e.concat(l.slice(0,x+1)),P=()=>{let H;return y?H=N:C?H=E:v.route.Component?H=Ee.createElement(v.route.Component,null):v.route.element?H=v.route.element:H=f,Ee.createElement(pN,{match:v,routeContext:{outlet:f,matches:_,isDataRoute:t!=null},children:H})};return t&&(v.route.ErrorBoundary||v.route.errorElement||x===0)?Ee.createElement(fN,{location:t.location,revalidation:t.revalidation,component:N,error:y,children:P(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):P()},null)}var f5=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(f5||{}),p5=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(p5||{});function gN(r){let e=Ee.useContext(Jm);return e||ss(!1),e}function yN(r){let e=Ee.useContext(u5);return e||ss(!1),e}function vN(r){let e=Ee.useContext(wc);return e||ss(!1),e}function m5(r){let e=vN(),t=e.matches[e.matches.length-1];return t.route.id||ss(!1),t.route.id}function wN(){var r;let e=Ee.useContext(d5),t=yN(),n=m5();return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function xN(){let{router:r}=gN(f5.UseNavigateStable),e=m5(p5.UseNavigateStable),t=Ee.useRef(!1);return h5(()=>{t.current=!0}),Ee.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?r.navigate(s):r.navigate(s,Gh({fromRouteId:e},i)))},[r,e])}const mx={};function bN(r,e,t){mx[r]||(mx[r]=!0)}function BN(r,e){r?.v7_startTransition,r?.v7_relativeSplatPath}function CN(r){return lN(r.context)}function Qa(r){ss(!1)}function EN(r){let{basename:e="/",children:t=null,location:n,navigationType:s=Jl.Pop,navigator:i,static:l=!1,future:c}=r;cf()&&ss(!1);let u=e.replace(/^\/*/,"/"),d=Ee.useMemo(()=>({basename:u,navigator:i,static:l,future:Gh({v7_relativeSplatPath:!1},c)}),[u,c,i,l]);typeof n=="string"&&(n=kd(n));let{pathname:f="/",search:v="",hash:x="",state:y=null,key:C="default"}=n,N=Ee.useMemo(()=>{let E=pd(f,u);return E==null?null:{location:{pathname:E,search:v,hash:x,state:y,key:C},navigationType:s}},[u,f,v,x,y,C,s]);return N==null?null:Ee.createElement(vc.Provider,{value:d},Ee.createElement(Xm.Provider,{children:t,value:N}))}function IN(r){let{children:e,location:t}=r;return cN(Ty(e),t)}new Promise(()=>{});function Ty(r,e){e===void 0&&(e=[]);let t=[];return Ee.Children.forEach(r,(n,s)=>{if(!Ee.isValidElement(n))return;let i=[...e,s];if(n.type===Ee.Fragment){t.push.apply(t,Ty(n.props.children,i));return}n.type!==Qa&&ss(!1),!n.props.index||!n.props.children||ss(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ty(n.props.children,i)),t.push(l)}),t}function gm(){return gm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},gm.apply(this,arguments)}function g5(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function _N(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function NN(r,e){return r.button===0&&(!e||e==="_self")&&!_N(r)}const SN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],kN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],FN="6";try{window.__reactRouterVersion=FN}catch{}const TN=Ee.createContext({isTransitioning:!1}),UN="startTransition",gx=N_[UN];function jN(r){let{basename:e,children:t,future:n,window:s}=r,i=Ee.useRef();i.current==null&&(i.current=j_({window:s,v5Compat:!0}));let l=i.current,[c,u]=Ee.useState({action:l.action,location:l.location}),{v7_startTransition:d}=n||{},f=Ee.useCallback(v=>{d&&gx?gx(()=>u(v)):u(v)},[u,d]);return Ee.useLayoutEffect(()=>l.listen(f),[l,f]),Ee.useEffect(()=>BN(n),[n]),Ee.createElement(EN,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:n})}const LN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PN=Ee.forwardRef(function(e,t){let{onClick:n,relative:s,reloadDocument:i,replace:l,state:c,target:u,to:d,preventScrollReset:f,viewTransition:v}=e,x=g5(e,SN),{basename:y}=Ee.useContext(vc),C,N=!1;if(typeof d=="string"&&QN.test(d)&&(C=d,LN))try{let H=new URL(window.location.href),D=d.startsWith("//")?new URL(H.protocol+d):new URL(d),J=pd(D.pathname,y);D.origin===H.origin&&J!=null?d=J+D.search+D.hash:N=!0}catch{}let E=aN(d,{relative:s}),_=ON(d,{replace:l,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:v});function P(H){n&&n(H),H.defaultPrevented||_(H)}return Ee.createElement("a",gm({},x,{href:C||E,onClick:N||i?n:P,ref:t,target:u}))}),DN=Ee.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:l=!1,style:c,to:u,viewTransition:d,children:f}=e,v=g5(e,kN),x=Zm(u,{relative:v.relative}),y=Bo(),C=Ee.useContext(u5),{navigator:N,basename:E}=Ee.useContext(vc),_=C!=null&&MN(x)&&d===!0,P=N.encodeLocation?N.encodeLocation(x).pathname:x.pathname,H=y.pathname,D=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;s||(H=H.toLowerCase(),D=D?D.toLowerCase():null,P=P.toLowerCase()),D&&E&&(D=pd(D,E)||D);const J=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let Z=H===P||!l&&H.startsWith(P)&&H.charAt(J)==="/",O=D!=null&&(D===P||!l&&D.startsWith(P)&&D.charAt(P.length)==="/"),Q={isActive:Z,isPending:O,isTransitioning:_},U=Z?n:void 0,V;typeof i=="function"?V=i(Q):V=[i,Z?"active":null,O?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let I=typeof c=="function"?c(Q):c;return Ee.createElement(PN,gm({},v,{"aria-current":U,className:V,ref:t,style:I,to:u,viewTransition:d}),typeof f=="function"?f(Q):f)});var Uy;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(Uy||(Uy={}));var yx;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(yx||(yx={}));function RN(r){let e=Ee.useContext(Jm);return e||ss(!1),e}function ON(r,e){let{target:t,replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:c}=e===void 0?{}:e,u=xc(),d=Bo(),f=Zm(r,{relative:l});return Ee.useCallback(v=>{if(NN(v,t)){v.preventDefault();let x=n!==void 0?n:mm(d)===mm(f);u(r,{replace:x,state:s,preventScrollReset:i,relative:l,viewTransition:c})}},[d,u,f,n,s,t,r,i,l,c])}function MN(r,e){e===void 0&&(e={});let t=Ee.useContext(TN);t==null&&ss(!1);let{basename:n}=RN(Uy.useViewTransitionState),s=Zm(r,{relative:e.relative});if(!t.isTransitioning)return!1;let i=pd(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=pd(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Fy(s.pathname,l)!=null||Fy(s.pathname,i)!=null}var vx={};const y5=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},HN=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=r[t++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=r[t++],l=r[t++],c=r[t++],u=((s&7)<<18|(i&63)<<12|(l&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=r[t++],l=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|l&63)}}return e.join("")},v5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const i=r[s],l=s+1<r.length,c=l?r[s+1]:0,u=s+2<r.length,d=u?r[s+2]:0,f=i>>2,v=(i&3)<<4|c>>4;let x=(c&15)<<2|d>>6,y=d&63;u||(y=64,l||(x=64)),n.push(t[f],t[v],t[x],t[y])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(y5(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):HN(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const i=t[r.charAt(s++)],c=s<r.length?t[r.charAt(s)]:0;++s;const d=s<r.length?t[r.charAt(s)]:64;++s;const v=s<r.length?t[r.charAt(s)]:64;if(++s,i==null||c==null||d==null||v==null)throw new VN;const x=i<<2|c>>4;if(n.push(x),d!==64){const y=c<<4&240|d>>2;if(n.push(y),v!==64){const C=d<<6&192|v;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class VN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KN=function(r){const e=y5(r);return v5.encodeByteArray(e,!0)},ym=function(r){return KN(r).replace(/\./g,"")},w5=function(r){try{return v5.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const GN=()=>zN().__FIREBASE_DEFAULTS__,$N=()=>{if(typeof process>"u"||typeof vx>"u")return;const r=vx.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},qN=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&w5(r[1]);return e&&JSON.parse(e)},eg=()=>{try{return GN()||$N()||qN()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},x5=r=>{var e,t;return(t=(e=eg())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},WN=r=>{const e=x5(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},b5=()=>{var r;return(r=eg())===null||r===void 0?void 0:r.config},B5=r=>{var e;return(e=eg())===null||e===void 0?void 0:e[`_${r}`]};class YN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function JN(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[ym(JSON.stringify(t)),ym(JSON.stringify(l)),""].join(".")}function Mi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mi())}function ZN(){var r;const e=(r=eg())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function rS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nS(){const r=Mi();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function sS(){return!ZN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iS(){try{return typeof indexedDB=="object"}catch{return!1}}function aS(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}const AS="FirebaseError";class dl extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=AS,Object.setPrototypeOf(this,dl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uf.prototype.create)}}class uf{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],l=i?oS(i,n):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new dl(s,c,n)}}function oS(r,e){return r.replace(lS,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const lS=/\{\$([^}]+)}/g;function cS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function vm(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const i=r[s],l=e[s];if(wx(i)&&wx(l)){if(!vm(i,l))return!1}else if(i!==l)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function wx(r){return r!==null&&typeof r=="object"}function df(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function vh(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function wh(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function uS(r,e){const t=new dS(r,e);return t.subscribe.bind(t)}class dS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");hS(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=N0),s.error===void 0&&(s.error=N0),s.complete===void 0&&(s.complete=N0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hS(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function N0(){}function ks(r){return r&&r._delegate?r._delegate:r}class iu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $c="[DEFAULT]";class fS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new YN;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mS(e))try{this.getOrInitializeService({instanceIdentifier:$c})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=$c){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$c){return this.instances.has(e)}getOptions(e=$c){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&l.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const l=this.instances.get(s);return l&&e(l,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:pS(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=$c){return this.component?this.component.multipleInstances?e:$c:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pS(r){return r===$c?void 0:r}function mS(r){return r.instantiationMode==="EAGER"}class gS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Sr;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Sr||(Sr={}));const yS={debug:Sr.DEBUG,verbose:Sr.VERBOSE,info:Sr.INFO,warn:Sr.WARN,error:Sr.ERROR,silent:Sr.SILENT},vS=Sr.INFO,wS={[Sr.DEBUG]:"log",[Sr.VERBOSE]:"log",[Sr.INFO]:"info",[Sr.WARN]:"warn",[Sr.ERROR]:"error"},xS=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=wS[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Vv=class{constructor(e){this.name=e,this._logLevel=vS,this._logHandler=xS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Sr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Sr.DEBUG,...e),this._logHandler(this,Sr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Sr.VERBOSE,...e),this._logHandler(this,Sr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Sr.INFO,...e),this._logHandler(this,Sr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Sr.WARN,...e),this._logHandler(this,Sr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Sr.ERROR,...e),this._logHandler(this,Sr.ERROR,...e)}};const bS=(r,e)=>e.some(t=>r instanceof t);let xx,bx;function BS(){return xx||(xx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CS(){return bx||(bx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C5=new WeakMap,jy=new WeakMap,E5=new WeakMap,S0=new WeakMap,Kv=new WeakMap;function ES(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",i),r.removeEventListener("error",l)},i=()=>{t(sc(r.result)),s()},l=()=>{n(r.error),s()};r.addEventListener("success",i),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&C5.set(t,r)}).catch(()=>{}),Kv.set(e,r),e}function IS(r){if(jy.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",l),r.removeEventListener("abort",l)},i=()=>{t(),s()},l=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",i),r.addEventListener("error",l),r.addEventListener("abort",l)});jy.set(r,e)}let Ly={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return jy.get(r);if(e==="objectStoreNames")return r.objectStoreNames||E5.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sc(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function _S(r){Ly=r(Ly)}function NS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(k0(this),e,...t);return E5.set(n,e.sort?e.sort():[e]),sc(n)}:CS().includes(r)?function(...e){return r.apply(k0(this),e),sc(C5.get(this))}:function(...e){return sc(r.apply(k0(this),e))}}function SS(r){return typeof r=="function"?NS(r):(r instanceof IDBTransaction&&IS(r),bS(r,BS())?new Proxy(r,Ly):r)}function sc(r){if(r instanceof IDBRequest)return ES(r);if(S0.has(r))return S0.get(r);const e=SS(r);return e!==r&&(S0.set(r,e),Kv.set(e,r)),e}const k0=r=>Kv.get(r);function kS(r,e,{blocked:t,upgrade:n,blocking:s,terminated:i}={}){const l=indexedDB.open(r,e),c=sc(l);return n&&l.addEventListener("upgradeneeded",u=>{n(sc(l.result),u.oldVersion,u.newVersion,sc(l.transaction),u)}),t&&l.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const FS=["get","getKey","getAll","getAllKeys","count"],TS=["put","add","delete","clear"],F0=new Map;function Bx(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(F0.get(e))return F0.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=TS.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||FS.includes(t)))return;const i=async function(l,...c){const u=this.transaction(l,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),s&&u.done]))[0]};return F0.set(e,i),i}_S(r=>({...r,get:(e,t,n)=>Bx(e,t)||r.get(e,t,n),has:(e,t)=>!!Bx(e,t)||r.has(e,t)}));class US{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jS(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function jS(r){const e=r.getComponent();return e?.type==="VERSION"}const Qy="@firebase/app",Cx="0.10.13";const Al=new Vv("@firebase/app"),LS="@firebase/app-compat",QS="@firebase/analytics-compat",PS="@firebase/analytics",DS="@firebase/app-check-compat",RS="@firebase/app-check",OS="@firebase/auth",MS="@firebase/auth-compat",HS="@firebase/database",VS="@firebase/data-connect",KS="@firebase/database-compat",zS="@firebase/functions",GS="@firebase/functions-compat",$S="@firebase/installations",qS="@firebase/installations-compat",WS="@firebase/messaging",YS="@firebase/messaging-compat",JS="@firebase/performance",XS="@firebase/performance-compat",ZS="@firebase/remote-config",ek="@firebase/remote-config-compat",tk="@firebase/storage",rk="@firebase/storage-compat",nk="@firebase/firestore",sk="@firebase/vertexai-preview",ik="@firebase/firestore-compat",ak="firebase",Ak="10.14.1";const Py="[DEFAULT]",ok={[Qy]:"fire-core",[LS]:"fire-core-compat",[PS]:"fire-analytics",[QS]:"fire-analytics-compat",[RS]:"fire-app-check",[DS]:"fire-app-check-compat",[OS]:"fire-auth",[MS]:"fire-auth-compat",[HS]:"fire-rtdb",[VS]:"fire-data-connect",[KS]:"fire-rtdb-compat",[zS]:"fire-fn",[GS]:"fire-fn-compat",[$S]:"fire-iid",[qS]:"fire-iid-compat",[WS]:"fire-fcm",[YS]:"fire-fcm-compat",[JS]:"fire-perf",[XS]:"fire-perf-compat",[ZS]:"fire-rc",[ek]:"fire-rc-compat",[tk]:"fire-gcs",[rk]:"fire-gcs-compat",[nk]:"fire-fst",[ik]:"fire-fst-compat",[sk]:"fire-vertex","fire-js":"fire-js",[ak]:"fire-js-all"};const wm=new Map,lk=new Map,Dy=new Map;function Ex(r,e){try{r.container.addComponent(e)}catch(t){Al.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function md(r){const e=r.name;if(Dy.has(e))return Al.debug(`There were multiple attempts to register component ${e}.`),!1;Dy.set(e,r);for(const t of wm.values())Ex(t,r);for(const t of lk.values())Ex(t,r);return!0}function zv(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function tl(r){return r.settings!==void 0}const ck={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ic=new uf("app","Firebase",ck);class uk{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new iu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ic.create("app-deleted",{appName:this._name})}}const Fd=Ak;function I5(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Py,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw ic.create("bad-app-name",{appName:String(s)});if(t||(t=b5()),!t)throw ic.create("no-options");const i=wm.get(s);if(i){if(vm(t,i.options)&&vm(n,i.config))return i;throw ic.create("duplicate-app",{appName:s})}const l=new gS(s);for(const u of Dy.values())l.addComponent(u);const c=new uk(t,n,l);return wm.set(s,c),c}function _5(r=Py){const e=wm.get(r);if(!e&&r===Py&&b5())return I5();if(!e)throw ic.create("no-app",{appName:r});return e}function ac(r,e,t){var n;let s=(n=ok[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const i=s.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Al.warn(c.join(" "));return}md(new iu(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const dk="firebase-heartbeat-database",hk=1,$h="firebase-heartbeat-store";let T0=null;function N5(){return T0||(T0=kS(dk,hk,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($h)}catch(t){console.warn(t)}}}}).catch(r=>{throw ic.create("idb-open",{originalErrorMessage:r.message})})),T0}async function fk(r){try{const t=(await N5()).transaction($h),n=await t.objectStore($h).get(S5(r));return await t.done,n}catch(e){if(e instanceof dl)Al.warn(e.message);else{const t=ic.create("idb-get",{originalErrorMessage:e?.message});Al.warn(t.message)}}}async function Ix(r,e){try{const n=(await N5()).transaction($h,"readwrite");await n.objectStore($h).put(e,S5(r)),await n.done}catch(t){if(t instanceof dl)Al.warn(t.message);else{const n=ic.create("idb-set",{originalErrorMessage:t?.message});Al.warn(n.message)}}}function S5(r){return`${r.name}!${r.options.appId}`}const pk=1024,mk=720*60*60*1e3;class gk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new vk(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=_x();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const c=new Date(l.date).valueOf();return Date.now()-c<=mk}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Al.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_x(),{heartbeatsToSend:n,unsentEntries:s}=yk(this._heartbeatsCache.heartbeats),i=ym(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Al.warn(t),""}}}function _x(){return new Date().toISOString().substring(0,10)}function yk(r,e=pk){const t=[];let n=r.slice();for(const s of r){const i=t.find(l=>l.agent===s.agent);if(i){if(i.dates.push(s.date),Nx(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Nx(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class vk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iS()?aS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fk(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ix(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ix(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Nx(r){return ym(JSON.stringify({version:2,heartbeats:r})).length}function wk(r){md(new iu("platform-logger",e=>new US(e),"PRIVATE")),md(new iu("heartbeat",e=>new gk(e),"PRIVATE")),ac(Qy,Cx,r),ac(Qy,Cx,"esm2017"),ac("fire-js","")}wk("");function Gv(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function k5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xk=k5,F5=new uf("auth","Firebase",k5());const xm=new Vv("@firebase/auth");function bk(r,...e){xm.logLevel<=Sr.WARN&&xm.warn(`Auth (${Fd}): ${r}`,...e)}function qp(r,...e){xm.logLevel<=Sr.ERROR&&xm.error(`Auth (${Fd}): ${r}`,...e)}function MA(r,...e){throw $v(r,...e)}function yo(r,...e){return $v(r,...e)}function T5(r,e,t){const n=Object.assign(Object.assign({},xk()),{[e]:t});return new uf("auth","Firebase",n).create(e,{appName:r.name})}function Ac(r){return T5(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $v(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return F5.create(r,...e)}function sr(r,e,...t){if(!r)throw $v(e,...t)}function rl(r){const e="INTERNAL ASSERTION FAILED: "+r;throw qp(e),new Error(e)}function ol(r,e){r||rl(e)}function Ry(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Bk(){return Sx()==="http:"||Sx()==="https:"}function Sx(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function Ck(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bk()||tS()||"connection"in navigator)?navigator.onLine:!0}function Ek(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class hf{constructor(e,t){this.shortDelay=e,this.longDelay=t,ol(t>e,"Short delay should be less than long delay!"),this.isMobile=XN()||rS()}get(){return Ck()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qv(r,e){ol(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class U5{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ik={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _k=new hf(3e4,6e4);function hu(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function bc(r,e,t,n,s={}){return j5(r,s,async()=>{let i={},l={};n&&(e==="GET"?l=n:i={body:JSON.stringify(n)});const c=df(Object.assign({key:r.config.apiKey},l)).slice(1),u=await r._getAdditionalHeaders();u["Content-Type"]="application/json",r.languageCode&&(u["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:e,headers:u},i);return eS()||(d.referrerPolicy="no-referrer"),U5.fetch()(L5(r,r.config.apiHost,t,c),d)})}async function j5(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},Ik),e);try{const s=new Sk(r),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await i.json();if("needConfirmation"in l)throw op(r,"account-exists-with-different-credential",l);if(i.ok&&!("errorMessage"in l))return l;{const c=i.ok?l.errorMessage:l.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw op(r,"credential-already-in-use",l);if(u==="EMAIL_EXISTS")throw op(r,"email-already-in-use",l);if(u==="USER_DISABLED")throw op(r,"user-disabled",l);const f=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw T5(r,f,d);MA(r,f)}}catch(s){if(s instanceof dl)throw s;MA(r,"network-request-failed",{message:String(s)})}}async function tg(r,e,t,n,s={}){const i=await bc(r,e,t,n,s);return"mfaPendingCredential"in i&&MA(r,"multi-factor-auth-required",{_serverResponse:i}),i}function L5(r,e,t,n){const s=`${e}${t}?${n}`;return r.config.emulator?qv(r.config,s):`${r.config.apiScheme}://${s}`}function Nk(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(yo(this.auth,"network-request-failed")),_k.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function op(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=yo(r,e,n);return s.customData._tokenResponse=t,s}function kx(r){return r!==void 0&&r.enterprise!==void 0}class kk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Nk(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Fk(r,e){return bc(r,"GET","/v2/recaptchaConfig",hu(r,e))}async function Tk(r,e){return bc(r,"POST","/v1/accounts:delete",e)}async function Q5(r,e){return bc(r,"POST","/v1/accounts:lookup",e)}function Th(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Uk(r,e=!1){const t=ks(r),n=await t.getIdToken(e),s=Wv(n);sr(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,l=i?.sign_in_provider;return{claims:s,token:n,authTime:Th(U0(s.auth_time)),issuedAtTime:Th(U0(s.iat)),expirationTime:Th(U0(s.exp)),signInProvider:l||null,signInSecondFactor:i?.sign_in_second_factor||null}}function U0(r){return Number(r)*1e3}function Wv(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return qp("JWT malformed, contained fewer than 3 sections"),null;try{const s=w5(t);return s?JSON.parse(s):(qp("Failed to decode base64 JWT payload"),null)}catch(s){return qp("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Fx(r){const e=Wv(r);return sr(e,"internal-error"),sr(typeof e.exp<"u","internal-error"),sr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qh(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof dl&&jk(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function jk({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Lk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Oy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Th(this.lastLoginAt),this.creationTime=Th(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bm(r){var e;const t=r.auth,n=await r.getIdToken(),s=await qh(r,Q5(t,{idToken:n}));sr(s?.users.length,t,"internal-error");const i=s.users[0];r._notifyReloadListener(i);const l=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?P5(i.providerUserInfo):[],c=Pk(r.providerData,l),u=r.isAnonymous,d=!(r.email&&i.passwordHash)&&!c?.length,f=u?d:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Oy(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(r,v)}async function Qk(r){const e=ks(r);await bm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Pk(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function P5(r){return r.map(e=>{var{providerId:t}=e,n=Gv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function Dk(r,e){const t=await j5(r,{},async()=>{const n=df({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=r.config,l=L5(r,s,"/v1/token",`key=${i}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",U5.fetch()(l,{method:"POST",headers:c,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rk(r,e){return bc(r,"POST","/v2/accounts:revokeToken",hu(r,e))}class id{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){sr(e.idToken,"internal-error"),sr(typeof e.idToken<"u","internal-error"),sr(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){sr(e.length!==0,"internal-error");const t=Fx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(sr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:i}=await Dk(e,t);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:i}=t,l=new id;return n&&(sr(typeof n=="string","internal-error",{appName:e}),l.refreshToken=n),s&&(sr(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),i&&(sr(typeof i=="number","internal-error",{appName:e}),l.expirationTime=i),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new id,this.toJSON())}_performRefresh(){return rl("not implemented")}}function Ml(r,e){sr(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class nl{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,i=Gv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Lk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Oy(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await qh(this,this.stsTokenManager.getToken(this.auth,e));return sr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Uk(this,e)}reload(){return Qk(this)}_assign(e){this!==e&&(sr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new nl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){sr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tl(this.auth.app))return Promise.reject(Ac(this.auth));const e=await this.getIdToken();return await qh(this,Tk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,i,l,c,u,d,f;const v=(n=t.displayName)!==null&&n!==void 0?n:void 0,x=(s=t.email)!==null&&s!==void 0?s:void 0,y=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,C=(l=t.photoURL)!==null&&l!==void 0?l:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,E=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,_=(d=t.createdAt)!==null&&d!==void 0?d:void 0,P=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:H,emailVerified:D,isAnonymous:J,providerData:Z,stsTokenManager:O}=t;sr(H&&O,e,"internal-error");const Q=id.fromJSON(this.name,O);sr(typeof H=="string",e,"internal-error"),Ml(v,e.name),Ml(x,e.name),sr(typeof D=="boolean",e,"internal-error"),sr(typeof J=="boolean",e,"internal-error"),Ml(y,e.name),Ml(C,e.name),Ml(N,e.name),Ml(E,e.name),Ml(_,e.name),Ml(P,e.name);const U=new nl({uid:H,auth:e,email:x,emailVerified:D,displayName:v,isAnonymous:J,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:Q,createdAt:_,lastLoginAt:P});return Z&&Array.isArray(Z)&&(U.providerData=Z.map(V=>Object.assign({},V))),E&&(U._redirectEventId=E),U}static async _fromIdTokenResponse(e,t,n=!1){const s=new id;s.updateFromServerResponse(t);const i=new nl({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await bm(i),i}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];sr(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?P5(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!i?.length,c=new id;c.updateFromIdToken(n);const u=new nl({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Oy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(u,d),u}}const Tx=new Map;function sl(r){ol(r instanceof Function,"Expected a class definition");let e=Tx.get(r);return e?(ol(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Tx.set(r,e),e)}class D5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}D5.type="NONE";const Ux=D5;function Wp(r,e,t){return`firebase:${r}:${e}:${t}`}class ad{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Wp(this.userKey,s.apiKey,i),this.fullPersistenceKey=Wp("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ad(sl(Ux),e,n);const s=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||sl(Ux);const l=Wp(n,e.config.apiKey,e.name);let c=null;for(const d of t)try{const f=await d._get(l);if(f){const v=nl._fromJSON(e,f);d!==i&&(c=v),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ad(i,e,n):(i=u[0],c&&await i._set(l,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==i)try{await d._remove(l)}catch{}})),new ad(i,e,n))}}function jx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K5(e))return"Blackberry";if(z5(e))return"Webos";if(O5(e))return"Safari";if((e.includes("chrome/")||M5(e))&&!e.includes("edge/"))return"Chrome";if(V5(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function R5(r=Mi()){return/firefox\//i.test(r)}function O5(r=Mi()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M5(r=Mi()){return/crios\//i.test(r)}function H5(r=Mi()){return/iemobile/i.test(r)}function V5(r=Mi()){return/android/i.test(r)}function K5(r=Mi()){return/blackberry/i.test(r)}function z5(r=Mi()){return/webos/i.test(r)}function Yv(r=Mi()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Ok(r=Mi()){var e;return Yv(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Mk(){return nS()&&document.documentMode===10}function G5(r=Mi()){return Yv(r)||V5(r)||z5(r)||K5(r)||/windows phone/i.test(r)||H5(r)}function $5(r,e=[]){let t;switch(r){case"Browser":t=jx(Mi());break;case"Worker":t=`${jx(Mi())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fd}/${n}`}class Hk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((l,c)=>{try{const u=e(i);l(u)}catch(u){c(u)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function Vk(r,e={}){return bc(r,"GET","/v2/passwordPolicy",hu(r,e))}const Kk=6;class zk{constructor(e){var t,n,s,i;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:Kk,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,i,l,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(l=u.containsNumericCharacter)!==null&&l!==void 0?l:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Gk{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lx(this),this.idTokenSubscription=new Lx(this),this.beforeStateQueue=new Hk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sl(t)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await ad.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Q5(this,{idToken:e}),n=await nl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tl(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=s?._redirectEventId,u=await this.tryRedirectSignIn(e);(!l||l===c)&&u?.user&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return sr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ek()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tl(this.app))return Promise.reject(Ac(this));const t=e?ks(e):null;return t&&sr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&sr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tl(this.app)?Promise.reject(Ac(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tl(this.app)?Promise.reject(Ac(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Vk(this),t=new zk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uf("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await Rk(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sl(e)||this._popupRedirectResolver;sr(t,this,"argument-error"),this.redirectPersistenceManager=await ad.create(this,[sl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(sr(c,this,"internal-error"),c.then(()=>{l||i(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,n,s);return()=>{l=!0,u()}}else{const u=e.addObserver(t);return()=>{l=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return sr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&bk(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Td(r){return ks(r)}class Lx{constructor(e){this.auth=e,this.observer=null,this.addObserver=uS(t=>this.observer=t)}get next(){return sr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $k(r){rg=r}function q5(r){return rg.loadJS(r)}function qk(){return rg.recaptchaEnterpriseScript}function Wk(){return rg.gapiScript}function Yk(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const Jk="recaptcha-enterprise",Xk="NO_RECAPTCHA";class Zk{constructor(e){this.type=Jk,this.auth=Td(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(l,c)=>{Fk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new kk(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,l(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,l,c){const u=window.grecaptcha;kx(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{l(d)}).catch(()=>{l(Xk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,l)=>{n(this.auth).then(c=>{if(!t&&kx(window.grecaptcha))s(c,i,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let u=qk();u.length!==0&&(u+=c),q5(u).then(()=>{s(c,i,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function Qx(r,e,t,n=!1){const s=new Zk(r);let i;try{i=await s.verify(t)}catch{i=await s.verify(t,!0)}const l=Object.assign({},e);return n?Object.assign(l,{captchaResp:i}):Object.assign(l,{captchaResponse:i}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Px(r,e,t,n){var s;if(!((s=r._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Qx(r,e,t,t==="getOobCode");return n(r,i)}else return n(r,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qx(r,e,t,t==="getOobCode");return n(r,l)}else return Promise.reject(i)})}function eF(r,e){const t=zv(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(vm(i,e??{}))return s;MA(s,"already-initialized")}return t.initialize({options:e})}function tF(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(sl);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function rF(r,e,t){const n=Td(r);sr(n._canInitEmulator,n,"emulator-config-failed"),sr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=W5(e),{host:l,port:c}=nF(e),u=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${l}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:l,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),sF()}function W5(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function nF(r){const e=W5(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:Dx(n.substr(i.length+1))}}else{const[i,l]=n.split(":");return{host:i,port:Dx(l)}}}function Dx(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function sF(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Jv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rl("not implemented")}_getIdTokenResponse(e){return rl("not implemented")}_linkToIdToken(e,t){return rl("not implemented")}_getReauthenticationResolver(e){return rl("not implemented")}}async function iF(r,e){return bc(r,"POST","/v1/accounts:signUp",e)}async function aF(r,e){return tg(r,"POST","/v1/accounts:signInWithPassword",hu(r,e))}async function AF(r,e){return tg(r,"POST","/v1/accounts:signInWithEmailLink",hu(r,e))}async function oF(r,e){return tg(r,"POST","/v1/accounts:signInWithEmailLink",hu(r,e))}class Wh extends Jv{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Wh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Wh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Px(e,t,"signInWithPassword",aF);case"emailLink":return AF(e,{email:this._email,oobCode:this._password});default:MA(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Px(e,n,"signUpPassword",iF);case"emailLink":return oF(e,{idToken:t,email:this._email,oobCode:this._password});default:MA(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ad(r,e){return tg(r,"POST","/v1/accounts:signInWithIdp",hu(r,e))}const lF="http://localhost";class au extends Jv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new au(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):MA("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,i=Gv(t,["providerId","signInMethod"]);if(!n||!s)return null;const l=new au(n,s);return l.idToken=i.idToken||void 0,l.accessToken=i.accessToken||void 0,l.secret=i.secret,l.nonce=i.nonce,l.pendingToken=i.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ad(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ad(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ad(e,t)}buildRequest(){const e={requestUri:lF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=df(t)}return e}}function cF(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uF(r){const e=vh(wh(r)).link,t=e?vh(wh(e)).deep_link_id:null,n=vh(wh(r)).deep_link_id;return(n?vh(wh(n)).link:null)||n||t||e||r}class Xv{constructor(e){var t,n,s,i,l,c;const u=vh(wh(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,f=(n=u.oobCode)!==null&&n!==void 0?n:null,v=cF((s=u.mode)!==null&&s!==void 0?s:null);sr(d&&f&&v,"argument-error"),this.apiKey=d,this.operation=v,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(l=u.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=uF(e);try{return new Xv(t)}catch{return null}}}class Ud{constructor(){this.providerId=Ud.PROVIDER_ID}static credential(e,t){return Wh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Xv.parseLink(t);return sr(n,"argument-error"),Wh._fromEmailAndCode(e,n.code,n.tenantId)}}Ud.PROVIDER_ID="password";Ud.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ud.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Y5{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ff extends Y5{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $l extends ff{constructor(){super("facebook.com")}static credential(e){return au._fromParams({providerId:$l.PROVIDER_ID,signInMethod:$l.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $l.credentialFromTaggedObject(e)}static credentialFromError(e){return $l.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $l.credential(e.oauthAccessToken)}catch{return null}}}$l.FACEBOOK_SIGN_IN_METHOD="facebook.com";$l.PROVIDER_ID="facebook.com";class ql extends ff{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return au._fromParams({providerId:ql.PROVIDER_ID,signInMethod:ql.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ql.credentialFromTaggedObject(e)}static credentialFromError(e){return ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return ql.credential(t,n)}catch{return null}}}ql.GOOGLE_SIGN_IN_METHOD="google.com";ql.PROVIDER_ID="google.com";class Wl extends ff{constructor(){super("github.com")}static credential(e){return au._fromParams({providerId:Wl.PROVIDER_ID,signInMethod:Wl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wl.credentialFromTaggedObject(e)}static credentialFromError(e){return Wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wl.credential(e.oauthAccessToken)}catch{return null}}}Wl.GITHUB_SIGN_IN_METHOD="github.com";Wl.PROVIDER_ID="github.com";class Yl extends ff{constructor(){super("twitter.com")}static credential(e,t){return au._fromParams({providerId:Yl.PROVIDER_ID,signInMethod:Yl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yl.credentialFromTaggedObject(e)}static credentialFromError(e){return Yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Yl.credential(t,n)}catch{return null}}}Yl.TWITTER_SIGN_IN_METHOD="twitter.com";Yl.PROVIDER_ID="twitter.com";class gd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const i=await nl._fromIdTokenResponse(e,n,s),l=Rx(n);return new gd({user:i,providerId:l,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=Rx(n);return new gd({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function Rx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Bm extends dl{constructor(e,t,n,s){var i;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Bm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new Bm(e,t,n,s)}}function J5(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Bm._fromErrorAndOperation(r,i,e,n):i})}async function dF(r,e,t=!1){const n=await qh(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return gd._forOperation(r,"link",n)}async function hF(r,e,t=!1){const{auth:n}=r;if(tl(n.app))return Promise.reject(Ac(n));const s="reauthenticate";try{const i=await qh(r,J5(n,s,e,r),t);sr(i.idToken,n,"internal-error");const l=Wv(i.idToken);sr(l,n,"internal-error");const{sub:c}=l;return sr(r.uid===c,n,"user-mismatch"),gd._forOperation(r,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&MA(n,"user-mismatch"),i}}async function X5(r,e,t=!1){if(tl(r.app))return Promise.reject(Ac(r));const n="signIn",s=await J5(r,n,e),i=await gd._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(i.user),i}async function fF(r,e){return X5(Td(r),e)}async function pF(r){const e=Td(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function mF(r,e,t){return tl(r.app)?Promise.reject(Ac(r)):fF(ks(r),Ud.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&pF(r),n})}function gF(r,e,t,n){return ks(r).onIdTokenChanged(e,t,n)}function yF(r,e,t){return ks(r).beforeAuthStateChanged(e,t)}function vF(r,e,t,n){return ks(r).onAuthStateChanged(e,t,n)}function wF(r){return ks(r).signOut()}const Cm="__sak";class Z5{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cm,"1"),this.storage.removeItem(Cm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const xF=1e3,bF=10;class eC extends Z5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,u)=>{this.notifyListeners(l,u)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(n);!t&&this.localCache[n]===l||this.notifyListeners(n,l)},i=this.storage.getItem(n);Mk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bF):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},xF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}eC.type="LOCAL";const BF=eC;class tC extends Z5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tC.type="SESSION";const rC=tC;function CF(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ng{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new ng(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:i}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const c=Array.from(l).map(async d=>d(t.origin,i)),u=await CF(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ng.receivers=[];function Zv(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class EF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,l;return new Promise((c,u)=>{const d=Zv("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},n);l={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===d)switch(x.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(x.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function vo(){return window}function IF(r){vo().location.href=r}function nC(){return typeof vo().WorkerGlobalScope<"u"&&typeof vo().importScripts=="function"}async function _F(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NF(){var r;return((r=navigator?.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function SF(){return nC()?self:null}const sC="firebaseLocalStorageDb",kF=1,Em="firebaseLocalStorage",iC="fbase_key";class pf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sg(r,e){return r.transaction([Em],e?"readwrite":"readonly").objectStore(Em)}function FF(){const r=indexedDB.deleteDatabase(sC);return new pf(r).toPromise()}function My(){const r=indexedDB.open(sC,kF);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Em,{keyPath:iC})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Em)?e(n):(n.close(),await FF(),e(await My()))})})}async function Ox(r,e,t){const n=sg(r,!0).put({[iC]:e,value:t});return new pf(n).toPromise()}async function TF(r,e){const t=sg(r,!1).get(e),n=await new pf(t).toPromise();return n===void 0?null:n.value}function Mx(r,e){const t=sg(r,!0).delete(e);return new pf(t).toPromise()}const UF=800,jF=3;class aC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await My(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>jF)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ng._getInstance(SF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _F(),!this.activeServiceWorker)return;this.sender=new EF(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await My();return await Ox(e,Cm,"1"),await Mx(e,Cm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ox(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>TF(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=sg(s,!1).getAll();return new pf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aC.type="LOCAL";const LF=aC;new hf(3e4,6e4);function QF(r,e){return e?sl(e):(sr(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class e1 extends Jv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ad(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ad(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ad(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PF(r){return X5(r.auth,new e1(r),r.bypassAuthState)}function DF(r){const{auth:e,user:t}=r;return sr(t,e,"internal-error"),hF(t,new e1(r),r.bypassAuthState)}async function RF(r){const{auth:e,user:t}=r;return sr(t,e,"internal-error"),dF(t,new e1(r),r.bypassAuthState)}class AC{constructor(e,t,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:i,error:l,type:c}=e;if(l){this.reject(l);return}const u={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PF;case"linkViaPopup":case"linkViaRedirect":return RF;case"reauthViaPopup":case"reauthViaRedirect":return DF;default:MA(this.auth,"internal-error")}}resolve(e){ol(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ol(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const OF=new hf(2e3,1e4);class rd extends AC{constructor(e,t,n,s,i){super(e,t,s,i),this.provider=n,this.authWindow=null,this.pollId=null,rd.currentPopupAction&&rd.currentPopupAction.cancel(),rd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return sr(e,this.auth,"internal-error"),e}async onExecution(){ol(this.filter.length===1,"Popup operations only handle one event");const e=Zv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OF.get())};e()}}rd.currentPopupAction=null;const MF="pendingRedirect",Yp=new Map;class HF extends AC{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Yp.get(this.auth._key());if(!e){try{const n=await VF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Yp.set(this.auth._key(),e)}return this.bypassAuthState||Yp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VF(r,e){const t=GF(e),n=zF(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function KF(r,e){Yp.set(r._key(),e)}function zF(r){return sl(r._redirectPersistence)}function GF(r){return Wp(MF,r.config.apiKey,r.name)}async function $F(r,e,t=!1){if(tl(r.app))return Promise.reject(Ac(r));const n=Td(r),s=QF(n,e),l=await new HF(n,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await n._persistUserIfCurrent(l.user),await n._setRedirectUser(null,e)),l}const qF=600*1e3;class WF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!oC(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(yo(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hx(e))}saveEventToCache(e){this.cachedEventUids.add(Hx(e)),this.lastProcessedEventTime=Date.now()}}function Hx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function oC({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function YF(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oC(r);default:return!1}}async function JF(r,e={}){return bc(r,"GET","/v1/projects",e)}const XF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZF=/^https?/;async function e3(r){if(r.config.emulator)return;const{authorizedDomains:e}=await JF(r);for(const t of e)try{if(t3(t))return}catch{}MA(r,"unauthorized-domain")}function t3(r){const e=Ry(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const l=new URL(r);return l.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===n}if(!ZF.test(t))return!1;if(XF.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}const r3=new hf(3e4,6e4);function Vx(){const r=vo().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function n3(r){return new Promise((e,t)=>{var n,s,i;function l(){Vx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vx(),t(yo(r,"network-request-failed"))},timeout:r3.get()})}if(!((s=(n=vo().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vo().gapi)===null||i===void 0)&&i.load)l();else{const c=Yk("iframefcb");return vo()[c]=()=>{gapi.load?l():t(yo(r,"network-request-failed"))},q5(`${Wk()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw Jp=null,e})}let Jp=null;function s3(r){return Jp=Jp||n3(r),Jp}const i3=new hf(5e3,15e3),a3="__/auth/iframe",A3="emulator/auth/iframe",o3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},l3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c3(r){const e=r.config;sr(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?qv(e,A3):`https://${r.config.authDomain}/${a3}`,n={apiKey:e.apiKey,appName:r.name,v:Fd},s=l3.get(r.config.apiHost);s&&(n.eid=s);const i=r._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${df(n).slice(1)}`}async function u3(r){const e=await s3(r),t=vo().gapi;return sr(t,r,"internal-error"),e.open({where:document.body,url:c3(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o3,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const l=yo(r,"network-request-failed"),c=vo().setTimeout(()=>{i(l)},i3.get());function u(){vo().clearTimeout(c),s(n)}n.ping(u).then(u,()=>{i(l)})}))}const d3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h3=500,f3=600,p3="_blank",m3="http://localhost";class Kx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function g3(r,e,t,n=h3,s=f3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const u=Object.assign(Object.assign({},d3),{width:n.toString(),height:s.toString(),top:i,left:l}),d=Mi().toLowerCase();t&&(c=M5(d)?p3:t),R5(d)&&(e=e||m3,u.scrollbars="yes");const f=Object.entries(u).reduce((x,[y,C])=>`${x}${y}=${C},`,"");if(Ok(d)&&c!=="_self")return y3(e||"",c),new Kx(null);const v=window.open(e||"",c,f);sr(v,r,"popup-blocked");try{v.focus()}catch{}return new Kx(v)}function y3(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const v3="__/auth/handler",w3="emulator/auth/handler",x3=encodeURIComponent("fac");async function zx(r,e,t,n,s,i){sr(r.config.authDomain,r,"auth-domain-config-required"),sr(r.config.apiKey,r,"invalid-api-key");const l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Fd,eventId:s};if(e instanceof Y5){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",cS(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,v]of Object.entries({}))l[f]=v}if(e instanceof ff){const f=e.getScopes().filter(v=>v!=="");f.length>0&&(l.scopes=f.join(","))}r.tenantId&&(l.tid=r.tenantId);const c=l;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await r._getAppCheckToken(),d=u?`#${x3}=${encodeURIComponent(u)}`:"";return`${b3(r)}?${df(c).slice(1)}${d}`}function b3({config:r}){return r.emulator?qv(r,w3):`https://${r.authDomain}/${v3}`}const j0="webStorageSupport";class B3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rC,this._completeRedirectFn=$F,this._overrideRedirectResult=KF}async _openPopup(e,t,n,s){var i;ol((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const l=await zx(e,t,n,Ry(),s);return g3(e,l,Zv())}async _openRedirect(e,t,n,s){await this._originValidation(e);const i=await zx(e,t,n,Ry(),s);return IF(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(ol(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await u3(e),n=new WF(e);return t.register("authEvent",s=>(sr(s?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(j0,{type:j0},s=>{var i;const l=(i=s?.[0])===null||i===void 0?void 0:i[j0];l!==void 0&&t(!!l),MA(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=e3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return G5()||O5()||Yv()}}const C3=B3;var Gx="@firebase/auth",$x="1.7.9";class E3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){sr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function I3(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _3(r){md(new iu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=n.options;sr(l&&!l.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:l,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$5(r)},d=new Gk(n,s,i,u);return tF(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),md(new iu("auth-internal",e=>{const t=Td(e.getProvider("auth").getImmediate());return(n=>new E3(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ac(Gx,$x,I3(r)),ac(Gx,$x,"esm2017")}const N3=300,S3=B5("authIdTokenMaxAge")||N3;let qx=null;const k3=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>S3)return;const s=t?.token;qx!==s&&(qx=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function F3(r=_5()){const e=zv(r,"auth");if(e.isInitialized())return e.getImmediate();const t=eF(r,{popupRedirectResolver:C3,persistence:[LF,BF,rC]}),n=B5("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const l=k3(i.toString());yF(t,l,()=>l(t.currentUser)),gF(t,c=>l(c))}}const s=x5("auth");return s&&rF(t,`http://${s}`),t}function T3(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}$k({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const i=yo("internal-error");i.customData=s,t(i)},n.type="text/javascript",n.charset="UTF-8",T3().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_3("Browser");var U3="firebase",j3="10.14.1";ac(U3,j3,"app");var Wx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var tu,lC;(function(){var r;function e(O,Q){function U(){}U.prototype=Q.prototype,O.D=Q.prototype,O.prototype=new U,O.prototype.constructor=O,O.C=function(V,I,L){for(var F=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)F[ee-2]=arguments[ee];return Q.prototype[I].apply(V,F)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(O,Q,U){U||(U=0);var V=Array(16);if(typeof Q=="string")for(var I=0;16>I;++I)V[I]=Q.charCodeAt(U++)|Q.charCodeAt(U++)<<8|Q.charCodeAt(U++)<<16|Q.charCodeAt(U++)<<24;else for(I=0;16>I;++I)V[I]=Q[U++]|Q[U++]<<8|Q[U++]<<16|Q[U++]<<24;Q=O.g[0],U=O.g[1],I=O.g[2];var L=O.g[3],F=Q+(L^U&(I^L))+V[0]+3614090360&4294967295;Q=U+(F<<7&4294967295|F>>>25),F=L+(I^Q&(U^I))+V[1]+3905402710&4294967295,L=Q+(F<<12&4294967295|F>>>20),F=I+(U^L&(Q^U))+V[2]+606105819&4294967295,I=L+(F<<17&4294967295|F>>>15),F=U+(Q^I&(L^Q))+V[3]+3250441966&4294967295,U=I+(F<<22&4294967295|F>>>10),F=Q+(L^U&(I^L))+V[4]+4118548399&4294967295,Q=U+(F<<7&4294967295|F>>>25),F=L+(I^Q&(U^I))+V[5]+1200080426&4294967295,L=Q+(F<<12&4294967295|F>>>20),F=I+(U^L&(Q^U))+V[6]+2821735955&4294967295,I=L+(F<<17&4294967295|F>>>15),F=U+(Q^I&(L^Q))+V[7]+4249261313&4294967295,U=I+(F<<22&4294967295|F>>>10),F=Q+(L^U&(I^L))+V[8]+1770035416&4294967295,Q=U+(F<<7&4294967295|F>>>25),F=L+(I^Q&(U^I))+V[9]+2336552879&4294967295,L=Q+(F<<12&4294967295|F>>>20),F=I+(U^L&(Q^U))+V[10]+4294925233&4294967295,I=L+(F<<17&4294967295|F>>>15),F=U+(Q^I&(L^Q))+V[11]+2304563134&4294967295,U=I+(F<<22&4294967295|F>>>10),F=Q+(L^U&(I^L))+V[12]+1804603682&4294967295,Q=U+(F<<7&4294967295|F>>>25),F=L+(I^Q&(U^I))+V[13]+4254626195&4294967295,L=Q+(F<<12&4294967295|F>>>20),F=I+(U^L&(Q^U))+V[14]+2792965006&4294967295,I=L+(F<<17&4294967295|F>>>15),F=U+(Q^I&(L^Q))+V[15]+1236535329&4294967295,U=I+(F<<22&4294967295|F>>>10),F=Q+(I^L&(U^I))+V[1]+4129170786&4294967295,Q=U+(F<<5&4294967295|F>>>27),F=L+(U^I&(Q^U))+V[6]+3225465664&4294967295,L=Q+(F<<9&4294967295|F>>>23),F=I+(Q^U&(L^Q))+V[11]+643717713&4294967295,I=L+(F<<14&4294967295|F>>>18),F=U+(L^Q&(I^L))+V[0]+3921069994&4294967295,U=I+(F<<20&4294967295|F>>>12),F=Q+(I^L&(U^I))+V[5]+3593408605&4294967295,Q=U+(F<<5&4294967295|F>>>27),F=L+(U^I&(Q^U))+V[10]+38016083&4294967295,L=Q+(F<<9&4294967295|F>>>23),F=I+(Q^U&(L^Q))+V[15]+3634488961&4294967295,I=L+(F<<14&4294967295|F>>>18),F=U+(L^Q&(I^L))+V[4]+3889429448&4294967295,U=I+(F<<20&4294967295|F>>>12),F=Q+(I^L&(U^I))+V[9]+568446438&4294967295,Q=U+(F<<5&4294967295|F>>>27),F=L+(U^I&(Q^U))+V[14]+3275163606&4294967295,L=Q+(F<<9&4294967295|F>>>23),F=I+(Q^U&(L^Q))+V[3]+4107603335&4294967295,I=L+(F<<14&4294967295|F>>>18),F=U+(L^Q&(I^L))+V[8]+1163531501&4294967295,U=I+(F<<20&4294967295|F>>>12),F=Q+(I^L&(U^I))+V[13]+2850285829&4294967295,Q=U+(F<<5&4294967295|F>>>27),F=L+(U^I&(Q^U))+V[2]+4243563512&4294967295,L=Q+(F<<9&4294967295|F>>>23),F=I+(Q^U&(L^Q))+V[7]+1735328473&4294967295,I=L+(F<<14&4294967295|F>>>18),F=U+(L^Q&(I^L))+V[12]+2368359562&4294967295,U=I+(F<<20&4294967295|F>>>12),F=Q+(U^I^L)+V[5]+4294588738&4294967295,Q=U+(F<<4&4294967295|F>>>28),F=L+(Q^U^I)+V[8]+2272392833&4294967295,L=Q+(F<<11&4294967295|F>>>21),F=I+(L^Q^U)+V[11]+1839030562&4294967295,I=L+(F<<16&4294967295|F>>>16),F=U+(I^L^Q)+V[14]+4259657740&4294967295,U=I+(F<<23&4294967295|F>>>9),F=Q+(U^I^L)+V[1]+2763975236&4294967295,Q=U+(F<<4&4294967295|F>>>28),F=L+(Q^U^I)+V[4]+1272893353&4294967295,L=Q+(F<<11&4294967295|F>>>21),F=I+(L^Q^U)+V[7]+4139469664&4294967295,I=L+(F<<16&4294967295|F>>>16),F=U+(I^L^Q)+V[10]+3200236656&4294967295,U=I+(F<<23&4294967295|F>>>9),F=Q+(U^I^L)+V[13]+681279174&4294967295,Q=U+(F<<4&4294967295|F>>>28),F=L+(Q^U^I)+V[0]+3936430074&4294967295,L=Q+(F<<11&4294967295|F>>>21),F=I+(L^Q^U)+V[3]+3572445317&4294967295,I=L+(F<<16&4294967295|F>>>16),F=U+(I^L^Q)+V[6]+76029189&4294967295,U=I+(F<<23&4294967295|F>>>9),F=Q+(U^I^L)+V[9]+3654602809&4294967295,Q=U+(F<<4&4294967295|F>>>28),F=L+(Q^U^I)+V[12]+3873151461&4294967295,L=Q+(F<<11&4294967295|F>>>21),F=I+(L^Q^U)+V[15]+530742520&4294967295,I=L+(F<<16&4294967295|F>>>16),F=U+(I^L^Q)+V[2]+3299628645&4294967295,U=I+(F<<23&4294967295|F>>>9),F=Q+(I^(U|~L))+V[0]+4096336452&4294967295,Q=U+(F<<6&4294967295|F>>>26),F=L+(U^(Q|~I))+V[7]+1126891415&4294967295,L=Q+(F<<10&4294967295|F>>>22),F=I+(Q^(L|~U))+V[14]+2878612391&4294967295,I=L+(F<<15&4294967295|F>>>17),F=U+(L^(I|~Q))+V[5]+4237533241&4294967295,U=I+(F<<21&4294967295|F>>>11),F=Q+(I^(U|~L))+V[12]+1700485571&4294967295,Q=U+(F<<6&4294967295|F>>>26),F=L+(U^(Q|~I))+V[3]+2399980690&4294967295,L=Q+(F<<10&4294967295|F>>>22),F=I+(Q^(L|~U))+V[10]+4293915773&4294967295,I=L+(F<<15&4294967295|F>>>17),F=U+(L^(I|~Q))+V[1]+2240044497&4294967295,U=I+(F<<21&4294967295|F>>>11),F=Q+(I^(U|~L))+V[8]+1873313359&4294967295,Q=U+(F<<6&4294967295|F>>>26),F=L+(U^(Q|~I))+V[15]+4264355552&4294967295,L=Q+(F<<10&4294967295|F>>>22),F=I+(Q^(L|~U))+V[6]+2734768916&4294967295,I=L+(F<<15&4294967295|F>>>17),F=U+(L^(I|~Q))+V[13]+1309151649&4294967295,U=I+(F<<21&4294967295|F>>>11),F=Q+(I^(U|~L))+V[4]+4149444226&4294967295,Q=U+(F<<6&4294967295|F>>>26),F=L+(U^(Q|~I))+V[11]+3174756917&4294967295,L=Q+(F<<10&4294967295|F>>>22),F=I+(Q^(L|~U))+V[2]+718787259&4294967295,I=L+(F<<15&4294967295|F>>>17),F=U+(L^(I|~Q))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+Q&4294967295,O.g[1]=O.g[1]+(I+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+I&4294967295,O.g[3]=O.g[3]+L&4294967295}n.prototype.u=function(O,Q){Q===void 0&&(Q=O.length);for(var U=Q-this.blockSize,V=this.B,I=this.h,L=0;L<Q;){if(I==0)for(;L<=U;)s(this,O,L),L+=this.blockSize;if(typeof O=="string"){for(;L<Q;)if(V[I++]=O.charCodeAt(L++),I==this.blockSize){s(this,V),I=0;break}}else for(;L<Q;)if(V[I++]=O[L++],I==this.blockSize){s(this,V),I=0;break}}this.h=I,this.o+=Q},n.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var Q=1;Q<O.length-8;++Q)O[Q]=0;var U=8*this.o;for(Q=O.length-8;Q<O.length;++Q)O[Q]=U&255,U/=256;for(this.u(O),O=Array(16),Q=U=0;4>Q;++Q)for(var V=0;32>V;V+=8)O[U++]=this.g[Q]>>>V&255;return O};function i(O,Q){var U=c;return Object.prototype.hasOwnProperty.call(U,O)?U[O]:U[O]=Q(O)}function l(O,Q){this.h=Q;for(var U=[],V=!0,I=O.length-1;0<=I;I--){var L=O[I]|0;V&&L==Q||(U[I]=L,V=!1)}this.g=U}var c={};function u(O){return-128<=O&&128>O?i(O,function(Q){return new l([Q|0],0>Q?-1:0)}):new l([O|0],0>O?-1:0)}function d(O){if(isNaN(O)||!isFinite(O))return v;if(0>O)return E(d(-O));for(var Q=[],U=1,V=0;O>=U;V++)Q[V]=O/U|0,U*=4294967296;return new l(Q,0)}function f(O,Q){if(O.length==0)throw Error("number format error: empty string");if(Q=Q||10,2>Q||36<Q)throw Error("radix out of range: "+Q);if(O.charAt(0)=="-")return E(f(O.substring(1),Q));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var U=d(Math.pow(Q,8)),V=v,I=0;I<O.length;I+=8){var L=Math.min(8,O.length-I),F=parseInt(O.substring(I,I+L),Q);8>L?(L=d(Math.pow(Q,L)),V=V.j(L).add(d(F))):(V=V.j(U),V=V.add(d(F)))}return V}var v=u(0),x=u(1),y=u(16777216);r=l.prototype,r.m=function(){if(N(this))return-E(this).m();for(var O=0,Q=1,U=0;U<this.g.length;U++){var V=this.i(U);O+=(0<=V?V:4294967296+V)*Q,Q*=4294967296}return O},r.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(C(this))return"0";if(N(this))return"-"+E(this).toString(O);for(var Q=d(Math.pow(O,6)),U=this,V="";;){var I=D(U,Q).g;U=_(U,I.j(Q));var L=((0<U.g.length?U.g[0]:U.h)>>>0).toString(O);if(U=I,C(U))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},r.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function C(O){if(O.h!=0)return!1;for(var Q=0;Q<O.g.length;Q++)if(O.g[Q]!=0)return!1;return!0}function N(O){return O.h==-1}r.l=function(O){return O=_(this,O),N(O)?-1:C(O)?0:1};function E(O){for(var Q=O.g.length,U=[],V=0;V<Q;V++)U[V]=~O.g[V];return new l(U,~O.h).add(x)}r.abs=function(){return N(this)?E(this):this},r.add=function(O){for(var Q=Math.max(this.g.length,O.g.length),U=[],V=0,I=0;I<=Q;I++){var L=V+(this.i(I)&65535)+(O.i(I)&65535),F=(L>>>16)+(this.i(I)>>>16)+(O.i(I)>>>16);V=F>>>16,L&=65535,F&=65535,U[I]=F<<16|L}return new l(U,U[U.length-1]&-2147483648?-1:0)};function _(O,Q){return O.add(E(Q))}r.j=function(O){if(C(this)||C(O))return v;if(N(this))return N(O)?E(this).j(E(O)):E(E(this).j(O));if(N(O))return E(this.j(E(O)));if(0>this.l(y)&&0>O.l(y))return d(this.m()*O.m());for(var Q=this.g.length+O.g.length,U=[],V=0;V<2*Q;V++)U[V]=0;for(V=0;V<this.g.length;V++)for(var I=0;I<O.g.length;I++){var L=this.i(V)>>>16,F=this.i(V)&65535,ee=O.i(I)>>>16,ge=O.i(I)&65535;U[2*V+2*I]+=F*ge,P(U,2*V+2*I),U[2*V+2*I+1]+=L*ge,P(U,2*V+2*I+1),U[2*V+2*I+1]+=F*ee,P(U,2*V+2*I+1),U[2*V+2*I+2]+=L*ee,P(U,2*V+2*I+2)}for(V=0;V<Q;V++)U[V]=U[2*V+1]<<16|U[2*V];for(V=Q;V<2*Q;V++)U[V]=0;return new l(U,0)};function P(O,Q){for(;(O[Q]&65535)!=O[Q];)O[Q+1]+=O[Q]>>>16,O[Q]&=65535,Q++}function H(O,Q){this.g=O,this.h=Q}function D(O,Q){if(C(Q))throw Error("division by zero");if(C(O))return new H(v,v);if(N(O))return Q=D(E(O),Q),new H(E(Q.g),E(Q.h));if(N(Q))return Q=D(O,E(Q)),new H(E(Q.g),Q.h);if(30<O.g.length){if(N(O)||N(Q))throw Error("slowDivide_ only works with positive integers.");for(var U=x,V=Q;0>=V.l(O);)U=J(U),V=J(V);var I=Z(U,1),L=Z(V,1);for(V=Z(V,2),U=Z(U,2);!C(V);){var F=L.add(V);0>=F.l(O)&&(I=I.add(U),L=F),V=Z(V,1),U=Z(U,1)}return Q=_(O,I.j(Q)),new H(I,Q)}for(I=v;0<=O.l(Q);){for(U=Math.max(1,Math.floor(O.m()/Q.m())),V=Math.ceil(Math.log(U)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=d(U),F=L.j(Q);N(F)||0<F.l(O);)U-=V,L=d(U),F=L.j(Q);C(L)&&(L=x),I=I.add(L),O=_(O,F)}return new H(I,O)}r.A=function(O){return D(this,O).h},r.and=function(O){for(var Q=Math.max(this.g.length,O.g.length),U=[],V=0;V<Q;V++)U[V]=this.i(V)&O.i(V);return new l(U,this.h&O.h)},r.or=function(O){for(var Q=Math.max(this.g.length,O.g.length),U=[],V=0;V<Q;V++)U[V]=this.i(V)|O.i(V);return new l(U,this.h|O.h)},r.xor=function(O){for(var Q=Math.max(this.g.length,O.g.length),U=[],V=0;V<Q;V++)U[V]=this.i(V)^O.i(V);return new l(U,this.h^O.h)};function J(O){for(var Q=O.g.length+1,U=[],V=0;V<Q;V++)U[V]=O.i(V)<<1|O.i(V-1)>>>31;return new l(U,O.h)}function Z(O,Q){var U=Q>>5;Q%=32;for(var V=O.g.length-U,I=[],L=0;L<V;L++)I[L]=0<Q?O.i(L+U)>>>Q|O.i(L+U+1)<<32-Q:O.i(L+U);return new l(I,O.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,lC=n,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=f,tu=l}).apply(typeof Wx<"u"?Wx:typeof self<"u"?self:typeof window<"u"?window:{});var lp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var cC,xh,uC,Xp,Hy,dC,hC,fC;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,T,M){return m==Array.prototype||m==Object.prototype||(m[T]=M.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof lp=="object"&&lp];for(var T=0;T<m.length;++T){var M=m[T];if(M&&M.Math==Math)return M}throw Error("Cannot find global object")}var n=t(this);function s(m,T){if(T)e:{var M=n;m=m.split(".");for(var ce=0;ce<m.length-1;ce++){var ze=m[ce];if(!(ze in M))break e;M=M[ze]}m=m[m.length-1],ce=M[m],T=T(ce),T!=ce&&T!=null&&e(M,m,{configurable:!0,writable:!0,value:T})}}function i(m,T){m instanceof String&&(m+="");var M=0,ce=!1,ze={next:function(){if(!ce&&M<m.length){var et=M++;return{value:T(et,m[et]),done:!1}}return ce=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}s("Array.prototype.values",function(m){return m||function(){return i(this,function(T,M){return M})}});var l=l||{},c=this||self;function u(m){var T=typeof m;return T=T!="object"?T:m?Array.isArray(m)?"array":T:"null",T=="array"||T=="object"&&typeof m.length=="number"}function d(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function f(m,T,M){return m.call.apply(m.bind,arguments)}function v(m,T,M){if(!m)throw Error();if(2<arguments.length){var ce=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ce),m.apply(T,ze)}}return function(){return m.apply(T,arguments)}}function x(m,T,M){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:v,x.apply(null,arguments)}function y(m,T){var M=Array.prototype.slice.call(arguments,1);return function(){var ce=M.slice();return ce.push.apply(ce,arguments),m.apply(this,ce)}}function C(m,T){function M(){}M.prototype=T.prototype,m.aa=T.prototype,m.prototype=new M,m.prototype.constructor=m,m.Qb=function(ce,ze,et){for(var Nt=Array(arguments.length-2),Br=2;Br<arguments.length;Br++)Nt[Br-2]=arguments[Br];return T.prototype[ze].apply(ce,Nt)}}function N(m){const T=m.length;if(0<T){const M=Array(T);for(let ce=0;ce<T;ce++)M[ce]=m[ce];return M}return[]}function E(m,T){for(let M=1;M<arguments.length;M++){const ce=arguments[M];if(u(ce)){const ze=m.length||0,et=ce.length||0;m.length=ze+et;for(let Nt=0;Nt<et;Nt++)m[ze+Nt]=ce[Nt]}else m.push(ce)}}class _{constructor(T,M){this.i=T,this.j=M,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function P(m){return/^[\s\xa0]*$/.test(m)}function H(){var m=c.navigator;return m&&(m=m.userAgent)?m:""}function D(m){return D[" "](m),m}D[" "]=function(){};var J=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function Z(m,T,M){for(const ce in m)T.call(M,m[ce],ce,m)}function O(m,T){for(const M in m)T.call(void 0,m[M],M,m)}function Q(m){const T={};for(const M in m)T[M]=m[M];return T}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(m,T){let M,ce;for(let ze=1;ze<arguments.length;ze++){ce=arguments[ze];for(M in ce)m[M]=ce[M];for(let et=0;et<U.length;et++)M=U[et],Object.prototype.hasOwnProperty.call(ce,M)&&(m[M]=ce[M])}}function I(m){var T=1;m=m.split(":");const M=[];for(;0<T&&m.length;)M.push(m.shift()),T--;return m.length&&M.push(m.join(":")),M}function L(m){c.setTimeout(()=>{throw m},0)}function F(){var m=$;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class ee{constructor(){this.h=this.g=null}add(T,M){const ce=ge.get();ce.set(T,M),this.h?this.h.next=ce:this.g=ce,this.h=ce}}var ge=new _(()=>new ue,m=>m.reset());class ue{constructor(){this.next=this.g=this.h=null}set(T,M){this.h=T,this.g=M,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ae=!1,$=new ee,me=()=>{const m=c.Promise.resolve(void 0);fe=()=>{m.then(z)}};var z=()=>{for(var m;m=F();){try{m.h.call(m.g)}catch(M){L(M)}var T=ge;T.j(m),100>T.h&&(T.h++,m.next=T.g,T.g=m)}ae=!1};function S(){this.s=this.s,this.C=this.C}S.prototype.s=!1,S.prototype.ma=function(){this.s||(this.s=!0,this.N())},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const M=()=>{};c.addEventListener("test",M,T),c.removeEventListener("test",M,T)}catch{}return m})();function G(m,T){if(K.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var M=this.type=m.type,ce=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget){if(J){e:{try{D(T.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(T=null)}}else M=="mouseover"?T=m.fromElement:M=="mouseout"&&(T=m.toElement);this.relatedTarget=T,ce?(this.clientX=ce.clientX!==void 0?ce.clientX:ce.pageX,this.clientY=ce.clientY!==void 0?ce.clientY:ce.pageY,this.screenX=ce.screenX||0,this.screenY=ce.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:oe[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&G.aa.h.call(this)}}C(G,K);var oe={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Le=0;function be(m,T,M,ce,ze){this.listener=m,this.proxy=null,this.src=T,this.type=M,this.capture=!!ce,this.ha=ze,this.key=++Le,this.da=this.fa=!1}function je(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ge(m){this.src=m,this.g={},this.h=0}Ge.prototype.add=function(m,T,M,ce,ze){var et=m.toString();m=this.g[et],m||(m=this.g[et]=[],this.h++);var Nt=it(m,T,ce,ze);return-1<Nt?(T=m[Nt],M||(T.fa=!1)):(T=new be(T,this.src,et,!!ce,ze),T.fa=M,m.push(T)),T};function tt(m,T){var M=T.type;if(M in m.g){var ce=m.g[M],ze=Array.prototype.indexOf.call(ce,T,void 0),et;(et=0<=ze)&&Array.prototype.splice.call(ce,ze,1),et&&(je(T),m.g[M].length==0&&(delete m.g[M],m.h--))}}function it(m,T,M,ce){for(var ze=0;ze<m.length;++ze){var et=m[ze];if(!et.da&&et.listener==T&&et.capture==!!M&&et.ha==ce)return ze}return-1}var It="closure_lm_"+(1e6*Math.random()|0),le={};function ft(m,T,M,ce,ze){if(Array.isArray(T)){for(var et=0;et<T.length;et++)ft(m,T[et],M,ce,ze);return null}return M=Ie(M),m&&m[ye]?m.K(T,M,d(ce)?!!ce.capture:!1,ze):ct(m,T,M,!1,ce,ze)}function ct(m,T,M,ce,ze,et){if(!T)throw Error("Invalid event type");var Nt=d(ze)?!!ze.capture:!!ze,Br=ne(m);if(Br||(m[It]=Br=new Ge(m)),M=Br.add(T,M,ce,Nt,et),M.proxy)return M;if(ce=pt(),M.proxy=ce,ce.src=m,ce.listener=M,m.addEventListener)Y||(ze=Nt),ze===void 0&&(ze=!1),m.addEventListener(T.toString(),ce,ze);else if(m.attachEvent)m.attachEvent(Qe(T.toString()),ce);else if(m.addListener&&m.removeListener)m.addListener(ce);else throw Error("addEventListener and attachEvent are unavailable.");return M}function pt(){function m(M){return T.call(m.src,m.listener,M)}const T=X;return m}function he(m,T,M,ce,ze){if(Array.isArray(T))for(var et=0;et<T.length;et++)he(m,T[et],M,ce,ze);else ce=d(ce)?!!ce.capture:!!ce,M=Ie(M),m&&m[ye]?(m=m.i,T=String(T).toString(),T in m.g&&(et=m.g[T],M=it(et,M,ce,ze),-1<M&&(je(et[M]),Array.prototype.splice.call(et,M,1),et.length==0&&(delete m.g[T],m.h--)))):m&&(m=ne(m))&&(T=m.g[T.toString()],m=-1,T&&(m=it(T,M,ce,ze)),(M=-1<m?T[m]:null)&&Se(M))}function Se(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[ye])tt(T.i,m);else{var M=m.type,ce=m.proxy;T.removeEventListener?T.removeEventListener(M,ce,m.capture):T.detachEvent?T.detachEvent(Qe(M),ce):T.addListener&&T.removeListener&&T.removeListener(ce),(M=ne(T))?(tt(M,m),M.h==0&&(M.src=null,T[It]=null)):je(m)}}}function Qe(m){return m in le?le[m]:le[m]="on"+m}function X(m,T){if(m.da)m=!0;else{T=new G(T,this);var M=m.listener,ce=m.ha||m.src;m.fa&&Se(m),m=M.call(ce,T)}return m}function ne(m){return m=m[It],m instanceof Ge?m:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(m){return typeof m=="function"?m:(m[pe]||(m[pe]=function(T){return m.handleEvent(T)}),m[pe])}function se(){S.call(this),this.i=new Ge(this),this.M=this,this.F=null}C(se,S),se.prototype[ye]=!0,se.prototype.removeEventListener=function(m,T,M,ce){he(this,m,T,M,ce)};function Te(m,T){var M,ce=m.F;if(ce)for(M=[];ce;ce=ce.F)M.push(ce);if(m=m.M,ce=T.type||T,typeof T=="string")T=new K(T,m);else if(T instanceof K)T.target=T.target||m;else{var ze=T;T=new K(ce,m),V(T,ze)}if(ze=!0,M)for(var et=M.length-1;0<=et;et--){var Nt=T.g=M[et];ze=we(Nt,ce,!0,T)&&ze}if(Nt=T.g=m,ze=we(Nt,ce,!0,T)&&ze,ze=we(Nt,ce,!1,T)&&ze,M)for(et=0;et<M.length;et++)Nt=T.g=M[et],ze=we(Nt,ce,!1,T)&&ze}se.prototype.N=function(){if(se.aa.N.call(this),this.i){var m=this.i,T;for(T in m.g){for(var M=m.g[T],ce=0;ce<M.length;ce++)je(M[ce]);delete m.g[T],m.h--}}this.F=null},se.prototype.K=function(m,T,M,ce){return this.i.add(String(m),T,!1,M,ce)},se.prototype.L=function(m,T,M,ce){return this.i.add(String(m),T,!0,M,ce)};function we(m,T,M,ce){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();for(var ze=!0,et=0;et<T.length;++et){var Nt=T[et];if(Nt&&!Nt.da&&Nt.capture==M){var Br=Nt.listener,Bn=Nt.ha||Nt.src;Nt.fa&&tt(m.i,Nt),ze=Br.call(Bn,ce)!==!1&&ze}}return ze&&!ce.defaultPrevented}function Be(m,T,M){if(typeof m=="function")M&&(m=x(m,M));else if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:c.setTimeout(m,T||0)}function Fe(m){m.g=Be(()=>{m.g=null,m.i&&(m.i=!1,Fe(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class De extends S{constructor(T,M){super(),this.m=T,this.l=M,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:Fe(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function At(m){S.call(this),this.h=m,this.g={}}C(At,S);var _e=[];function Pe(m){Z(m.g,function(T,M){this.g.hasOwnProperty(M)&&Se(T)},m),m.g={}}At.prototype.N=function(){At.aa.N.call(this),Pe(this)},At.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ye=c.JSON.stringify,vt=c.JSON.parse,ke=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function We(){}We.prototype.h=null;function Me(m){return m.h||(m.h=m.i())}function rt(){}var mt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bt(){K.call(this,"d")}C(bt,K);function dt(){K.call(this,"c")}C(dt,K);var _t={},Wt=null;function Ar(){return Wt=Wt||new se}_t.La="serverreachability";function vn(m){K.call(this,_t.La,m)}C(vn,K);function _r(m){const T=Ar();Te(T,new vn(T))}_t.STAT_EVENT="statevent";function Ot(m,T){K.call(this,_t.STAT_EVENT,m),this.stat=T}C(Ot,K);function yr(m){const T=Ar();Te(T,new Ot(T,m))}_t.Ma="timingevent";function _n(m,T){K.call(this,_t.Ma,m),this.size=T}C(_n,K);function Nr(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},T)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function Ur(m,T,M,ce,ze,et){m.info(function(){if(m.g)if(et)for(var Nt="",Br=et.split("&"),Bn=0;Bn<Br.length;Bn++){var mr=Br[Bn].split("=");if(1<mr.length){var kr=mr[0];mr=mr[1];var Gr=kr.split("_");Nt=2<=Gr.length&&Gr[1]=="type"?Nt+(kr+"="+mr+"&"):Nt+(kr+"=redacted&")}}else Nt=null;else Nt=et;return"XMLHTTP REQ ("+ce+") [attempt "+ze+"]: "+T+`
`+M+`
`+Nt})}function Xr(m,T,M,ce,ze,et,Nt){m.info(function(){return"XMLHTTP RESP ("+ce+") [ attempt "+ze+"]: "+T+`
`+M+`
`+et+" "+Nt})}function Hr(m,T,M,ce){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+ta(m,M)+(ce?" "+ce:"")})}function Hi(m,T){m.info(function(){return"TIMEOUT: "+T})}An.prototype.info=function(){};function ta(m,T){if(!m.g)return T;if(!T)return null;try{var M=JSON.parse(T);if(M){for(m=0;m<M.length;m++)if(Array.isArray(M[m])){var ce=M[m];if(!(2>ce.length)){var ze=ce[1];if(Array.isArray(ze)&&!(1>ze.length)){var et=ze[0];if(et!="noop"&&et!="stop"&&et!="close")for(var Nt=1;Nt<ze.length;Nt++)ze[Nt]=""}}}}return Ye(M)}catch{return T}}var ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rn;function Fs(){}C(Fs,We),Fs.prototype.g=function(){return new XMLHttpRequest},Fs.prototype.i=function(){return{}},Rn=new Fs;function Nn(m,T,M,ce){this.j=m,this.i=T,this.l=M,this.R=ce||1,this.U=new At(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ha}function Ha(){this.i=null,this.g="",this.h=!1}var vi={},ra={};function Ba(m,T,M){m.L=1,m.v=Ca(On(T)),m.m=M,m.P=!0,Va(m,null)}function Va(m,T){m.F=Date.now(),Rr(m),m.A=On(m.v);var M=m.A,ce=m.R;Array.isArray(ce)||(ce=[String(ce)]),Xa(M.i,"t",ce),m.C=0,M=m.j.J,m.h=new Ha,m.g=kn(m.j,M?T:null,!m.m),0<m.O&&(m.M=new De(x(m.Y,m,m.g),m.O)),T=m.U,M=m.g,ce=m.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(_e[0]=ze.toString()),ze=_e);for(var et=0;et<ze.length;et++){var Nt=ft(M,ze[et],ce||T.handleEvent,!1,T.h||T);if(!Nt)break;T.g[Nt.key]=Nt}T=m.H?Q(m.H):{},m.m?(m.u||(m.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,T)):(m.u="GET",m.g.ea(m.A,m.u,null,T)),_r(),Ur(m.i,m.u,m.A,m.l,m.R,m.m)}Nn.prototype.ca=function(m){m=m.target;const T=this.M;T&&vs(m)==3?T.j():this.Y(m)},Nn.prototype.Y=function(m){try{if(m==this.g)e:{const Gr=vs(this.g);var T=this.g.Ba();const Ps=this.g.Z();if(!(3>Gr)&&(Gr!=3||this.g&&(this.h.h||this.g.oa()||to(this.g)))){this.J||Gr!=4||T==7||(T==8||0>=Ps?_r(3):_r(2)),Ka(this);var M=this.g.Z();this.X=M;t:if(vA(this)){var ce=to(this.g);m="";var ze=ce.length,et=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),is(this);var Nt="";break t}this.h.i=new c.TextDecoder}for(T=0;T<ze;T++)this.h.h=!0,m+=this.h.i.decode(ce[T],{stream:!(et&&T==ze-1)});ce.length=0,this.h.g+=m,this.C=0,Nt=this.h.g}else Nt=this.g.oa();if(this.o=M==200,Xr(this.i,this.u,this.A,this.l,this.R,Gr,M),this.o){if(this.T&&!this.K){t:{if(this.g){var Br,Bn=this.g;if((Br=Bn.g?Bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Br)){var mr=Br;break t}}mr=null}if(M=mr)Hr(this.i,this.l,M,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qA(this,M);else{this.o=!1,this.s=3,yr(12),Hs(this),is(this);break e}}if(this.P){M=!0;let Ks;for(;!this.J&&this.C<Nt.length;)if(Ks=Ec(this,Nt),Ks==ra){Gr==4&&(this.s=4,yr(14),M=!1),Hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Ks==vi){this.s=4,yr(15),Hr(this.i,this.l,Nt,"[Invalid Chunk]"),M=!1;break}else Hr(this.i,this.l,Ks,null),qA(this,Ks);if(vA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gr!=4||Nt.length!=0||this.h.h||(this.s=1,yr(16),M=!1),this.o=this.o&&M,!M)Hr(this.i,this.l,Nt,"[Invalid Chunked Response]"),Hs(this),is(this);else if(0<Nt.length&&!this.W){this.W=!0;var kr=this.j;kr.g==this&&kr.ba&&!kr.M&&(kr.j.info("Great, no buffering proxy detected. Bytes received: "+Nt.length),Ut(kr),kr.M=!0,yr(11))}}else Hr(this.i,this.l,Nt,null),qA(this,Nt);Gr==4&&Hs(this),this.o&&!this.J&&(Gr==4?rr(this.j,this):(this.o=!1,Rr(this)))}else xA(this.g),M==400&&0<Nt.indexOf("Unknown SID")?(this.s=3,yr(12)):(this.s=0,yr(13)),Hs(this),is(this)}}}catch{}};function vA(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Ec(m,T){var M=m.C,ce=T.indexOf(`
`,M);return ce==-1?ra:(M=Number(T.substring(M,ce)),isNaN(M)?vi:(ce+=1,ce+M>T.length?ra:(T=T.slice(ce,ce+M),m.C=ce+M,T)))}Nn.prototype.cancel=function(){this.J=!0,Hs(this)};function Rr(m){m.S=Date.now()+m.I,So(m,m.I)}function So(m,T){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Nr(x(m.ba,m),T)}function Ka(m){m.B&&(c.clearTimeout(m.B),m.B=null)}Nn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Hi(this.i,this.A),this.L!=2&&(_r(),yr(17)),Hs(this),this.s=2,is(this)):So(this,this.S-m)};function is(m){m.j.G==0||m.J||rr(m.j,m)}function Hs(m){Ka(m);var T=m.M;T&&typeof T.ma=="function"&&T.ma(),m.M=null,Pe(m.U),m.g&&(T=m.g,m.g=null,T.abort(),T.ma())}function qA(m,T){try{var M=m.j;if(M.G!=0&&(M.g==m||dn(M.h,m))){if(!m.K&&dn(M.h,m)&&M.G==3){try{var ce=M.Da.g.parse(T)}catch{ce=null}if(Array.isArray(ce)&&ce.length==3){var ze=ce;if(ze[0]==0){e:if(!M.u){if(M.g)if(M.g.F+3e3<m.F)Zt(M),Qs(M);else break e;gt(M),yr(18)}}else M.za=ze[1],0<M.za-M.T&&37500>ze[2]&&M.F&&M.v==0&&!M.C&&(M.C=Nr(x(M.Za,M),6e3));if(1>=ko(M.h)&&M.ca){try{M.ca()}catch{}M.ca=void 0}}else jr(M,11)}else if((m.K||M.g==m)&&Zt(M),!P(T))for(ze=M.Da.g.parse(T),T=0;T<ze.length;T++){let mr=ze[T];if(M.T=mr[0],mr=mr[1],M.G==2)if(mr[0]=="c"){M.K=mr[1],M.ia=mr[2];const kr=mr[3];kr!=null&&(M.la=kr,M.j.info("VER="+M.la));const Gr=mr[4];Gr!=null&&(M.Aa=Gr,M.j.info("SVER="+M.Aa));const Ps=mr[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(ce=1.5*Ps,M.L=ce,M.j.info("backChannelRequestTimeoutMs_="+ce)),ce=M;const Ks=m.g;if(Ks){const xs=Ks.g?Ks.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var et=ce.h;et.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||(et.j=et.l,et.g=new Set,et.h&&(Ga(et,et.h),et.h=null))}if(ce.D){const Aa=Ks.g?Ks.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(ce.ya=Aa,vr(ce.I,ce.D,Aa))}}M.G=3,M.l&&M.l.ua(),M.ba&&(M.R=Date.now()-m.F,M.j.info("Handshake RTT: "+M.R+"ms")),ce=M;var Nt=m;if(ce.qa=Vr(ce,ce.J?ce.ia:null,ce.W),Nt.K){hl(ce.h,Nt);var Br=Nt,Bn=ce.L;Bn&&(Br.I=Bn),Br.B&&(Ka(Br),Rr(Br)),ce.g=Nt}else lt(ce);0<M.i.length&&b(M)}else mr[0]!="stop"&&mr[0]!="close"||jr(M,7);else M.G==3&&(mr[0]=="stop"||mr[0]=="close"?mr[0]=="stop"?jr(M,7):Wn(M):mr[0]!="noop"&&M.l&&M.l.ta(mr),M.v=0)}}_r(4)}catch{}}var WA=class{constructor(m,T){this.g=m,this.map=T}};function za(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vs(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ko(m){return m.h?1:m.g?m.g.size:0}function dn(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function Ga(m,T){m.g?m.g.add(T):m.h=T}function hl(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}za.prototype.cancel=function(){if(this.i=wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function wn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const M of m.g.values())T=T.concat(M.D);return T}return N(m.i)}function wA(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(u(m)){for(var T=[],M=m.length,ce=0;ce<M;ce++)T.push(m[ce]);return T}T=[],M=0;for(ce in m)T[M++]=m[ce];return T}function ri(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(u(m)||typeof m=="string"){var T=[];m=m.length;for(var M=0;M<m;M++)T.push(M);return T}T=[],M=0;for(const ce in m)T[M++]=ce;return T}}}function Vi(m,T){if(m.forEach&&typeof m.forEach=="function")m.forEach(T,void 0);else if(u(m)||typeof m=="string")Array.prototype.forEach.call(m,T,void 0);else for(var M=ri(m),ce=wA(m),ze=ce.length,et=0;et<ze;et++)T.call(void 0,ce[et],M&&M[et],m)}var $a=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wi(m,T){if(m){m=m.split("&");for(var M=0;M<m.length;M++){var ce=m[M].indexOf("="),ze=null;if(0<=ce){var et=m[M].substring(0,ce);ze=m[M].substring(ce+1)}else et=m[M];T(et,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Zr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Zr){this.h=m.h,qa(this,m.j),this.o=m.o,this.g=m.g,Wa(this,m.s),this.l=m.l;var T=m.i,M=new qn;M.i=T.i,T.g&&(M.g=new Map(T.g),M.h=T.h),Ya(this,M),this.m=m.m}else m&&(T=String(m).match($a))?(this.h=!1,qa(this,T[1]||"",!0),this.o=pr(T[2]||""),this.g=pr(T[3]||"",!0),Wa(this,T[4]),this.l=pr(T[5]||"",!0),Ya(this,T[6]||"",!0),this.m=pr(T[7]||"")):(this.h=!1,this.i=new qn(null,this.h))}Zr.prototype.toString=function(){var m=[],T=this.j;T&&m.push(Ki(T,YA,!0),":");var M=this.g;return(M||T=="file")&&(m.push("//"),(T=this.o)&&m.push(Ki(T,YA,!0),"@"),m.push(encodeURIComponent(String(M)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),M=this.s,M!=null&&m.push(":",String(M))),(M=this.l)&&(this.g&&M.charAt(0)!="/"&&m.push("/"),m.push(Ki(M,M.charAt(0)=="/"?pl:fl,!0))),(M=this.i.toString())&&m.push("?",M),(M=this.m)&&m.push("#",Ki(M,XA)),m.join("")};function On(m){return new Zr(m)}function qa(m,T,M){m.j=M?pr(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function Wa(m,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);m.s=T}else m.s=null}function Ya(m,T,M){T instanceof qn?(m.i=T,na(m.i,m.h)):(M||(T=Ki(T,JA)),m.i=new qn(T,m.h))}function vr(m,T,M){m.i.set(T,M)}function Ca(m){return vr(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function pr(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ki(m,T,M){return typeof m=="string"?(m=encodeURI(m).replace(T,Ja),M&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Ja(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var YA=/[#\/\?@]/g,fl=/[#\?:]/g,pl=/[#\?]/g,JA=/[#\?@]/g,XA=/#/g;function qn(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function as(m){m.g||(m.g=new Map,m.h=0,m.i&&wi(m.i,function(T,M){m.add(decodeURIComponent(T.replace(/\+/g," ")),M)}))}r=qn.prototype,r.add=function(m,T){as(this),this.i=null,m=Yt(this,m);var M=this.g.get(m);return M||this.g.set(m,M=[]),M.push(T),this.h+=1,this};function Ts(m,T){as(m),T=Yt(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function ni(m,T){return as(m),T=Yt(m,T),m.g.has(T)}r.forEach=function(m,T){as(this),this.g.forEach(function(M,ce){M.forEach(function(ze){m.call(T,ze,ce,this)},this)},this)},r.na=function(){as(this);const m=Array.from(this.g.values()),T=Array.from(this.g.keys()),M=[];for(let ce=0;ce<T.length;ce++){const ze=m[ce];for(let et=0;et<ze.length;et++)M.push(T[ce])}return M},r.V=function(m){as(this);let T=[];if(typeof m=="string")ni(this,m)&&(T=T.concat(this.g.get(Yt(this,m))));else{m=Array.from(this.g.values());for(let M=0;M<m.length;M++)T=T.concat(m[M])}return T},r.set=function(m,T){return as(this),this.i=null,m=Yt(this,m),ni(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},r.get=function(m,T){return m?(m=this.V(m),0<m.length?String(m[0]):T):T};function Xa(m,T,M){Ts(m,T),0<M.length&&(m.i=null,m.g.set(Yt(m,T),N(M)),m.h+=M.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(var M=0;M<T.length;M++){var ce=T[M];const et=encodeURIComponent(String(ce)),Nt=this.V(ce);for(ce=0;ce<Nt.length;ce++){var ze=et;Nt[ce]!==""&&(ze+="="+encodeURIComponent(String(Nt[ce]))),m.push(ze)}}return this.i=m.join("&")};function Yt(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function na(m,T){T&&!m.j&&(as(m),m.i=null,m.g.forEach(function(M,ce){var ze=ce.toLowerCase();ce!=ze&&(Ts(this,ce),Xa(this,ze,M))},m)),m.j=T}function Ic(m,T){const M=new An;if(c.Image){const ce=new Image;ce.onload=y(Sn,M,"TestLoadImage: loaded",!0,T,ce),ce.onerror=y(Sn,M,"TestLoadImage: error",!1,T,ce),ce.onabort=y(Sn,M,"TestLoadImage: abort",!1,T,ce),ce.ontimeout=y(Sn,M,"TestLoadImage: timeout",!1,T,ce),c.setTimeout(function(){ce.ontimeout&&ce.ontimeout()},1e4),ce.src=m}else T(!1)}function ml(m,T){const M=new An,ce=new AbortController,ze=setTimeout(()=>{ce.abort(),Sn(M,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:ce.signal}).then(et=>{clearTimeout(ze),et.ok?Sn(M,"TestPingServer: ok",!0,T):Sn(M,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(ze),Sn(M,"TestPingServer: error",!1,T)})}function Sn(m,T,M,ce,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ce(M)}catch{}}function Ea(){this.g=new ke}function gl(m,T,M){const ce=M||"";try{Vi(m,function(ze,et){let Nt=ze;d(ze)&&(Nt=Ye(ze)),T.push(ce+et+"="+encodeURIComponent(Nt))})}catch(ze){throw T.push(ce+"type="+encodeURIComponent("_badmap")),ze}}function Ia(m){this.l=m.Ub||null,this.j=m.eb||!1}C(Ia,We),Ia.prototype.g=function(){return new sa(this.l,this.j)},Ia.prototype.i=(function(m){return function(){return m}})({});function sa(m,T){se.call(this),this.D=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(sa,se),r=sa.prototype,r.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=T,this.readyState=1,zi(this)},r.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(T.body=m),(this.D||c).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Us(this)),this.readyState=0},r.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ZA(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function ZA(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}r.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?Us(this):zi(this),this.readyState==3&&ZA(this)}},r.Ra=function(m){this.g&&(this.response=this.responseText=m,Us(this))},r.Qa=function(m){this.g&&(this.response=m,Us(this))},r.ga=function(){this.g&&Us(this)};function Us(m){m.readyState=4,m.l=null,m.j=null,m.v=null,zi(m)}r.setRequestHeader=function(m,T){this.u.append(m,T)},r.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var M=T.next();!M.done;)M=M.value,m.push(M[0]+": "+M[1]),M=T.next();return m.join(`\r
`)};function zi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function js(m){let T="";return Z(m,function(M,ce){T+=ce,T+=":",T+=M,T+=`\r
`}),T}function Za(m,T,M){e:{for(ce in M){var ce=!1;break e}ce=!0}ce||(M=js(M),typeof m=="string"?M!=null&&encodeURIComponent(String(M)):vr(m,T,M))}function zr(m){se.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(zr,se);var Fo=/^https?$/i,eo=["POST","PUT"];r=zr.prototype,r.Ha=function(m){this.J=m},r.ea=function(m,T,M,ce){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rn.g(),this.v=this.o?Me(this.o):Me(Rn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(et){si(this,et);return}if(m=M||"",M=new Map(this.headers),ce)if(Object.getPrototypeOf(ce)===Object.prototype)for(var ze in ce)M.set(ze,ce[ze]);else if(typeof ce.keys=="function"&&typeof ce.get=="function")for(const et of ce.keys())M.set(et,ce.get(et));else throw Error("Unknown input type for opt_headers: "+String(ce));ce=Array.from(M.keys()).find(et=>et.toLowerCase()=="content-type"),ze=c.FormData&&m instanceof c.FormData,!(0<=Array.prototype.indexOf.call(eo,T,void 0))||ce||ze||M.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[et,Nt]of M)this.g.setRequestHeader(et,Nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ia(this),this.u=!0,this.g.send(m),this.u=!1}catch(et){si(this,et)}};function si(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.m=5,eA(m),Ls(m)}function eA(m){m.A||(m.A=!0,Te(m,"complete"),Te(m,"error"))}r.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Te(this,"complete"),Te(this,"abort"),Ls(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ls(this,!0)),zr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?tA(this):this.bb())},r.bb=function(){tA(this)};function tA(m){if(m.h&&typeof l<"u"&&(!m.v[1]||vs(m)!=4||m.Z()!=2)){if(m.u&&vs(m)==4)Be(m.Ea,0,m);else if(Te(m,"readystatechange"),vs(m)==4){m.h=!1;try{const Nt=m.Z();e:switch(Nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var M;if(!(M=T)){var ce;if(ce=Nt===0){var ze=String(m.D).match($a)[1]||null;!ze&&c.self&&c.self.location&&(ze=c.self.location.protocol.slice(0,-1)),ce=!Fo.test(ze?ze.toLowerCase():"")}M=ce}if(M)Te(m,"complete"),Te(m,"success");else{m.m=6;try{var et=2<vs(m)?m.g.statusText:""}catch{et=""}m.l=et+" ["+m.Z()+"]",eA(m)}}finally{Ls(m)}}}}function Ls(m,T){if(m.g){ia(m);const M=m.g,ce=m.v[0]?()=>{}:null;m.g=null,m.v=null,T||Te(m,"ready");try{M.onreadystatechange=ce}catch{}}}function ia(m){m.I&&(c.clearTimeout(m.I),m.I=null)}r.isActive=function(){return!!this.g};function vs(m){return m.g?m.g.readyState:0}r.Z=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),vt(T)}};function to(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function xA(m){const T={};m=(m.g&&2<=vs(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let ce=0;ce<m.length;ce++){if(P(m[ce]))continue;var M=I(m[ce]);const ze=M[0];if(M=M[1],typeof M!="string")continue;M=M.trim();const et=T[ze]||[];T[ze]=et,et.push(M)}O(T,function(ce){return ce.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(m,T,M){return M&&M.internalChannelParams&&M.internalChannelParams[m]||T}function Gi(m){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ws("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ws("baseRetryDelayMs",5e3,m),this.cb=ws("retryDelaySeedMs",1e4,m),this.Wa=ws("forwardChannelMaxRetries",2,m),this.wa=ws("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new za(m&&m.concurrentRequestLimit),this.Da=new Ea,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Gi.prototype,r.la=8,r.G=1,r.connect=function(m,T,M,ce){yr(0),this.W=m,this.H=T||{},M&&ce!==void 0&&(this.H.OSID=M,this.H.OAID=ce),this.F=this.X,this.I=Vr(this,null,this.W),b(this)};function Wn(m){if(bA(m),m.G==3){var T=m.U++,M=On(m.I);if(vr(M,"SID",m.K),vr(M,"RID",T),vr(M,"TYPE","terminate"),Ue(m,M),T=new Nn(m,m.j,T),T.L=2,T.v=Ca(On(M)),M=!1,c.navigator&&c.navigator.sendBeacon)try{M=c.navigator.sendBeacon(T.v.toString(),"")}catch{}!M&&c.Image&&(new Image().src=T.v,M=!0),M||(T.g=kn(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Rr(T)}xn(m)}function Qs(m){m.g&&(Ut(m),m.g.cancel(),m.g=null)}function bA(m){Qs(m),m.u&&(c.clearTimeout(m.u),m.u=null),Zt(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&c.clearTimeout(m.s),m.s=null)}function b(m){if(!Vs(m.h)&&!m.s){m.s=!0;var T=m.Ga;fe||me(),ae||(fe(),ae=!0),$.add(T,m),m.B=0}}function q(m,T){return ko(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=T.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Nr(x(m.Ga,m,T),wr(m,m.B)),m.B++,!0)}r.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ze=new Nn(this,this.j,m);let et=this.o;if(this.S&&(et?(et=Q(et),V(et,this.S)):et=this.S),this.m!==null||this.O||(ze.H=et,et=null),this.P)e:{for(var T=0,M=0;M<this.i.length;M++){t:{var ce=this.i[M];if("__data__"in ce.map&&(ce=ce.map.__data__,typeof ce=="string")){ce=ce.length;break t}ce=void 0}if(ce===void 0)break;if(T+=ce,4096<T){T=M;break e}if(T===4096||M===this.i.length-1){T=M+1;break e}}T=1e3}else T=1e3;T=Ke(this,ze,T),M=On(this.I),vr(M,"RID",m),vr(M,"CVER",22),this.D&&vr(M,"X-HTTP-Session-Id",this.D),Ue(this,M),et&&(this.O?T="headers="+encodeURIComponent(String(js(et)))+"&"+T:this.m&&Za(M,this.m,et)),Ga(this.h,ze),this.Ua&&vr(M,"TYPE","init"),this.P?(vr(M,"$req",T),vr(M,"SID","null"),ze.T=!0,Ba(ze,M,null)):Ba(ze,M,T),this.G=2}}else this.G==3&&(m?Ce(this,m):this.i.length==0||Vs(this.h)||Ce(this))};function Ce(m,T){var M;T?M=T.l:M=m.U++;const ce=On(m.I);vr(ce,"SID",m.K),vr(ce,"RID",M),vr(ce,"AID",m.T),Ue(m,ce),m.m&&m.o&&Za(ce,m.m,m.o),M=new Nn(m,m.j,M,m.B+1),m.m===null&&(M.H=m.o),T&&(m.i=T.D.concat(m.i)),T=Ke(m,M,1e3),M.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Ga(m.h,M),Ba(M,ce,T)}function Ue(m,T){m.H&&Z(m.H,function(M,ce){vr(T,ce,M)}),m.l&&Vi({},function(M,ce){vr(T,ce,M)})}function Ke(m,T,M){M=Math.min(m.i.length,M);var ce=m.l?x(m.l.Na,m.l,m):null;e:{var ze=m.i;let et=-1;for(;;){const Nt=["count="+M];et==-1?0<M?(et=ze[0].g,Nt.push("ofs="+et)):et=0:Nt.push("ofs="+et);let Br=!0;for(let Bn=0;Bn<M;Bn++){let mr=ze[Bn].g;const kr=ze[Bn].map;if(mr-=et,0>mr)et=Math.max(0,ze[Bn].g-100),Br=!1;else try{gl(kr,Nt,"req"+mr+"_")}catch{ce&&ce(kr)}}if(Br){ce=Nt.join("&");break e}}}return m=m.i.splice(0,M),T.D=m,ce}function lt(m){if(!m.g&&!m.u){m.Y=1;var T=m.Fa;fe||me(),ae||(fe(),ae=!0),$.add(T,m),m.v=0}}function gt(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Nr(x(m.Fa,m),wr(m,m.v)),m.v++,!0)}r.Fa=function(){if(this.u=null,Mt(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Nr(x(this.ab,this),m)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yr(10),Qs(this),Mt(this))};function Ut(m){m.A!=null&&(c.clearTimeout(m.A),m.A=null)}function Mt(m){m.g=new Nn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var T=On(m.qa);vr(T,"RID","rpc"),vr(T,"SID",m.K),vr(T,"AID",m.T),vr(T,"CI",m.F?"0":"1"),!m.F&&m.ja&&vr(T,"TO",m.ja),vr(T,"TYPE","xmlhttp"),Ue(m,T),m.m&&m.o&&Za(T,m.m,m.o),m.L&&(m.g.I=m.L);var M=m.g;m=m.ia,M.L=1,M.v=Ca(On(T)),M.m=null,M.P=!0,Va(M,m)}r.Za=function(){this.C!=null&&(this.C=null,Qs(this),gt(this),yr(19))};function Zt(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function rr(m,T){var M=null;if(m.g==T){Zt(m),Ut(m),m.g=null;var ce=2}else if(dn(m.h,T))M=T.D,hl(m.h,T),ce=1;else return;if(m.G!=0){if(T.o)if(ce==1){M=T.m?T.m.length:0,T=Date.now()-T.F;var ze=m.B;ce=Ar(),Te(ce,new _n(ce,M)),b(m)}else lt(m);else if(ze=T.s,ze==3||ze==0&&0<T.X||!(ce==1&&q(m,T)||ce==2&&gt(m)))switch(M&&0<M.length&&(T=m.h,T.i=T.i.concat(M)),ze){case 1:jr(m,5);break;case 4:jr(m,10);break;case 3:jr(m,6);break;default:jr(m,2)}}}function wr(m,T){let M=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(M*=2),M*T}function jr(m,T){if(m.j.info("Error code "+T),T==2){var M=x(m.fb,m),ce=m.Xa;const ze=!ce;ce=new Zr(ce||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qa(ce,"https"),Ca(ce),ze?Ic(ce.toString(),M):ml(ce.toString(),M)}else yr(2);m.G=0,m.l&&m.l.sa(T),xn(m),bA(m)}r.fb=function(m){m?(this.j.info("Successfully pinged google.com"),yr(2)):(this.j.info("Failed to ping google.com"),yr(1))};function xn(m){if(m.G=0,m.ka=[],m.l){const T=wn(m.h);(T.length!=0||m.i.length!=0)&&(E(m.ka,T),E(m.ka,m.i),m.h.i.length=0,N(m.i),m.i.length=0),m.l.ra()}}function Vr(m,T,M){var ce=M instanceof Zr?On(M):new Zr(M);if(ce.g!="")T&&(ce.g=T+"."+ce.g),Wa(ce,ce.s);else{var ze=c.location;ce=ze.protocol,T=T?T+"."+ze.hostname:ze.hostname,ze=+ze.port;var et=new Zr(null);ce&&qa(et,ce),T&&(et.g=T),ze&&Wa(et,ze),M&&(et.l=M),ce=et}return M=m.D,T=m.ya,M&&T&&vr(ce,M,T),vr(ce,"VER",m.la),Ue(m,ce),ce}function kn(m,T,M){if(T&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Ca&&!m.pa?new zr(new Ia({eb:M})):new zr(m.pa),T.Ha(m.J),T}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function hn(){}r=hn.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Fn(){}Fn.prototype.g=function(m,T){return new bn(m,T)};function bn(m,T){se.call(this),this.g=new Gi(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(m?m["X-WebChannel-Client-Profile"]=T.va:m={"X-WebChannel-Client-Profile":T.va}),this.g.S=m,(m=T&&T.Sb)&&!P(m)&&(this.g.m=m),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!P(T)&&(this.g.D=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new bi(this)}C(bn,se),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){Wn(this.g)},bn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var M={};M.__data__=m,m=M}else this.u&&(M={},M.__data__=Ye(m),m=M);T.i.push(new WA(T.Ya++,m)),T.G==3&&b(T)},bn.prototype.N=function(){this.g.l=null,delete this.j,Wn(this.g),delete this.g,bn.aa.N.call(this)};function xi(m){bt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const M in T){m=M;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}C(xi,bt);function aa(){dt.call(this),this.status=1}C(aa,dt);function bi(m){this.g=m}C(bi,hn),bi.prototype.ua=function(){Te(this.g,"a")},bi.prototype.ta=function(m){Te(this.g,new xi(m))},bi.prototype.sa=function(m){Te(this.g,new aa)},bi.prototype.ra=function(){Te(this.g,"b")},Fn.prototype.createWebChannel=Fn.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,fC=function(){return new Fn},hC=function(){return Ar()},dC=_t,Hy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,Xp=ys,yi.COMPLETE="complete",uC=yi,rt.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",se.prototype.listen=se.prototype.K,xh=rt,zr.prototype.listenOnce=zr.prototype.L,zr.prototype.getLastError=zr.prototype.Ka,zr.prototype.getLastErrorCode=zr.prototype.Ba,zr.prototype.getStatus=zr.prototype.Z,zr.prototype.getResponseJson=zr.prototype.Oa,zr.prototype.getResponseText=zr.prototype.oa,zr.prototype.send=zr.prototype.ea,zr.prototype.setWithCredentials=zr.prototype.Ha,cC=zr}).apply(typeof lp<"u"?lp:typeof self<"u"?self:typeof window<"u"?window:{});const Yx="@firebase/firestore";let Di=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Di.UNAUTHENTICATED=new Di(null),Di.GOOGLE_CREDENTIALS=new Di("google-credentials-uid"),Di.FIRST_PARTY=new Di("first-party-uid"),Di.MOCK_USER=new Di("mock-user");let jd="10.14.0";const Au=new Vv("@firebase/firestore");function dh(){return Au.logLevel}function zt(r,...e){if(Au.logLevel<=Sr.DEBUG){const t=e.map(t1);Au.debug(`Firestore (${jd}): ${r}`,...t)}}function ll(r,...e){if(Au.logLevel<=Sr.ERROR){const t=e.map(t1);Au.error(`Firestore (${jd}): ${r}`,...t)}}function yd(r,...e){if(Au.logLevel<=Sr.WARN){const t=e.map(t1);Au.warn(`Firestore (${jd}): ${r}`,...t)}}function t1(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function lr(r="Unexpected state"){const e=`FIRESTORE (${jd}) INTERNAL ASSERTION FAILED: `+r;throw ll(e),new Error(e)}function an(r,e){r||lr()}function fr(r,e){return r}const yt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pt extends dl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Di.UNAUTHENTICATED)))}shutdown(){}}class Q3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class P3{constructor(e){this.t=e,this.currentUser=Di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){an(this.o===void 0);let n=this.i;const s=u=>this.i!==n?(n=this.i,t(u)):Promise.resolve();let i=new oc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new oc,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const u=i;e.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},c=u=>{zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((u=>c(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new oc)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(an(typeof n.accessToken=="string"),new pC(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return an(e===null||typeof e=="string"),new Di(e)}}class D3{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Di.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class R3{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new D3(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Di.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){an(this.o===void 0);const n=i=>{i.error!=null&&zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const l=i.token!==this.R;return this.R=i.token,zt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const s=i=>{zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(an(typeof t.token=="string"),this.R=t.token,new O3(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function H3(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class mC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=H3(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%e.length))}return n}}function Mr(r,e){return r<e?-1:r>e?1:0}function vd(r,e,t){return r.length===e.length&&r.every(((n,s)=>t(n,e[s])))}class gs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gs.fromMillis(Date.now())}static fromDate(e){return gs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new gs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mr(this.nanoseconds,e.nanoseconds):Mr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class hr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new hr(e)}static min(){return new hr(new gs(0,0))}static max(){return new hr(new gs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yh{constructor(e,t,n){t===void 0?t=0:t>e.length&&lr(),n===void 0?n=e.length-t:n>e.length-t&&lr(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Yh.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yh?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=e.get(s),l=t.get(s);if(i<l)return-1;if(i>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Yh{construct(e,t,n){return new En(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Pt(yt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((s=>s.length>0)))}return new En(t)}static emptyPath(){return new En([])}}const V3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends Yh{construct(e,t,n){return new hi(e,t,n)}static isValidIdentifier(e){return V3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new hi(["__name__"])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Pt(yt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Pt(yt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Pt(yt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(n+=c,s++):(i(),s++)}if(i(),l)throw new Pt(yt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(t)}static emptyPath(){return new hi([])}}class Xt{constructor(e){this.path=e}static fromPath(e){return new Xt(En.fromString(e))}static fromName(e){return new Xt(En.fromString(e).popFirst(5))}static empty(){return new Xt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xt(new En(e.slice()))}}function K3(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=hr.fromTimestamp(n===1e9?new gs(t+1,0):new gs(t,n));return new dc(s,Xt.empty(),e)}function z3(r){return new dc(r.readTime,r.key,-1)}class dc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new dc(hr.min(),Xt.empty(),-1)}static max(){return new dc(hr.max(),Xt.empty(),-1)}}function G3(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Xt.comparator(r.documentKey,e.documentKey),t!==0?t:Mr(r.largestBatchId,e.largestBatchId))}const $3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function mf(r){if(r.code!==yt.FAILED_PRECONDITION||r.message!==$3)throw r;zt("LocalStore","Unexpectedly lost primary lease")}class Bt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bt(((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Bt?t:Bt.resolve(t)}catch(t){return Bt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Bt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Bt.reject(t)}static resolve(e){return new Bt(((t,n)=>{t(e)}))}static reject(e){return new Bt(((t,n)=>{n(e)}))}static waitFor(e){return new Bt(((t,n)=>{let s=0,i=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++i,l&&i===s&&t()}),(u=>n(u)))})),l=!0,i===s&&t()}))}static or(e){let t=Bt.resolve(!1);for(const n of e)t=t.next((s=>s?Bt.resolve(s):n()));return t}static forEach(e,t){const n=[];return e.forEach(((s,i)=>{n.push(t.call(this,s,i))})),this.waitFor(n)}static mapArray(e,t){return new Bt(((n,s)=>{const i=e.length,l=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;t(e[d]).next((f=>{l[d]=f,++c,c===i&&n(l)}),(f=>s(f)))}}))}static doWhile(e,t){return new Bt(((n,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):n()};i()}))}}function W3(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gf(r){return r.name==="IndexedDbTransactionError"}class r1{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}r1.oe=-1;function ig(r){return r==null}function Im(r){return r===0&&1/r==-1/0}function Y3(r){return typeof r=="number"&&Number.isInteger(r)&&!Im(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function Jx(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function fu(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function gC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class $n{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cp(this.root,e,this.comparator,!1)}getReverseIterator(){return new cp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cp(this.root,e,this.comparator,!0)}}class cp{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=n??ui.RED,this.left=s??ui.EMPTY,this.right=i??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new ui(e??this.key,t??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ui.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lr();const e=this.left.check();if(e!==this.right.check())throw lr();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1;ui.EMPTY=new class{constructor(){this.size=0}get key(){throw lr()}get value(){throw lr()}get color(){throw lr()}get left(){throw lr()}get right(){throw lr()}copy(e,t,n,s,i){return this}insert(e,t,n){return new ui(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mi{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xx(this.data.getIterator())}getIteratorFrom(e){return new Xx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mi(this.comparator);return t.data=e,t}}class Xx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Da{constructor(e){this.fields=e,e.sort(hi.comparator)}static empty(){return new Da([])}unionWith(e){let t=new mi(hi.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Da(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vd(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class yC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yC("Invalid base64 string: "+i):i}})(e);return new gi(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let l=0;l<s.length;++l)i+=String.fromCharCode(s[l]);return i})(e);return new gi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gi.EMPTY_BYTE_STRING=new gi("");const J3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hc(r){if(an(!!r),typeof r=="string"){let e=0;const t=J3.exec(r);if(an(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ds(r.seconds),nanos:ds(r.nanos)}}function ds(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ou(r){return typeof r=="string"?gi.fromBase64String(r):gi.fromUint8Array(r)}function n1(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function s1(r){const e=r.mapValue.fields.__previous_value__;return n1(e)?s1(e):e}function Jh(r){const e=hc(r.mapValue.fields.__local_write_time__.timestampValue);return new gs(e.seconds,e.nanos)}class X3{constructor(e,t,n,s,i,l,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Xh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xh&&e.projectId===this.projectId&&e.database===this.database}}const up={mapValue:{}};function lu(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?n1(r)?4:eT(r)?9007199254740991:Z3(r)?10:11:lr()}function bo(r,e){if(r===e)return!0;const t=lu(r);if(t!==lu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Jh(r).isEqual(Jh(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const l=hc(s.timestampValue),c=hc(i.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(s,i){return ou(s.bytesValue).isEqual(ou(i.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(s,i){return ds(s.geoPointValue.latitude)===ds(i.geoPointValue.latitude)&&ds(s.geoPointValue.longitude)===ds(i.geoPointValue.longitude)})(r,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return ds(s.integerValue)===ds(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const l=ds(s.doubleValue),c=ds(i.doubleValue);return l===c?Im(l)===Im(c):isNaN(l)&&isNaN(c)}return!1})(r,e);case 9:return vd(r.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:case 11:return(function(s,i){const l=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Jx(l)!==Jx(c))return!1;for(const u in l)if(l.hasOwnProperty(u)&&(c[u]===void 0||!bo(l[u],c[u])))return!1;return!0})(r,e);default:return lr()}}function Zh(r,e){return(r.values||[]).find((t=>bo(t,e)))!==void 0}function wd(r,e){if(r===e)return 0;const t=lu(r),n=lu(e);if(t!==n)return Mr(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mr(r.booleanValue,e.booleanValue);case 2:return(function(i,l){const c=ds(i.integerValue||i.doubleValue),u=ds(l.integerValue||l.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(r,e);case 3:return Zx(r.timestampValue,e.timestampValue);case 4:return Zx(Jh(r),Jh(e));case 5:return Mr(r.stringValue,e.stringValue);case 6:return(function(i,l){const c=ou(i),u=ou(l);return c.compareTo(u)})(r.bytesValue,e.bytesValue);case 7:return(function(i,l){const c=i.split("/"),u=l.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=Mr(c[d],u[d]);if(f!==0)return f}return Mr(c.length,u.length)})(r.referenceValue,e.referenceValue);case 8:return(function(i,l){const c=Mr(ds(i.latitude),ds(l.latitude));return c!==0?c:Mr(ds(i.longitude),ds(l.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return e2(r.arrayValue,e.arrayValue);case 10:return(function(i,l){var c,u,d,f;const v=i.fields||{},x=l.fields||{},y=(c=v.value)===null||c===void 0?void 0:c.arrayValue,C=(u=x.value)===null||u===void 0?void 0:u.arrayValue,N=Mr(((d=y?.values)===null||d===void 0?void 0:d.length)||0,((f=C?.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:e2(y,C)})(r.mapValue,e.mapValue);case 11:return(function(i,l){if(i===up.mapValue&&l===up.mapValue)return 0;if(i===up.mapValue)return 1;if(l===up.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=l.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let v=0;v<u.length&&v<f.length;++v){const x=Mr(u[v],f[v]);if(x!==0)return x;const y=wd(c[u[v]],d[f[v]]);if(y!==0)return y}return Mr(u.length,f.length)})(r.mapValue,e.mapValue);default:throw lr()}}function Zx(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Mr(r,e);const t=hc(r),n=hc(e),s=Mr(t.seconds,n.seconds);return s!==0?s:Mr(t.nanos,n.nanos)}function e2(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const i=wd(t[s],n[s]);if(i)return i}return Mr(t.length,n.length)}function xd(r){return Vy(r)}function Vy(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=hc(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ou(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Xt.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",s=!0;for(const i of t.values||[])s?s=!1:n+=",",n+=Vy(i);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const l of n)i?i=!1:s+=",",s+=`${l}:${Vy(t.fields[l])}`;return s+"}"})(r.mapValue):lr()}function t2(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Ky(r){return!!r&&"integerValue"in r}function i1(r){return!!r&&"arrayValue"in r}function r2(r){return!!r&&"nullValue"in r}function n2(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Zp(r){return!!r&&"mapValue"in r}function Z3(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Uh(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return fu(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Uh(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uh(r.arrayValue.values[t]);return e}return Object.assign({},r)}function eT(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class ga{constructor(e){this.value=e}static empty(){return new ga({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uh(t)}setAll(e){let t=hi.emptyPath(),n={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,n,s),n={},s=[],t=c.popLast()}l?n[c.lastSegment()]=Uh(l):s.push(c.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());Zp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];Zp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){fu(t,((s,i)=>e[s]=i));for(const s of n)delete e[s]}clone(){return new ga(Uh(this.value))}}function vC(r){const e=[];return fu(r.fields,((t,n)=>{const s=new hi([t]);if(Zp(n)){const i=vC(n.mapValue).fields;if(i.length===0)e.push(s);else for(const l of i)e.push(s.child(l))}else e.push(s)})),new Da(e)}class Oi{constructor(e,t,n,s,i,l,c){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Oi(e,0,hr.min(),hr.min(),hr.min(),ga.empty(),0)}static newFoundDocument(e,t,n,s){return new Oi(e,1,t,hr.min(),n,s,0)}static newNoDocument(e,t){return new Oi(e,2,t,hr.min(),hr.min(),ga.empty(),0)}static newUnknownDocument(e,t){return new Oi(e,3,t,hr.min(),hr.min(),ga.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(hr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ga.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ga.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _m{constructor(e,t){this.position=e,this.inclusive=t}}function s2(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const i=e[s],l=r.position[s];if(i.field.isKeyField()?n=Xt.comparator(Xt.fromName(l.referenceValue),t.key):n=wd(l,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function i2(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!bo(r.position[t],e.position[t]))return!1;return!0}class ef{constructor(e,t="asc"){this.field=e,this.dir=t}}function tT(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}let wC=class{};class Ns extends wC{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new nT(e,t,n):t==="array-contains"?new aT(e,n):t==="in"?new AT(e,n):t==="not-in"?new oT(e,n):t==="array-contains-any"?new lT(e,n):new Ns(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new sT(e,n):new iT(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(wd(t,this.value)):t!==null&&lu(this.value)===lu(t)&&this.matchesComparison(wd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lr()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class HA extends wC{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new HA(e,t)}matches(e){return xC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xC(r){return r.op==="and"}function bC(r){return rT(r)&&xC(r)}function rT(r){for(const e of r.filters)if(e instanceof HA)return!1;return!0}function zy(r){if(r instanceof Ns)return r.field.canonicalString()+r.op.toString()+xd(r.value);if(bC(r))return r.filters.map((e=>zy(e))).join(",");{const e=r.filters.map((t=>zy(t))).join(",");return`${r.op}(${e})`}}function BC(r,e){return r instanceof Ns?(function(n,s){return s instanceof Ns&&n.op===s.op&&n.field.isEqual(s.field)&&bo(n.value,s.value)})(r,e):r instanceof HA?(function(n,s){return s instanceof HA&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce(((i,l,c)=>i&&BC(l,s.filters[c])),!0):!1})(r,e):void lr()}function CC(r){return r instanceof Ns?(function(t){return`${t.field.canonicalString()} ${t.op} ${xd(t.value)}`})(r):r instanceof HA?(function(t){return t.op.toString()+" {"+t.getFilters().map(CC).join(" ,")+"}"})(r):"Filter"}class nT extends Ns{constructor(e,t,n){super(e,t,n),this.key=Xt.fromName(n.referenceValue)}matches(e){const t=Xt.comparator(e.key,this.key);return this.matchesComparison(t)}}class sT extends Ns{constructor(e,t){super(e,"in",t),this.keys=EC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iT extends Ns{constructor(e,t){super(e,"not-in",t),this.keys=EC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function EC(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((n=>Xt.fromName(n.referenceValue)))}class aT extends Ns{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return i1(t)&&Zh(t.arrayValue,this.value)}}class AT extends Ns{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zh(this.value.arrayValue,t)}}class oT extends Ns{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Zh(this.value.arrayValue,t)}}class lT extends Ns{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!i1(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>Zh(this.value.arrayValue,n)))}}class cT{constructor(e,t=null,n=[],s=[],i=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=l,this.endAt=c,this.ue=null}}function a2(r,e=null,t=[],n=[],s=null,i=null,l=null){return new cT(r,e,t,n,s,i,l)}function a1(r){const e=fr(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>zy(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),ig(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>xd(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>xd(n))).join(",")),e.ue=t}return e.ue}function A1(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!tT(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!BC(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!i2(r.startAt,e.startAt)&&i2(r.endAt,e.endAt)}function Gy(r){return Xt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Ld{constructor(e,t=null,n=[],s=[],i=null,l="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=l,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function uT(r,e,t,n,s,i,l,c){return new Ld(r,e,t,n,s,i,l,c)}function o1(r){return new Ld(r)}function A2(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function IC(r){return r.collectionGroup!==null}function jh(r){const e=fr(r);if(e.ce===null){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new mi(hi.comparator);return l.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ef(i,n))})),t.has(hi.keyField().canonicalString())||e.ce.push(new ef(hi.keyField(),n))}return e.ce}function wo(r){const e=fr(r);return e.le||(e.le=dT(e,jh(r))),e.le}function dT(r,e){if(r.limitType==="F")return a2(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new ef(s.field,i)}));const t=r.endAt?new _m(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new _m(r.startAt.position,r.startAt.inclusive):null;return a2(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function $y(r,e){const t=r.filters.concat([e]);return new Ld(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function qy(r,e,t){return new Ld(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ag(r,e){return A1(wo(r),wo(e))&&r.limitType===e.limitType}function _C(r){return`${a1(wo(r))}|lt:${r.limitType}`}function Wu(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((s=>CC(s))).join(", ")}]`),ig(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>xd(s))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>xd(s))).join(",")),`Target(${n})`})(wo(r))}; limitType=${r.limitType})`}function Ag(r,e){return e.isFoundDocument()&&(function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Xt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(r,e)&&(function(n,s){for(const i of jh(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(r,e)&&(function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0})(r,e)&&(function(n,s){return!(n.startAt&&!(function(l,c,u){const d=s2(l,c,u);return l.inclusive?d<=0:d<0})(n.startAt,jh(n),s)||n.endAt&&!(function(l,c,u){const d=s2(l,c,u);return l.inclusive?d>=0:d>0})(n.endAt,jh(n),s))})(r,e)}function hT(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function NC(r){return(e,t)=>{let n=!1;for(const s of jh(r)){const i=fT(s,e,t);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function fT(r,e,t){const n=r.field.isKeyField()?Xt.comparator(e.key,t.key):(function(i,l,c){const u=l.data.field(i),d=c.data.field(i);return u!==null&&d!==null?wd(u,d):lr()})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return lr()}}class Qd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fu(this.inner,((t,n)=>{for(const[s,i]of n)e(s,i)}))}isEmpty(){return gC(this.inner)}size(){return this.innerSize}}const pT=new $n(Xt.comparator);function cl(){return pT}const SC=new $n(Xt.comparator);function bh(...r){let e=SC;for(const t of r)e=e.insert(t.key,t);return e}function kC(r){let e=SC;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Xc(){return Lh()}function FC(){return Lh()}function Lh(){return new Qd((r=>r.toString()),((r,e)=>r.isEqual(e)))}const mT=new $n(Xt.comparator),gT=new mi(Xt.comparator);function Ir(...r){let e=gT;for(const t of r)e=e.add(t);return e}const yT=new mi(Mr);function vT(){return yT}function l1(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Im(e)?"-0":e}}function TC(r){return{integerValue:""+r}}function wT(r,e){return Y3(e)?TC(e):l1(r,e)}class og{constructor(){this._=void 0}}function xT(r,e,t){return r instanceof Nm?(function(s,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&n1(i)&&(i=s1(i)),i&&(l.fields.__previous_value__=i),{mapValue:l}})(t,e):r instanceof tf?jC(r,e):r instanceof rf?LC(r,e):(function(s,i){const l=UC(s,i),c=o2(l)+o2(s.Pe);return Ky(l)&&Ky(s.Pe)?TC(c):l1(s.serializer,c)})(r,e)}function bT(r,e,t){return r instanceof tf?jC(r,e):r instanceof rf?LC(r,e):t}function UC(r,e){return r instanceof Sm?(function(n){return Ky(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Nm extends og{}class tf extends og{constructor(e){super(),this.elements=e}}function jC(r,e){const t=QC(e);for(const n of r.elements)t.some((s=>bo(s,n)))||t.push(n);return{arrayValue:{values:t}}}class rf extends og{constructor(e){super(),this.elements=e}}function LC(r,e){let t=QC(e);for(const n of r.elements)t=t.filter((s=>!bo(s,n)));return{arrayValue:{values:t}}}class Sm extends og{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function o2(r){return ds(r.integerValue||r.doubleValue)}function QC(r){return i1(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function BT(r,e){return r.field.isEqual(e.field)&&(function(n,s){return n instanceof tf&&s instanceof tf||n instanceof rf&&s instanceof rf?vd(n.elements,s.elements,bo):n instanceof Sm&&s instanceof Sm?bo(n.Pe,s.Pe):n instanceof Nm&&s instanceof Nm})(r.transform,e.transform)}class CT{constructor(e,t){this.version=e,this.transformResults=t}}class ya{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ya}static exists(e){return new ya(void 0,e)}static updateTime(e){return new ya(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function em(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class lg{}function PC(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new cg(r.key,ya.none()):new yf(r.key,r.data,ya.none());{const t=r.data,n=ga.empty();let s=new mi(hi.comparator);for(let i of e.fields)if(!s.has(i)){let l=t.field(i);l===null&&i.length>1&&(i=i.popLast(),l=t.field(i)),l===null?n.delete(i):n.set(i,l),s=s.add(i)}return new Bc(r.key,n,new Da(s.toArray()),ya.none())}}function ET(r,e,t){r instanceof yf?(function(s,i,l){const c=s.value.clone(),u=c2(s.fieldTransforms,i,l.transformResults);c.setAll(u),i.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(r,e,t):r instanceof Bc?(function(s,i,l){if(!em(s.precondition,i))return void i.convertToUnknownDocument(l.version);const c=c2(s.fieldTransforms,i,l.transformResults),u=i.data;u.setAll(DC(s)),u.setAll(c),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()})(r,e,t):(function(s,i,l){i.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Qh(r,e,t,n){return r instanceof yf?(function(i,l,c,u){if(!em(i.precondition,l))return c;const d=i.value.clone(),f=u2(i.fieldTransforms,u,l);return d.setAll(f),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(r,e,t,n):r instanceof Bc?(function(i,l,c,u){if(!em(i.precondition,l))return c;const d=u2(i.fieldTransforms,u,l),f=l.data;return f.setAll(DC(i)),f.setAll(d),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((v=>v.field)))})(r,e,t,n):(function(i,l,c){return em(i.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(r,e,t)}function IT(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),i=UC(n.transform,s||null);i!=null&&(t===null&&(t=ga.empty()),t.set(n.field,i))}return t||null}function l2(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&vd(n,s,((i,l)=>BT(i,l)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yf extends lg{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bc extends lg{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function DC(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function c2(r,e,t){const n=new Map;an(r.length===t.length);for(let s=0;s<t.length;s++){const i=r[s],l=i.transform,c=e.data.field(i.field);n.set(i.field,bT(l,c,t[s]))}return n}function u2(r,e,t){const n=new Map;for(const s of r){const i=s.transform,l=t.data.field(s.field);n.set(s.field,xT(i,l,e))}return n}class cg extends lg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _T extends lg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NT{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ET(i,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Qh(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Qh(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=FC();return this.mutations.forEach((s=>{const i=e.get(s.key),l=i.overlayedDocument;let c=this.applyToLocalView(l,i.mutatedFields);c=t.has(s.key)?null:c;const u=PC(l,c);u!==null&&n.set(s.key,u),l.isValidDocument()||l.convertToNoDocument(hr.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ir())}isEqual(e){return this.batchId===e.batchId&&vd(this.mutations,e.mutations,((t,n)=>l2(t,n)))&&vd(this.baseMutations,e.baseMutations,((t,n)=>l2(t,n)))}}class c1{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){an(e.mutations.length===n.length);let s=(function(){return mT})();const i=e.mutations;for(let l=0;l<i.length;l++)s=s.insert(i[l].key,n[l].version);return new c1(e,t,n,s)}}class ST{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class kT{constructor(e,t){this.count=e,this.unchangedNames=t}}var Is,Fr;function FT(r){switch(r){default:return lr();case yt.CANCELLED:case yt.UNKNOWN:case yt.DEADLINE_EXCEEDED:case yt.RESOURCE_EXHAUSTED:case yt.INTERNAL:case yt.UNAVAILABLE:case yt.UNAUTHENTICATED:return!1;case yt.INVALID_ARGUMENT:case yt.NOT_FOUND:case yt.ALREADY_EXISTS:case yt.PERMISSION_DENIED:case yt.FAILED_PRECONDITION:case yt.ABORTED:case yt.OUT_OF_RANGE:case yt.UNIMPLEMENTED:case yt.DATA_LOSS:return!0}}function RC(r){if(r===void 0)return ll("GRPC error has no .code"),yt.UNKNOWN;switch(r){case Is.OK:return yt.OK;case Is.CANCELLED:return yt.CANCELLED;case Is.UNKNOWN:return yt.UNKNOWN;case Is.DEADLINE_EXCEEDED:return yt.DEADLINE_EXCEEDED;case Is.RESOURCE_EXHAUSTED:return yt.RESOURCE_EXHAUSTED;case Is.INTERNAL:return yt.INTERNAL;case Is.UNAVAILABLE:return yt.UNAVAILABLE;case Is.UNAUTHENTICATED:return yt.UNAUTHENTICATED;case Is.INVALID_ARGUMENT:return yt.INVALID_ARGUMENT;case Is.NOT_FOUND:return yt.NOT_FOUND;case Is.ALREADY_EXISTS:return yt.ALREADY_EXISTS;case Is.PERMISSION_DENIED:return yt.PERMISSION_DENIED;case Is.FAILED_PRECONDITION:return yt.FAILED_PRECONDITION;case Is.ABORTED:return yt.ABORTED;case Is.OUT_OF_RANGE:return yt.OUT_OF_RANGE;case Is.UNIMPLEMENTED:return yt.UNIMPLEMENTED;case Is.DATA_LOSS:return yt.DATA_LOSS;default:return lr()}}(Fr=Is||(Is={}))[Fr.OK=0]="OK",Fr[Fr.CANCELLED=1]="CANCELLED",Fr[Fr.UNKNOWN=2]="UNKNOWN",Fr[Fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fr[Fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fr[Fr.NOT_FOUND=5]="NOT_FOUND",Fr[Fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fr[Fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fr[Fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fr[Fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fr[Fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fr[Fr.ABORTED=10]="ABORTED",Fr[Fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fr[Fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fr[Fr.INTERNAL=13]="INTERNAL",Fr[Fr.UNAVAILABLE=14]="UNAVAILABLE",Fr[Fr.DATA_LOSS=15]="DATA_LOSS";function TT(){return new TextEncoder}const UT=new tu([4294967295,4294967295],0);function d2(r){const e=TT().encode(r),t=new lC;return t.update(e),new Uint8Array(t.digest())}function h2(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new tu([t,n],0),new tu([s,i],0)]}class u1{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Bh(`Invalid padding: ${t}`);if(n<0)throw new Bh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Bh(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Bh(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=tu.fromNumber(this.Ie)}Ee(e,t,n){let s=e.add(t.multiply(tu.fromNumber(n)));return s.compare(UT)===1&&(s=new tu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=d2(e),[n,s]=h2(t);for(let i=0;i<this.hashCount;i++){const l=this.Ee(n,s,i);if(!this.de(l))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),l=new u1(i,s,t);return n.forEach((c=>l.insert(c))),l}insert(e){if(this.Ie===0)return;const t=d2(e),[n,s]=h2(t);for(let i=0;i<this.hashCount;i++){const l=this.Ee(n,s,i);this.Ae(l)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Bh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ug{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ug(hr.min(),s,new $n(Mr),cl(),Ir())}}class vf{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vf(n,t,Ir(),Ir(),Ir())}}class tm{constructor(e,t,n,s){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=s}}class OC{constructor(e,t){this.targetId=e,this.me=t}}class MC{constructor(e,t,n=gi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class f2{constructor(){this.fe=0,this.ge=m2(),this.pe=gi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ir(),t=Ir(),n=Ir();return this.ge.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:lr()}})),new vf(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=m2()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,an(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jT{constructor(e){this.Le=e,this.Be=new Map,this.ke=cl(),this.qe=p2(),this.Qe=new $n(Mr)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:lr()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((n,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,n=e.me.count,s=this.Je(t);if(s){const i=s.target;if(Gy(i))if(n===0){const l=new Xt(i.path);this.Ue(t,l,Oi.newNoDocument(l,hr.min()))}else an(n===1);else{const l=this.Ye(t);if(l!==n){const c=this.Ze(e),u=c?this.Xe(c,e,l):1;if(u!==0){this.je(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=t;let l,c;try{l=ou(n).toUint8Array()}catch(u){if(u instanceof yC)return yd("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new u1(l,s,i)}catch(u){return yd(u instanceof Bh?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let s=0;return n.forEach((i=>{const l=this.Le.tt(),c=`projects/${l.projectId}/databases/${l.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,i,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((i,l)=>{const c=this.Je(l);if(c){if(i.current&&Gy(c.target)){const u=new Xt(c.target.path);this.ke.get(u)!==null||this.it(l,u)||this.Ue(l,u,Oi.newNoDocument(u,e))}i.be&&(t.set(l,i.ve()),i.Ce())}}));let n=Ir();this.qe.forEach(((i,l)=>{let c=!0;l.forEachWhile((u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,l)=>l.setReadTime(e)));const s=new ug(e,t,this.Qe,this.ke,n);return this.ke=cl(),this.qe=p2(),this.Qe=new $n(Mr),s}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new f2,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new mi(Mr),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||zt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new f2),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function p2(){return new $n(Xt.comparator)}function m2(){return new $n(Xt.comparator)}const LT={asc:"ASCENDING",desc:"DESCENDING"},QT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PT={and:"AND",or:"OR"};class DT{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wy(r,e){return r.useProto3Json||ig(e)?e:{value:e}}function km(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HC(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function RT(r,e){return km(r,e.toTimestamp())}function xo(r){return an(!!r),hr.fromTimestamp((function(t){const n=hc(t);return new gs(n.seconds,n.nanos)})(r))}function d1(r,e){return Yy(r,e).canonicalString()}function Yy(r,e){const t=(function(s){return new En(["projects",s.projectId,"databases",s.database])})(r).child("documents");return e===void 0?t:t.child(e)}function VC(r){const e=En.fromString(r);return an(qC(e)),e}function Jy(r,e){return d1(r.databaseId,e.path)}function L0(r,e){const t=VC(e);if(t.get(1)!==r.databaseId.projectId)throw new Pt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Pt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Xt(zC(t))}function KC(r,e){return d1(r.databaseId,e)}function OT(r){const e=VC(r);return e.length===4?En.emptyPath():zC(e)}function Xy(r){return new En(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function zC(r){return an(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function g2(r,e,t){return{name:Jy(r,e),fields:t.value.mapValue.fields}}function MT(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:lr()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(d,f){return d.useProto3Json?(an(f===void 0||typeof f=="string"),gi.fromBase64String(f||"")):(an(f===void 0||f instanceof Buffer||f instanceof Uint8Array),gi.fromUint8Array(f||new Uint8Array))})(r,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(d){const f=d.code===void 0?yt.UNKNOWN:RC(d.code);return new Pt(f,d.message||"")})(l);t=new MC(n,s,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=L0(r,n.document.name),i=xo(n.document.updateTime),l=n.document.createTime?xo(n.document.createTime):hr.min(),c=new ga({mapValue:{fields:n.document.fields}}),u=Oi.newFoundDocument(s,i,l,c),d=n.targetIds||[],f=n.removedTargetIds||[];t=new tm(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=L0(r,n.document),i=n.readTime?xo(n.readTime):hr.min(),l=Oi.newNoDocument(s,i),c=n.removedTargetIds||[];t=new tm([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=L0(r,n.document),i=n.removedTargetIds||[];t=new tm([],i,s,null)}else{if(!("filter"in e))return lr();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,l=new kT(s,i),c=n.targetId;t=new OC(c,l)}}return t}function HT(r,e){let t;if(e instanceof yf)t={update:g2(r,e.key,e.value)};else if(e instanceof cg)t={delete:Jy(r,e.key)};else if(e instanceof Bc)t={update:g2(r,e.key,e.data),updateMask:JT(e.fieldMask)};else{if(!(e instanceof _T))return lr();t={verify:Jy(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(i,l){const c=l.transform;if(c instanceof Nm)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof tf)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof rf)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Sm)return{fieldPath:l.field.canonicalString(),increment:c.Pe};throw lr()})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:RT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:lr()})(r,e.precondition)),t}function VT(r,e){return r&&r.length>0?(an(e!==void 0),r.map((t=>(function(s,i){let l=s.updateTime?xo(s.updateTime):xo(i);return l.isEqual(hr.min())&&(l=xo(i)),new CT(l,s.transformResults||[])})(t,e)))):[]}function KT(r,e){return{documents:[KC(r,e.path)]}}function zT(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=KC(r,s);const i=(function(d){if(d.length!==0)return $C(HA.create(d,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const l=(function(d){if(d.length!==0)return d.map((f=>(function(x){return{field:Yu(x.field),direction:qT(x.dir)}})(f)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Wy(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{_t:t,parent:s}}function GT(r){let e=OT(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){an(n===1);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(v){const x=GC(v);return x instanceof HA&&bC(x)?x.getFilters():[x]})(t.where));let l=[];t.orderBy&&(l=(function(v){return v.map((x=>(function(C){return new ef(Ju(C.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(x)))})(t.orderBy));let c=null;t.limit&&(c=(function(v){let x;return x=typeof v=="object"?v.value:v,ig(x)?null:x})(t.limit));let u=null;t.startAt&&(u=(function(v){const x=!!v.before,y=v.values||[];return new _m(y,x)})(t.startAt));let d=null;return t.endAt&&(d=(function(v){const x=!v.before,y=v.values||[];return new _m(y,x)})(t.endAt)),uT(e,s,l,i,c,"F",u,d)}function $T(r,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lr()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GC(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ju(t.unaryFilter.field);return Ns.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Ju(t.unaryFilter.field);return Ns.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ju(t.unaryFilter.field);return Ns.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ju(t.unaryFilter.field);return Ns.create(l,"!=",{nullValue:"NULL_VALUE"});default:return lr()}})(r):r.fieldFilter!==void 0?(function(t){return Ns.create(Ju(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lr()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return HA.create(t.compositeFilter.filters.map((n=>GC(n))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return lr()}})(t.compositeFilter.op))})(r):lr()}function qT(r){return LT[r]}function WT(r){return QT[r]}function YT(r){return PT[r]}function Yu(r){return{fieldPath:r.canonicalString()}}function Ju(r){return hi.fromServerFormat(r.fieldPath)}function $C(r){return r instanceof Ns?(function(t){if(t.op==="=="){if(n2(t.value))return{unaryFilter:{field:Yu(t.field),op:"IS_NAN"}};if(r2(t.value))return{unaryFilter:{field:Yu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n2(t.value))return{unaryFilter:{field:Yu(t.field),op:"IS_NOT_NAN"}};if(r2(t.value))return{unaryFilter:{field:Yu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yu(t.field),op:WT(t.op),value:t.value}}})(r):r instanceof HA?(function(t){const n=t.getFilters().map((s=>$C(s)));return n.length===1?n[0]:{compositeFilter:{op:YT(t.op),filters:n}}})(r):lr()}function JT(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qC(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Xl{constructor(e,t,n,s,i=hr.min(),l=hr.min(),c=gi.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Xl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XT{constructor(e){this.ct=e}}function ZT(r){const e=GT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?qy(e,e.limit,"L"):e}class eU{constructor(){this.un=new tU}addToCollectionParentIndex(e,t){return this.un.add(t),Bt.resolve()}getCollectionParents(e,t){return Bt.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Bt.resolve()}deleteFieldIndex(e,t){return Bt.resolve()}deleteAllFieldIndexes(e){return Bt.resolve()}createTargetIndexes(e,t){return Bt.resolve()}getDocumentsMatchingTarget(e,t){return Bt.resolve(null)}getIndexType(e,t){return Bt.resolve(0)}getFieldIndexes(e,t){return Bt.resolve([])}getNextCollectionGroupToUpdate(e){return Bt.resolve(null)}getMinOffset(e,t){return Bt.resolve(dc.min())}getMinOffsetFromCollectionGroup(e,t){return Bt.resolve(dc.min())}updateCollectionGroup(e,t,n){return Bt.resolve()}updateIndexEntries(e,t){return Bt.resolve()}}class tU{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new mi(En.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new mi(En.comparator)).toArray()}}class bd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bd(0)}static kn(){return new bd(-1)}}class rU{constructor(){this.changes=new Qd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Oi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Bt.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class sU{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(n=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(n!==null&&Qh(n.mutation,s,Da.empty(),gs.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ir()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ir()){const s=Xc();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,n).next((i=>{let l=bh();return i.forEach(((c,u)=>{l=l.insert(c,u.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const n=Xc();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ir())))}populateOverlays(e,t,n){const s=[];return n.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,n,s){let i=cl();const l=Lh(),c=(function(){return Lh()})();return t.forEach(((u,d)=>{const f=n.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Bc)?i=i.insert(d.key,d):f!==void 0?(l.set(d.key,f.mutation.getFieldMask()),Qh(f.mutation,d,f.mutation.getFieldMask(),gs.now())):l.set(d.key,Da.empty())})),this.recalculateAndSaveOverlays(e,i).next((u=>(u.forEach(((d,f)=>l.set(d,f))),t.forEach(((d,f)=>{var v;return c.set(d,new nU(f,(v=l.get(d))!==null&&v!==void 0?v:null))})),c)))}recalculateAndSaveOverlays(e,t){const n=Lh();let s=new $n(((l,c)=>l-c)),i=Ir();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((u=>{const d=t.get(u);if(d===null)return;let f=n.get(u)||Da.empty();f=c.applyToLocalView(d,f),n.set(u,f);const v=(s.get(c.batchId)||Ir()).add(u);s=s.insert(c.batchId,v)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,v=FC();f.forEach((x=>{if(!i.has(x)){const y=PC(t.get(x),n.get(x));y!==null&&v.set(x,y),i=i.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,v))}return Bt.waitFor(l)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,s){return(function(l){return Xt.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next((i=>{const l=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):Bt.resolve(Xc());let c=-1,u=i;return l.next((d=>Bt.forEach(d,((f,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),i.get(f)?Bt.resolve():this.remoteDocumentCache.getEntry(e,f).next((x=>{u=u.insert(f,x)}))))).next((()=>this.populateOverlays(e,d,i))).next((()=>this.computeViews(e,u,d,Ir()))).next((f=>({batchId:c,changes:kC(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xt(t)).next((n=>{let s=bh();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const i=t.collectionGroup;let l=bh();return this.indexManager.getCollectionParents(e,i).next((c=>Bt.forEach(c,(u=>{const d=(function(v,x){return new Ld(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next((f=>{f.forEach(((v,x)=>{l=l.insert(v,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,s)))).next((l=>{i.forEach(((u,d)=>{const f=d.getKey();l.get(f)===null&&(l=l.insert(f,Oi.newInvalidDocument(f)))}));let c=bh();return l.forEach(((u,d)=>{const f=i.get(u);f!==void 0&&Qh(f.mutation,d,Da.empty(),gs.now()),Ag(t,d)&&(c=c.insert(u,d))})),c}))}}class iU{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Bt.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:xo(s.createTime)}})(t)),Bt.resolve()}getNamedQuery(e,t){return Bt.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:ZT(s.bundledQuery),readTime:xo(s.readTime)}})(t)),Bt.resolve()}}class aU{constructor(){this.overlays=new $n(Xt.comparator),this.Ir=new Map}getOverlay(e,t){return Bt.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Xc();return Bt.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&n.set(s,i)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((s,i)=>{this.ht(e,t,i)})),Bt.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Bt.resolve()}getOverlaysForCollection(e,t,n){const s=Xc(),i=t.length+1,l=new Xt(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return Bt.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new $n(((d,f)=>d-f));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let f=i.get(d.largestBatchId);f===null&&(f=Xc(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=Xc(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,f)=>c.set(d,f))),!(c.size()>=s)););return Bt.resolve(c)}ht(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(n.key,new ST(t,n));let i=this.Ir.get(t);i===void 0&&(i=Ir(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class AU{constructor(){this.sessionToken=gi.EMPTY_BYTE_STRING}getSessionToken(e){return Bt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Bt.resolve()}}class h1{constructor(){this.Tr=new mi(Xs.Er),this.dr=new mi(Xs.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Xs(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Vr(new Xs(e,t))}mr(e,t){e.forEach((n=>this.removeReference(n,t)))}gr(e){const t=new Xt(new En([])),n=new Xs(t,e),s=new Xs(t,e+1),i=[];return this.dr.forEachInRange([n,s],(l=>{this.Vr(l),i.push(l.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Xt(new En([])),n=new Xs(t,e),s=new Xs(t,e+1);let i=Ir();return this.dr.forEachInRange([n,s],(l=>{i=i.add(l.key)})),i}containsKey(e){const t=new Xs(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Xs{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Xt.comparator(e.key,t.key)||Mr(e.wr,t.wr)}static Ar(e,t){return Mr(e.wr,t.wr)||Xt.comparator(e.key,t.key)}}class oU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new mi(Xs.Er)}checkEmpty(e){return Bt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new NT(i,t,n,s);this.mutationQueue.push(l);for(const c of s)this.br=this.br.add(new Xs(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Bt.resolve(l)}lookupMutationBatch(e,t){return Bt.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.vr(n),i=s<0?0:s;return Bt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Bt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Bt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xs(t,0),s=new Xs(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],(l=>{const c=this.Dr(l.wr);i.push(c)})),Bt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mi(Mr);return t.forEach((s=>{const i=new Xs(s,0),l=new Xs(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,l],(c=>{n=n.add(c.wr)}))})),Bt.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;Xt.isDocumentKey(i)||(i=i.child(""));const l=new Xs(new Xt(i),0);let c=new mi(Mr);return this.br.forEachWhile((u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)}),l),Bt.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach((n=>{const s=this.Dr(n);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){an(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Bt.forEach(t.mutations,(s=>{const i=new Xs(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new Xs(t,0),s=this.br.firstAfterOrEqual(n);return Bt.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bt.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lU{constructor(e){this.Mr=e,this.docs=(function(){return new $n(Xt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,l=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:l}),this.size+=l-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bt.resolve(n?n.document.mutableCopy():Oi.newInvalidDocument(t))}getEntries(e,t){let n=cl();return t.forEach((s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Oi.newInvalidDocument(s))})),Bt.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=cl();const l=t.path,c=new Xt(l.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||G3(z3(f),n)<=0||(s.has(f.key)||Ag(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return Bt.resolve(i)}getAllFromCollectionGroup(e,t,n,s){lr()}Or(e,t){return Bt.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new cU(this)}getSize(e){return Bt.resolve(this.size)}}class cU extends rU{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)})),Bt.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class uU{constructor(e){this.persistence=e,this.Nr=new Qd((t=>a1(t)),A1),this.lastRemoteSnapshotVersion=hr.min(),this.highestTargetId=0,this.Lr=0,this.Br=new h1,this.targetCount=0,this.kr=bd.Bn()}forEachTarget(e,t){return this.Nr.forEach(((n,s)=>t(s))),Bt.resolve()}getLastRemoteSnapshotVersion(e){return Bt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bt.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Bt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Bt.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new bd(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Bt.resolve()}updateTargetData(e,t){return this.Kn(t),Bt.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Bt.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.Nr.forEach(((l,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Nr.delete(l),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),Bt.waitFor(i).next((()=>s))}getTargetCount(e){return Bt.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Bt.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Bt.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((l=>{i.push(s.markPotentiallyOrphaned(e,l))})),Bt.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Bt.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Bt.resolve(n)}containsKey(e,t){return Bt.resolve(this.Br.containsKey(t))}}class dU{constructor(e,t){this.qr={},this.overlays={},this.Qr=new r1(0),this.Kr=!1,this.Kr=!0,this.$r=new AU,this.referenceDelegate=e(this),this.Ur=new uU(this),this.indexManager=new eU,this.remoteDocumentCache=(function(s){return new lU(s)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new XT(t),this.Gr=new iU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new oU(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){zt("MemoryPersistence","Starting transaction:",e);const s=new hU(this.Qr.next());return this.referenceDelegate.zr(),n(s).next((i=>this.referenceDelegate.jr(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Hr(e,t){return Bt.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class hU extends q3{constructor(e){super(),this.currentSequenceNumber=e}}class f1{constructor(e){this.persistence=e,this.Jr=new h1,this.Yr=null}static Zr(e){return new f1(e)}get Xr(){if(this.Yr)return this.Yr;throw lr()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Bt.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Bt.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Bt.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bt.forEach(this.Xr,(n=>{const s=Xt.fromPath(n);return this.ei(e,s).next((i=>{i||t.removeEntry(s,hr.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return Bt.or([()=>Bt.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class p1{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=s}static Wi(e,t){let n=Ir(),s=Ir();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new p1(e,t.fromCache,n,s)}}class fU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class pU{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return sS()?8:W3(Mi())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,s){const i={result:null};return this.Yi(e,t).next((l=>{i.result=l})).next((()=>{if(!i.result)return this.Zi(e,t,s,n).next((l=>{i.result=l}))})).next((()=>{if(i.result)return;const l=new fU;return this.Xi(e,t,l).next((c=>{if(i.result=c,this.zi)return this.es(e,t,l,c.size)}))})).next((()=>i.result))}es(e,t,n,s){return n.documentReadCount<this.ji?(dh()<=Sr.DEBUG&&zt("QueryEngine","SDK will not create cache indexes for query:",Wu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Bt.resolve()):(dh()<=Sr.DEBUG&&zt("QueryEngine","Query:",Wu(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(dh()<=Sr.DEBUG&&zt("QueryEngine","The SDK decides to create cache indexes for query:",Wu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wo(t))):Bt.resolve())}Yi(e,t){if(A2(t))return Bt.resolve(null);let n=wo(t);return this.indexManager.getIndexType(e,n).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=qy(t,null,"F"),n=wo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const l=Ir(...i);return this.Ji.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,n).next((u=>{const d=this.ts(t,c);return this.ns(t,d,l,u.readTime)?this.Yi(e,qy(t,null,"F")):this.rs(e,d,t,u)}))))})))))}Zi(e,t,n,s){return A2(t)||s.isEqual(hr.min())?Bt.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const l=this.ts(t,i);return this.ns(t,l,n,s)?Bt.resolve(null):(dh()<=Sr.DEBUG&&zt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wu(t)),this.rs(e,l,t,K3(s,-1)).next((c=>c)))}))}ts(e,t){let n=new mi(NC(e));return t.forEach(((s,i)=>{Ag(e,i)&&(n=n.add(i))})),n}ns(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,t,n){return dh()<=Sr.DEBUG&&zt("QueryEngine","Using full collection scan to execute query:",Wu(t)),this.Ji.getDocumentsMatchingQuery(e,t,dc.min(),n)}rs(e,t,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next((i=>(t.forEach((l=>{i=i.insert(l.key,l)})),i)))}}class mU{constructor(e,t,n,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new $n(Mr),this._s=new Qd((i=>a1(i)),A1),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sU(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function gU(r,e,t,n){return new mU(r,e,t,n)}async function WC(r,e){const t=fr(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next((i=>(s=i,t.ls(e),t.mutationQueue.getAllMutationBatches(n)))).next((i=>{const l=[],c=[];let u=Ir();for(const d of s){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(n,u).next((d=>({hs:d,removedBatchIds:l,addedBatchIds:c})))}))}))}function yU(r,e){const t=fr(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const s=e.batch.keys(),i=t.cs.newChangeBuffer({trackRemovals:!0});return(function(c,u,d,f){const v=d.batch,x=v.keys();let y=Bt.resolve();return x.forEach((C=>{y=y.next((()=>f.getEntry(u,C))).next((N=>{const E=d.docVersions.get(C);an(E!==null),N.version.compareTo(E)<0&&(v.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))}))})),y.next((()=>c.mutationQueue.removeMutationBatch(u,v)))})(t,n,e,i).next((()=>i.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let u=Ir();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u})(e)))).next((()=>t.localDocuments.getDocuments(n,s)))}))}function YC(r){const e=fr(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function vU(r,e){const t=fr(r),n=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const l=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const c=[];e.targetChanges.forEach(((f,v)=>{const x=s.get(v);if(!x)return;c.push(t.Ur.removeMatchingKeys(i,f.removedDocuments,v).next((()=>t.Ur.addMatchingKeys(i,f.addedDocuments,v))));let y=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(v)!==null?y=y.withResumeToken(gi.EMPTY_BYTE_STRING,hr.min()).withLastLimboFreeSnapshotVersion(hr.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,n)),s=s.insert(v,y),(function(N,E,_){return N.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0})(x,y,f)&&c.push(t.Ur.updateTargetData(i,y))}));let u=cl(),d=Ir();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(wU(i,l,e.documentUpdates).next((f=>{u=f.Ps,d=f.Is}))),!n.isEqual(hr.min())){const f=t.Ur.getLastRemoteSnapshotVersion(i).next((v=>t.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(f)}return Bt.waitFor(c).next((()=>l.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,u,d))).next((()=>u))})).then((i=>(t.os=s,i)))}function wU(r,e,t){let n=Ir(),s=Ir();return t.forEach((i=>n=n.add(i))),e.getEntries(r,n).next((i=>{let l=cl();return t.forEach(((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(hr.min())?(e.removeEntry(c,u.readTime),l=l.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),l=l.insert(c,u)):zt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)})),{Ps:l,Is:s}}))}function xU(r,e){const t=fr(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function bU(r,e){const t=fr(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let s;return t.Ur.getTargetData(n,e).next((i=>i?(s=i,Bt.resolve(s)):t.Ur.allocateTargetId(n).next((l=>(s=new Xl(e,l,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,s).next((()=>s)))))))})).then((n=>{const s=t.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n}))}async function Zy(r,e,t){const n=fr(r),s=n.os.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,(l=>n.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!gf(l))throw l;zt("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function y2(r,e,t){const n=fr(r);let s=hr.min(),i=Ir();return n.persistence.runTransaction("Execute query","readwrite",(l=>(function(u,d,f){const v=fr(u),x=v._s.get(f);return x!==void 0?Bt.resolve(v.os.get(x)):v.Ur.getTargetData(d,f)})(n,l,wo(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(l,c.targetId).next((u=>{i=u}))})).next((()=>n.ss.getDocumentsMatchingQuery(l,e,t?s:hr.min(),t?i:Ir()))).next((c=>(BU(n,hT(e),c),{documents:c,Ts:i})))))}function BU(r,e,t){let n=r.us.get(e)||hr.min();t.forEach(((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),r.us.set(e,n)}class v2{constructor(){this.activeTargetIds=vT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CU{constructor(){this.so=new v2,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new v2,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class EU{_o(e){}shutdown(){}}class w2{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){zt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){zt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let dp=null;function Q0(){return dp===null?dp=(function(){return 268435456+Math.round(2147483648*Math.random())})():dp++,"0x"+dp.toString(16)}const IU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _U{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Fi="WebChannelConnection";class NU extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(t,n,s,i,l){const c=Q0(),u=this.xo(t,n.toUriEncodedString());zt("RestConnection",`Sending RPC '${t}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,l),this.No(t,u,d,s).then((f=>(zt("RestConnection",`Received RPC '${t}' ${c}: `,f),f)),(f=>{throw yd("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",u,"request:",s),f}))}Lo(t,n,s,i,l,c){return this.Mo(t,n,s,i,l)}Oo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jd})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,l)=>t[l]=i)),s&&s.headers.forEach(((i,l)=>t[l]=i))}xo(t,n){const s=IU[t];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,s){const i=Q0();return new Promise(((l,c)=>{const u=new cC;u.setWithCredentials(!0),u.listenOnce(uC.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Xp.NO_ERROR:const f=u.getResponseJson();zt(Fi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),l(f);break;case Xp.TIMEOUT:zt(Fi,`RPC '${e}' ${i} timed out`),c(new Pt(yt.DEADLINE_EXCEEDED,"Request time out"));break;case Xp.HTTP_ERROR:const v=u.getStatus();if(zt(Fi,`RPC '${e}' ${i} failed with status:`,v,"response text:",u.getResponseText()),v>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const y=x?.error;if(y&&y.status&&y.message){const C=(function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(yt).indexOf(_)>=0?_:yt.UNKNOWN})(y.status);c(new Pt(C,y.message))}else c(new Pt(yt.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Pt(yt.UNAVAILABLE,"Connection failed."));break;default:lr()}}finally{zt(Fi,`RPC '${e}' ${i} completed.`)}}));const d=JSON.stringify(s);zt(Fi,`RPC '${e}' ${i} sending request:`,s),u.send(t,"POST",d,n,15)}))}Bo(e,t,n){const s=Q0(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=fC(),c=hC(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const f=i.join("");zt(Fi,`Creating RPC '${e}' stream ${s}: ${f}`,u);const v=l.createWebChannel(f,u);let x=!1,y=!1;const C=new _U({Io:E=>{y?zt(Fi,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(x||(zt(Fi,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),zt(Fi,`RPC '${e}' stream ${s} sending:`,E),v.send(E))},To:()=>v.close()}),N=(E,_,P)=>{E.listen(_,(H=>{try{P(H)}catch(D){setTimeout((()=>{throw D}),0)}}))};return N(v,xh.EventType.OPEN,(()=>{y||(zt(Fi,`RPC '${e}' stream ${s} transport opened.`),C.yo())})),N(v,xh.EventType.CLOSE,(()=>{y||(y=!0,zt(Fi,`RPC '${e}' stream ${s} transport closed`),C.So())})),N(v,xh.EventType.ERROR,(E=>{y||(y=!0,yd(Fi,`RPC '${e}' stream ${s} transport errored:`,E),C.So(new Pt(yt.UNAVAILABLE,"The operation could not be completed")))})),N(v,xh.EventType.MESSAGE,(E=>{var _;if(!y){const P=E.data[0];an(!!P);const H=P,D=H.error||((_=H[0])===null||_===void 0?void 0:_.error);if(D){zt(Fi,`RPC '${e}' stream ${s} received error:`,D);const J=D.status;let Z=(function(U){const V=Is[U];if(V!==void 0)return RC(V)})(J),O=D.message;Z===void 0&&(Z=yt.INTERNAL,O="Unknown error status: "+J+" with message "+D.message),y=!0,C.So(new Pt(Z,O)),v.close()}else zt(Fi,`RPC '${e}' stream ${s} received:`,P),C.bo(P)}})),N(c,dC.STAT_EVENT,(E=>{E.stat===Hy.PROXY?zt(Fi,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Hy.NOPROXY&&zt(Fi,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.wo()}),0),C}}function P0(){return typeof document<"u"?document:null}function dg(r){return new DT(r,!0)}class JC{constructor(e,t,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-n);s>0&&zt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class XC{constructor(e,t,n,s,i,l,c,u){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new JC(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===yt.RESOURCE_EXHAUSTED?(ll(t.toString()),ll("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===yt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,s])=>{this.Yo===t&&this.P_(n,s)}),(n=>{e((()=>{const s=new Pt(yt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{n((()=>this.I_(s)))})),this.stream.onMessage((s=>{n((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return zt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(zt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SU extends XC{constructor(e,t,n,s,i,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,l),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=MT(this.serializer,e),n=(function(i){if(!("targetChange"in i))return hr.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?hr.min():l.readTime?xo(l.readTime):hr.min()})(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Xy(this.serializer),t.addTarget=(function(i,l){let c;const u=l.target;if(c=Gy(u)?{documents:KT(i,u)}:{query:zT(i,u)._t},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=HC(i,l.resumeToken);const d=Wy(i,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(hr.min())>0){c.readTime=km(i,l.snapshotVersion.toTimestamp());const d=Wy(i,l.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const n=$T(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Xy(this.serializer),t.removeTarget=e,this.a_(t)}}class kU extends XC{constructor(e,t,n,s,i,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,l),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return an(!!e.streamToken),this.lastStreamToken=e.streamToken,an(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){an(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=VT(e.writeResults,e.commitTime),n=xo(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Xy(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>HT(this.serializer,n)))};this.a_(t)}}class FU extends class{}{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Pt(yt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,l])=>this.connection.Mo(e,Yy(t,n),s,i,l))).catch((i=>{throw i.name==="FirebaseError"?(i.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pt(yt.UNKNOWN,i.toString())}))}Lo(e,t,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Lo(e,Yy(t,n),s,l,c,i))).catch((l=>{throw l.name==="FirebaseError"?(l.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Pt(yt.UNKNOWN,l.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class TU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ll(t),this.D_=!1):zt("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class UU{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((l=>{n.enqueueAndForget((async()=>{pu(this)&&(zt("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const d=fr(u);d.L_.add(4),await wf(d),d.q_.set("Unknown"),d.L_.delete(4),await hg(d)})(this))}))})),this.q_=new TU(n,s)}}async function hg(r){if(pu(r))for(const e of r.B_)await e(!0)}async function wf(r){for(const e of r.B_)await e(!1)}function ZC(r,e){const t=fr(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),v1(t)?y1(t):Pd(t).r_()&&g1(t,e))}function m1(r,e){const t=fr(r),n=Pd(t);t.N_.delete(e),n.r_()&&eE(t,e),t.N_.size===0&&(n.r_()?n.o_():pu(t)&&t.q_.set("Unknown"))}function g1(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(hr.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pd(r).A_(e)}function eE(r,e){r.Q_.xe(e),Pd(r).R_(e)}function y1(r){r.Q_=new jT({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Pd(r).start(),r.q_.v_()}function v1(r){return pu(r)&&!Pd(r).n_()&&r.N_.size>0}function pu(r){return fr(r).L_.size===0}function tE(r){r.Q_=void 0}async function jU(r){r.q_.set("Online")}async function LU(r){r.N_.forEach(((e,t)=>{g1(r,e)}))}async function QU(r,e){tE(r),v1(r)?(r.q_.M_(e),y1(r)):r.q_.set("Unknown")}async function PU(r,e,t){if(r.q_.set("Online"),e instanceof MC&&e.state===2&&e.cause)try{await(async function(s,i){const l=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.N_.delete(c),s.Q_.removeTarget(c))})(r,e)}catch(n){zt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Fm(r,n)}else if(e instanceof tm?r.Q_.Ke(e):e instanceof OC?r.Q_.He(e):r.Q_.We(e),!t.isEqual(hr.min()))try{const n=await YC(r.localStore);t.compareTo(n)>=0&&await(function(i,l){const c=i.Q_.rt(l);return c.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,l))}})),c.targetMismatches.forEach(((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(gi.EMPTY_BYTE_STRING,f.snapshotVersion)),eE(i,u);const v=new Xl(f.target,u,d,f.sequenceNumber);g1(i,v)})),i.remoteSyncer.applyRemoteEvent(c)})(r,t)}catch(n){zt("RemoteStore","Failed to raise snapshot:",n),await Fm(r,n)}}async function Fm(r,e,t){if(!gf(e))throw e;r.L_.add(1),await wf(r),r.q_.set("Offline"),t||(t=()=>YC(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{zt("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await hg(r)}))}function rE(r,e){return e().catch((t=>Fm(r,t,e)))}async function fg(r){const e=fr(r),t=fc(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;DU(e);)try{const s=await xU(e.localStore,n);if(s===null){e.O_.length===0&&t.o_();break}n=s.batchId,RU(e,s)}catch(s){await Fm(e,s)}nE(e)&&sE(e)}function DU(r){return pu(r)&&r.O_.length<10}function RU(r,e){r.O_.push(e);const t=fc(r);t.r_()&&t.V_&&t.m_(e.mutations)}function nE(r){return pu(r)&&!fc(r).n_()&&r.O_.length>0}function sE(r){fc(r).start()}async function OU(r){fc(r).p_()}async function MU(r){const e=fc(r);for(const t of r.O_)e.m_(t.mutations)}async function HU(r,e,t){const n=r.O_.shift(),s=c1.from(n,e,t);await rE(r,(()=>r.remoteSyncer.applySuccessfulWrite(s))),await fg(r)}async function VU(r,e){e&&fc(r).V_&&await(async function(n,s){if((function(l){return FT(l)&&l!==yt.ABORTED})(s.code)){const i=n.O_.shift();fc(n).s_(),await rE(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s))),await fg(n)}})(r,e),nE(r)&&sE(r)}async function x2(r,e){const t=fr(r);t.asyncQueue.verifyOperationInProgress(),zt("RemoteStore","RemoteStore received new credentials");const n=pu(t);t.L_.add(3),await wf(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await hg(t)}async function KU(r,e){const t=fr(r);e?(t.L_.delete(2),await hg(t)):e||(t.L_.add(2),await wf(t),t.q_.set("Unknown"))}function Pd(r){return r.K_||(r.K_=(function(t,n,s){const i=fr(t);return i.w_(),new SU(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(r.datastore,r.asyncQueue,{Eo:jU.bind(null,r),Ro:LU.bind(null,r),mo:QU.bind(null,r),d_:PU.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),v1(r)?y1(r):r.q_.set("Unknown")):(await r.K_.stop(),tE(r))}))),r.K_}function fc(r){return r.U_||(r.U_=(function(t,n,s){const i=fr(t);return i.w_(),new kU(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:OU.bind(null,r),mo:VU.bind(null,r),f_:MU.bind(null,r),g_:HU.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await fg(r)):(await r.U_.stop(),r.O_.length>0&&(zt("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}class w1{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new oc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,i){const l=Date.now()+n,c=new w1(e,t,l,s,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Pt(yt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x1(r,e){if(ll("AsyncQueue",`${e}: ${r}`),gf(r))return new Pt(yt.UNAVAILABLE,`${e}: ${r}`);throw r}class od{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Xt.comparator(t.key,n.key):(t,n)=>Xt.comparator(t.key,n.key),this.keyedMap=bh(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new od(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof od)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new od;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class b2{constructor(){this.W_=new $n(Xt.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):lr():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Bd{constructor(e,t,n,s,i,l,c,u,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,s,i){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Bd(e,t,od.emptySet(t),l,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ag(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}class zU{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class GU{constructor(){this.queries=B2(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){const s=fr(t),i=s.queries;s.queries=B2(),i.forEach(((l,c)=>{for(const u of c.j_)u.onError(n)}))})(this,new Pt(yt.ABORTED,"Firestore shutting down"))}}function B2(){return new Qd((r=>_C(r)),ag)}async function iE(r,e){const t=fr(r);let n=3;const s=e.query;let i=t.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new zU,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await t.onListen(s,!0);break;case 1:i.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=x1(l,`Initialization of query '${Wu(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,i),i.j_.push(e),e.Z_(t.onlineState),i.z_&&e.X_(i.z_)&&b1(t)}async function aE(r,e){const t=fr(r),n=e.query;let s=3;const i=t.queries.get(n);if(i){const l=i.j_.indexOf(e);l>=0&&(i.j_.splice(l,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function $U(r,e){const t=fr(r);let n=!1;for(const s of e){const i=s.query,l=t.queries.get(i);if(l){for(const c of l.j_)c.X_(s)&&(n=!0);l.z_=s}}n&&b1(t)}function qU(r,e,t){const n=fr(r),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(t);n.queries.delete(e)}function b1(r){r.Y_.forEach((e=>{e.next()}))}var ev,C2;(C2=ev||(ev={})).ea="default",C2.Cache="cache";class AE{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Bd(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Bd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ev.Cache}}class oE{constructor(e){this.key=e}}class lE{constructor(e){this.key=e}}class WU{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ir(),this.mutatedKeys=Ir(),this.Aa=NC(e),this.Ra=new od(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new b2,s=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,v)=>{const x=s.get(f),y=Ag(this.query,v)?v:null,C=!!x&&this.mutatedKeys.has(x.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;x&&y?x.data.isEqual(y.data)?C!==N&&(n.track({type:3,doc:y}),E=!0):this.ga(x,y)||(n.track({type:2,doc:y}),E=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(c=!0)):!x&&y?(n.track({type:0,doc:y}),E=!0):x&&!y&&(n.track({type:1,doc:x}),E=!0,(u||d)&&(c=!0)),E&&(y?(l=l.add(y),i=N?i.add(f):i.delete(f)):(l=l.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const f=this.query.limitType==="F"?l.last():l.first();l=l.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{Ra:l,fa:n,ns:c,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort(((f,v)=>(function(y,C){const N=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lr()}};return N(y)-N(C)})(f.type,v.type)||this.Aa(f.doc,v.doc))),this.pa(n),s=s!=null&&s;const c=t&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,l.length!==0||d?{snapshot:new Bd(this.query,e.Ra,i,l,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new b2,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ir(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const t=[];return e.forEach((n=>{this.da.has(n)||t.push(new lE(n))})),this.da.forEach((n=>{e.has(n)||t.push(new oE(n))})),t}ba(e){this.Ta=e.Ts,this.da=Ir();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Bd.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class YU{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class JU{constructor(e){this.key=e,this.va=!1}}class XU{constructor(e,t,n,s,i,l){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new Qd((c=>_C(c)),ag),this.Ma=new Map,this.xa=new Set,this.Oa=new $n(Xt.comparator),this.Na=new Map,this.La=new h1,this.Ba={},this.ka=new Map,this.qa=bd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ZU(r,e,t=!0){const n=pE(r);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await cE(n,e,t,!0),s}async function ej(r,e){const t=pE(r);await cE(t,e,!0,!1)}async function cE(r,e,t,n){const s=await bU(r.localStore,wo(e)),i=s.targetId,l=r.sharedClientState.addLocalQueryTarget(i,t);let c;return n&&(c=await tj(r,e,i,l==="current",s.resumeToken)),r.isPrimaryClient&&t&&ZC(r.remoteStore,s),c}async function tj(r,e,t,n,s){r.Ka=(v,x,y)=>(async function(N,E,_,P){let H=E.view.ma(_);H.ns&&(H=await y2(N.localStore,E.query,!1).then((({documents:O})=>E.view.ma(O,H))));const D=P&&P.targetChanges.get(E.targetId),J=P&&P.targetMismatches.get(E.targetId)!=null,Z=E.view.applyChanges(H,N.isPrimaryClient,D,J);return I2(N,E.targetId,Z.wa),Z.snapshot})(r,v,x,y);const i=await y2(r.localStore,e,!0),l=new WU(e,i.Ts),c=l.ma(i.documents),u=vf.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),d=l.applyChanges(c,r.isPrimaryClient,u);I2(r,t,d.wa);const f=new YU(e,t,l);return r.Fa.set(e,f),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),d.snapshot}async function rj(r,e,t){const n=fr(r),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter((l=>!ag(l,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await Zy(n.localStore,s.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(s.targetId),t&&m1(n.remoteStore,s.targetId),tv(n,s.targetId)})).catch(mf)):(tv(n,s.targetId),await Zy(n.localStore,s.targetId,!0))}async function nj(r,e){const t=fr(r),n=t.Fa.get(e),s=t.Ma.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),m1(t.remoteStore,n.targetId))}async function sj(r,e,t){const n=uj(r);try{const s=await(function(l,c){const u=fr(l),d=gs.now(),f=c.reduce(((y,C)=>y.add(C.key)),Ir());let v,x;return u.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let C=cl(),N=Ir();return u.cs.getEntries(y,f).next((E=>{C=E,C.forEach(((_,P)=>{P.isValidDocument()||(N=N.add(_))}))})).next((()=>u.localDocuments.getOverlayedDocuments(y,C))).next((E=>{v=E;const _=[];for(const P of c){const H=IT(P,v.get(P.key).overlayedDocument);H!=null&&_.push(new Bc(P.key,H,vC(H.value.mapValue),ya.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,_,c)})).next((E=>{x=E;const _=E.applyToLocalDocumentSet(v,N);return u.documentOverlayCache.saveOverlays(y,E.batchId,_)}))})).then((()=>({batchId:x.batchId,changes:kC(v)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),(function(l,c,u){let d=l.Ba[l.currentUser.toKey()];d||(d=new $n(Mr)),d=d.insert(c,u),l.Ba[l.currentUser.toKey()]=d})(n,s.batchId,t),await xf(n,s.changes),await fg(n.remoteStore)}catch(s){const i=x1(s,"Failed to persist write");t.reject(i)}}async function uE(r,e){const t=fr(r);try{const n=await vU(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const l=t.Na.get(i);l&&(an(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?an(l.va):s.removedDocuments.size>0&&(an(l.va),l.va=!1))})),await xf(t,n,e)}catch(n){await mf(n)}}function E2(r,e,t){const n=fr(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Fa.forEach(((i,l)=>{const c=l.view.Z_(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const u=fr(l);u.onlineState=c;let d=!1;u.queries.forEach(((f,v)=>{for(const x of v.j_)x.Z_(c)&&(d=!0)})),d&&b1(u)})(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function ij(r,e,t){const n=fr(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Na.get(e),i=s&&s.key;if(i){let l=new $n(Xt.comparator);l=l.insert(i,Oi.newNoDocument(i,hr.min()));const c=Ir().add(i),u=new ug(hr.min(),new Map,new $n(Mr),l,c);await uE(n,u),n.Oa=n.Oa.remove(i),n.Na.delete(e),B1(n)}else await Zy(n.localStore,e,!1).then((()=>tv(n,e,t))).catch(mf)}async function aj(r,e){const t=fr(r),n=e.batch.batchId;try{const s=await yU(t.localStore,e);hE(t,n,null),dE(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await xf(t,s)}catch(s){await mf(s)}}async function Aj(r,e,t){const n=fr(r);try{const s=await(function(l,c){const u=fr(l);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next((v=>(an(v!==null),f=v.keys(),u.mutationQueue.removeMutationBatch(d,v)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f))).next((()=>u.localDocuments.getDocuments(d,f)))}))})(n.localStore,e);hE(n,e,t),dE(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await xf(n,s)}catch(s){await mf(s)}}function dE(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function hE(r,e,t){const n=fr(r);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function tv(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Ma.get(e))r.Fa.delete(n),t&&r.Ca.$a(n,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((n=>{r.La.containsKey(n)||fE(r,n)}))}function fE(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(m1(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),B1(r))}function I2(r,e,t){for(const n of t)n instanceof oE?(r.La.addReference(n.key,e),oj(r,n)):n instanceof lE?(zt("SyncEngine","Document no longer in limbo: "+n.key),r.La.removeReference(n.key,e),r.La.containsKey(n.key)||fE(r,n.key)):lr()}function oj(r,e){const t=e.key,n=t.path.canonicalString();r.Oa.get(t)||r.xa.has(n)||(zt("SyncEngine","New document in limbo: "+t),r.xa.add(n),B1(r))}function B1(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new Xt(En.fromString(e)),n=r.qa.next();r.Na.set(n,new JU(t)),r.Oa=r.Oa.insert(t,n),ZC(r.remoteStore,new Xl(wo(o1(t.path)),n,"TargetPurposeLimboResolution",r1.oe))}}async function xf(r,e,t){const n=fr(r),s=[],i=[],l=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,u)=>{l.push(n.Ka(u,e,t).then((d=>{var f;if((d||t)&&n.isPrimaryClient){const v=d?!d.fromCache:(f=t?.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(u.targetId,v?"current":"not-current")}if(d){s.push(d);const v=p1.Wi(u.targetId,d);i.push(v)}})))})),await Promise.all(l),n.Ca.d_(s),await(async function(u,d){const f=fr(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>Bt.forEach(d,(x=>Bt.forEach(x.$i,(y=>f.persistence.referenceDelegate.addReference(v,x.targetId,y))).next((()=>Bt.forEach(x.Ui,(y=>f.persistence.referenceDelegate.removeReference(v,x.targetId,y)))))))))}catch(v){if(!gf(v))throw v;zt("LocalStore","Failed to update sequence numbers: "+v)}for(const v of d){const x=v.targetId;if(!v.fromCache){const y=f.os.get(x),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(x,N)}}})(n.localStore,i))}async function lj(r,e){const t=fr(r);if(!t.currentUser.isEqual(e)){zt("SyncEngine","User change. New user:",e.toKey());const n=await WC(t.localStore,e);t.currentUser=e,(function(i,l){i.ka.forEach((c=>{c.forEach((u=>{u.reject(new Pt(yt.CANCELLED,l))}))})),i.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await xf(t,n.hs)}}function cj(r,e){const t=fr(r),n=t.Na.get(e);if(n&&n.va)return Ir().add(n.key);{let s=Ir();const i=t.Ma.get(e);if(!i)return s;for(const l of i){const c=t.Fa.get(l);s=s.unionWith(c.view.Va)}return s}}function pE(r){const e=fr(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=uE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ij.bind(null,e),e.Ca.d_=$U.bind(null,e.eventManager),e.Ca.$a=qU.bind(null,e.eventManager),e}function uj(r){const e=fr(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Aj.bind(null,e),e}class Tm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dg(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return gU(this.persistence,new pU,e.initialUser,this.serializer)}Ga(e){return new dU(f1.Zr,this.serializer)}Wa(e){return new CU}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tm.provider={build:()=>new Tm};class rv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>E2(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lj.bind(null,this.syncEngine),await KU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GU})()}createDatastore(e){const t=dg(e.databaseInfo.databaseId),n=(function(i){return new NU(i)})(e.databaseInfo);return(function(i,l,c,u){return new FU(i,l,c,u)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,s,i,l,c){return new UU(n,s,i,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>E2(this.syncEngine,t,0)),(function(){return w2.D()?new w2:new EU})())}createSyncEngine(e,t){return(function(s,i,l,c,u,d,f){const v=new XU(s,i,l,c,u,d);return f&&(v.Qa=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const i=fr(s);zt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await wf(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}rv.provider={build:()=>new rv};class mE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ll("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class dj{constructor(e,t,n,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=Di.UNAUTHENTICATED,this.clientId=mC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async l=>{zt("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(n,(l=>(zt("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=x1(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function D0(r,e){r.asyncQueue.verifyOperationInProgress(),zt("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async s=>{n.isEqual(s)||(await WC(e.localStore,s),n=s)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function _2(r,e){r.asyncQueue.verifyOperationInProgress();const t=await hj(r);zt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>x2(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,s)=>x2(e.remoteStore,s))),r._onlineComponents=e}async function hj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){zt("FirestoreClient","Using user provided OfflineComponentProvider");try{await D0(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===yt.FAILED_PRECONDITION||s.code===yt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;yd("Error using user provided cache. Falling back to memory cache: "+t),await D0(r,new Tm)}}else zt("FirestoreClient","Using default OfflineComponentProvider"),await D0(r,new Tm);return r._offlineComponents}async function gE(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(zt("FirestoreClient","Using user provided OnlineComponentProvider"),await _2(r,r._uninitializedComponentsProvider._online)):(zt("FirestoreClient","Using default OnlineComponentProvider"),await _2(r,new rv))),r._onlineComponents}function fj(r){return gE(r).then((e=>e.syncEngine))}async function nv(r){const e=await gE(r),t=e.eventManager;return t.onListen=ZU.bind(null,e.syncEngine),t.onUnlisten=rj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ej.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nj.bind(null,e.syncEngine),t}function pj(r,e,t={}){const n=new oc;return r.asyncQueue.enqueueAndForget((async()=>(function(i,l,c,u,d){const f=new mE({next:x=>{f.Za(),l.enqueueAndForget((()=>aE(i,v))),x.fromCache&&u.source==="server"?d.reject(new Pt(yt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(x)},error:x=>d.reject(x)}),v=new AE(c,f,{includeMetadataChanges:!0,_a:!0});return iE(i,v)})(await nv(r),r.asyncQueue,e,t,n))),n.promise}function yE(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const N2=new Map;function vE(r,e,t){if(!t)throw new Pt(yt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function mj(r,e,t,n){if(e===!0&&n===!0)throw new Pt(yt.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function S2(r){if(!Xt.isDocumentKey(r))throw new Pt(yt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function k2(r){if(Xt.isDocumentKey(r))throw new Pt(yt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function pg(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":lr()}function OA(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Pt(yt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pg(r);throw new Pt(yt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}class F2{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Pt(yt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Pt(yt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yE((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Pt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Pt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Pt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,s){return n.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mg{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F2({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pt(yt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Pt(yt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F2(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new L3;switch(n.type){case"firstParty":return new R3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Pt(yt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=N2.get(t);n&&(zt("ComponentProvider","Removing Datastore"),N2.delete(t),n.terminate())})(this),Promise.resolve()}}function gj(r,e,t,n={}){var s;const i=(r=OA(r,mg))._getSettings(),l=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==l&&yd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},i),{host:l,ssl:!1})),n.mockUserToken){let c,u;if(typeof n.mockUserToken=="string")c=n.mockUserToken,u=Di.MOCK_USER;else{c=JN(n.mockUserToken,(s=r._app)===null||s===void 0?void 0:s.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new Pt(yt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Di(d)}r._authCredentials=new Q3(new pC(c,u))}}class Cc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Cc(this.firestore,e,this._query)}}class va{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new va(this.firestore,e,this._key)}}class lc extends Cc{constructor(e,t,n){super(e,t,o1(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new va(this.firestore,null,new Xt(e))}withConverter(e){return new lc(this.firestore,e,this._path)}}function rm(r,e,...t){if(r=ks(r),vE("collection","path",e),r instanceof mg){const n=En.fromString(e,...t);return k2(n),new lc(r,null,n)}{if(!(r instanceof va||r instanceof lc))throw new Pt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(En.fromString(e,...t));return k2(n),new lc(r.firestore,null,n)}}function Zo(r,e,...t){if(r=ks(r),arguments.length===1&&(e=mC.newId()),vE("doc","path",e),r instanceof mg){const n=En.fromString(e,...t);return S2(n),new va(r,null,new Xt(n))}{if(!(r instanceof va||r instanceof lc))throw new Pt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(En.fromString(e,...t));return S2(n),new va(r.firestore,r instanceof lc?r.converter:null,new Xt(n))}}class T2{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new JC(this,"async_queue_retry"),this.Vu=()=>{const n=P0();n&&zt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const t=P0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=P0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new oc;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gf(e))throw e;zt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const s=(function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c})(n);throw ll("INTERNAL UNHANDLED ERROR: ",s),n})).then((n=>(this.du=!1,n))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=w1.createAndSchedule(this,e,t,n,(i=>this.yu(i)));return this.Tu.push(s),s}fu(){this.Eu&&lr()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function U2(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of n)if(i in s&&typeof s[i]=="function")return!0;return!1})(r,["next","error","complete"])}class pc extends mg{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new T2,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new T2(e),this._firestoreClient=void 0,await e}}}function yj(r,e){const t=typeof r=="object"?r:_5(),n=typeof r=="string"?r:"(default)",s=zv(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=WN("firestore");i&&gj(s,...i)}return s}function gg(r){if(r._terminated)throw new Pt(yt.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||vj(r),r._firestoreClient}function vj(r){var e,t,n;const s=r._freezeSettings(),i=(function(c,u,d,f){return new X3(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yE(f.experimentalLongPollingOptions),f.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new dj(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(c){const u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(r._componentsProvider))}class Cd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cd(gi.fromBase64String(e))}catch(t){throw new Pt(yt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cd(gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Pt(yt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class C1{constructor(e){this._methodName=e}}class E1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pt(yt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pt(yt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mr(this._lat,e._lat)||Mr(this._long,e._long)}}class I1{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0})(this._values,e._values)}}const wj=/^__.*__$/;class xj{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms):new yf(e,this.data,t,this.fieldTransforms)}}class wE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Bc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lr()}}class _1{constructor(e,t,n,s,i,l){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new _1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Um(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xE(this.Cu)&&wj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bj{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||dg(e)}Qu(e,t,n,s=!1){return new _1({Cu:e,methodName:t,qu:n,path:hi.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vg(r){const e=r._freezeSettings(),t=dg(r._databaseId);return new bj(r._databaseId,!!e.ignoreUndefinedProperties,t)}function N1(r,e,t,n,s,i={}){const l=r.Qu(i.merge||i.mergeFields?2:0,e,t,s);S1("Data must be an object, but it was:",l,n);const c=bE(n,l);let u,d;if(i.merge)u=new Da(l.fieldMask),d=l.fieldTransforms;else if(i.mergeFields){const f=[];for(const v of i.mergeFields){const x=sv(e,v,t);if(!l.contains(x))throw new Pt(yt.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);CE(f,x)||f.push(x)}u=new Da(f),d=l.fieldTransforms.filter((v=>u.covers(v.field)))}else u=null,d=l.fieldTransforms;return new xj(new ga(c),u,d)}class wg extends C1{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wg}}function Bj(r,e,t,n){const s=r.Qu(1,e,t);S1("Data must be an object, but it was:",s,n);const i=[],l=ga.empty();fu(n,((u,d)=>{const f=k1(e,u,t);d=ks(d);const v=s.Nu(f);if(d instanceof wg)i.push(f);else{const x=bf(d,v);x!=null&&(i.push(f),l.set(f,x))}}));const c=new Da(i);return new wE(l,c,s.fieldTransforms)}function Cj(r,e,t,n,s,i){const l=r.Qu(1,e,t),c=[sv(e,n,t)],u=[s];if(i.length%2!=0)throw new Pt(yt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)c.push(sv(e,i[x])),u.push(i[x+1]);const d=[],f=ga.empty();for(let x=c.length-1;x>=0;--x)if(!CE(d,c[x])){const y=c[x];let C=u[x];C=ks(C);const N=l.Nu(y);if(C instanceof wg)d.push(y);else{const E=bf(C,N);E!=null&&(d.push(y),f.set(y,E))}}const v=new Da(d);return new wE(f,v,l.fieldTransforms)}function Ej(r,e,t,n=!1){return bf(t,r.Qu(n?4:3,e))}function bf(r,e){if(BE(r=ks(r)))return S1("Unsupported field value:",e,r),bE(r,e);if(r instanceof C1)return(function(n,s){if(!xE(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,s){const i=[];let l=0;for(const c of n){let u=bf(c,s.Lu(l));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),l++}return{arrayValue:{values:i}}})(r,e)}return(function(n,s){if((n=ks(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return wT(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=gs.fromDate(n);return{timestampValue:km(s.serializer,i)}}if(n instanceof gs){const i=new gs(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:km(s.serializer,i)}}if(n instanceof E1)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Cd)return{bytesValue:HC(s.serializer,n._byteString)};if(n instanceof va){const i=s.databaseId,l=n.firestore._databaseId;if(!l.isEqual(i))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:d1(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof I1)return(function(l,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map((u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return l1(c.serializer,u)}))}}}}}})(n,s);throw s.Bu(`Unsupported field value: ${pg(n)}`)})(r,e)}function bE(r,e){const t={};return gC(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fu(r,((n,s)=>{const i=bf(s,e.Mu(n));i!=null&&(t[n]=i)})),{mapValue:{fields:t}}}function BE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof gs||r instanceof E1||r instanceof Cd||r instanceof va||r instanceof C1||r instanceof I1)}function S1(r,e,t){if(!BE(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const n=pg(t);throw n==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+n)}}function sv(r,e,t){if((e=ks(e))instanceof yg)return e._internalPath;if(typeof e=="string")return k1(r,e);throw Um("Field path arguments must be of type string or ",r,!1,void 0,t)}const Ij=new RegExp("[~\\*/\\[\\]]");function k1(r,e,t){if(e.search(Ij)>=0)throw Um(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new yg(...e.split("."))._internalPath}catch{throw Um(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Um(r,e,t,n,s){const i=n&&!n.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||l)&&(u+=" (found",i&&(u+=` in field ${n}`),l&&(u+=` in document ${s}`),u+=")"),new Pt(yt.INVALID_ARGUMENT,c+r+u)}function CE(r,e){return r.some((t=>t.isEqual(e)))}class EE{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new va(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _j(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(F1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class _j extends EE{data(){return super.data()}}function F1(r,e){return typeof e=="string"?k1(r,e):e instanceof yg?e._internalPath:e._delegate._internalPath}function IE(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Pt(yt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class T1{}class _E extends T1{}function iv(r,e,...t){let n=[];e instanceof T1&&n.push(e),n=n.concat(t),(function(i){const l=i.filter((u=>u instanceof j1)).length,c=i.filter((u=>u instanceof U1)).length;if(l>1||l>0&&c>0)throw new Pt(yt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const s of n)r=s._apply(r);return r}class U1 extends _E{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new U1(e,t,n)}_apply(e){const t=this._parse(e);return NE(e._query,t),new Cc(e.firestore,e.converter,$y(e._query,t))}_parse(e){const t=vg(e.firestore);return(function(i,l,c,u,d,f,v){let x;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Pt(yt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){L2(v,f);const y=[];for(const C of v)y.push(j2(u,i,C));x={arrayValue:{values:y}}}else x=j2(u,i,v)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||L2(v,f),x=Ej(c,l,v,f==="in"||f==="not-in");return Ns.create(d,f,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class j1 extends T1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new j1(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:HA.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let l=s;const c=i.getFlattenedFilters();for(const u of c)NE(l,u),l=$y(l,u)})(e._query,t),new Cc(e.firestore,e.converter,$y(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class L1 extends _E{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new L1(e,t)}_apply(e){const t=(function(s,i,l){if(s.startAt!==null)throw new Pt(yt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Pt(yt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ef(i,l)})(e._query,this._field,this._direction);return new Cc(e.firestore,e.converter,(function(s,i){const l=s.explicitOrderBy.concat([i]);return new Ld(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function Nj(r,e="asc"){const t=e,n=F1("orderBy",r);return L1._create(n,t)}function j2(r,e,t){if(typeof(t=ks(t))=="string"){if(t==="")throw new Pt(yt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IC(e)&&t.indexOf("/")!==-1)throw new Pt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(En.fromString(t));if(!Xt.isDocumentKey(n))throw new Pt(yt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return t2(r,new Xt(n))}if(t instanceof va)return t2(r,t._key);throw new Pt(yt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pg(t)}.`)}function L2(r,e){if(!Array.isArray(r)||r.length===0)throw new Pt(yt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NE(r,e){const t=(function(s,i){for(const l of s)for(const c of l.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(r.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Pt(yt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Pt(yt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Sj{convertValue(e,t="none"){switch(lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ds(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ou(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lr()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return fu(e,((s,i)=>{n[s]=this.convertValue(i,t)})),n}convertVectorValue(e){var t,n,s;const i=(s=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map((l=>ds(l.doubleValue)));return new I1(i)}convertGeoPoint(e){return new E1(ds(e.latitude),ds(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=s1(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jh(e));default:return null}}convertTimestamp(e){const t=hc(e);return new gs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=En.fromString(e);an(qC(n));const s=new Xh(n.get(1),n.get(3)),i=new Xt(n.popFirst(5));return s.isEqual(t)||ll(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Q1(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Ch{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SE extends EE{constructor(e,t,n,s,i,l){super(e,t,n,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(F1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class nm extends SE{data(e={}){return super.data(e)}}class kE{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ch(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new nm(this._firestore,this._userDataWriter,n.key,n,new Ch(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pt(yt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const u=new nm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ch(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const u=new nm(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ch(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),f=l.indexOf(c.doc.key)),{type:kj(c.type),doc:u,oldIndex:d,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lr()}}class P1 extends Sj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new va(this.firestore,null,t)}}function FE(r){r=OA(r,Cc);const e=OA(r.firestore,pc),t=gg(e),n=new P1(e);return IE(r._query),pj(t,r._query).then((s=>new kE(e,n,r,s)))}function Fj(r,e,t){r=OA(r,va);const n=OA(r.firestore,pc),s=Q1(r.converter,e,t);return xg(n,[N1(vg(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,ya.none())])}function TE(r){return xg(OA(r.firestore,pc),[new cg(r._key,ya.none())])}function Tj(r,e){const t=OA(r.firestore,pc),n=Zo(r),s=Q1(r.converter,e);return xg(t,[N1(vg(r.firestore),"addDoc",n._key,s,r.converter!==null,{}).toMutation(n._key,ya.exists(!1))]).then((()=>n))}function Uj(r,...e){var t,n,s;r=ks(r);let i={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||U2(e[l])||(i=e[l],l++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(U2(e[l])){const v=e[l];e[l]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[l+1]=(n=v.error)===null||n===void 0?void 0:n.bind(v),e[l+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let u,d,f;if(r instanceof va)d=OA(r.firestore,pc),f=o1(r._key.path),u={next:v=>{e[l]&&e[l](jj(d,r,v))},error:e[l+1],complete:e[l+2]};else{const v=OA(r,Cc);d=OA(v.firestore,pc),f=v._query;const x=new P1(d);u={next:y=>{e[l]&&e[l](new kE(d,x,v,y))},error:e[l+1],complete:e[l+2]},IE(r._query)}return(function(x,y,C,N){const E=new mE(N),_=new AE(y,E,C);return x.asyncQueue.enqueueAndForget((async()=>iE(await nv(x),_))),()=>{E.Za(),x.asyncQueue.enqueueAndForget((async()=>aE(await nv(x),_)))}})(gg(d),f,c,u)}function xg(r,e){return(function(n,s){const i=new oc;return n.asyncQueue.enqueueAndForget((async()=>sj(await fj(n),s,i))),i.promise})(gg(r),e)}function jj(r,e,t){const n=t.docs.get(e._key),s=new P1(r);return new SE(r,s,e._key,n,new Ch(t.hasPendingWrites,t.fromCache),e.converter)}class Lj{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=vg(e)}set(e,t,n){this._verifyNotCommitted();const s=R0(e,this._firestore),i=Q1(s.converter,t,n),l=N1(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(l.toMutation(s._key,ya.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const i=R0(e,this._firestore);let l;return l=typeof(t=ks(t))=="string"||t instanceof yg?Cj(this._dataReader,"WriteBatch.update",i._key,t,n,s):Bj(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(l.toMutation(i._key,ya.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=R0(e,this._firestore);return this._mutations=this._mutations.concat(new cg(t._key,ya.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pt(yt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function R0(r,e){if((r=ks(r)).firestore!==e)throw new Pt(yt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ho(r){return gg(r=OA(r,pc)),new Lj(r,(e=>xg(r,e)))}(function(e,t=!0){(function(s){jd=s})(Fd),md(new iu("firestore",((n,{instanceIdentifier:s,options:i})=>{const l=n.getProvider("app").getImmediate(),c=new pc(new P3(n.getProvider("auth-internal")),new M3(n.getProvider("app-check-internal")),(function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Pt(yt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xh(d.options.projectId,f)})(l,s),l);return i=Object.assign({useFetchStreams:t},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),ac(Yx,"4.7.3",e),ac(Yx,"4.7.3","esm2017")})();const Qj={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCJlhZm9fSiHpPMznQR8UhVPFwhpCxVk2U",VITE_FIREBASE_APP_ID:"1:10099925602:web:df2838684c08c7cfda673b",VITE_FIREBASE_AUTH_DOMAIN:"idedersplanson.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"10099925602",VITE_FIREBASE_PROJECT_ID:"idedersplanson",VITE_FIREBASE_STORAGE_BUCKET:"idedersplanson.firebasestorage.app"},Pj={apiKey:"AIzaSyCJlhZm9fSiHpPMznQR8UhVPFwhpCxVk2U",authDomain:"idedersplanson.firebaseapp.com",projectId:"idedersplanson",storageBucket:"idedersplanson.firebasestorage.app",messagingSenderId:"10099925602",appId:"1:10099925602:web:df2838684c08c7cfda673b"},Dj=()=>{const e=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"].filter(n=>!Qj[n]);if(e.length>0)throw console.error(" SECURITY ERROR: Missing Firebase environment variables:",e),new Error(`Missing required environment variables: ${e.join(", ")}`);const t="AIzaSyCJlhZm9fSiHpPMznQR8UhVPFwhpCxVk2U";if(!t.startsWith("AIza")||t.length<30)throw console.error(" SECURITY ERROR: Invalid Firebase API key format"),new Error("Invalid Firebase API key format")};Dj();const UE=I5(Pj),O0=F3(UE),ts=yj(UE),D1=()=>{const[r,e]=Ee.useState(null),[t,n]=Ee.useState(!0);return Ee.useEffect(()=>vF(O0,c=>{e(c),n(!1)}),[]),{user:r,loading:t,login:async(l,c)=>{try{return await mF(O0,l,c),{success:!0}}catch(u){return{success:!1,error:u.message}}},logout:async()=>{try{return await wF(O0),{success:!0}}catch(l){return{success:!1,error:l.message}}}}},xa=()=>{const[r,e]=Ee.useState([]),t=Ee.useCallback(u=>{const d=Math.random().toString(36).substr(2,9),f={id:d,...u,onClose:n};return u.type==="error"?(e(v=>v.filter(x=>x.type!=="error")),e(v=>[f,...v.slice(0,2)])):e(v=>[f,...v.slice(0,3)]),d},[]),n=Ee.useCallback(u=>{e(d=>d.filter(v=>v.id!==u))},[]),s=Ee.useCallback((u,d)=>t({type:"success",title:u,message:d,duration:4e3}),[t]),i=Ee.useCallback((u,d)=>t({type:"error",title:u,message:d,duration:12e3}),[t]),l=Ee.useCallback((u,d)=>t({type:"warning",title:u,message:d,duration:6e3}),[t]),c=Ee.useCallback((u,d)=>t({type:"info",title:u,message:d,duration:5e3}),[t]);return{toasts:r,addToast:t,removeToast:n,success:s,error:i,warning:l,info:c}},or=r=>{const[e,t]=Ee.useState([]),[n,s]=Ee.useState(!0),[i,l]=Ee.useState(null);return Ee.useEffect(()=>{const v=iv(rm(ts,r),Nj("createdAt","desc"));return Uj(v,y=>{const C=y.docs.map(N=>({id:N.id,...N.data(),createdAt:N.data().createdAt?.toDate?.()||new Date}));t(C),s(!1),l(null)},y=>{l(y.message),s(!1)})},[r]),{data:e,loading:n,error:i,add:async v=>{try{return{success:!0,id:(await Tj(rm(ts,r),{...v,createdAt:gs.now()})).id}}catch(x){const y=x;return console.error(" Firebase ADD hatas:",x),{success:!1,error:y.message||"Unknown error"}}},update:async(v,x)=>{try{if(!v)throw new Error("Document ID is required for update");const y=Zo(ts,r,v),C={...x,updatedAt:gs.now()};return await Fj(y,C,{merge:!0}),{success:!0}}catch(y){const C=y;return console.error(" Firebase UPDATE hatas:",{error:y,message:C.message,code:C.code,id:v,collectionName:r}),{success:!1,error:C.message||"Unknown error"}}},remove:async v=>{try{if(!v)throw new Error("Document ID is required for delete");return await TE(Zo(ts,r,v)),{success:!0}}catch(x){const y=x;return console.error(" Firebase DELETE hatas:",x),{success:!1,error:y.message||"Unknown error"}}},exists:async v=>{try{const x=Zo(ts,r,v);return(await FE(iv(rm(ts,r)))).docs.some(C=>C.id===v)}catch(x){return console.error(" Firebase EXISTS check hatas:",x),!1}}}},jE=Ee.createContext(null),Rj=({children:r})=>{const{data:e,loading:t,add:n,update:s,remove:i}=or("teachers"),{data:l,loading:c,add:u,update:d,remove:f}=or("classes"),{data:v,loading:x,add:y,update:C,remove:N}=or("subjects"),{data:E,loading:_,add:P,update:H,remove:D}=or("schedules"),{data:J,loading:Z,add:O,update:Q,remove:U}=or("schedule-templates"),I={teachers:e,classes:l,subjects:v,schedules:E,templates:J,loading:t||c||x||_||Z,loadingTeachers:t,loadingClasses:c,loadingSubjects:x,loadingSchedules:_,loadingTemplates:Z,addTeacher:n,updateTeacher:s,removeTeacher:i,addClass:u,updateClass:d,removeClass:f,addSubject:y,updateSubject:C,removeSubject:N,addSchedule:P,updateSchedule:H,removeSchedule:D,addTemplate:O,updateTemplate:Q,removeTemplate:U};return A.jsx(jE.Provider,{value:I,children:r})},LE=()=>{const r=Ee.useContext(jE);if(!r)throw new Error("useGlobalData must be used within a GlobalDataProvider");return r};var Oj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Mj=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Jt=(r,e)=>{const t=Ee.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,...d},f)=>Ee.createElement("svg",{ref:f,...Oj,width:s,height:s,stroke:n,strokeWidth:l?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Mj(r)}`,c].join(" "),...d},[...e.map(([v,x])=>Ee.createElement(v,x)),...Array.isArray(u)?u:[u]]));return t.displayName=`${r}`,t};const Ed=Jt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const cu=Jt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const QE=Jt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const Q2=Jt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const wa=Jt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);const ms=Jt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const fi=Jt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Hj=Jt("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const il=Jt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Vj=Jt("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);const R1=Jt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const bg=Jt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Kj=Jt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const av=Jt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const zj=Jt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const ti=Jt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const jm=Jt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Id=Jt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const Bg=Jt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Zc=Jt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const ld=Jt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const P2=Jt("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);const PE=Jt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const Gj=Jt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const D2=Jt("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);const DE=Jt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const RE=Jt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const OE=Jt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const $j=Jt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);const qj=Jt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Wj=Jt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const _d=Jt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Yj=Jt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const R2=Jt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Lm=Jt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);const Jj=Jt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const sm=Jt("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);const ea=Jt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const O1=Jt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const nf=Jt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Qm=Jt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const ME=Jt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Xj=Jt("Slash",[["path",{d:"M22 2 2 22",key:"y4kqgn"}]]);const Co=Jt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);const Zj=Jt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const eL=Jt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);const tL=Jt("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);const Ss=Jt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const rL=Jt("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]);const O2=Jt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const HE=Jt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ei=Jt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const VE=Jt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);const KE=Jt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);const zE=Jt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const di=Jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Bf=Jt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),nL=()=>{const{logout:r}=D1(),[e,t]=Ee.useState(!1),n=async()=>{await r()},s=[{to:"/",icon:DE,label:"Anasayfa",color:"ide-primary",description:"Ana kontrol paneli"},{to:"/schedule-wizard",icon:Bf,label:"Program Sihirbaz",color:"ide-accent",description:"Otomatik program olutur"},{to:"/schedules",icon:fi,label:"Manuel Program",color:"ide-accent",description:"Manuel program olutur"},{to:"/class-schedules",icon:PE,label:"Snf Programlar",color:"ide-secondary",description:"Snf bazl grnm"},{to:"/all-schedules",icon:Bg,label:"retmen Programlar",color:"ide-primary",description:"retmen bazl grnm"},{to:"/data-management",icon:jm,label:"Veri Ynetimi",color:"ide-primary",description:"Sistem verilerini ynet"},{to:"/pdf",icon:fi,label:"PDF kt",color:"ide-orange",description:"Rapor ve ktlar"}],i=()=>{t(!1)};return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50 safe-top safe-left",children:A.jsx("button",{onClick:()=>t(!e),className:"p-3 bg-white rounded-xl shadow-lg border border-gray-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-ide-primary-500 focus:ring-offset-2 transition-all duration-300 btn-touch touch-enhanced group","aria-label":"Meny a/kapat",children:e?A.jsx(di,{size:24,className:"text-ide-gray-700 group-hover:text-ide-primary-600 transition-colors"}):A.jsx(Yj,{size:24,className:"text-ide-gray-700 group-hover:text-ide-primary-600 transition-colors"})})}),e&&A.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-60 z-40 transition-opacity duration-300 backdrop-blur-sm",onClick:i}),A.jsxs("div",{className:`
        fixed lg:static inset-y-0 left-0 z-40 bg-white shadow-2xl lg:shadow-xl h-screen flex flex-col
        transform transition-all duration-500 ease-in-out
        ${e?"translate-x-0":"-translate-x-full lg:translate-x-0"}
        
        /* PROFESSIONAL DESIGN */
        w-80 lg:w-72 xl:w-80
        safe-top safe-bottom safe-left
        border-r border-gray-200
      `,children:[A.jsxs("div",{className:"relative p-6 bg-gradient-to-br from-ide-primary-600 via-ide-primary-700 to-ide-primary-800 border-b border-ide-primary-500",children:[A.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),A.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -translate-y-16 translate-x-16"}),A.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12"}),A.jsxs("div",{className:"relative z-10 flex items-center justify-between lg:justify-start",children:[A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsx("div",{className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center flex-shrink-0",children:A.jsx("img",{src:"https://cv.ide.k12.tr/images/ideokullari_logo.png",alt:"ide okullar Logo",className:"w-8 h-8 object-contain",onError:l=>{const c=l.target;c.style.display="none";const u=c.parentElement;u&&(u.innerHTML='<div class="w-8 h-8 text-ide-primary-600 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg></div>')}})}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-xl font-semibold text-white leading-tight",children:"ide okullar"}),A.jsx("p",{className:"text-sm text-ide-primary-100 font-medium",children:"Ders Program Sistemi"})]})]}),A.jsx("button",{onClick:i,className:"lg:hidden p-2 rounded-lg hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/20 transition-all duration-200 btn-touch touch-enhanced","aria-label":"Meny kapat",children:A.jsx(di,{size:20,className:"text-white"})})]})]}),A.jsx("nav",{className:"flex-1 p-4 overflow-y-auto bg-gray-50",children:A.jsx("div",{className:"space-y-2",children:s.map(({to:l,icon:c,label:u,description:d})=>A.jsx(DN,{to:l,onClick:i,className:({isActive:f})=>`group relative flex items-center p-4 rounded-xl transition-all duration-300 ${f?"bg-ide-primary-50 text-ide-primary-700 shadow-lg border-2 border-ide-primary-200 transform scale-[1.02]":"text-ide-gray-700 hover:bg-white hover:text-ide-primary-600 hover:shadow-md border-2 border-transparent hover:border-ide-primary-100"}`,children:({isActive:f})=>A.jsxs(A.Fragment,{children:[f&&A.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-1 h-8 bg-ide-primary-600 rounded-r-full"}),A.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center transition-all duration-300 ${f?"bg-ide-primary-100 text-ide-primary-600":"bg-gray-100 text-gray-500 group-hover:bg-ide-primary-100 group-hover:text-ide-primary-600"}`,children:A.jsx(c,{size:24,className:"transition-transform duration-300 group-hover:scale-110"})}),A.jsx("div",{className:"flex-1 ml-4 min-w-0",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:`font-semibold text-base leading-tight transition-colors duration-300 ${f?"text-ide-primary-700":"text-gray-900 group-hover:text-ide-primary-600"}`,children:u}),A.jsx("p",{className:`text-sm mt-1 transition-colors duration-300 ${f?"text-ide-primary-600":"text-gray-500 group-hover:text-ide-primary-500"}`,children:d})]}),A.jsx(av,{size:18,className:`flex-shrink-0 transition-all duration-300 ${f?"text-ide-primary-600 transform translate-x-1":"text-gray-400 group-hover:text-ide-primary-500 group-hover:transform group-hover:translate-x-1"}`})]})})]})},l))})}),A.jsx("div",{className:"p-4 border-t border-gray-200 bg-white safe-bottom",children:A.jsxs("button",{onClick:n,className:"w-full group flex items-center p-4 rounded-xl text-ide-gray-700 hover:bg-ide-accent-50 hover:text-ide-accent-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-ide-accent-500 focus:ring-offset-2 border-2 border-transparent hover:border-ide-accent-200",children:[A.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-xl bg-gray-100 group-hover:bg-ide-accent-100 flex items-center justify-center transition-all duration-300",children:A.jsx(Wj,{size:24,className:"text-gray-500 group-hover:text-ide-accent-600 transition-all duration-300 group-hover:scale-110"})}),A.jsxs("div",{className:"flex-1 ml-4 text-left",children:[A.jsx("p",{className:"font-semibold text-base text-gray-900 group-hover:text-ide-accent-700 transition-colors duration-300",children:"Gvenli k"}),A.jsx("p",{className:"text-sm text-gray-500 group-hover:text-ide-accent-600 transition-colors duration-300 mt-1",children:"Oturumu sonlandr"})]}),A.jsx(av,{size:18,className:"flex-shrink-0 text-gray-400 group-hover:text-ide-accent-500 group-hover:transform group-hover:translate-x-1 transition-all duration-300"})]})})]})]})},sL=()=>{const r=Bo(),[e,t]=Ee.useState(!1),[n,s]=Ee.useState(0);return Ee.useEffect(()=>{t(!0),s(0);const i=setTimeout(()=>s(30),50),l=setTimeout(()=>s(60),150),c=setTimeout(()=>s(80),300),u=setTimeout(()=>{s(100),setTimeout(()=>{t(!1),s(0)},200)},400);return()=>{clearTimeout(i),clearTimeout(l),clearTimeout(c),clearTimeout(u)}},[r.pathname]),!e&&n===0?null:A.jsx("div",{className:"fixed top-0 left-0 right-0 z-[9999] h-1 bg-transparent overflow-hidden",children:A.jsx("div",{className:"h-full bg-gradient-to-r from-ide-secondary-400 via-ide-secondary-500 to-ide-primary-500 transition-all duration-200 ease-out shadow-lg",style:{width:`${n}%`,boxShadow:"0 0 10px rgba(39, 156, 56, 0.5), 0 0 20px rgba(39, 156, 56, 0.3)"}})})},iL=()=>{const r=Bo();return A.jsxs("div",{className:"flex h-screen bg-gray-50",children:[A.jsx(sL,{}),A.jsx(nL,{}),A.jsx("main",{className:"flex-1 overflow-auto lg:ml-0 overflow-x-hidden",children:A.jsx("div",{className:"pt-20 lg:pt-0 animate-in fade-in slide-in-from-bottom-4 duration-300",children:A.jsx(CN,{})},r.pathname)})]})},Jr=({label:r,type:e="text",value:t,onChange:n,placeholder:s,required:i=!1,error:l,disabled:c=!1})=>A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-ide-gray-800 mb-2",children:[r," ",i&&A.jsx("span",{className:"text-ide-accent-600 ml-1",children:"*"})]}),A.jsxs("div",{className:"relative",children:[A.jsx("input",{type:e,value:t,onChange:u=>n(u.target.value),placeholder:s,required:i,disabled:c,className:`ide-input w-full ${l?"border-ide-accent-400 bg-ide-accent-50 focus:border-ide-accent-500 focus:ring-ide-accent-200 text-ide-accent-900 placeholder-ide-accent-400":c?"border-ide-gray-200 bg-ide-gray-50 text-ide-gray-500 cursor-not-allowed":"border-ide-gray-300 bg-white focus:border-ide-primary-500 focus:ring-ide-primary-200 text-ide-gray-900 placeholder-ide-gray-500 hover:border-ide-gray-400"}`}),l&&A.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:A.jsx(Ed,{className:"h-5 w-5 text-ide-accent-500"})})]}),l&&A.jsxs("div",{className:"mt-2 flex items-start space-x-2",children:[A.jsx(Ed,{className:"h-4 w-4 text-ide-accent-600 mt-0.5 flex-shrink-0"}),A.jsx("p",{className:"text-sm font-medium text-ide-accent-700",children:l})]})]}),Ct=({children:r,onClick:e,type:t="button",variant:n="primary",size:s="md",disabled:i=!1,icon:l,className:c=""})=>{const u="inline-flex items-center justify-center font-semibold rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none transform hover:scale-[1.02] active:scale-[0.98] focus-enhanced",d={primary:"bg-ide-secondary-500 text-white hover:bg-ide-secondary-600 focus:ring-ide-secondary-400 shadow-ide-lg hover:shadow-ide-xl hover:-translate-y-0.5 transition-all outline-none",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200 focus:ring-gray-500 border border-gray-300 hover:border-gray-400 shadow-sm",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-lg hover:shadow-red-200/50","ide-primary":"btn-ide-primary shadow-ide-lg hover:shadow-ide-xl","ide-secondary":"btn-ide-secondary shadow-ide-lg hover:shadow-ide-xl","ide-accent":"btn-ide-accent shadow-ide-lg hover:shadow-ide-xl"},f={sm:"px-4 py-3 text-sm min-h-[44px] btn-touch",md:"px-5 py-3.5 text-sm min-h-[48px] btn-touch",lg:"px-6 py-4 text-base min-h-[52px] btn-touch"};return A.jsxs("button",{type:t,onClick:e,disabled:i,className:`${u} ${d[n]} ${f[s]} ${c} touch-enhanced`,children:[l&&A.jsx(l,{size:s==="sm"?18:s==="lg"?22:20,className:"mr-2 flex-shrink-0"}),A.jsx("span",{className:"truncate",children:r})]})},aL=()=>{const[r,e]=Ee.useState(""),[t,n]=Ee.useState(""),[s,i]=Ee.useState(""),[l,c]=Ee.useState(!1),{login:u}=D1(),d=async f=>{f.preventDefault(),c(!0),i(""),(await u(r,t)).success||i("Giri baarsz. Ltfen bilgilerinizi kontrol edin."),c(!1)};return A.jsx("div",{className:"min-h-screen bg-gradient-to-br from-ide-gray-50 to-ide-primary-50 flex items-center justify-center p-4",children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-ide-2xl p-8 border border-ide-gray-200",children:[A.jsxs("div",{className:"text-center mb-8",children:[A.jsx("div",{className:"flex justify-center mb-6",children:A.jsx("div",{className:"p-4 bg-white rounded-full shadow-ide-lg border border-gray-100",children:A.jsx("img",{src:"https://cv.ide.k12.tr/images/ideokullari_logo.png",alt:"ide okullar Logo",className:"w-16 h-16 object-contain",onError:f=>{const v=f.target;v.style.display="none";const x=v.parentElement;x&&(x.innerHTML='<div class="w-12 h-12 text-blue-600 flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg></div>')}})})}),A.jsx("h1",{className:"text-2xl font-bold text-ide-gray-900 mb-2",children:"ide okullar"}),A.jsx("h2",{className:"text-xl font-semibold text-ide-primary-600 mb-2",children:"Ders Planlama Sistemi"}),A.jsx("p",{className:"text-ide-gray-600",children:"Ynetici Girii"})]}),A.jsxs("form",{onSubmit:d,className:"space-y-6",children:[A.jsx(Jr,{label:"E-posta",type:"email",value:r,onChange:e,placeholder:"email@ide.k12.tr",required:!0}),A.jsx(Jr,{label:"ifre",type:"password",value:t,onChange:n,placeholder:"",required:!0}),s&&A.jsx("div",{className:"p-4 bg-ide-accent-50 border border-ide-accent-200 rounded-lg",children:A.jsx("p",{className:"text-ide-accent-800 text-sm font-medium",children:s})}),A.jsx(Ct,{type:"submit",variant:"primary",size:"lg",disabled:l,className:"w-full",children:l?A.jsxs("div",{className:"flex items-center",children:[A.jsx("div",{className:"ide-loading w-5 h-5 mr-3"}),"Giri yaplyor..."]}):"Giri Yap"})]}),A.jsx("div",{className:"mt-8 text-center",children:A.jsx("p",{className:"text-xs text-ide-gray-500",children:"Firebase Authentication ile gvenli giri"})})]})})},Eo=()=>{const[r,e]=Ee.useState({isOpen:!1,title:"",message:"",type:"warning",confirmText:"Onayla",cancelText:"ptal",confirmVariant:"primary",onConfirm:()=>{}}),t=Ee.useCallback((u,d)=>new Promise(f=>{e({...u,isOpen:!0,onConfirm:()=>{d(),f(!0)}})}),[]),n=Ee.useCallback(()=>{e(u=>({...u,isOpen:!1}))},[]),s=Ee.useCallback((u,d)=>t({title:" Silme Onay",message:`"${u}" esini silmek istediinizden emin misiniz?

Bu ilem geri alnamaz.`,type:"danger",confirmText:"Sil",cancelText:"ptal",confirmVariant:"danger"},d),[t]),i=Ee.useCallback(u=>t({title:" Sfrlama Onay",message:`Tm deiiklikleri sfrlamak istediinizden emin misiniz?

Kaydedilmemi tm deiiklikler kaybolacak.`,type:"warning",confirmText:"Sfrla",cancelText:"ptal",confirmVariant:"danger"},u),[t]),l=Ee.useCallback(u=>t({title:" Kaydedilmemi Deiiklikler",message:`Kaydedilmemi deiiklikler var. Devam etmek istediinizden emin misiniz?

Tm deiiklikler kaybolacak.`,type:"warning",confirmText:"Devam Et",cancelText:"ptal",confirmVariant:"danger"},u),[t]),c=Ee.useCallback((u,d)=>t({title:" akma Uyars",message:`Aadaki akmalar tespit edildi:

${u.join(`
`)}

Yine de kaydetmek istediinizden emin misiniz?`,type:"warning",confirmText:"Yine de Kaydet",cancelText:"ptal",confirmVariant:"danger"},d),[t]);return{confirmation:r,showConfirmation:t,hideConfirmation:n,confirmDelete:s,confirmReset:i,confirmUnsavedChanges:l,confirmConflictOverride:c}},KA=({isOpen:r,onClose:e,onConfirm:t,title:n,message:s,type:i="warning",confirmText:l="Onayla",cancelText:c="ptal",confirmVariant:u="primary"})=>{if(!r)return null;const d={warning:cu,danger:zE,success:il,info:RE},f={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:"text-yellow-600",title:"text-yellow-900"},danger:{bg:"bg-red-50",border:"border-red-200",icon:"text-red-600",title:"text-red-900"},success:{bg:"bg-green-50",border:"border-green-200",icon:"text-green-600",title:"text-green-900"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:"text-blue-600",title:"text-blue-900"}},v=d[i],x=f[i],y=()=>{t(),e()};return A.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:A.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:e,"aria-hidden":"true"}),A.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),A.jsxs("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full mx-4 sm:mx-0",children:[A.jsx("div",{className:`${x.bg} ${x.border} border-b px-6 pt-6 pb-4`,children:A.jsxs("div",{className:"flex items-start",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(v,{className:`h-8 w-8 ${x.icon}`})}),A.jsx("div",{className:"ml-4 flex-1",children:A.jsx("h3",{className:`text-lg font-bold ${x.title}`,children:n})}),A.jsx("button",{onClick:e,className:"rounded-lg p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200","aria-label":"Modal kapat",children:A.jsx(di,{size:20})})]})}),A.jsx("div",{className:"bg-white px-6 py-6",children:A.jsx("div",{className:"text-gray-700 text-base leading-relaxed whitespace-pre-line",children:s})}),A.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[A.jsx(Ct,{onClick:e,variant:"secondary",size:"md",children:c}),A.jsx(Ct,{onClick:y,variant:u,size:"md",children:l})]})]})]})})},AL=()=>{const r=xc(),{data:e}=or("teachers"),{data:t}=or("classes"),{data:n}=or("subjects"),{data:s}=or("schedules"),{data:i,remove:l}=or("schedule-templates"),{success:c,error:u}=xa(),{confirmation:d,hideConfirmation:f,confirmDelete:v}=Eo(),x=[{icon:wa,title:"Dersler",description:"Dersleri bran ve seviyelerine gre organize edin",color:"text-ide-primary-600",bgColor:"bg-ide-primary-50",path:"/subjects"},{icon:ei,title:"retmenler",description:"retmenleri ekleyin ve branlarna gre ynetin",color:"text-ide-primary-600",bgColor:"bg-ide-primary-50",path:"/teachers"},{icon:ms,title:"Snflar",description:"Snflar seviyelerine gre kategorize edin",color:"text-ide-secondary-600",bgColor:"bg-ide-secondary-50",path:"/classes"},{icon:Bf,title:"Program Sihirbaz",description:"Adm adm otomatik program oluturun",color:"text-ide-accent-500",bgColor:"bg-ide-accent-50",path:"/schedule-wizard"},{icon:fi,title:"Manuel Program",description:"retmen veya snf bazl manuel program oluturun",color:"text-ide-primary-600",bgColor:"bg-ide-primary-50",path:"/schedules"},{icon:Bg,title:"Programlar Grntle",description:"Oluturulan programlar grntleyin ve inceleyin",color:"text-ide-secondary-600",bgColor:"bg-ide-secondary-50",path:"/all-schedules"},{icon:Zc,title:"PDF ndir",description:"Programlar profesyonel PDF formatnda indirin",color:"text-ide-accent-500",bgColor:"bg-ide-accent-50",path:"/pdf"},{icon:jm,title:"Veri Ynetimi",description:"Sistem verilerini ynetin ve temizleyin",color:"text-ide-gray-600",bgColor:"bg-ide-gray-100",path:"/data-management"}],y=E=>{r(`/schedule-wizard?templateId=${E}`)},C=E=>{v(E.name,async()=>{try{await l(E.id),c(" Program Silindi",`${E.name} baaryla silindi`)}catch{u(" Silme Hatas","Program silinirken bir hata olutu")}})},N=[...i].sort((E,_)=>new Date(_.updatedAt).getTime()-new Date(E.updatedAt).getTime());return A.jsxs("div",{className:"min-h-screen bg-gray-50",children:[A.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"flex justify-center mb-3",children:A.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:A.jsx("img",{src:"https://cv.ide.k12.tr/images/ideokullari_logo.png",alt:"ide okullar Logo",className:"w-12 h-12 object-contain",onError:E=>{const _=E.target;_.style.display="none";const P=_.parentElement;P&&(P.innerHTML='<div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg></div>')}})})}),A.jsx("h1",{className:"text-xl md:text-2xl font-semibold text-gray-900 mb-2",children:"ide okullar Ders Program Sistemi"}),A.jsx("p",{className:"text-sm md:text-base text-gray-600 mb-4 max-w-2xl mx-auto",children:"Sihirbaz ile otomatik program oluturun veya manuel olarak dzenleyin. akma kontrol, zaman kstlamalar ve profesyonel PDF ktlar."})]})}),i.length>0&&A.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:A.jsxs("div",{className:"bg-gradient-to-br from-ide-primary-50 via-white to-ide-secondary-50 rounded-2xl shadow-lg border border-ide-primary-100 p-8",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-semibold text-ide-primary-800 flex items-center tracking-tight",children:"Oluturulan Programlar"}),A.jsxs("p",{className:"text-sm text-ide-primary-600 mt-1 font-medium",children:[i.length," program  Dzenlemek iin tklayn"]})]}),A.jsx(Ct,{onClick:()=>r("/schedule-wizard"),icon:ea,variant:"primary",size:"md",className:"shadow-md",children:"Yeni Program"})]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:N.map(E=>A.jsxs("div",{className:"group bg-white rounded-2xl p-6 border border-ide-primary-100 shadow-sm hover:shadow-lg hover:border-ide-primary-300 transition-all duration-200 cursor-pointer relative flex flex-col min-h-[210px]",onClick:()=>y(E.id),children:[A.jsx("span",{className:`absolute top-4 right-4 px-3 py-1 rounded-full text-xs font-semibold shadow-sm border tracking-wider
                    ${E.status==="published"?"bg-emerald-50 text-emerald-700 border-emerald-200":E.status==="draft"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-gray-50 text-gray-500 border-gray-200"}`,children:E.status==="published"?"YAYINLANDI":E.status==="draft"?"TASLAK":"ARVLEND"}),A.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[A.jsx(fi,{className:"w-6 h-6 text-ide-primary-600 flex-shrink-0"}),A.jsx("h3",{className:"font-semibold text-lg text-ide-primary-900 truncate group-hover:text-ide-primary-700 transition-colors",children:E.name})]}),A.jsxs("p",{className:"text-xs text-ide-primary-500 mb-1 font-medium",children:[E.academicYear," ",E.semester," Dnemi"]}),E.description&&A.jsx("p",{className:"text-sm text-gray-500 mb-3 line-clamp-2",children:E.description}),A.jsx("div",{className:"flex-1"}),A.jsxs("div",{className:"flex items-center justify-between pt-3 mt-3 border-t border-gray-100",children:[A.jsx("span",{className:"text-xs text-gray-400 flex items-center",children:(()=>{const _=new Date(E.updatedAt);return isNaN(_.getTime())?null:A.jsxs(A.Fragment,{children:[A.jsx(ti,{className:"w-4 h-4 mr-1"}),_.toLocaleDateString("tr-TR")]})})()}),A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("button",{onClick:_=>{_.stopPropagation(),y(E.id)},className:"p-2 rounded-lg bg-ide-primary-50 hover:bg-ide-primary-100 text-ide-primary-700 hover:text-ide-primary-900 shadow-sm border border-transparent hover:border-ide-primary-200 transition",title:"Dzenle",children:A.jsx(Co,{size:18})}),A.jsx("button",{onClick:_=>{_.stopPropagation(),C(E)},className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 hover:text-red-800 shadow-sm border border-transparent hover:border-red-200 transition",title:"Sil",children:A.jsx(Ss,{size:18})})]})]})]},E.id))})]})}),A.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:x.map((E,_)=>A.jsxs("div",{onClick:()=>r(E.path),className:"group cursor-pointer bg-white rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 hover:border-gray-200",children:[A.jsx("div",{className:`${E.bgColor} w-10 h-10 rounded-lg flex items-center justify-center mb-3 group-hover:scale-105 transition-transform duration-200`,children:A.jsx(E.icon,{className:`w-5 h-5 ${E.color}`})}),A.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:E.title}),A.jsx("p",{className:"text-sm text-gray-600 leading-relaxed mb-3",children:E.description}),A.jsxs("div",{className:"flex items-center text-blue-600 text-sm font-medium group-hover:translate-x-1 transition-transform duration-200",children:["Bala ",A.jsx(QE,{className:"ml-1 w-3 h-3"})]})]},_))})}),A.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:A.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-blue-600",children:e.length}),A.jsx("div",{className:"text-xs text-gray-600",children:"retmen"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-ide-secondary-600",children:t.length}),A.jsx("div",{className:"text-xs text-gray-600",children:"Snf"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-ide-primary-600",children:n.length}),A.jsx("div",{className:"text-xs text-gray-600",children:"Ders"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-ide-accent-500",children:s.length}),A.jsx("div",{className:"text-xs text-gray-600",children:"Program"})]})]})})}),A.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:A.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100",children:A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-center",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"Sihirbaz Sistemi"}),A.jsx("div",{className:"text-xs text-gray-600",children:"Adm adm otomatik oluturma"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"Zaman Kstlamalar"}),A.jsx("div",{className:"text-xs text-gray-600",children:"Esnek kstlama ynetimi"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"akma Kontrol"}),A.jsx("div",{className:"text-xs text-gray-600",children:"Otomatik akma tespiti"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-lg font-semibold text-gray-900",children:"PDF kt"}),A.jsx("div",{className:"text-xs text-gray-600",children:"Profesyonel grnm"})]})]})})}),A.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:A.jsx("div",{className:"text-center",children:A.jsx("p",{className:"text-xs text-gray-500",children:"Sihirbaz tabanl otomatik program oluturma sistemi"})})}),A.jsx(KA,{isOpen:d.isOpen,onClose:f,onConfirm:d.onConfirm,title:d.title,message:d.message,type:d.type,confirmText:d.confirmText,cancelText:d.cancelText,confirmVariant:d.confirmVariant})]})},Tr=["Pazartesi","Sal","aramba","Perembe","Cuma"],gn=["1","2","3","4","5","6","7","8","9","10"],Ra=["Anaokulu","lkokul","Ortaokul"],GE=[{period:"prep",startTime:"08:30",endTime:"08:50",isBreak:!0},{period:"1",startTime:"08:50",endTime:"09:25"},{period:"2",startTime:"09:35",endTime:"10:10"},{period:"3",startTime:"10:20",endTime:"10:55"},{period:"4",startTime:"11:05",endTime:"11:40"},{period:"5",startTime:"11:50",endTime:"12:25",isBreak:!0},{period:"6",startTime:"12:30",endTime:"13:05"},{period:"7",startTime:"13:15",endTime:"13:50"},{period:"8",startTime:"14:00",endTime:"14:35"},{period:"afternoon-breakfast",startTime:"14:35",endTime:"14:45",isBreak:!0},{period:"9",startTime:"14:45",endTime:"15:20"},{period:"10",startTime:"15:25",endTime:"16:00"}],oL=[{period:"prep",startTime:"08:30",endTime:"08:40",isBreak:!0},{period:"1",startTime:"08:40",endTime:"09:15"},{period:"break-after-1",startTime:"09:15",endTime:"09:35",isBreak:!0},{period:"2",startTime:"09:35",endTime:"10:10"},{period:"3",startTime:"10:20",endTime:"10:55"},{period:"4",startTime:"11:05",endTime:"11:40"},{period:"5",startTime:"11:50",endTime:"12:25"},{period:"6",startTime:"12:30",endTime:"13:05",isBreak:!0},{period:"7",startTime:"13:15",endTime:"13:50"},{period:"8",startTime:"14:00",endTime:"14:35"},{period:"afternoon-breakfast",startTime:"14:35",endTime:"14:45",isBreak:!0},{period:"9",startTime:"14:45",endTime:"15:20"},{period:"10",startTime:"15:25",endTime:"16:00"}],lL=GE,$E=r=>{switch(r){case"Ortaokul":return oL;case"Anaokulu":return lL;default:return GE}},Dd=(r,e)=>$E(e).find(n=>n.period===r),mu=(r,e)=>`${r} - ${e}`,M1=r=>!r||typeof r!="string"?[]:r.split("+").map(e=>parseInt(e.trim(),10)).filter(e=>!isNaN(e)&&e>0),Ph=(r,e)=>{const t=M1(r);return t.reduce((s,i)=>s+i,0)===e&&t.length<=5},qE=r=>{const e=[];if(r<=0)return e;if(r>0&&r%5===0){const t=r/5;t>0&&e.push(Array(5).fill(t).join("+"))}if(r>0&&r%4===0){const t=r/4;t>0&&e.push(Array(4).fill(t).join("+"))}if(r>0&&r%3===0){const t=r/3;t>0&&e.push(Array(3).fill(t).join("+"))}if(r>0&&r%2===0){const t=r/2;t>0&&e.push(Array(2).fill(t).join("+"))}return r===1?e.push("1"):r===2?e.push("2","1+1"):r===3?e.push("3","2+1","1+1+1"):r===4?e.push("4","2+2","2+1+1","1+1+1+1"):r===5?e.push("5","3+2","2+2+1","2+1+1+1","1+1+1+1+1"):r===6?e.push("6","3+3","2+2+2","3+2+1","2+2+1+1"):r===8?e.push("4+4","2+2+2+2","3+3+2","2+2+2+1+1"):r===10?e.push("5+5","2+2+2+2+2","3+3+2+2","4+3+2+1"):r===12&&e.push("6+6","3+3+3+3","2+2+2+2+2+2","4+4+2+2"),Array.from(new Set(e))},Oa=({isOpen:r,onClose:e,title:t,children:n,size:s="md"})=>{if(Ee.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),Ee.useEffect(()=>{const l=c=>{c.key==="Escape"&&r&&e()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[r,e]),!r)return null;const i={sm:"sm:max-w-md",md:"sm:max-w-lg",lg:"sm:max-w-2xl",xl:"sm:max-w-4xl","2xl":"sm:max-w-5xl","4xl":"sm:max-w-[90vw] lg:max-w-[85vw]","5xl":"sm:max-w-[95vw] lg:max-w-[90vw]"};return A.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:A.jsxs("div",{className:"flex items-end sm:items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:e,"aria-hidden":"true"}),A.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),A.jsxs("div",{className:`
          inline-block align-bottom bg-white text-left overflow-hidden shadow-2xl transform transition-all 
          sm:my-8 sm:align-middle sm:w-full ${i[s]}
          
          /* MOBILE OPTIMIZATIONS */
          w-full max-w-none mx-0 mb-0
          sm:mx-4 sm:mb-4 sm:max-w-lg
          
          /* MOBILE: Full width with rounded top corners */
          rounded-t-2xl sm:rounded-xl
          
          /* MOBILE: Better height management */
          max-h-[95vh] sm:max-h-[90vh]
          
          /* MOBILE: Ensure proper positioning */
          modal-mobile
        `,children:[A.jsx("div",{className:"bg-white px-4 sm:px-6 pt-5 sm:pt-6 pb-4 border-b border-gray-200 sticky top-0 z-10",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 pr-4 truncate",children:t}),A.jsx("button",{onClick:e,className:"rounded-lg p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 btn-touch flex-shrink-0","aria-label":"Modal kapat",children:A.jsx(di,{size:24})})]})}),A.jsx("div",{className:"bg-white px-4 sm:px-6 py-4 sm:py-6 overflow-y-auto flex-1",children:A.jsx("div",{className:"form-mobile",children:n})})]})]})})},ns=({label:r,value:e,onChange:t,options:n,required:s=!1,error:i,disabled:l=!1})=>A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-ide-gray-800 mb-2",children:[r," ",s&&A.jsx("span",{className:"text-ide-accent-600 ml-1",children:"*"})]}),A.jsxs("div",{className:"relative",children:[A.jsxs("select",{value:e,onChange:c=>t(c.target.value),required:s,disabled:l,className:`ide-input w-full appearance-none bg-white ${i?"border-ide-accent-400 bg-ide-accent-50 focus:border-ide-accent-500 focus:ring-ide-accent-200 text-ide-accent-900":l?"border-ide-gray-200 bg-ide-gray-50 text-ide-gray-500 cursor-not-allowed":"border-ide-gray-300 focus:border-ide-primary-500 focus:ring-ide-primary-200 text-ide-gray-900 hover:border-ide-gray-400"}`,children:[A.jsx("option",{value:"",className:"text-ide-gray-500",children:"Seiniz..."}),n.map(c=>A.jsx("option",{value:c.value,className:"text-ide-gray-900",children:c.label},c.value))]}),A.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:i?A.jsx(Ed,{className:"h-5 w-5 text-ide-accent-500"}):A.jsx(bg,{className:`h-5 w-5 ${l?"text-ide-gray-400":"text-ide-gray-500"}`})})]}),i&&A.jsxs("div",{className:"mt-2 flex items-start space-x-2",children:[A.jsx(Ed,{className:"h-4 w-4 text-ide-accent-600 mt-0.5 flex-shrink-0"}),A.jsx("p",{className:"text-sm font-medium text-ide-accent-700",children:i})]})]}),cL=()=>{const{data:r,loading:e,add:t,update:n,remove:s}=or("teachers"),{data:i,update:l}=or("subjects"),{data:c}=or("schedules"),{data:u}=or("classes"),{success:d,error:f,warning:v}=xa(),{confirmation:x,hideConfirmation:y,confirmDelete:C}=Eo(),[N,E]=Ee.useState(!1),[_,P]=Ee.useState(!1),[H,D]=Ee.useState(null),[J,Z]=Ee.useState(""),[O,Q]=Ee.useState(""),[U,V]=Ee.useState(""),[I,L]=Ee.useState(!1),[F,ee]=Ee.useState([{name:"",branch:"",level:""}]),[ge,ue]=Ee.useState({name:"",branch:"",levels:[],subjectIds:[]}),[fe,ae]=Ee.useState({});Ee.useEffect(()=>{if(ge.subjectIds.length>0){const X=ge.subjectIds.filter(ne=>{const pe=i.find(se=>se.id===ne);return pe?(pe.levels||[pe.level]).some(se=>ge.levels.includes(se)):!1});X.length<ge.subjectIds.length&&ue(ne=>({...ne,subjectIds:X}))}},[ge.levels,i,ge.subjectIds]);const $=()=>[...new Set(i.map(ne=>ne.branch))].sort((ne,pe)=>ne.localeCompare(pe,"tr")),z=r.filter(X=>{const ne=X.levels||[X.level],pe=X.branches||X.branch.split(",").map(we=>we.trim()),Ie=!J||ne.includes(J),se=!O||pe.includes(O),Te=!U||X.name.toLowerCase().includes(U.toLowerCase())||le(X).toLowerCase().includes(U.toLowerCase());return Ie&&se&&Te}).sort((X,ne)=>X.name.localeCompare(ne.name,"tr")),S=()=>{if(r.length===0){v(" Silinecek retmen Yok","Sistemde silinecek retmen bulunamad");return}C(`${r.length} retmen`,async()=>{L(!0);try{for(const X of r)await s(X.id);d(" retmenler Silindi",`${r.length} retmen baaryla silindi`),Z(""),Q(""),V("")}catch{f(" Silme Hatas","retmenler silinirken bir hata olutu")}finally{L(!1)}})},K=async X=>{if(X.preventDefault(),!ge.branch){f(" Bran Seimi Gerekli","Ltfen bir bran sein.");return}if(ge.levels.length===0){f(" Eitim Seviyesi Gerekli","En az bir eitim seviyesi semelisiniz.");return}try{const ne={name:ge.name,branch:ge.branch,branches:[ge.branch],level:ge.levels[0],levels:ge.levels,subjectIds:ge.subjectIds};if(H){await n(H.id,ne);for(const[pe,Ie]of Object.entries(fe)){const se=i.find(Te=>Te.id===pe);se&&se.distributionPattern!==Ie&&await l(pe,{distributionPattern:Ie})}d(" retmen Gncellendi",`${ge.name} baaryla gncellendi.`)}else await t(ne),d(" retmen Eklendi",`${ge.name} baaryla eklendi.`);G()}catch{f(" Hata","retmen kaydedilirken bir hata olutu.")}},Y=async X=>{X.preventDefault();const ne=F.filter(pe=>pe.name&&pe.branch&&pe.level);if(ne.length===0){f("Hata","Ltfen en az bir geerli retmen bilgisi girin.");return}try{for(const pe of ne)Ra.includes(pe.level)&&await t({name:pe.name,branch:pe.branch,level:pe.level,branches:[pe.branch],levels:[pe.level]});ee([{name:"",branch:"",level:""}]),P(!1),d(" retmenler Eklendi",`${ne.length} retmen baaryla eklendi`)}catch{f(" Hata","Toplu retmen eklenirken bir hata olutu.")}},G=()=>{ue({name:"",branch:"",levels:[],subjectIds:[]}),ae({}),D(null),E(!1)},oe=X=>{const ne={};u.forEach(pe=>{const Ie=pe.assignments?.find(se=>se.teacherId===X.id);Ie&&Ie.subjectIds.forEach(se=>{const Te=i.find(we=>we.id===se);Te&&Te.distributionPattern&&(ne[se]=Te.distributionPattern)})}),ae(ne),ue({name:X.name,branch:X.branch,levels:X.levels||[X.level],subjectIds:X.subjectIds||[]}),D(X),E(!0)},ye=async X=>{const ne=r.find(pe=>pe.id===X);ne&&C(ne.name,async()=>{await s(X),d(" retmen Silindi",`${ne.name} baaryla silindi`)})},Le=X=>{ue(ne=>({...ne,levels:ne.levels.includes(X)?ne.levels.filter(pe=>pe!==X):[...ne.levels,X]}))},be=X=>{ue(ne=>({...ne,subjectIds:ne.subjectIds.includes(X)?ne.subjectIds.filter(pe=>pe!==X):[...ne.subjectIds,X]}))},je=()=>ee([...F,{name:"",branch:"",level:""}]),Ge=X=>{F.length>1&&ee(F.filter((ne,pe)=>pe!==X))},tt=(X,ne,pe)=>{const Ie=[...F];Ie[X]={...Ie[X],[ne]:pe},ee(Ie)},it=()=>V(""),It=X=>{X.key==="Enter"&&X.currentTarget.blur(),X.key==="Escape"&&it()},le=X=>X.branch,ft=X=>X.levels||[X.level],ct=i.filter(X=>ge.levels.length===0?!1:(X.levels||[X.level]).some(pe=>ge.levels.includes(pe))).sort((X,ne)=>X.name.localeCompare(ne.name,"tr")),pt=Ra.map(X=>({value:X,label:X})),he=[{value:"",label:"Bran Sein..."},...$().map(X=>({value:X,label:X}))],Se=[{value:"",label:"Tm Seviyeler"},...pt],Qe=[{value:"",label:"Tm Branlar"},...$().map(X=>({value:X,label:X}))];return e?A.jsx("div",{className:"flex items-center justify-center h-64",children:A.jsxs("div",{className:"mobile-loading",children:[A.jsx("div",{className:"mobile-loading-spinner"}),A.jsx("div",{className:"mobile-loading-text",children:"Ykleniyor..."})]})}):A.jsxs("div",{className:"container-mobile",children:[A.jsxs("div",{className:"header-mobile",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(ei,{className:"w-8 h-8 text-blue-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-bold text-gray-900",children:"retmenler"}),A.jsxs("p",{className:"text-responsive-sm text-gray-600",children:[r.length," retmen kaytl (",z.length," gsteriliyor)"]})]})]}),A.jsxs("div",{className:"button-group-mobile",children:[r.length>0&&A.jsx(Ct,{onClick:S,icon:Ss,variant:"danger",disabled:I,className:"w-full sm:w-auto",children:I?"Siliniyor...":`Tmn Sil (${r.length})`}),A.jsx(Ct,{onClick:()=>P(!0),icon:ea,variant:"secondary",className:"w-full sm:w-auto",children:"Toplu Ekle"}),A.jsx(Ct,{onClick:()=>E(!0),icon:ea,variant:"primary",className:"w-full sm:w-auto",children:"Yeni retmen"})]})]}),A.jsxs("div",{className:"mobile-card mobile-spacing mb-6",children:[A.jsxs("div",{className:"mobile-form-group",children:[A.jsx("label",{className:"mobile-form-label",children:" retmen Ara"}),A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:A.jsx(Qm,{className:"h-5 w-5 text-gray-400"})}),A.jsx("input",{type:"text",value:U,onChange:X=>V(X.target.value),onKeyDown:It,placeholder:"retmen ad veya bran ara... (Enter ile ara)",className:"block w-full pl-10 pr-10 py-3 text-base border-2 border-gray-300 rounded-lg bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",title:"Enter ile ara, ESC ile temizle"}),U&&A.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:A.jsx("button",{onClick:it,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Aramay temizle",children:A.jsx(di,{className:"w-5 w-5"})})})]}),U&&A.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[A.jsxs("p",{className:"text-sm text-blue-600",children:[' "',U,'" iin ',z.length," sonu bulundu"]}),A.jsx("button",{onClick:it,className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Temizle"})]})]}),A.jsxs("div",{className:"responsive-grid-2 gap-responsive",children:[A.jsx(ns,{label:"Seviye Filtresi",value:J,onChange:Z,options:Se}),A.jsx(ns,{label:"Bran Filtresi",value:O,onChange:Q,options:Qe})]})]}),z.length===0?A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(ei,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r.length===0?"Henz retmen eklenmemi":U?"Arama sonucu bulunamad":"Filtrelere uygun retmen bulunamad"}),A.jsx("p",{className:"text-gray-500 mb-4",children:r.length===0?"lk retmeninizi ekleyerek balayn":U?`"${U}" aramas iin sonu bulunamad`:"Farkl filtre kriterleri deneyin"})]}):A.jsx("div",{className:"mobile-card overflow-hidden",children:A.jsx("div",{className:"table-responsive",children:A.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ad Soyad & Yk"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bran"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Seviye"}),A.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"lemler"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(X=>{const ne=c.find(we=>we.teacherId===X.id),pe={};let Ie=0;ne&&Object.values(ne.schedule).forEach(we=>{Object.values(we).forEach(Be=>{if(Be&&Be.classId)if(Be.classId.startsWith("kulup-virtual-class-")||Be.classId==="KULP")Ie++;else{const Fe=u.find(De=>De.id===Be.classId);if(Fe){const De=Fe.level;pe[De]=(pe[De]||0)+1}}})});const se={};u.forEach(we=>{const Be=we.assignments?.find(Fe=>Fe.teacherId===X.id);Be&&Be.subjectIds.forEach(Fe=>{const De=i.find(At=>At.id===Fe);if(De){const At=we.level;se[At]=(se[At]||0)+De.weeklyHours}})});const Te=[...new Set([...Object.keys(se),...Object.keys(pe)])];return A.jsxs("tr",{className:"hover:bg-gray-50",children:[A.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[A.jsx("div",{className:"text-sm font-medium text-gray-900",children:X.name}),Te.length>0&&A.jsx("div",{className:"mt-2 space-y-1",children:Te.map(we=>{const Be=se[we]||0,Fe=pe[we]||0;return Be===0?null:A.jsxs("div",{className:"flex items-center text-xs space-x-2",children:[A.jsxs("span",{className:"font-semibold w-20 text-gray-600",children:[we,":"]}),A.jsxs("div",{className:`px-2 py-1 rounded-full inline-flex items-center gap-1 ${Fe===Be?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[A.jsx(ti,{size:12}),Fe," / ",Be," saat"]}),we===Te[0]&&Ie>0&&A.jsxs("div",{className:"px-2 py-1 rounded-full inline-flex items-center gap-1 bg-purple-100 text-purple-800",children:["+ ",Ie," Kulp"]})]},we)})})]}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.jsx("div",{className:"text-sm text-gray-500",children:le(X)})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.jsx("div",{className:"flex flex-wrap gap-1",children:ft(X).map((we,Be)=>A.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${we==="Anaokulu"?"bg-green-100 text-green-800":we==="lkokul"?"bg-blue-100 text-blue-800":"bg-ide-primary-100 text-ide-accent-800"}`,children:we},Be))})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:A.jsxs("div",{className:"flex justify-end space-x-2",children:[A.jsx(Ct,{onClick:()=>oe(X),icon:Co,size:"sm",variant:"secondary",children:"Dzenle"}),A.jsx(Ct,{onClick:()=>ye(X.id),icon:Ss,size:"sm",variant:"danger",children:"Sil"})]})})]},X.id)})})]})})}),A.jsx(Oa,{isOpen:N,onClose:G,title:H?"retmen Dzenle":"Yeni retmen Ekle",size:"lg",children:A.jsxs("form",{onSubmit:K,children:[A.jsx(Jr,{label:"Ad Soyad",value:ge.name,onChange:X=>ue({...ge,name:X}),placeholder:"rn: Ahmet Ylmaz",required:!0}),A.jsx(ns,{label:"Bran",value:ge.branch,onChange:X=>ue({...ge,branch:X}),options:he,required:!0}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Eitim Seviyeleri ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:Ra.map(X=>A.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ${ge.levels.includes(X)?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:[A.jsx("input",{type:"checkbox",checked:ge.levels.includes(X),onChange:()=>Le(X),className:"sr-only"}),A.jsx("span",{className:"text-sm font-medium",children:X}),ge.levels.includes(X)&&A.jsx("span",{className:"ml-2 text-blue-600",children:""})]},X))}),ge.levels.length>0&&A.jsxs("p",{className:"text-xs text-blue-600 mt-2",children:[" Seilen seviyeler: ",ge.levels.join(", ")]})]}),A.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[A.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[A.jsx(wa,{className:"w-5 h-5 mr-2 text-ide-primary-600"}),"Dersler"]}),A.jsxs("div",{className:"space-y-2 p-3 border border-gray-300 rounded-lg bg-gray-50 max-h-60 overflow-y-auto",children:[ct.map(X=>A.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer p-2 hover:bg-gray-100 rounded-md",children:[A.jsx("input",{type:"checkbox",checked:ge.subjectIds.includes(X.id),onChange:()=>be(X.id),className:"w-4 h-4 text-ide-primary-600 bg-gray-100 border-gray-300 rounded focus:ring-ide-primary-500"}),A.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[X.name,A.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",X.branch," - ",(X.levels||[X.level]).join(", "),")"]})]})]},X.id)),ge.levels.length>0&&ct.length===0&&A.jsx("div",{className:"text-center text-sm text-gray-500 py-4",children:"Seilen seviyelere uygun ders bulunamad."}),ge.levels.length===0&&A.jsx("div",{className:"text-center text-sm text-gray-500 py-4",children:"Dersleri grmek iin ltfen nce eitim seviyesi sein."})]}),ge.subjectIds.length>0&&A.jsxs("p",{className:"text-xs text-ide-primary-600 mt-2",children:[" ",ge.subjectIds.length," ders seildi."]})]}),H&&Object.keys(fe).length>0&&A.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[A.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[A.jsx(ti,{className:"w-5 h-5 mr-2 text-orange-500"}),"Ders Datm ekilleri"]}),A.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"rnek format: 2+2+2 veya 3+3+2+1"}),A.jsx("div",{className:"space-y-3 p-3 border border-gray-300 rounded-lg bg-orange-50 max-h-60 overflow-y-auto",children:Object.entries(fe).map(([X,ne])=>{const pe=i.find(Ie=>Ie.id===X);return pe?A.jsxs("div",{className:"flex items-center justify-between gap-3 bg-white p-2 rounded-md border border-orange-100",children:[A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("span",{className:"text-sm font-medium text-gray-800 block truncate",children:pe.name}),A.jsxs("span",{className:"text-xs text-gray-500",children:[pe.className||"Genel"," - ",pe.weeklyHours," saat"]})]}),A.jsx("input",{type:"text",value:ne,onChange:Ie=>ae(se=>({...se,[X]:Ie.target.value})),placeholder:"rn: 2+2+1",className:"w-28 px-2 py-1.5 text-sm border border-orange-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]},X):null})})]}),A.jsxs("div",{className:"button-group-mobile mt-6",children:[A.jsx(Ct,{type:"button",onClick:G,variant:"secondary",children:"ptal"}),A.jsx(Ct,{type:"submit",variant:"primary",disabled:!ge.branch||ge.levels.length===0,children:H?"Gncelle":"Kaydet"})]})]})}),A.jsx(Oa,{isOpen:_,onClose:()=>P(!1),title:"Toplu retmen Ekleme",children:A.jsxs("form",{onSubmit:Y,children:[A.jsxs("div",{className:"mb-4",children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"retmen Listesi"}),A.jsx(Ct,{type:"button",onClick:je,variant:"secondary",size:"sm",children:"+ Satr Ekle"})]}),A.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:F.map((X,ne)=>A.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 bg-gray-50 rounded-lg",children:[A.jsx("input",{type:"text",placeholder:"Ad Soyad",value:X.name,onChange:pe=>tt(ne,"name",pe.target.value),className:"col-span-2 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0}),A.jsxs("select",{value:X.branch,onChange:pe=>tt(ne,"branch",pe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[A.jsx("option",{value:"",children:"Bran Se"}),$().map(pe=>A.jsx("option",{value:pe,children:pe},pe))]}),A.jsxs("div",{className:"flex items-center space-x-1",children:[A.jsxs("select",{value:X.level,onChange:pe=>tt(ne,"level",pe.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[A.jsx("option",{value:"",children:"Seviye"}),Ra.map(pe=>A.jsx("option",{value:pe,children:pe},pe))]}),A.jsx("button",{type:"button",onClick:()=>Ge(ne),className:"p-1.5 bg-red-100 text-red-600 rounded hover:bg-red-200 disabled:opacity-50",disabled:F.length===1,children:A.jsx(Ss,{size:14})})]})]},ne))})]}),A.jsxs("div",{className:"button-group-mobile mt-4",children:[A.jsx(Ct,{type:"button",onClick:()=>P(!1),variant:"secondary",children:"ptal"}),A.jsxs(Ct,{type:"submit",variant:"primary",children:["Toplu Ekle (",F.filter(X=>X.name&&X.branch&&X.level).length," retmen)"]})]})]})}),A.jsx(KA,{isOpen:x.isOpen,onClose:y,onConfirm:x.onConfirm,title:x.title,message:x.message,type:x.type,confirmText:x.confirmText,cancelText:x.cancelText,confirmVariant:x.confirmVariant})]})},uL=()=>{const r=xc(),{data:e,loading:t,add:n,update:s,remove:i}=or("classes"),{data:l}=or("schedules"),{data:c}=or("teachers"),{data:u}=or("subjects"),{success:d,error:f}=xa(),{confirmation:v,confirmDelete:x,hideConfirmation:y}=Eo(),[C,N]=Ee.useState(!1),[E,_]=Ee.useState(null),[P,H]=Ee.useState(""),[D,J]=Ee.useState({name:"",levels:[],classTeacherId:"",assignments:[]}),[Z,O]=Ee.useState(null),Q=()=>e.filter(S=>!P||(S.levels||[S.level]).includes(P)).sort((S,K)=>S.name.localeCompare(K.name,"tr")),U=S=>{let K=0;return l.forEach(Y=>{Object.values(Y.schedule).forEach(G=>{Object.values(G).forEach(oe=>{oe?.classId===S&&!oe.isFixed&&K++})})}),K},V=(S,K)=>{const Y=l.find(oe=>oe.teacherId===S);if(!Y)return 0;let G=0;return Object.values(Y.schedule).forEach(oe=>{Object.values(oe).forEach(ye=>{ye?.classId===K&&!ye.isFixed&&G++})}),G},I=(S,K)=>{const Y=K.find(G=>G.teacherId===S);return Y?Y.subjectIds.reduce((G,oe)=>{const ye=u.find(Le=>Le.id===oe);return G+(ye?.weeklyHours||0)},0):0},L=S=>r(`/class-schedules?classId=${S}`),F=S=>r(`/schedules?mode=class&classId=${S}`),ee=()=>{J({name:"",levels:[],classTeacherId:"",assignments:[]}),_(null),N(!1),O(null)},ge=S=>{J({name:S.name,levels:S.levels||(S.level?[S.level]:[]),classTeacherId:S.classTeacherId||"",assignments:S.assignments||[]}),_(S),N(!0)},ue=S=>{const K=e.find(Y=>Y.id===S);K&&x(K.name,async()=>{await i(S),d(" Snf Silindi",`${K.name} baaryla silindi`)})},fe=async S=>{if(S.preventDefault(),D.levels.length===0){f("Seviye seimi zorunludur.");return}const K=D.assignments.filter(G=>G.subjectIds.length>0),Y={name:D.name,levels:D.levels,level:D.levels[0],classTeacherId:D.classTeacherId,assignments:K,teacherIds:[...new Set(K.map(G=>G.teacherId))]};try{E?(await s(E.id,Y),d(" Snf gncellendi.",`${D.name} snfnn bilgileri gncellendi.`)):(await n(Y),d(" Snf eklendi.",`${D.name} snf baaryla oluturuldu.`)),ee()}catch{f(" Kayt Hatas","lem srasnda bir hata olutu.")}},ae=S=>{J(K=>{const Y=K.levels.includes(S)?K.levels.filter(G=>G!==S):[...K.levels,S];return{...K,levels:Y,assignments:[]}})},$=(S,K,Y)=>{J(G=>{const oe=JSON.parse(JSON.stringify(G.assignments));let ye=oe.find(je=>je.teacherId===S);ye||(ye={teacherId:S,subjectIds:[]},oe.push(ye));const Le=new Set(ye.subjectIds);Y?Le.add(K):Le.delete(K),ye.subjectIds=Array.from(Le);const be=oe.filter(je=>je.subjectIds.length>0);return{...G,assignments:be}})},me=()=>D.levels.length===0?[]:c.filter(S=>(S.levels||[S.level]).some(K=>D.levels.includes(K))).sort((S,K)=>S.name.localeCompare(K.name,"tr")),z=Q();return A.jsxs("div",{className:"container-mobile",children:[A.jsxs("div",{className:"header-mobile",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(ms,{className:"w-8 h-8 text-emerald-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-bold text-gray-900",children:"Snflar"}),A.jsxs("p",{className:"text-responsive-sm text-gray-600",children:[e.length," snf kaytl (",z.length," gsteriliyor)"]})]})]}),A.jsx("div",{className:"button-group-mobile",children:A.jsx(Ct,{onClick:()=>N(!0),icon:ea,variant:"primary",children:"Yeni Snf"})})]}),A.jsx("div",{className:"mobile-card mobile-spacing mb-6",children:A.jsx(ns,{label:"Seviye Filtresi",value:P,onChange:H,options:[{value:"",label:"Tm Seviyeler"},...Ra.map(S=>({value:S,label:S}))]})}),t?A.jsx("div",{className:"text-center py-12",children:"Ykleniyor..."}):z.length===0?A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(ms,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium",children:"Henz Snf Eklenmemi"})]}):A.jsx("div",{className:"responsive-grid gap-responsive",children:z.map(S=>{const K=U(S.id),Y=c.find(ye=>ye.id===S.classTeacherId),G=c.filter(ye=>S.assignments?.some(Le=>Le.teacherId===ye.id)),oe=Z===S.id;return A.jsxs("div",{className:"mobile-card mobile-spacing hover:shadow-md transition-shadow",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:S.name}),A.jsx("div",{className:"flex flex-wrap gap-1",children:(S.levels||[S.level]).map((ye,Le)=>A.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ye==="Anaokulu"?"bg-green-100 text-green-800":ye==="lkokul"?"bg-blue-100 text-blue-800":"bg-ide-primary-100 text-ide-accent-800"}`,children:ye},Le))})]}),Y&&A.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:A.jsxs("div",{className:"flex items-start",children:[A.jsx(ei,{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-1"}),A.jsx("div",{children:A.jsxs("p",{className:"text-sm font-medium text-blue-800",children:[A.jsx("span",{className:"font-bold",children:"Snf rt:"})," ",Y.name]})})]})}),A.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Program Durumu"}),A.jsxs("div",{className:"flex items-center mt-1",children:[A.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${K>0?"bg-green-500":"bg-gray-400"}`}),A.jsx("span",{className:`text-sm font-bold ${K>0?"text-green-700":"text-gray-500"}`,children:K>0?`${K} ders saati`:"Program yok"})]})]}),K>0&&A.jsx(Ct,{onClick:()=>L(S.id),icon:Bg,size:"sm",variant:"secondary",children:"Grntle"})]})}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("button",{onClick:()=>O(oe?null:S.id),className:"w-full text-left flex justify-between items-center p-2 bg-gray-100 rounded-md",children:[A.jsx("span",{className:"text-sm font-medium text-gray-800",children:"retmen Ders Ykleri"}),oe?A.jsx(zj,{size:16}):A.jsx(bg,{size:16})]}),oe&&A.jsx("div",{className:"mt-2 space-y-2 p-3 border-l-2 border-gray-200",children:G.length>0?G.map(ye=>{const Le=I(ye.id,S.assignments||[]),be=V(ye.id,S.id),je=Le!==be;return A.jsxs("div",{className:"flex justify-between items-center text-sm",children:[A.jsx("span",{className:"text-gray-700",children:ye.name}),A.jsxs("span",{className:`font-semibold px-2 py-1 rounded-full text-xs flex items-center gap-1 ${je?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:[A.jsx(ti,{size:12}),be," / ",Le]})]},ye.id)}):A.jsx("p",{className:"text-xs text-gray-500",children:"Bu snfa atanm retmen yok."})})]}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{className:"flex space-x-1",children:[A.jsx(Ct,{onClick:()=>ge(S),icon:Co,size:"sm",variant:"secondary",children:"Dzenle"}),A.jsx(Ct,{onClick:()=>ue(S.id),icon:Ss,size:"sm",variant:"danger",children:"Sil"})]}),A.jsx(Ct,{onClick:()=>F(S.id),icon:fi,size:"sm",variant:K>0?"secondary":"primary",children:K>0?"Program Dzenle":"Program Olutur"})]})]},S.id)})}),A.jsx(Oa,{isOpen:C,onClose:ee,title:E?"Snf Dzenle":"Yeni Snf Ekle",size:"lg",children:A.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[A.jsx(Jr,{label:"Snf Ad",value:D.name,onChange:S=>J(K=>({...K,name:S})),required:!0}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Eitim Seviyeleri ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:Ra.map(S=>A.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer ${D.levels.includes(S)?"bg-emerald-50 border-emerald-500":"bg-white border-gray-300"}`,children:[A.jsx("input",{type:"checkbox",checked:D.levels.includes(S),onChange:()=>ae(S),className:"sr-only"}),A.jsx("span",{className:"text-sm font-medium",children:S}),D.levels.includes(S)&&A.jsx("span",{className:"ml-2 text-emerald-600",children:""})]},S))})]}),D.levels.length>0&&A.jsxs("div",{className:"mt-4",children:[A.jsx(ns,{label:"Snf retmeni",value:D.classTeacherId,onChange:S=>J(K=>({...K,classTeacherId:S})),options:[{value:"",label:"Snf retmeni Yok"},...me().map(S=>({value:S.id,label:S.name}))]}),A.jsx("h3",{className:"font-medium mb-2 mt-4",children:"retmen ve Ders Atamalar"}),A.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto border p-2 rounded-lg bg-gray-50",children:me().length>0?me().map(S=>{const K=u.filter(Y=>(Y.levels||[Y.level]).some(G=>D.levels.includes(G))&&S.subjectIds?.includes(Y.id));return K.length===0?null:A.jsxs("div",{className:"bg-white p-2 rounded-md shadow-sm",children:[A.jsxs("p",{className:"font-semibold p-1",children:[S.name," ",A.jsxs("span",{className:"text-xs text-gray-500",children:["(",S.branch,")"]})]}),A.jsx("div",{className:"mt-2 pl-4 border-l-2 space-y-1 pt-2",children:K.map(Y=>{const G=D.assignments.find(oe=>oe.teacherId===S.id)?.subjectIds.includes(Y.id)||!1;return A.jsxs("label",{className:"flex items-center p-1 rounded hover:bg-gray-100",children:[A.jsx("input",{type:"checkbox",checked:G,onChange:oe=>$(S.id,Y.id,oe.target.checked),className:"mr-2 h-4 w-4"}),Y.name]},Y.id)})})]},S.id)}):A.jsx("div",{className:"text-center p-4 text-sm text-gray-500",children:"Seilen seviyelere uygun retmen bulunamad."})})]}),A.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:A.jsx(Ct,{type:"submit",disabled:D.levels.length===0,children:"Kaydet"})})]})}),A.jsx(KA,{...v,onClose:y})]})},dL=()=>{const{data:r,loading:e,add:t,update:n,remove:s}=or("subjects"),{success:i,error:l}=xa(),{confirmation:c,confirmDelete:u}=Eo(),[d,f]=Ee.useState(!1),[v,x]=Ee.useState(null),[y,C]=Ee.useState(""),[N,E]=Ee.useState(""),[_,P]=Ee.useState({name:"",branch:"",levels:[],weeklyHours:"1",distributionPattern:""}),H=()=>[...new Set(r.map($=>$.branch))].sort(($,me)=>$.localeCompare(me,"tr")),J=r.filter($=>(!y||($.levels||[$.level]).includes(y))&&(!N||$.branch===N)).sort(($,me)=>$.name.localeCompare(me.name,"tr")),Z=()=>{P({name:"",branch:"",levels:[],weeklyHours:"1",distributionPattern:""}),x(null),f(!1)},O=$=>{P({name:$.name,branch:$.branch,levels:$.levels||($.level?[$.level]:[]),weeklyHours:$.weeklyHours.toString(),distributionPattern:$.distributionPattern||""}),x($),f(!0)},Q=$=>{const me=r.find(z=>z.id===$);me&&u(me.name,async()=>{await s($),i(" Ders Silindi",`${me.name} baaryla silindi`)})},U=async $=>{if($.preventDefault(),_.levels.length===0){l(" Eitim Seviyesi Gerekli","En az bir eitim seviyesi semelisiniz.");return}const me=parseInt(_.weeklyHours)||1;if(_.distributionPattern&&!Ph(_.distributionPattern,me)){l(" Geersiz Datm ekli","Datm eklindeki saatlerin toplam haftalk saat ile elemiyor.");return}const z={name:_.name,branch:_.branch,level:_.levels[0],levels:_.levels,weeklyHours:me,distributionPattern:_.distributionPattern||void 0};try{v?(await n(v.id,z),i(" Ders Gncellendi",`${_.name} baaryla gncellendi`)):(await t(z),i(" Ders Eklendi",`${_.name} baaryla eklendi`)),Z()}catch{l(" Hata","Ders kaydedilirken bir hata olutu")}},V=$=>{P(me=>{const z=me.levels.includes($)?me.levels.filter(S=>S!==$):[...me.levels,$];return{...me,levels:z}})},I=$=>{P(me=>({...me,distributionPattern:$}))},L=parseInt(_.weeklyHours)||1,F=qE(L),ee=_.distributionPattern?Ph(_.distributionPattern,L):!0,ge=M1(_.distributionPattern),ue=$=>$.levels&&$.levels.length>0?$.levels:[$.level],fe=Ra.map($=>({value:$,label:$})),ae=H().map($=>({value:$,label:$}));return A.jsxs("div",{className:"container-mobile",children:[A.jsxs("div",{className:"header-mobile",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(wa,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-bold text-gray-900",children:"Dersler"}),A.jsxs("p",{className:"text-responsive-sm text-gray-600",children:[r.length," ders kaytl (",J.length," gsteriliyor)"]})]})]}),A.jsx("div",{className:"button-group-mobile",children:A.jsx(Ct,{onClick:()=>f(!0),icon:ea,variant:"primary",className:"w-full sm:w-auto",children:"Yeni Ders"})})]}),A.jsx("div",{className:"mobile-card mobile-spacing mb-6",children:A.jsxs("div",{className:"responsive-grid-2 gap-responsive",children:[A.jsx(ns,{label:"Seviye Filtresi",value:y,onChange:C,options:[{value:"",label:"Tm Seviyeler"},...fe]}),A.jsx(ns,{label:"Bran Filtresi",value:N,onChange:E,options:[{value:"",label:"Tm Branlar"},...ae]})]})}),e?A.jsx("p",{children:"Ykleniyor..."}):J.length===0?A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(wa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium",children:"Henz Ders Eklenmemi"})]}):A.jsx("div",{className:"mobile-card overflow-hidden",children:A.jsx("div",{className:"table-responsive",children:A.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ders Ad"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Bran"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Seviye"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Haftalk Saat"}),A.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Datm ekli"}),A.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"lemler"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map($=>A.jsxs("tr",{className:"hover:bg-gray-50",children:[A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:$.name}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:$.branch}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.jsx("div",{className:"flex flex-wrap gap-1",children:ue($).map((me,z)=>A.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${me==="Anaokulu"?"bg-green-100 text-green-800":me==="lkokul"?"bg-blue-100 text-blue-800":"bg-ide-primary-100 text-ide-accent-800"}`,children:me},z))})}),A.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[$.weeklyHours," saat"]}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:$.distributionPattern?A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("span",{className:"font-mono text-sm bg-blue-50 text-blue-700 px-2 py-1 rounded",children:$.distributionPattern}),A.jsx(ti,{className:"w-4 h-4 text-blue-500"})]}):A.jsx("span",{className:"text-gray-400 text-xs",children:"Belirtilmemi"})}),A.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:A.jsxs("div",{className:"flex justify-end space-x-2",children:[A.jsx(Ct,{onClick:()=>O($),icon:Co,size:"sm",variant:"secondary",children:"Dzenle"}),A.jsx(Ct,{onClick:()=>Q($.id),icon:Ss,size:"sm",variant:"danger",children:"Sil"})]})})]},$.id))})]})})}),A.jsx(Oa,{isOpen:d,onClose:Z,title:v?"Ders Dzenle":"Yeni Ders Ekle",size:"lg",children:A.jsxs("form",{onSubmit:U,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(Jr,{label:"Ders Ad",value:_.name,onChange:$=>P(me=>({...me,name:$})),required:!0}),A.jsx(Jr,{label:"Bran",value:_.branch,onChange:$=>P(me=>({...me,branch:$})),required:!0})]}),A.jsx(Jr,{label:"Haftalk Ders Saati",type:"number",value:_.weeklyHours,onChange:$=>P(me=>({...me,weeklyHours:$,distributionPattern:""})),required:!0}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Datm ekli ",A.jsx("span",{className:"text-gray-500",children:"(stee bal)"})]}),A.jsx(Jr,{label:"Datm ekli",value:_.distributionPattern,onChange:$=>P(me=>({...me,distributionPattern:$})),placeholder:"rn: 2+2+2+2+2+2"}),_.distributionPattern&&!ee&&A.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:A.jsxs("p",{className:"text-sm text-red-700 font-medium",children:[" Datm eklindeki saatlerin toplam (",ge.reduce(($,me)=>$+me,0),") haftalk saat (",L,") ile elemiyor."]})}),_.distributionPattern&&ee&&ge.length>0&&A.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:A.jsxs("p",{className:"text-sm text-green-700 font-medium",children:[" ",ge.length," gnde datm: ",ge.map(($,me)=>`${me+1}. gn ${$} saat`).join(", ")]})}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`Dersin hafta boyunca nasl datlacan belirtin. rn: "2+2+2" = 3 gnde 2'er saat`})]}),F.length>0&&A.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[A.jsxs("div",{className:"flex items-center mb-3",children:[A.jsx(OE,{className:"w-5 h-5 text-blue-600 mr-2"}),A.jsxs("h4",{className:"font-medium text-blue-800",children:[L," Saatlik Ders in neriler"]})]}),A.jsx("div",{className:"flex flex-wrap gap-2",children:F.map(($,me)=>A.jsx("button",{type:"button",onClick:()=>I($),className:`px-3 py-2 text-sm rounded-lg border transition-all duration-200 ${_.distributionPattern===$?"bg-blue-600 text-white border-blue-600":"bg-white text-blue-700 border-blue-300 hover:bg-blue-100"}`,children:$},me))}),A.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"nerilen datm ekillerinden birini seebilir veya kendiniz yazabilirsiniz."})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Eitim Seviyeleri ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:Ra.map($=>A.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer ${_.levels.includes($)?"bg-ide-primary-50 border-ide-primary-500":"bg-white border-gray-300"}`,children:[A.jsx("input",{type:"checkbox",checked:_.levels.includes($),onChange:()=>V($),className:"sr-only"}),A.jsx("span",{className:"text-sm",children:$}),_.levels.includes($)&&A.jsx("span",{className:"ml-2",children:""})]},$))})]}),A.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[A.jsx(Ct,{type:"button",onClick:Z,variant:"secondary",children:"ptal"}),A.jsx(Ct,{type:"submit",variant:"primary",disabled:_.levels.length===0||!!(_.distributionPattern&&!ee),children:v?"Gncelle":"Kaydet"})]})]})}),A.jsx(KA,{...c,onClose:()=>{}})]})},hL=()=>{const[r,e]=Ee.useState({isOpen:!1,title:"",message:""}),t=Ee.useCallback((s,i)=>{e({isOpen:!0,title:s,message:i})},[]),n=Ee.useCallback(()=>{e(s=>({...s,isOpen:!1}))},[]);return{errorModal:r,showError:t,hideError:n}},fL=(r,e,t,n,s,i,l,c)=>{if(!e||!t||!n||!s)return{hasConflict:!0,message:"Geersiz parametre"};const u=e,d=t;if(!Tr.includes(u)||!gn.includes(d))return{hasConflict:!0,message:"Geersiz gn veya ders saati"};if(r==="teacher"){const f=i.filter(v=>{if(v.teacherId===s)return!1;const x=v.schedule[u]?.[d];return x?.classId===n&&x.classId!=="fixed-period"&&x.classId!=="KULP"&&!x.classId.startsWith("kulup-virtual-class-")});if(f.length>0){const v=f[0],x=l.find(N=>N.id===v.teacherId);return{hasConflict:!0,message:`${c.find(N=>N.id===n)?.name||"Snf"} ${u} gn ${d}. ders saatinde ${x?.name||"baka bir retmen"} ile akyor`}}}else{const f=i.find(v=>v.teacherId===n);if(f){const v=f.schedule[u]?.[d];if(v?.classId&&v.classId!==s&&v.classId!=="fixed-period"&&v.classId!=="KULP"&&!v.classId.startsWith("kulup-virtual-class-")){const x=l.find(N=>N.id===n),y=c.find(N=>N.id===v.classId);return{hasConflict:!0,message:`${x?.name||"retmen"} ${u} gn ${d}. ders saatinde ${y?.name||"baka bir snf"} ile akyor`}}}}return{hasConflict:!1,message:""}},hp=(r,e,t,n,s,i=[])=>{const l=[];return r==="teacher"&&n&&i.filter(u=>u.entityType==="teacher"&&u.entityId===n&&u.day===e&&u.period===t).forEach(u=>{u.constraintType==="unavailable"&&l.push(`retmen ${e} gn ${t}. ders saatinde msait deil`)}),r==="class"&&s&&i.filter(u=>u.entityType==="class"&&u.entityId===s&&u.day===e&&u.period===t).forEach(u=>{u.constraintType==="unavailable"&&l.push(`Snf ${e} gn ${t}. ders saatinde msait deil`)}),l},fp=(r,e,t,n,s,i=[])=>{const l=[];return r==="teacher"&&n&&i.filter(u=>u.entityType==="teacher"&&u.entityId===n&&u.day===e&&u.period===t).forEach(u=>{u.constraintType==="restricted"&&l.push(`retmen ${e} gn ${t}. ders saatinde kstl`)}),r==="class"&&s&&i.filter(u=>u.entityType==="class"&&u.entityId===s&&u.day===e&&u.period===t).forEach(u=>{u.constraintType==="restricted"&&l.push(`Snf ${e} gn ${t}. ders saatinde kstl`)}),l},pL=(r,e,t,n,s,i,l,c=[])=>{const u=[],d=[],f=[];return!r||!e||!t?(u.push("Geersiz program verisi"),{isValid:!1,errors:u,warnings:d,constraintViolations:f}):(Tr.forEach(v=>{gn.forEach(x=>{const y=e[v]?.[x];if(!(!y||y.classId==="fixed-period")){if(r==="teacher"&&y.classId){const C=hp("teacher",v,x,t,y.classId,c);f.push(...C);const N=hp("class",v,x,t,y.classId,c);f.push(...N);const E=fp("teacher",v,x,t,y.classId,c);d.push(...E);const _=fp("class",v,x,t,y.classId,c);d.push(..._)}else if(r==="class"&&y.teacherId){const C=hp("teacher",v,x,y.teacherId,t,c);f.push(...C);const N=hp("class",v,x,y.teacherId,t,c);f.push(...N);const E=fp("teacher",v,x,y.teacherId,t,c);d.push(...E);const _=fp("class",v,x,y.teacherId,t,c);d.push(..._)}}})}),Tr.forEach(v=>{gn.forEach(x=>{const y=e[v]?.[x];!y||y.classId==="fixed-period"||r==="teacher"&&t&&c.filter(N=>N.entityType==="teacher"&&N.entityId===t&&N.day===v&&N.period===x).some(N=>N.constraintType!=="preferred")})}),{isValid:u.length===0&&f.length===0,errors:[...new Set(u)],warnings:[...new Set(d)],constraintViolations:[...new Set(f)]})},mL=({isOpen:r,onClose:e,onSave:t,subjects:n,classes:s,teachers:i=[],mode:l="teacher",currentSubjectId:c="",currentClassId:u="",currentTeacherId:d="",day:f,period:v})=>{const[x,y]=Ee.useState(c),[C,N]=Ee.useState(u),[E,_]=Ee.useState(d);gA.useEffect(()=>{y(c),N(u),_(d)},[c,u,d,r]);const P=()=>{if(l==="teacher")if(C){const fe=n[0];t(x||fe?.id||"",C)}else t("","");else if(E){const fe=n[0];t(x||fe?.id||"",C,E)}else t("","","");e()},H=()=>{l==="teacher"?t("",""):t("","",""),e()},D=new Map;n.forEach(fe=>{D.has(fe.name)||D.set(fe.name,fe)});const Z=Array.from(D.values()).sort((fe,ae)=>fe.name.localeCompare(ae.name,"tr")).map(fe=>({value:fe.id,label:fe.name})),O=n.find(fe=>fe.id===x),Q=O?.name.toLocaleUpperCase("tr-TR").trim(),U=O?n.filter(fe=>fe.name.toLocaleUpperCase("tr-TR").trim()===Q):[],V=new Set;U.forEach(fe=>{(fe.levels||(fe.level?[fe.level]:[])).map($=>String($).trim()).forEach($=>V.add($))});const I=Array.from(V),ee=[...s.filter(fe=>!x||I.length===0?!0:I.includes(fe.level)||I.some($=>String($)===String(fe.level)))].sort((fe,ae)=>fe.name.localeCompare(ae.name,"tr")).map(fe=>({value:fe.id,label:fe.name})),ue=[...i].sort((fe,ae)=>fe.name.localeCompare(ae.name,"tr")).map(fe=>({value:fe.id,label:`${fe.name} (${fe.branch})`}));return r?A.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:A.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[A.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:e}),A.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen",children:""}),A.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full",children:A.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:[A.jsxs("div",{className:"flex items-center justify-between mb-4",children:[A.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[f," - ",v,". Ders"]}),A.jsx("button",{onClick:e,className:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:A.jsx(di,{size:24})})]}),A.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:A.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[A.jsx("div",{className:`w-3 h-3 rounded-full ${l==="teacher"?"bg-blue-500":"bg-emerald-500"}`}),A.jsx("span",{className:"text-sm font-medium text-gray-700",children:l==="teacher"?"retmen Modu: Snf Sein":"Snf Modu: retmen Sein"})]})}),A.jsxs("div",{className:"space-y-4",children:[n.length>1&&l!=="teacher"&&A.jsx(ns,{label:"Ders Sein",value:x,onChange:y,options:Z}),l==="teacher"?A.jsx(ns,{label:"Snf Sein (A-Z Sral)",value:C,onChange:N,options:ee,required:!0}):A.jsx(ns,{label:"retmen Sein (A-Z Sral)",value:E,onChange:_,options:ue,required:!0})]}),A.jsxs("div",{className:"flex justify-between mt-6",children:[A.jsx(Ct,{onClick:H,variant:"danger",size:"sm",children:"Temizle"}),A.jsxs("div",{className:"flex space-x-2",children:[A.jsx(Ct,{onClick:e,variant:"secondary",children:"ptal"}),A.jsx(Ct,{onClick:P,variant:"primary",disabled:l==="teacher"?!C:!E,children:"Kaydet"})]})]})]})})]})}):null},gL=({isOpen:r,onClose:e,title:t,message:n})=>r?A.jsx("div",{className:"fixed inset-0 z-[9999] overflow-y-auto bg-black bg-opacity-75 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in duration-300",children:A.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform animate-fade-in-up",children:[A.jsx("div",{className:"bg-red-600 text-white p-6 rounded-t-xl shadow-inner",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(cu,{className:"w-8 h-8 mr-3 animate-bounce-subtle"}),A.jsx("h3",{className:"text-xl font-bold",children:t})]}),A.jsx("button",{onClick:e,className:"text-white hover:text-red-200 transition-all p-2 rounded-full hover:bg-red-700 active:scale-95",children:A.jsx(di,{size:24})})]})}),A.jsx("div",{className:"p-6",children:A.jsx("div",{className:"text-gray-800 text-base leading-relaxed whitespace-pre-line",children:n})}),A.jsx("div",{className:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-end",children:A.jsx("button",{onClick:e,className:"bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Tamam"})})]})}):null,yL=()=>{const r=Bo(),{data:e}=or("teachers"),{data:t}=or("classes"),{data:n}=or("subjects"),{data:s,add:i,update:l,remove:c}=or("schedules"),{data:u}=or("constraints"),{success:d,error:f}=xa(),{confirmation:v,showConfirmation:x,hideConfirmation:y,confirmUnsavedChanges:C}=Eo(),{errorModal:N,showError:E,hideError:_}=hL(),[P,H]=Ee.useState("teacher"),[D,J]=Ee.useState(""),[Z,O]=Ee.useState(""),[Q,U]=Ee.useState(""),[V,I]=Ee.useState(""),[L,F]=Ee.useState(!1),[ee,ge]=Ee.useState({}),[ue,fe]=Ee.useState({}),[ae,$]=Ee.useState(!1),[me,z]=Ee.useState(!1),[S,K]=Ee.useState(!1),[Y,G]=Ee.useState(""),[oe,ye]=Ee.useState(""),[Le,be]=Ee.useState(!1),je=()=>{const _e={};return Tr.forEach(Pe=>{_e[Pe]={},gn.forEach(Ye=>{_e[Pe][Ye]=null})}),_e};Ee.useEffect(()=>{const _e=new URLSearchParams(r.search),Pe=_e.get("mode"),Ye=_e.get("teacherId"),vt=_e.get("classId");Pe==="class"&&vt?(H("class"),O(vt)):Ye&&(H("teacher"),J(Ye))},[r]),Ee.useEffect(()=>{const _e=je();if(P==="teacher"&&D){const Pe=s.find(Ye=>Ye.teacherId===D);Pe&&Object.assign(_e,JSON.parse(JSON.stringify(Pe.schedule)))}else P==="class"&&Z&&s.forEach(Pe=>{Object.entries(Pe.schedule).forEach(([Ye,vt])=>{Object.entries(vt).forEach(([ke,We])=>{We?.classId===Z&&(_e[Ye]||(_e[Ye]={}),_e[Ye][ke]={...We,teacherId:Pe.teacherId})})})});ge(_e),fe(JSON.parse(JSON.stringify(_e))),$(!1)},[P,D,Z,s]),Ee.useEffect(()=>{$(JSON.stringify(ee)!==JSON.stringify(ue))},[ee,ue]),Ee.useEffect(()=>{be(P==="teacher"&&!!D&&!!Y&&!!oe||P==="class"&&!!Z)},[P,D,Z,Y,oe]);const Ge=e.find(_e=>_e.id===D),tt=t.find(_e=>_e.id===Z),it=_e=>_e?_e.levels||[_e.level]:[],It=_e=>_e?_e.branches&&_e.branches.length>0?_e.branches:_e.branch?_e.branch.split(/[,\/]/).map(Pe=>Pe.trim()):[]:[],le=Ge?it(Ge).map(_e=>({value:_e,label:_e})):[],ct=(()=>{if(!Ge||!Y)return[];const Pe=It(Ge).map(We=>We.toLocaleUpperCase("tr-TR").trim()),Ye={Anaokul:[0,"Anaokul","Anaokulu"],Anaokulu:[0,"Anaokul","Anaokulu"],lkokul:[1,2,3,4,"lkokul"],Ortaokul:[5,6,7,8,"Ortaokul"],Lise:[9,10,11,12,"HZ","Hazrlk","Lise"]},vt=n.filter(We=>{const Me=We.branch.toLocaleUpperCase("tr-TR").trim(),rt=Pe.some(_t=>Me===_t||Me.includes(_t)||_t.includes(Me)),mt=(We.levels||[We.level]).map(_t=>String(_t).toLocaleUpperCase("tr-TR").trim()),bt=String(Y).toLocaleUpperCase("tr-TR").trim();let dt=!1;if(mt.includes(bt))dt=!0;else if(Ye[Y]){const _t=Ye[Y].map(Wt=>String(Wt).toLocaleUpperCase("tr-TR").trim());dt=mt.some(Wt=>_t.includes(Wt))}return rt&&dt}),ke=new Map;return vt.forEach(We=>{const Me=We.name.toLocaleUpperCase("tr-TR").trim();ke.has(Me)||ke.set(Me,We)}),Array.from(ke.values()).map(We=>({value:We.id,label:We.name})).sort((We,Me)=>We.label.localeCompare(Me.label,"tr-TR"))})(),Se=[...P!=="teacher"||!Y||!oe||!n.find(Pe=>Pe.id===oe)?t:t.filter(Pe=>(Pe.levels||[Pe.level]).includes(Y))].sort((_e,Pe)=>_e.name.localeCompare(Pe.name,"tr")),Qe=(_e,Pe)=>{ee[_e]?.[Pe]?.isFixed||(U(_e),I(Pe),F(!0))},X=(_e,Pe,Ye)=>{if(!Q||!V)return;const vt=P==="teacher"?!Pe:!Ye;if(!vt){const ke=fL(P,Q,V,P==="teacher"?Pe:Ye,P==="teacher"?D:Z,s,e,t);if(ke.hasConflict){E("akma Tespit Edildi",ke.message);return}}ge(ke=>{const We=JSON.parse(JSON.stringify(ke));return We[Q]||(We[Q]={}),vt?We[Q][V]=null:P==="teacher"?We[Q][V]={classId:Pe,subjectId:oe||_e}:We[Q][V]={teacherId:Ye,subjectId:_e,classId:Z},We}),F(!1)},ne=async()=>{const _e=pL(P,ee,P==="teacher"?D:Z,s,e,t,n,u);if(!_e.isValid){E("Program Kaydedilemedi",`Aadaki sorunlar dzeltin:

${_e.errors.join(`
`)}`);return}if(_e.warnings.length>0){x({title:"Uyarlar Mevcut",message:`Aadaki uyarlar mevcut:

${_e.warnings.join(`
`)}

Yine de kaydetmek istiyor musunuz?`,type:"warning",confirmText:"Yine de Kaydet",cancelText:"ptal",confirmVariant:"primary"},pe);return}await pe()},pe=async()=>{z(!0);try{if(P==="teacher"){const _e=s.find(Ye=>Ye.teacherId===D),Pe={schedule:ee,updatedAt:new Date};_e?await l(_e.id,Pe):await i({teacherId:D,...Pe}),d(" Program Kaydedildi",`${Ge?.name} program baaryla gncellendi.`)}else{const _e=new Set;Object.values(ue).forEach(Pe=>Object.values(Pe||{}).forEach(Ye=>{Ye?.teacherId&&_e.add(Ye.teacherId)})),Object.values(ee).forEach(Pe=>Object.values(Pe||{}).forEach(Ye=>{Ye?.teacherId&&_e.add(Ye.teacherId)}));for(const Pe of _e){const Ye=s.find(We=>We.teacherId===Pe),vt=Ye?JSON.parse(JSON.stringify(Ye.schedule)):je();Tr.forEach(We=>gn.forEach(Me=>{vt[We]?.[Me]?.classId===Z&&(vt[We][Me]=null);const rt=ee[We]?.[Me];rt?.teacherId===Pe&&(vt[We][Me]={classId:Z,subjectId:rt.subjectId})}));const ke=Object.values(vt).some(We=>Object.values(We).some(Me=>Me!==null));Ye?ke?await l(Ye.id,{schedule:vt,updatedAt:new Date}):await c(Ye.id):ke&&await i({teacherId:Pe,schedule:vt,updatedAt:new Date})}d(" Program Kaydedildi",`${tt?.name} program baaryla gncellendi.`)}fe(JSON.parse(JSON.stringify(ee))),f(" Kayt Hatas","Program kaydedilirken bir hata olutu.")}finally{z(!1)}},Ie=()=>{ae?x({title:"Deiiklikleri Sfrla",message:"Kaydedilmemi deiiklikler var. Sfrlamak istediinizden emin misiniz?",type:"warning",confirmText:"Sfrla",cancelText:"ptal",confirmVariant:"danger"},se):se()},se=()=>{K(!0),ge(JSON.parse(JSON.stringify(ue))),$(!1),K(!1),d(" Program Sfrland","Tm deiiklikler sfrland")},Te=_e=>{ae?x({title:"Kaydedilmemi Deiiklikler",message:"Kaydedilmemi deiiklikler var. Devam etmek istediinizden emin misiniz?",type:"warning",confirmText:"Devam Et",cancelText:"ptal",confirmVariant:"danger"},()=>we(_e)):we(_e)},we=_e=>{H(_e),J(""),O(""),ge({}),fe({}),$(!1),G(""),ye(""),be(!1)},Be=(_e,Pe)=>{const Ye=ee[_e]?.[Pe];if(P==="teacher"){if(!Ye?.classId||Ye.classId==="fixed-period")return null;if(Ye.classId==="KULP"||Ye.classId.startsWith("kulup-virtual-class-")){const We=n.find(Me=>Me.id===Ye.subjectId);return{classItem:{name:"KULP"},subject:We}}const vt=t.find(We=>We.id===Ye.classId),ke=n.find(We=>We.id===Ye.subjectId);return{classItem:vt,subject:ke}}else{if(!Ye?.teacherId)return null;if(Ye.teacherId==="KULP"||Ye.teacherId.startsWith("kulup-virtual-teacher-")){const We=n.find(Me=>Me.id===Ye.subjectId);return{teacher:{name:"KULP"},subject:We}}const vt=e.find(We=>We.id===Ye.teacherId),ke=n.find(We=>We.id===Ye.subjectId);return{teacher:vt,subject:ke}}},Fe=_e=>{const Pe=P==="teacher"?Y:tt?.level,Ye=Dd(_e,Pe);return Ye?mu(Ye.startTime,Ye.endTime):`${_e}. Ders`},De=e.map(_e=>({value:_e.id,label:`${_e.name} (${_e.branch} - ${_e.level})`})).sort((_e,Pe)=>_e.label.localeCompare(Pe.label,"tr-TR")),At=Se.map(_e=>({value:_e.id,label:`${_e.name} (${_e.level})`}));return A.jsxs("div",{className:"container-mobile",children:[A.jsxs("div",{className:"header-mobile",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(fi,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-bold text-gray-900",children:"Program Oluturucu"}),A.jsx("p",{className:"text-responsive-sm text-gray-600",children:P==="teacher"?"retmen bazl program oluturun":"Snf bazl program oluturun"})]})]}),A.jsxs("div",{className:"button-group-mobile",children:[A.jsx(Ct,{onClick:()=>Te("teacher"),variant:P==="teacher"?"primary":"secondary",icon:ei,className:"w-full sm:w-auto",children:"retmen Modu"}),A.jsx(Ct,{onClick:()=>Te("class"),variant:P==="class"?"primary":"secondary",icon:ms,className:"w-full sm:w-auto",children:"Snf Modu"})]})]}),A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 overflow-hidden",children:[A.jsx("div",{className:`bg-gradient-to-r ${P==="teacher"?"from-blue-600 to-blue-700":"from-emerald-600 to-emerald-700"} px-4 py-2.5`,children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[P==="teacher"?A.jsx(ei,{className:"w-4 h-4 text-white/80"}):A.jsx(ms,{className:"w-4 h-4 text-white/80"}),A.jsx("span",{className:"text-sm font-medium text-white",children:P==="teacher"?"retmen ve Ders Seimi":"Snf Seimi"})]}),(P==="teacher"&&D||P==="class"&&Z)&&A.jsx("span",{className:"text-xs bg-white/20 text-white px-2.5 py-1 rounded-full backdrop-blur-sm",children:P==="teacher"?Ge?.name:tt?.name})]})}),A.jsx("div",{className:"p-4 bg-gray-50/50",children:P==="teacher"?A.jsxs("div",{className:"space-y-4",children:[A.jsx("div",{className:"flex items-start gap-3",children:A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-2 hover:border-blue-300 transition-colors flex-1",children:[A.jsx(ei,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),A.jsxs("select",{value:D,onChange:_e=>{ae?C(()=>{J(_e.target.value),G(""),ye(""),be(!1)}):(J(_e.target.value),G(""),ye(""),be(!1))},className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer flex-1 pr-1",children:[A.jsx("option",{value:"",children:"retmen Sein..."}),De.map(_e=>A.jsx("option",{value:_e.value,children:_e.label},_e.value))]})]})}),Ge&&A.jsx("div",{className:"p-3 bg-blue-50 rounded-xl border border-blue-200",children:A.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm text-blue-700",children:[A.jsx("span",{className:"font-medium",children:Ge.name}),A.jsx("span",{className:"text-blue-400",children:""}),A.jsx("span",{children:It(Ge).join(", ")}),A.jsx("span",{className:"text-blue-400",children:""}),A.jsx("span",{children:it(Ge).join(", ")})]})}),Ge&&A.jsxs("div",{className:"flex flex-col lg:flex-row gap-3 p-3 bg-purple-50 rounded-xl border border-purple-200",children:[A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-2 hover:border-purple-300 transition-colors flex-1",children:[A.jsx(ld,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),A.jsxs("select",{value:Y,onChange:_e=>G(_e.target.value),className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer flex-1 pr-1",children:[A.jsx("option",{value:"",children:"Eitim Seviyesi Sein"}),le.map(_e=>A.jsx("option",{value:_e.value,children:_e.label},_e.value))]})]}),Y&&A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-2 hover:border-purple-300 transition-colors flex-1",children:[A.jsx(fi,{className:"w-4 h-4 text-purple-500 flex-shrink-0"}),A.jsxs("select",{value:oe,onChange:_e=>ye(_e.target.value),className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer flex-1 pr-1",children:[A.jsx("option",{value:"",children:"Ders Sein"}),ct.map(_e=>A.jsx("option",{value:_e.value,children:_e.label},_e.value))]})]})]})]}):A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-2 hover:border-emerald-300 transition-colors",children:[A.jsx(ms,{className:"w-4 h-4 text-emerald-500 flex-shrink-0"}),A.jsxs("select",{value:Z,onChange:_e=>{ae?C(()=>O(_e.target.value)):O(_e.target.value)},className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer flex-1 pr-1",children:[A.jsx("option",{value:"",children:"Snf Sein..."}),At.map(_e=>A.jsx("option",{value:_e.value,children:_e.label},_e.value))]})]})}),(P==="teacher"&&(D||Y||oe)||P==="class"&&Z)&&A.jsxs("div",{className:`px-4 py-2.5 ${P==="teacher"?"bg-blue-50/50 border-t border-blue-100":"bg-emerald-50/50 border-t border-emerald-100"} flex flex-wrap items-center gap-2`,children:[A.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Seili:"}),P==="teacher"&&Ge&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-blue-100 text-blue-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(ei,{className:"w-3 h-3"})," ",Ge.name,A.jsx("button",{onClick:()=>{J(""),G(""),ye("")},className:"hover:bg-blue-200 p-0.5 rounded-full transition-colors",children:A.jsx("span",{className:"text-xs",children:""})})]}),P==="teacher"&&Y&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-purple-100 text-purple-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(ld,{className:"w-3 h-3"})," ",Y,A.jsx("button",{onClick:()=>{G(""),ye("")},className:"hover:bg-purple-200 p-0.5 rounded-full transition-colors",children:A.jsx("span",{className:"text-xs",children:""})})]}),P==="teacher"&&oe&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-orange-100 text-orange-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(fi,{className:"w-3 h-3"})," ",n.find(_e=>_e.id===oe)?.name,A.jsx("button",{onClick:()=>ye(""),className:"hover:bg-orange-200 p-0.5 rounded-full transition-colors",children:A.jsx("span",{className:"text-xs",children:""})})]}),P==="class"&&tt&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-emerald-100 text-emerald-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(ms,{className:"w-3 h-3"})," ",tt.name,A.jsx("button",{onClick:()=>O(""),className:"hover:bg-emerald-200 p-0.5 rounded-full transition-colors",children:A.jsx("span",{className:"text-xs",children:""})})]}),A.jsx("button",{onClick:()=>{J(""),O(""),G(""),ye(""),be(!1)},className:"ml-auto text-xs text-red-600 hover:text-red-700 font-medium hover:bg-red-50 px-2 py-1 rounded-lg transition-colors",children:"Temizle"})]})]}),Le&&A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 overflow-hidden",children:[A.jsx("div",{className:`bg-gradient-to-r ${P==="teacher"?"from-blue-600 to-blue-700":"from-emerald-600 to-emerald-700"} px-4 py-3`,children:A.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[A.jsxs("div",{className:"text-white",children:[A.jsxs("h3",{className:"font-semibold text-sm",children:[" ",P==="teacher"?`${Ge?.name} - ${Y} - ${n.find(_e=>_e.id===oe)?.name}`:`${tt?.name} Program`]}),A.jsx("p",{className:"text-xs text-white/80 mt-0.5",children:P==="teacher"?`${Y} seviyesi iin haftalk ders program`:`${tt?.level} seviyesi`})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Ct,{onClick:Ie,icon:O1,variant:"secondary",disabled:!ae||S,className:"!py-1.5 !px-3 !text-xs",children:S?"Sfrlanyor...":"Sfrla"}),A.jsx(Ct,{onClick:ne,icon:nf,variant:"primary",disabled:!ae||me,className:"!py-1.5 !px-3 !text-xs !bg-white !text-blue-700 hover:!bg-blue-50",children:me?"Kaydediliyor...":"Kaydet"})]})]})}),ae&&A.jsxs("div",{className:"px-4 py-2 bg-amber-50 border-b border-amber-200 flex items-center gap-2",children:[A.jsx(cu,{className:"w-4 h-4 text-amber-600"}),A.jsx("p",{className:"text-xs text-amber-700 font-medium",children:"Kaydedilmemi deiiklikler var"})]}),A.jsx("div",{className:"table-responsive schedule-mobile",children:A.jsxs("table",{className:"min-w-full schedule-table",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:"Dersler"}),A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:"Saatler"}),Tr.map(_e=>A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:_e},_e))]})}),A.jsxs("tbody",{className:"divide-y divide-gray-200",children:[A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border text-xs text-center border-black tracking-wide",children:(P==="teacher"?Y:tt?.level)==="Ortaokul"?"HAZIRLIK":"KAHVALTI"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border text-xs text-center border-black whitespace-nowrap",children:(P==="teacher"?Y:tt?.level)==="Ortaokul"?"08:30-08:40":"08:30-08:50"}),A.jsx("td",{colSpan:5,className:"px-3 py-2 font-semibold text-gray-900 border-black border text-sm text-center tracking-wide",children:(P==="teacher"?Y:tt?.level)==="Ortaokul"?"HAZIRLIK":"KAHVALTI / breakfast (20')"})]}),gn.map(_e=>{const Pe=P==="teacher"?Y:tt?.level,Ye=(Pe==="lkokul"||Pe==="Anaokulu")&&_e==="5"||Pe==="Ortaokul"&&_e==="6",vt=Pe==="Ortaokul"&&_e==="1",ke=_e==="8",We=Fe(_e);return A.jsxs(gA.Fragment,{children:[A.jsxs("tr",{className:Ye?"bg-yellow-400":"",children:[A.jsx("td",{className:`px-3 py-2 font-semibold text-gray-900 text-xs text-center border-black border tracking-wide ${Ye?"":"bg-gray-50"}`,children:Ye?"YEMEK":`${_e}. DERS`}),A.jsx("td",{className:`px-3 py-2 font-medium text-gray-900 text-xs text-center border-black border whitespace-nowrap ${Ye?"":"bg-gray-50"}`,children:Ye?Pe==="lkokul"||Pe==="Anaokulu"?"11:50-12:25":"12:30-13:05":We}),Ye?A.jsx("td",{colSpan:5,className:"px-3 py-2 font-semibold text-gray-900 border-black border text-sm text-center tracking-wide",children:"LE YEME / LUNCH"}):Tr.map(Me=>{const rt=Be(Me,_e),mt=rt?.subject?.id==="auto-subject-kulup"||rt?.subject?.name?.includes("KULP");return rt?A.jsx("td",{className:"px-1 py-1 border border-black",onClick:()=>Qe(Me,_e),children:A.jsxs("div",{className:`min-h-[40px] flex flex-col items-center justify-center p-1 rounded cursor-pointer transition-colors ${mt?"bg-purple-100 hover:bg-purple-200":"bg-blue-100 hover:bg-blue-200"}`,children:[A.jsx("span",{className:`font-semibold text-xs ${mt?"text-purple-900":"text-blue-900"}`,children:P==="teacher"?rt.classItem?.name:rt.teacher?.name}),!mt&&A.jsx("span",{className:"text-[10px] mt-0.5 text-blue-700",children:rt.subject?.name})]})},`${Me}-${_e}`):A.jsx("td",{className:"px-1 py-1 border border-black",onClick:()=>Qe(Me,_e),children:A.jsx("div",{className:"min-h-[40px] flex items-center justify-center bg-gray-50 hover:bg-blue-50 cursor-pointer transition-colors rounded",children:A.jsx("span",{className:"text-gray-300 text-xs",children:"+"})})},`${Me}-${_e}`)})]}),vt&&A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border text-xs text-center border-black tracking-wide",children:"KAHVALTI"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border text-xs text-center border-black whitespace-nowrap",children:"09:15-09:35"}),A.jsx("td",{colSpan:5,className:"px-3 py-2 font-semibold text-gray-900 border-black border text-sm text-center tracking-wide",children:"KAHVALTI / BREAKFAST (20')"})]}),ke&&A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border text-xs text-center border-black tracking-wide",children:"KND"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border text-xs text-center border-black whitespace-nowrap",children:"14:35-14:45"}),A.jsx("td",{colSpan:5,className:"px-3 py-2 font-semibold text-gray-900 border-black border text-sm text-center tracking-wide",children:"KND KAHVALTISI / AFTERNOON SNACK (10')"})]})]},_e)})]})]})})]}),(P==="teacher"&&!D||P==="class"&&!Z)&&A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(fi,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:P==="teacher"?"retmen Sein":"Snf Sein"}),A.jsx("p",{className:"text-gray-500 mb-4",children:P==="teacher"?"Program oluturmak iin bir retmen sein":"Program oluturmak iin bir snf sein"})]}),P==="teacher"&&D&&!Le&&A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(ld,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Eitim Seviyesi ve Ders Sein"}),A.jsx("p",{className:"text-gray-500 mb-4",children:"Program tablosunu grmek iin yukardan eitim seviyesi ve o seviyeye uygun bir ders seimi yapn."})]}),A.jsx(mL,{isOpen:L,onClose:()=>F(!1),onSave:X,subjects:n,classes:Se,teachers:e,mode:P,currentSubjectId:ee[Q]?.[V]?.subjectId||oe,currentClassId:P==="teacher"?ee[Q]?.[V]?.classId||"":Z,currentTeacherId:P==="class"?ee[Q]?.[V]?.teacherId||"":D,day:Q,period:V}),A.jsx(KA,{...v,onClose:y}),A.jsx(gL,{...N,onClose:_})]})},vL=({data:r,onUpdate:e})=>{const n=(()=>{const u=[];for(let d=2024;d<=2030;d++){const f=d+1,v=`${d}/${f}`,x=`${d}-09-01`,y=`${f}-08-31`;u.push({value:v,label:v,startDate:x,endDate:y})}return u})(),s=[{value:"",label:"Seiniz (stee bal)"},{value:"Gz",label:"Gz Dnemi"},{value:"Bahar",label:"Bahar Dnemi"},{value:"Yaz",label:"Yaz Dnemi"}],i=[{value:"6",label:"6 Ders Saati"},{value:"7",label:"7 Ders Saati"},{value:"8",label:"8 Ders Saati"},{value:"9",label:"9 Ders Saati"},{value:"10",label:"10 Ders Saati"}],l=[{value:"5",label:"5 Gn (Pazartesi-Cuma)"},{value:"6",label:"6 Gn (Pazartesi-Cumartesi)"}],c=(u,d)=>{const f={...r,[u]:d};if(u==="academicYear"){const v=n.find(x=>x.value===d);v&&(f.startDate=v.startDate,f.endDate=v.endDate)}e(f)};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(fi,{className:"w-8 h-8 text-blue-600"})}),A.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Program Temel Bilgileri"}),A.jsx("p",{className:"text-gray-600",children:"Oluturacanz ders programnn temel bilgilerini girin"})]}),A.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[A.jsx(Jr,{label:"Program Bal",value:r.name||"",onChange:u=>c("name",u),placeholder:"rn: 2024-2025 Gz Dnemi Ders Program",required:!0}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(ns,{label:"Eitim Dnemi",value:r.academicYear||"2024/2025",onChange:u=>c("academicYear",u),options:n.map(u=>({value:u.value,label:u.label})),required:!0}),A.jsx(ns,{label:"Dnem",value:r.semester||"",onChange:u=>c("semester",u),options:s})]}),A.jsx(Jr,{label:"Kurum Yetkilisi nvan",value:r.institutionTitle||"",onChange:u=>c("institutionTitle",u),placeholder:"rn: Okul Mdr, Mdr Yardmcs",required:!0}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(ns,{label:"Gnlk Ders Saati",value:r.dailyHours?.toString()||"8",onChange:u=>c("dailyHours",parseInt(u)),options:i,required:!0}),A.jsx(ns,{label:"Haftalk Gn Says",value:r.weekDays?.toString()||"5",onChange:u=>c("weekDays",parseInt(u)),options:l,required:!0})]}),A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("input",{type:"checkbox",id:"weekendClasses",checked:r.weekendClasses||!1,onChange:u=>c("weekendClasses",u.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),A.jsx("label",{htmlFor:"weekendClasses",className:"text-sm font-medium text-gray-700",children:"Hafta sonu dersleri var"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(Jr,{label:"Balang Tarihi",type:"date",value:r.startDate||"",onChange:u=>c("startDate",u),required:!0}),A.jsx(Jr,{label:"Biti Tarihi",type:"date",value:r.endDate||"",onChange:u=>c("endDate",u),required:!0})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Aklama ",A.jsx("span",{className:"text-gray-500",children:"(stee bal)"})]}),A.jsx("textarea",{value:r.description||"",onChange:u=>c("description",u.target.value),placeholder:"Program hakknda ek bilgiler...",rows:4,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"})]}),A.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:A.jsxs("div",{className:"flex items-start space-x-3",children:[A.jsx(Zc,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),A.jsxs("div",{className:"text-sm text-blue-700",children:[A.jsx("h4",{className:"font-medium mb-1",children:" Eitim Dnemleri:"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:"2024/2025:"})," 1 Eyll 2024 - 31 Austos 2025"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"2025/2026:"})," 1 Eyll 2025 - 31 Austos 2026"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"2026/2027:"})," 1 Eyll 2026 - 31 Austos 2027"]}),A.jsx("li",{children:" Dnem seildiinde tarihler otomatik gncellenir"})]})]})]})}),r.name&&A.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[A.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[A.jsx(PE,{className:"w-4 h-4 mr-2 text-blue-600"}),"Program nizlemesi:"]}),A.jsxs("div",{className:"text-sm text-gray-700 space-y-1",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Program:"})," ",r.name]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Dnem:"})," ",r.academicYear," ",r.semester?`${r.semester} Dnemi`:""]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Yetkilisi:"})," ",r.institutionTitle||"Belirtilmemi"]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Ders Saati:"})," Gnde ",r.dailyHours||8," saat, Haftada ",r.weekDays||5," gn"]}),r.weekendClasses&&A.jsxs("p",{children:[A.jsx("strong",{children:"Hafta Sonu:"})," Hafta sonu dersleri dahil"]}),r.startDate&&r.endDate&&A.jsxs("p",{children:[A.jsx("strong",{children:"Sre:"})," ",new Date(r.startDate).toLocaleDateString("tr-TR")," - ",new Date(r.endDate).toLocaleDateString("tr-TR")]}),r.description&&A.jsxs("p",{children:[A.jsx("strong",{children:"Aklama:"})," ",r.description]})]})]}),A.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:A.jsxs("div",{className:"flex items-start space-x-3",children:[A.jsx(ti,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),A.jsxs("div",{className:"text-sm text-green-700",children:[A.jsx("h4",{className:"font-medium mb-1",children:" Ders Saatleri:"}),A.jsxs("ul",{className:"space-y-1 text-xs",children:[A.jsxs("li",{children:[" ",A.jsx("strong",{children:"Gnlk Ders Saati:"})," Bir gnde ka ders saati olacan belirler"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"Haftalk Gn Says:"})," Haftada ka gn ders olacan belirler"]}),A.jsxs("li",{children:[" ",A.jsx("strong",{children:"Hafta Sonu Dersleri:"})," Cumartesi ve/veya Pazar gnleri ders olup olmayacan belirler"]}),A.jsx("li",{children:" Bu bilgiler program oluturma algoritmasnda kullanlacaktr"})]})]})]})})]})]})},wL=({data:r,onUpdate:e,subjects:t})=>{const{data:n,add:s,update:i,remove:l}=or("subjects"),c=t&&t.length>0?t:n,{success:u,error:d}=xa(),[f,v]=Ee.useState(""),[x,y]=Ee.useState(!1),[C,N]=Ee.useState(null),[E,_]=Ee.useState({name:"",branch:"",levels:[],weeklyHours:"1",distributionPattern:""}),[P,H]=Ee.useState(""),D=c.filter(ue=>!f||(ue.levels||[ue.level]).includes(f)).filter(ue=>!P||ue.name.toLocaleLowerCase("tr-TR").includes(P.toLocaleLowerCase("tr-TR"))||ue.branch.toLocaleLowerCase("tr-TR").includes(P.toLocaleLowerCase("tr-TR"))),J=c.filter(ue=>r.selectedSubjects.includes(ue.id)).sort((ue,fe)=>{const ae={high:1,medium:2,low:3},$=ae[r.subjectPriorities[ue.id]||"medium"],me=ae[r.subjectPriorities[fe.id]||"medium"];return $!==me?$-me:ue.name.localeCompare(fe.name,"tr")}),Z=ue=>{const fe=r.selectedSubjects.includes(ue),ae=fe?r.selectedSubjects.filter(z=>z!==ue):[...r.selectedSubjects,ue],$={...r.subjectHours},me={...r.subjectPriorities};if(fe)delete $[ue],delete me[ue];else{const z=c.find(K=>K.id===ue);$[ue]=z?.weeklyHours||1;const S=["TRKE","MATEMATK","FEN BLMLER","SOSYAL BLGLER","NGLZCE"].some(K=>z?.name.toUpperCase().includes(K));me[ue]=S?"high":"medium"}e({selectedSubjects:ae,subjectHours:$,subjectPriorities:me})},O=(ue,fe)=>{e({...r,subjectPriorities:{...r.subjectPriorities,[ue]:fe}})},Q=()=>{const ue=D.map(z=>z.id),fe=ue.length>0&&ue.every(z=>r.selectedSubjects.includes(z));let ae=[...r.selectedSubjects];const $={...r.subjectHours},me={...r.subjectPriorities};fe?(ae=r.selectedSubjects.filter(z=>!ue.includes(z)),ue.forEach(z=>{delete $[z],delete me[z]}),u(" Seim Kaldrld",`${ue.length} dersin seimi kaldrld`)):(ue.forEach(z=>{if(!r.selectedSubjects.includes(z)){ae.push(z);const S=c.find(Y=>Y.id===z);$[z]=S?.weeklyHours||1;const K=["TRKE","MATEMATK","FEN BLMLER","SOSYAL BLGLER","NGLZCE"].some(Y=>S?.name.toUpperCase().includes(Y));me[z]=K?"high":"medium"}}),u(" Tm Seildi",`${ue.length} ders seildi`)),e({selectedSubjects:ae,subjectHours:$,subjectPriorities:me})},U=()=>{_({name:"",branch:"",levels:[],weeklyHours:"1",distributionPattern:""}),N(null),y(!1)},V=async ue=>{if(ue.preventDefault(),E.levels.length===0){d("Eitim Seviyesi Gerekli");return}const fe=parseInt(E.weeklyHours)||1;if(E.distributionPattern&&!Ph(E.distributionPattern,fe)){d("Geersiz Datm ekli");return}const ae={name:E.name,branch:E.branch,level:E.levels[0],levels:E.levels,weeklyHours:fe,distributionPattern:E.distributionPattern||void 0};try{C?(await i(C.id,ae),u("Ders Gncellendi")):(await s(ae),u("Ders Eklendi")),U()}catch{d("Hata")}},I=ue=>{_({name:ue.name,branch:ue.branch,levels:ue.levels||(ue.level?[ue.level]:[]),weeklyHours:ue.weeklyHours.toString(),distributionPattern:ue.distributionPattern||""}),N(ue),y(!0)},L=async ue=>{const fe=c.find(ae=>ae.id===ue);fe&&window.confirm(`${fe.name} dersini silmek istediinizden emin misiniz?`)&&(await l(ue),u("Silindi"),r.selectedSubjects.includes(ue)&&Z(ue))},F=ue=>{_(fe=>({...fe,levels:fe.levels.includes(ue)?fe.levels.filter(ae=>ae!==ue):[...fe.levels,ue]}))},ee=parseInt(E.weeklyHours)||1;qE(ee),Ph(E.distributionPattern,ee),M1(E.distributionPattern);const ge=D.length>0&&D.every(ue=>r.selectedSubjects.includes(ue.id));return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-ide-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(wa,{className:"w-8 h-8 text-ide-primary-600"})}),A.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ders Seimi ve nceliklendirme"}),A.jsx("p",{className:"text-gray-600",children:"Programa dahil edilecek dersleri sein ve yerletirme nceliklerini belirleyin."})]}),A.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[A.jsx("div",{className:"flex-1",children:A.jsx(ns,{label:"Seviye Filtresi",value:f,onChange:v,options:[{value:"",label:"Tm Seviyeler"},...Ra.map(ue=>({value:ue,label:ue}))]})}),A.jsx("div",{className:"flex-1",children:A.jsx(Jr,{label:"Ders Ara",placeholder:"Ders veya bran ara...",value:P,onChange:H})}),A.jsx("div",{className:"mb-4",children:A.jsx(Ct,{onClick:()=>y(!0),icon:ea,variant:"primary",children:"Yeni Ders Ekle"})})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center justify-between mb-3",children:[A.jsxs("h4",{className:"font-medium text-gray-900",children:["Mevcut Dersler (",D.length,")"]}),D.length>0&&A.jsxs(Ct,{onClick:Q,icon:ge?Zj:Vj,variant:ge?"secondary":"primary",size:"sm",children:[ge?"Tmn Kaldr":"Tmn Se",f&&` (${f})`]})]}),A.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-[60vh] overflow-y-auto",children:D.length>0?A.jsx("div",{className:"space-y-2",children:D.map(ue=>A.jsx("div",{className:`p-3 rounded-lg border-2 transition-all ${r.selectedSubjects.includes(ue.id)?"bg-blue-50 border-blue-300":"bg-white border-gray-200"}`,children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:"font-medium text-sm truncate",children:ue.name}),A.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600 mt-1 flex-wrap",children:[A.jsx("span",{children:ue.branch}),A.jsx("span",{children:""}),A.jsx("span",{children:(ue.levels||[ue.level]).join(", ")}),A.jsx("span",{children:""}),A.jsxs("span",{children:[ue.weeklyHours," sa/h"]}),ue.distributionPattern&&A.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full",children:[A.jsx(ti,{className:"w-3 h-3 mr-1"}),ue.distributionPattern]})]})]}),A.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-2",children:[A.jsx("button",{onClick:()=>I(ue),className:"p-1 text-gray-400 hover:text-blue-600",children:A.jsx(Co,{size:16})}),A.jsx("button",{onClick:()=>L(ue.id),className:"p-1 text-gray-400 hover:text-red-600",children:A.jsx(Ss,{size:16})}),A.jsx("button",{onClick:()=>Z(ue.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${r.selectedSubjects.includes(ue.id)?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:r.selectedSubjects.includes(ue.id)?A.jsx(R2,{className:"w-3 h-3 text-white"}):A.jsx(ea,{className:"w-3 h-3 text-gray-500"})})]})]})},ue.id))}):A.jsx("p",{className:"text-center text-gray-500 py-8",children:"Bu seviyede ders bulunamad."})})]}),A.jsxs("div",{children:[A.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Seilen Dersler ve ncelikleri (",J.length,")"]}),A.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 max-h-[60vh] overflow-y-auto",children:J.length>0?A.jsx("div",{className:"space-y-3",children:J.map(ue=>{const fe=r.subjectPriorities[ue.id]||"medium",$={high:{bg:"bg-red-50",text:"text-red-800",border:"border-red-300",ring:"ring-red-200"},medium:{bg:"bg-blue-50",text:"text-blue-800",border:"border-blue-300",ring:"ring-blue-200"},low:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-300",ring:"ring-gray-200"}}[fe];return A.jsxs("div",{className:`p-3 rounded-lg border-2 ${$.bg} ${$.border}`,children:[A.jsxs("div",{className:"flex items-start justify-between mb-2",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-medium text-sm",children:ue.name}),A.jsxs("p",{className:"text-xs text-gray-600",children:[ue.branch,"  ",r.subjectHours[ue.id]||ue.weeklyHours," sa/h"]})]}),A.jsx("button",{onClick:()=>Z(ue.id),className:"text-red-500 hover:text-red-700 p-1",title:"Seimi kaldr",children:A.jsx(R2,{className:"w-4 h-4"})})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"ncelik"}),A.jsx("div",{className:"flex items-center space-x-1",children:["high","medium","low"].map(me=>A.jsxs("button",{type:"button",onClick:()=>O(ue.id,me),className:`px-3 py-1 text-xs rounded-full font-semibold border transition-all ${fe===me?`${$.bg} ${$.text} ${$.border} ring-2 ring-offset-1 ${$.ring}`:"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[A.jsx(eL,{className:`w-3 h-3 mr-1.5 inline-block ${fe===me?"fill-current":""}`}),me==="high"?"Yksek":me==="medium"?"Orta":"Dk"]},me))})]})]},ue.id)})}):A.jsx("p",{className:"text-center text-gray-500 py-8",children:"Sol taraftan ders sein."})})]})]}),A.jsx(Oa,{isOpen:x,onClose:U,title:C?"Ders Dzenle":"Yeni Ders Ekle",size:"lg",children:A.jsxs("form",{onSubmit:V,className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(Jr,{label:"Ders Ad",value:E.name,onChange:ue=>_(fe=>({...fe,name:ue})),required:!0}),A.jsx(Jr,{label:"Bran",value:E.branch,onChange:ue=>_(fe=>({...fe,branch:ue})),required:!0})]}),A.jsx(Jr,{label:"Haftalk Ders Saati",type:"number",value:E.weeklyHours,onChange:ue=>_(fe=>({...fe,weeklyHours:ue,distributionPattern:""})),required:!0}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Datm ekli ",A.jsx("span",{className:"text-gray-500",children:"(stee bal)"})]}),A.jsx(Jr,{label:"Datm ekli",value:E.distributionPattern,onChange:ue=>_(fe=>({...fe,distributionPattern:ue})),placeholder:"rn: 2+2+1"}),!Ph(E.distributionPattern,parseInt(E.weeklyHours))&&E.distributionPattern&&A.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Datm toplam haftalk saat ile uyumuyor!"})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Eitim Seviyeleri",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:Ra.map(ue=>A.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer ${E.levels.includes(ue)?"bg-ide-primary-50 border-ide-primary-500":"bg-white border-gray-300"}`,children:[A.jsx("input",{type:"checkbox",checked:E.levels.includes(ue),onChange:()=>F(ue),className:"sr-only"}),A.jsx("span",{className:"text-sm font-medium",children:ue}),E.levels.includes(ue)&&A.jsx("span",{className:"ml-2 text-ide-primary-600",children:""})]},ue))})]}),A.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[A.jsx(Ct,{type:"button",onClick:U,variant:"secondary",children:"ptal"}),A.jsx(Ct,{type:"submit",variant:"primary",disabled:E.levels.length===0,children:C?"Gncelle":"Kaydet"})]})]})})]})},xL=({data:r,onUpdate:e,classes:t})=>{const{add:n,update:s,remove:i}=or("classes"),{data:l}=or("teachers"),[c,u]=Ee.useState(""),[d,f]=Ee.useState(!1),[v,x]=Ee.useState(null),[y,C]=Ee.useState({name:"",levels:[],teacherIds:[],classTeacherId:""}),N=r.classes||{selectedClasses:[],classCapacities:{},classPreferences:{}},E=F=>{const ee=N.selectedClasses.includes(F);let ge=N.selectedClasses;ee?ge=ge.filter(ue=>ue!==F):ge=[...ge,F],e({classes:{...N,selectedClasses:ge}})},_=(F,ee)=>{e({classes:{...N,classCapacities:{...N.classCapacities,[F]:Math.max(1,ee)}}})},P=F=>{const ee=(c?t.filter(ue=>(ue.levels||[ue.level]).includes(c)):t).map(ue=>ue.id);let ge=N.selectedClasses;F?ge=Array.from(new Set([...ge,...ee])):ge=ge.filter(ue=>!ee.includes(ue)),e({classes:{...N,selectedClasses:ge}})},H=()=>{C({name:"",levels:[],teacherIds:[],classTeacherId:""}),x(null),f(!1)},D=async F=>{if(F.preventDefault(),y.levels.length===0)return;const ee={name:y.name,level:y.levels[0],levels:y.levels,teacherIds:y.teacherIds,classTeacherId:y.classTeacherId};v?await s(v.id,ee):await n(ee),H()},J=F=>{C({name:F.name,levels:F.levels||[F.level],teacherIds:F.teacherIds||[],classTeacherId:F.classTeacherId||""}),x(F),f(!0)},Z=async F=>{window.confirm("Bu snf silmek istediinizden emin misiniz?")&&(await i(F),N.selectedClasses.includes(F)&&E(F))},O=F=>{C(ee=>({...ee,levels:ee.levels.includes(F)?ee.levels.filter(ge=>ge!==F):[...ee.levels,F]}))},Q=F=>{C(ee=>{const ge=ee.teacherIds.includes(F)?ee.teacherIds.filter(fe=>fe!==F):[...ee.teacherIds,F],ue=ge.includes(ee.classTeacherId)?ee.classTeacherId:"";return{...ee,teacherIds:ge,classTeacherId:ue}})},U=F=>{C(ee=>({...ee,teacherIds:ee.teacherIds.includes(F)?ee.teacherIds:[...ee.teacherIds,F],classTeacherId:F}))},V=()=>y.levels.length===0?[]:l.filter(F=>(F.levels||[F.level]).some(ee=>y.levels.includes(ee))).sort((F,ee)=>F.name.localeCompare(ee.name,"tr")),L=(c?t.filter(F=>(F.levels||[F.level]).includes(c)):t).reduce((F,ee)=>((ee.levels||[ee.level]).forEach(ge=>{F[ge]||(F[ge]=[]),F[ge].push(ee)}),F),{});return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx(ms,{className:"w-12 h-12 text-emerald-600 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Snf Seimi"}),A.jsx("p",{className:"text-gray-600",children:"Programa dahil edilecek snflar sein, dzenleyin veya yeni snf ekleyin"})]}),A.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[A.jsx("div",{className:"md:w-1/2",children:A.jsx(ns,{label:"Seviye Filtresi",value:c,onChange:u,options:[{value:"",label:"Tm Seviyeler"},...Ra.map(F=>({value:F,label:F}))]})}),A.jsx(Ct,{onClick:()=>f(!0),icon:ea,variant:"primary",children:"Yeni Snf Ekle"})]}),A.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-medium text-blue-900",children:"Seilen Snflar"}),A.jsxs("p",{className:"text-sm text-blue-700",children:[N.selectedClasses.length," / ",t.length," snf seildi"]})]}),A.jsxs("div",{className:"flex space-x-2",children:[A.jsx(Ct,{onClick:()=>P(!0),variant:"secondary",size:"sm",children:c?`${c} Tmn Se`:"Tmn Se"}),A.jsx(Ct,{onClick:()=>P(!1),variant:"secondary",size:"sm",children:c?`${c} Seimini Kaldr`:"Tm Seimi Kaldr"})]})]})}),A.jsx("div",{className:"space-y-6",children:Object.entries(L).map(([F,ee])=>A.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[A.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[A.jsx(ei,{className:"w-5 h-5 mr-2 text-emerald-600"}),F,A.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",ee.filter(ge=>N.selectedClasses.includes(ge.id)).length,"/",ee.length,")"]})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:ee.map(ge=>{const ue=N.selectedClasses.includes(ge.id),fe=N.classCapacities[ge.id]||30;return A.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all duration-200 ${ue?"border-emerald-500 bg-emerald-50":"border-gray-200 bg-gray-50 hover:border-emerald-300"}`,children:[A.jsxs("div",{className:"flex items-center justify-between mb-2",children:[A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{onClick:()=>E(ge.id),className:`w-5 h-5 rounded-full border-2 flex items-center justify-center cursor-pointer ${ue?"border-emerald-500 bg-emerald-500":"border-gray-300"}`,children:ue&&A.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),A.jsxs("div",{children:[A.jsx("h4",{className:"font-medium text-gray-900",children:ge.name}),A.jsx("p",{className:"text-xs text-gray-600",children:ge.level})]})]}),A.jsxs("div",{className:"flex items-center space-x-1",children:[A.jsx("button",{onClick:()=>J(ge),className:"p-1 text-gray-400 hover:text-blue-600",title:"Dzenle",children:A.jsx(Co,{size:16})}),A.jsx("button",{onClick:()=>Z(ge.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Sil",children:A.jsx(Ss,{size:16})})]})]}),ue&&A.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[A.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Kapasite"}),A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("button",{type:"button",onClick:()=>_(ge.id,fe-1),className:"w-6 h-6 bg-gray-200 rounded text-xs",children:"-"}),A.jsx("span",{className:"w-8 text-center text-sm font-medium",children:fe}),A.jsx("button",{type:"button",onClick:()=>_(ge.id,fe+1),className:"w-6 h-6 bg-gray-200 rounded text-xs",children:"+"}),A.jsx("span",{className:"text-xs text-gray-500",children:"renci"})]})]})]},ge.id)})})]},F))}),A.jsx(Oa,{isOpen:d,onClose:H,title:v?"Snf Dzenle":"Yeni Snf Ekle",size:"lg",children:A.jsxs("form",{onSubmit:D,className:"space-y-4",children:[A.jsx(Jr,{label:"Snf Ad",value:y.name,onChange:F=>C({...y,name:F}),placeholder:"rn: 5A",required:!0}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Eitim Seviyeleri",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:Ra.map(F=>A.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer transition-all ${y.levels.includes(F)?"bg-emerald-50 border-emerald-500":"bg-white border-gray-300"}`,children:[A.jsx("input",{type:"checkbox",checked:y.levels.includes(F),onChange:()=>O(F),className:"sr-only"}),A.jsx("span",{className:"text-sm font-medium",children:F}),y.levels.includes(F)&&A.jsx("span",{className:"ml-2 text-emerald-600",children:""})]},F))})]}),y.levels.length>0&&A.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Snf retmenleri"}),V().length>0?A.jsxs("div",{className:"space-y-4",children:[A.jsx(ns,{label:"Snf retmeni",value:y.classTeacherId,onChange:U,options:[{value:"",label:"Snf retmeni sein..."},...V().map(F=>({value:F.id,label:`${F.name} (${F.branch})`}))]}),A.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg",children:A.jsx("div",{className:"divide-y",children:V().map(F=>{const ee=y.teacherIds.includes(F.id),ge=y.classTeacherId===F.id;return A.jsxs("div",{className:`p-3 flex items-center justify-between ${ge?"bg-blue-50":""}`,children:[A.jsxs("label",{className:"flex items-center",children:[A.jsx("input",{type:"checkbox",checked:ee,onChange:()=>Q(F.id),className:"h-4 w-4 rounded"}),A.jsxs("span",{className:"ml-3 text-sm",children:[F.name," ",A.jsxs("span",{className:"text-xs text-gray-500",children:["(",F.branch,")"]}),ge&&A.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:"Snf rt."})]})]}),!ge&&ee&&A.jsx("button",{type:"button",onClick:()=>U(F.id),className:"text-xs text-blue-600 hover:underline",children:"Snf rt. yap"})]},F.id)})})})]}):A.jsx("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:A.jsx("p",{children:"Seilen seviyelerde retmen bulunamad."})})]}),A.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[A.jsx(Ct,{type:"button",onClick:H,variant:"secondary",children:"ptal"}),A.jsx(Ct,{type:"submit",variant:"primary",disabled:y.levels.length===0,children:v?"Gncelle":"Kaydet"})]})]})})]})},bL=({data:r,onUpdate:e})=>{const{data:t}=or("classrooms"),[n,s]=Ee.useState(!1),[i,l]=Ee.useState(null),[c,u]=Ee.useState({name:"",shortName:"",classLevel:"",sharedClassroom:!1,needsSpecialEquipment:!1,color:"",floors:"",nearbyClassrooms:""});Ee.useEffect(()=>{t.length>0&&(!r.classrooms||r.classrooms.length===0)&&e({classrooms:t.map(D=>({id:D.id,name:D.name||"simsiz Derslik",type:D.type||"normal",capacity:D.capacity||30,floor:D.floor||"1",building:D.building||"Ana Bina",equipment:D.equipment||[],shortName:D.shortName||f(D.name||""),color:D.color||v()}))})},[t,r.classrooms,e]);const d=r.classrooms||[],f=D=>D?D.substring(0,2).toUpperCase():"",v=()=>{const D=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4"];return D[Math.floor(Math.random()*D.length)]},x=[{value:"normal",label:"Normal Snf"},{value:"laboratory",label:"Laboratuvar"},{value:"workshop",label:"Atlye"},{value:"gym",label:"Spor Salonu"},{value:"library",label:"Ktphane"},{value:"computer",label:"Bilgisayar Snf"}],y=[{id:"projector",label:"Projeksiyon",icon:Lm},{id:"computer",label:"Bilgisayar",icon:Lm},{id:"wifi",label:"WiFi",icon:KE},{id:"sound",label:"Ses Sistemi",icon:VE}],C=D=>{D.preventDefault();const J={id:i?.id||Date.now().toString(),name:c.name,type:"normal",capacity:30,floor:"1",building:"Ana Bina",equipment:[],shortName:c.shortName||f(c.name),color:c.color||v()};e(i?{classrooms:d.map(Z=>Z.id===i.id?J:Z)}:{classrooms:[...d,J]}),N()},N=()=>{u({name:"",shortName:"",classLevel:"",sharedClassroom:!1,needsSpecialEquipment:!1,color:"",floors:"",nearbyClassrooms:""}),l(null),s(!1)},E=D=>{u({name:D.name,shortName:D.shortName||f(D.name),classLevel:"",sharedClassroom:!1,needsSpecialEquipment:!1,color:D.color||v(),floors:D.floor,nearbyClassrooms:""}),l(D),s(!0)},_=D=>{e({classrooms:d.filter(J=>J.id!==D)})};gA.useEffect(()=>{c.name&&!i&&u(D=>({...D,shortName:f(D.name)}))},[c.name,i]),gA.useEffect(()=>{c.name&&!i&&!c.color&&u(D=>({...D,color:v()}))},[c.name,i]);const P=D=>x.find(J=>J.value===D)?.label||D,H=D=>({normal:"bg-blue-100 text-blue-800",laboratory:"bg-ide-accent-100 text-ide-accent-800",workshop:"bg-orange-100 text-orange-800",gym:"bg-green-100 text-green-800",library:"bg-ide-primary-100 text-ide-primary-800",computer:"bg-red-100 text-red-800"})[D]||"bg-gray-100 text-gray-800";return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx(_d,{className:"w-12 h-12 text-orange-600 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Derslik Ynetimi"}),A.jsx("p",{className:"text-gray-600",children:"Derslikleri tanmlayn ve zelliklerini belirleyin"})]}),A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Derslikler"}),A.jsxs("p",{className:"text-sm text-gray-600",children:[d.length," derslik tanmland"]})]}),A.jsx(Ct,{onClick:()=>s(!0),icon:ea,variant:"primary",children:"Yeni Derslik"})]}),d.length===0?A.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[A.jsx(_d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Derslik Eklenmemi"}),A.jsx("p",{className:"text-gray-500 mb-4",children:"Program oluturmak iin en az bir derslik tanmlamalsnz"}),A.jsx(Ct,{onClick:()=>s(!0),icon:ea,variant:"primary",children:"lk Derslii Ekle"})]}):A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(D=>A.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[A.jsxs("div",{className:"flex items-start justify-between mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold text-gray-900",children:D.name}),A.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${H(D.type)}`,children:P(D.type)})]}),A.jsxs("div",{className:"flex space-x-1",children:[A.jsx("button",{onClick:()=>E(D),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:A.jsx(Co,{size:16})}),A.jsx("button",{onClick:()=>_(D.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:A.jsx(Ss,{size:16})})]})]}),A.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{children:"Kapasite:"}),A.jsxs("span",{className:"font-medium",children:[D.capacity," kii"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{children:"Konum:"}),A.jsxs("span",{className:"font-medium",children:[D.building," - ",D.floor,". Kat"]})]}),D.equipment&&D.equipment.length>0&&A.jsxs("div",{children:[A.jsx("span",{className:"text-xs text-gray-500",children:"Ekipmanlar:"}),A.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:D.equipment.map(J=>{const Z=y.find(O=>O.id===J);return Z?A.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:[A.jsx(Z.icon,{size:12,className:"mr-1"}),Z.label]},J):null})})]})]})]},D.id))}),A.jsx(Oa,{isOpen:n,onClose:N,title:i?"Derslik Dzenle":"Yeni Derslik Ekle",size:"lg",children:A.jsxs("form",{onSubmit:C,className:"space-y-4",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(Jr,{label:"sim",value:c.name,onChange:D=>u({...c,name:D}),placeholder:"rn: A101, Fen Lab 1",required:!0}),A.jsx(Jr,{label:"Ksaltma",value:c.shortName,onChange:D=>u({...c,shortName:D}),placeholder:"Otomatik oluturulur",disabled:!0})]}),A.jsx(Jr,{label:"Snfn Derslii",value:c.classLevel,onChange:D=>u({...c,classLevel:D}),placeholder:"Hangi snfn derslii"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("input",{type:"checkbox",id:"sharedClassroom",checked:c.sharedClassroom,onChange:D=>u({...c,sharedClassroom:D.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),A.jsx("label",{htmlFor:"sharedClassroom",className:"text-sm font-medium text-gray-700",children:"Ortak Derslik"})]}),A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("input",{type:"checkbox",id:"needsSpecialEquipment",checked:c.needsSpecialEquipment,onChange:D=>u({...c,needsSpecialEquipment:D.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),A.jsx("label",{htmlFor:"needsSpecialEquipment",className:"text-sm font-medium text-gray-700",children:"Nbet/Gzetim Gereken Alan"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(Jr,{label:"Renk",value:c.color,onChange:D=>u({...c,color:D}),placeholder:"Otomatik atanr",disabled:!0}),A.jsx(Jr,{label:"Ziller",value:c.floors,onChange:D=>u({...c,floors:D}),placeholder:"Kat bilgisi"})]}),A.jsx(Jr,{label:"Yakndaki Derslikler",value:c.nearbyClassrooms,onChange:D=>u({...c,nearbyClassrooms:D}),placeholder:"Komu derslikler"}),A.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[A.jsx(Ct,{type:"button",onClick:N,variant:"secondary",children:"ptal"}),A.jsx(Ct,{type:"submit",variant:"primary",children:i?"Gncelle":"Tamamla"})]})]})})]})},BL=({selectedTeachers:r,onSelectedTeachersChange:e,wizardData:t,all_classes:n,teachers:s})=>{const{data:i,add:l,update:c,remove:u}=or("teachers"),d=s&&s.length>0?s:i,{data:f}=or("subjects"),{success:v,error:x,info:y}=xa(),[C,N]=Ee.useState(!1),[E,_]=Ee.useState(null),[P,H]=Ee.useState({name:"",branch:"",levels:[],subjectIds:[]}),[D,J]=Ee.useState("");Ee.useEffect(()=>{const $=t.classes?.selectedClasses||[];if($.length===0||n.length===0)return;const me=new Set;if(n.filter(S=>$.includes(S.id)).forEach(S=>{(S.teacherIds||[]).forEach(K=>me.add(K)),S.classTeacherId&&me.add(S.classTeacherId)}),me.size>0){const S=Array.from(new Set([...r,...Array.from(me)]));S.length>r.length&&(e(S),y("retmenler Otomatik Seildi",`Seilen snflara atanm ${me.size} retmen listeye eklendi.`))}},[t.classes.selectedClasses,n]);const Z=async $=>{if($.preventDefault(),!P.branch){x(" Bran Seimi Gerekli","Ltfen bir bran sein.");return}if(P.levels.length===0){x(" Eitim Seviyesi Gerekli","En az bir eitim seviyesi semelisiniz.");return}try{const me={name:P.name,branch:P.branch,branches:[P.branch],level:P.levels[0],levels:P.levels,subjectIds:P.subjectIds};E?(await c(E.id,me),v(" retmen Gncellendi",`${P.name} baaryla gncellendi.`)):(await l(me),v(" retmen Eklendi",`${P.name} baaryla eklendi.`)),O()}catch{x(" Hata","retmen kaydedilirken bir hata olutu.")}},O=()=>{H({name:"",branch:"",levels:[],subjectIds:[]}),_(null),N(!1)},Q=$=>{H({name:$.name,branch:$.branch,levels:$.levels||($.level?[$.level]:[]),subjectIds:$.subjectIds||[]}),_($),N(!0)},U=async $=>{const me=d.find(z=>z.id===$);me&&window.confirm(`${me.name} retmenini silmek istediinizden emin misiniz?`)&&(await u($),v(" Silindi",`${me.name} baaryla silindi`),e(r.filter(z=>z!==$)))},V=$=>e(r.includes($)?r.filter(me=>me!==$):[...r,$]),I=()=>e(r.length===d.length?[]:d.map($=>$.id)),L=$=>H(me=>({...me,levels:me.levels.includes($)?me.levels.filter(z=>z!==$):[...me.levels,$]})),F=$=>H(me=>({...me,subjectIds:me.subjectIds.includes($)?me.subjectIds.filter(z=>z!==$):[...me.subjectIds,$]})),ge=[...d].sort(($,me)=>$.name.localeCompare(me.name,"tr")).filter($=>$.name.toLocaleLowerCase("tr-TR").includes(D.toLocaleLowerCase("tr-TR"))||$.branch.toLocaleLowerCase("tr-TR").includes(D.toLocaleLowerCase("tr-TR"))),ue=[...new Set(f.map($=>$.branch))].sort(($,me)=>$.localeCompare(me,"tr")),fe=[{value:"",label:"Bran Sein..."},...ue.map($=>({value:$,label:$}))],ae=f.filter($=>P.levels.length===0?!1:($.levels||[$.level]).some(me=>P.levels.includes(me))).sort(($,me)=>$.name.localeCompare(me.name,"tr"));return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(ei,{className:"w-8 h-8 text-blue-600"})}),A.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"retmen Seimi"}),A.jsx("p",{className:"text-gray-600",children:"Programa dahil edilecek retmenleri sein. Snf admnda setiiniz retmenler otomatik olarak iaretlenir."})]}),A.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[A.jsx("div",{children:A.jsxs("h3",{className:"text-lg font-semibold",children:["retmenler (",d.length,")"]})}),A.jsx("div",{className:"flex flex-1 max-w-md mx-4",children:A.jsxs("div",{className:"relative w-full",children:[A.jsxs("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:[A.jsx(ea,{className:"h-4 w-4 text-gray-400 rotate-45"})," "]}),A.jsx("input",{type:"text",placeholder:"retmen veya bran ara...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:D,onChange:$=>J($.target.value)})]})}),A.jsxs("div",{className:"flex items-center space-x-3",children:[d.length>0&&A.jsx(Ct,{onClick:I,variant:"secondary",size:"sm",children:r.length===d.length?"Tm Seimi Kaldr":"Tmn Se"}),A.jsx(Ct,{onClick:()=>N(!0),icon:ea,variant:"primary",size:"sm",children:"Yeni retmen"})]})]}),ge.length>0?A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ge.map($=>{const me=r.includes($.id);return A.jsxs("div",{className:`relative bg-white rounded-lg border-2 p-4 transition-all cursor-pointer ${me?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>V($.id),children:[A.jsx("div",{className:`absolute top-3 right-3 w-6 h-6 rounded-full border-2 flex items-center justify-center ${me?"bg-blue-500 border-blue-500":"border-gray-300 bg-white"}`,children:me&&A.jsx(R1,{className:"w-4 h-4 text-white"})}),A.jsxs("div",{className:"pr-8",children:[A.jsx("h4",{className:"font-semibold",children:$.name}),A.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Bran: ",$.branch]}),A.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:($.levels||[$.level]).map(z=>A.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z==="Anaokulu"?"bg-green-100 text-green-800":z==="lkokul"?"bg-blue-100 text-blue-800":"bg-ide-accent-100 text-ide-accent-800"}`,children:z},z))})]}),A.jsxs("div",{className:"absolute bottom-3 right-3 flex space-x-1",children:[A.jsx("button",{onClick:z=>{z.stopPropagation(),Q($)},className:"p-1 text-gray-400 hover:text-blue-600",children:A.jsx(Co,{size:14})}),A.jsx("button",{onClick:z=>{z.stopPropagation(),U($.id)},className:"p-1 text-gray-400 hover:text-red-600",children:A.jsx(Ss,{size:14})})]})]},$.id)})}):A.jsx("p",{className:"text-center text-gray-500 py-8",children:"Henz retmen eklenmemi."}),A.jsx(Oa,{isOpen:C,onClose:O,title:E?"retmen Dzenle":"Yeni retmen Ekle",size:"lg",children:A.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[A.jsx(Jr,{label:"Ad Soyad",value:P.name,onChange:$=>H(me=>({...me,name:$})),required:!0}),A.jsx(ns,{label:"Bran",value:P.branch,onChange:$=>H(me=>({...me,branch:$})),options:fe,required:!0}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Eitim Seviyeleri ",A.jsx("span",{className:"text-red-500",children:"*"})]}),A.jsx("div",{className:"flex flex-wrap gap-3",children:Ra.map($=>A.jsxs("label",{className:`flex items-center p-3 border-2 rounded-lg cursor-pointer ${P.levels.includes($)?"bg-blue-50 border-blue-500":"bg-white border-gray-300"}`,children:[A.jsx("input",{type:"checkbox",checked:P.levels.includes($),onChange:()=>L($),className:"sr-only"}),A.jsx("span",{className:"text-sm",children:$}),P.levels.includes($)&&A.jsx("span",{className:"ml-2 text-blue-600",children:""})]},$))})]}),A.jsxs("div",{className:"mt-6 pt-6 border-t",children:[A.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[A.jsx(wa,{className:"w-5 h-5 mr-2 text-ide-primary-600"}),"Verebilecei Dersler"]}),A.jsxs("div",{className:"space-y-2 p-3 border rounded-lg bg-gray-50 max-h-60 overflow-y-auto",children:[ae.map($=>A.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-100 rounded-md",children:[A.jsx("input",{type:"checkbox",checked:P.subjectIds.includes($.id),onChange:()=>F($.id),className:"w-4 h-4"}),A.jsxs("span",{className:"text-sm",children:[$.name," ",A.jsxs("span",{className:"text-xs text-gray-500",children:["(",$.branch," - ",($.levels||[$.level]).join(", "),")"]})]})]},$.id)),P.levels.length>0&&ae.length===0&&A.jsx("div",{className:"text-center text-sm text-gray-500 py-4",children:"Seilen seviyelere uygun ders bulunamad."}),P.levels.length===0&&A.jsx("div",{className:"text-center text-sm text-gray-500 py-4",children:"Dersleri grmek iin seviye sein."})]})]}),A.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[A.jsx(Ct,{type:"button",onClick:O,variant:"secondary",children:"ptal"}),A.jsx(Ct,{type:"submit",variant:"primary",disabled:!P.branch||P.levels.length===0,children:E?"Gncelle":"Kaydet"})]})]})})]})},Wc=({label:r,value:e,onChange:t,options:n,placeholder:s="Seiniz...",required:i=!1,disabled:l=!1,className:c=""})=>{const[u,d]=Ee.useState(!1),[f,v]=Ee.useState(""),x=Ee.useRef(null),y=n.find(_=>_.value===e);Ee.useEffect(()=>{const _=P=>{x.current&&!x.current.contains(P.target)&&d(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const C=n.filter(_=>_.label.toLocaleLowerCase("tr-TR").includes(f.toLocaleLowerCase("tr-TR"))),N=_=>{t(_),d(!1),v("")},E=_=>{_.stopPropagation(),t(""),v("")};return A.jsxs("div",{className:`mb-4 ${c}`,ref:x,children:[A.jsxs("label",{className:"block text-sm font-semibold text-ide-gray-800 mb-2",children:[r," ",i&&A.jsx("span",{className:"text-ide-accent-600 ml-1",children:"*"})]}),A.jsxs("div",{className:"relative",children:[A.jsxs("div",{onClick:()=>!l&&d(!u),className:`
            ide-input w-full min-h-[42px] px-3 py-2 flex items-center justify-between cursor-pointer
            border rounded-lg bg-white transition-all duration-200
            ${u?"border-ide-primary-500 ring-2 ring-ide-primary-200":"border-ide-gray-300 hover:border-ide-gray-400"}
            ${l?"bg-ide-gray-50 border-ide-gray-200 cursor-not-allowed opacity-75":""}
          `,children:[A.jsx("span",{className:`block truncate ${y?"text-gray-900":"text-gray-500"} select-none`,children:y?y.label:s}),A.jsxs("div",{className:"flex items-center space-x-1",children:[e&&!l&&A.jsx("div",{role:"button",onClick:E,className:"p-1 hover:bg-gray-100 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:A.jsx(di,{size:14})}),A.jsx(bg,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${u?"transform rotate-180":""}`})]})]}),u&&!l&&A.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[A.jsx("div",{className:"p-2 border-b border-gray-100 bg-gray-50",children:A.jsxs("div",{className:"relative",children:[A.jsx(Qm,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),A.jsx("input",{type:"text",value:f,onChange:_=>v(_.target.value),placeholder:"Ara...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:border-ide-primary-500 focus:ring-1 focus:ring-ide-primary-200",autoFocus:!0,onClick:_=>_.stopPropagation()})]})}),A.jsx("div",{className:"max-h-60 overflow-y-auto overflow-x-hidden",children:C.length>0?A.jsx("div",{className:"py-1",children:C.map(_=>A.jsxs("div",{onClick:()=>N(_.value),className:`
                        px-4 py-2 text-sm cursor-pointer flex items-center justify-between
                        ${e===_.value?"bg-ide-primary-50 text-ide-primary-700 font-medium":"text-gray-700 hover:bg-gray-50"}
                      `,children:[A.jsx("span",{children:_.label}),e===_.value&&A.jsx(R1,{className:"w-4 h-4 text-ide-primary-600"})]},_.value))}):A.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center italic",children:"Sonu bulunamad"})})]})]})]})},el={unavailable:{label:"Msait Deil",description:"Bu zaman diliminde kesinlikle ders verilemez",color:"bg-red-100 border-red-300 text-red-800",icon:""},preferred:{label:"Tercih Edilen",description:"Bu zaman dilimi tercih edilir",color:"bg-green-100 border-green-300 text-green-800",icon:""},restricted:{label:"Kstl",description:"Bu zaman diliminde snrl ders verilebilir",color:"bg-yellow-100 border-yellow-300 text-yellow-800",icon:""}},CL=({entityType:r,entityId:e,entityName:t,entityLevel:n,constraints:s,onSave:i})=>{const[l,c]=Ee.useState("unavailable"),[u,d]=Ee.useState([]);Ee.useEffect(()=>{d(s)},[e,s]);const f=Ee.useMemo(()=>$E(n||"lkokul"),[n]),v=E=>{d(E),i(E)},x=E=>{const _=u.filter(P=>P.entityId!==e);f.forEach(P=>{P.isBreak||Tr.forEach(H=>{_.push({id:`${e}-${H}-${P.period}-${Date.now()}`,entityType:r,entityId:e,day:H,period:P.period,constraintType:E,reason:`Toplu atama: ${el[E].label}`,createdAt:new Date,updatedAt:new Date})})}),v(_)},y=()=>{const E=u.filter(_=>_.entityId!==e);d(E),i(E)},C=(E,_,P)=>{if(P)return;const H=[...u],D=H.findIndex(J=>J.entityType===r&&J.entityId===e&&J.day===E&&J.period===_);if(D!==-1){const J=H[D];J.constraintType===l?H.splice(D,1):H[D]={...J,constraintType:l,updatedAt:new Date}}else{const J={id:`${e}-${E}-${_}-${Date.now()}`,entityType:r,entityId:e,day:E,period:_,constraintType:l,reason:`${el[l].label} - ${t}`,createdAt:new Date,updatedAt:new Date};H.push(J)}v(H)},N=(E,_)=>u.find(P=>P.entityType===r&&P.entityId===e&&P.day===E&&P.period===_);return A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[A.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-4 py-3",children:A.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[A.jsxs("div",{className:"text-white",children:[A.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[A.jsx(ME,{className:"w-4 h-4"}),t," - Zaman Kstlamalar"]}),A.jsx("p",{className:"text-xs text-white/80 mt-0.5",children:"Bir kstlama tr seip tabloya tklayarak uygulayn"})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Ct,{onClick:()=>x("unavailable"),icon:Xj,variant:"secondary",className:"!py-1.5 !px-3 !text-xs",children:"Tmn Megul"}),A.jsx(Ct,{onClick:y,icon:O1,variant:"secondary",className:"!py-1.5 !px-3 !text-xs !bg-white !text-purple-700 hover:!bg-purple-50",children:"Sfrla"})]})]})}),A.jsx("div",{className:"px-4 py-3 bg-gray-50 border-b border-gray-200",children:A.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[A.jsx("span",{className:"text-xs font-semibold text-gray-600 whitespace-nowrap",children:"Kstlama Tr:"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(el).map(([E,_])=>A.jsxs("button",{onClick:()=>c(E),className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium border-2 transition-all ${l===E?`${_.color} border-current shadow-sm`:"border-gray-200 bg-white hover:bg-gray-50 text-gray-600"}`,children:[A.jsx("span",{children:_.icon}),A.jsx("span",{children:_.label})]},E))})]})}),A.jsx("div",{className:"overflow-x-auto",children:A.jsxs("table",{className:"w-full border-collapse",style:{tableLayout:"fixed"},children:[A.jsx("thead",{children:A.jsxs("tr",{className:"bg-gray-100",children:[A.jsx("th",{className:"w-24 px-2 py-2 text-[10px] font-bold text-gray-700 uppercase border border-gray-300 bg-gray-100 text-center",children:"Saat"}),Tr.map(E=>A.jsx("th",{className:"px-1 py-2 text-[10px] font-bold text-gray-700 uppercase border border-gray-300 bg-gray-100 text-center",children:E.substring(0,3)},E))]})}),A.jsx("tbody",{children:f.map(E=>{const _=E.isBreak,P=typeof E.period=="string"&&E.period.startsWith("break")||E.isBreak?"Mola":`${E.period}. Ders`;return A.jsxs("tr",{className:_?"bg-gray-50":"bg-white",children:[A.jsx("td",{className:`px-2 py-1.5 border border-gray-300 ${_?"bg-yellow-100":"bg-gray-50"}`,children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"font-bold text-[10px] text-gray-800",children:P}),A.jsxs("div",{className:"text-[9px] text-gray-500 flex items-center justify-center gap-0.5 mt-0.5",children:[A.jsx(ti,{className:"w-2.5 h-2.5"}),mu(E.startTime,E.endTime)]})]})}),Tr.map(H=>{if(_)return A.jsx("td",{className:"px-0.5 py-0.5 border border-gray-300 bg-yellow-50",children:A.jsxs("div",{className:"h-10 flex flex-col items-center justify-center text-gray-400",children:[A.jsx(qj,{size:12}),A.jsx("span",{className:"text-[8px] mt-0.5",children:"Mola"})]})},`${H}-${E.period}`);const D=N(H,E.period),J=D?el[D.constraintType]:el.preferred;return A.jsx("td",{className:"px-0.5 py-0.5 border border-gray-300",children:A.jsx("button",{onClick:()=>C(H,E.period,_||!1),disabled:_,className:`w-full h-10 rounded transition-all duration-150 focus:outline-none focus:ring-1 focus:ring-purple-400 ${J.color} ${_?"cursor-not-allowed":"hover:opacity-80 active:scale-95"}`,children:A.jsxs("div",{className:"flex flex-col items-center justify-center",children:[A.jsx("span",{className:"text-sm",children:J.icon}),A.jsx("span",{className:"text-[8px] font-medium leading-tight",children:J.label})]})})},`${H}-${E.period}`)})]},E.period)})})]})})]})},EL=["Pazartesi","Sal","aramba","Perembe","Cuma"],IL=["1","2","3","4","5","7","8","9","10"],_L=({teachers:r,classes:e,subjects:t,fixedSlots:n,onSave:s})=>{const[i,l]=Ee.useState(""),[c,u]=Ee.useState(""),[d,f]=Ee.useState(""),[v,x]=Ee.useState(""),[y,C]=Ee.useState(""),N=r.map(O=>({value:O.id,label:`${O.name} (${O.branch})`})),E=e.map(O=>({value:O.id,label:O.name})),_=t.map(O=>({value:O.id,label:`${O.name}${O.className?` (${O.className})`:""}`})),P=EL.map(O=>({value:O,label:O})),H=IL.map(O=>({value:O,label:`${O}. Ders`})),D=()=>{if(!i||!c||!d||!v||!y)return;const O=r.find(F=>F.id===i),Q=e.find(F=>F.id===c),U=t.find(F=>F.id===d);if(!O||!Q||!U)return;if(n.find(F=>F.classId===c&&F.day===v&&F.period===y)){alert(`Bu snfn ${v} ${y}. ders iin zaten bir sabit dersi var!`);return}if(n.find(F=>F.teacherId===i&&F.day===v&&F.period===y)){alert(`Bu retmenin ${v} ${y}. derste zaten baka bir sabit dersi var!`);return}const L={id:`fixed-${Date.now()}`,teacherId:i,teacherName:O.name,classId:c,className:Q.name,subjectId:d,subjectName:U.name,day:v,period:y,createdAt:new Date};s([...n,L]),C("")},J=O=>{s(n.filter(Q=>Q.id!==O))},Z=n.reduce((O,Q)=>(O[Q.teacherId]||(O[Q.teacherId]=[]),O[Q.teacherId].push(Q),O),{});return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[A.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[A.jsx(sm,{className:"w-5 h-5 text-ide-primary-600"}),"Yeni Sabit Ders Ekle"]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[A.jsx(HE,{className:"w-4 h-4 inline mr-1"}),"retmen"]}),A.jsx(Wc,{label:"",placeholder:"retmen sein...",value:i,onChange:l,options:N})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[A.jsx(ms,{className:"w-4 h-4 inline mr-1"}),"Snf"]}),A.jsx(Wc,{label:"",placeholder:"Snf sein...",value:c,onChange:u,options:E})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[A.jsx(wa,{className:"w-4 h-4 inline mr-1"}),"Ders"]}),A.jsx(Wc,{label:"",placeholder:"Ders sein...",value:d,onChange:f,options:_})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[A.jsx(ti,{className:"w-4 h-4 inline mr-1"}),"Gn"]}),A.jsx(Wc,{label:"",placeholder:"Gn sein...",value:v,onChange:x,options:P})]}),A.jsxs("div",{children:[A.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[A.jsx(ti,{className:"w-4 h-4 inline mr-1"}),"Ders Saati"]}),A.jsx(Wc,{label:"",placeholder:"Saat sein...",value:y,onChange:C,options:H})]}),A.jsx("div",{className:"flex items-end",children:A.jsxs("button",{onClick:D,disabled:!i||!c||!d||!v||!y,className:"w-full px-4 py-2 bg-ide-primary-600 text-white rounded-lg hover:bg-ide-primary-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[A.jsx(ea,{className:"w-4 h-4"}),"Ekle"]})})]})]}),A.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[A.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[A.jsx(sm,{className:"w-5 h-5 text-green-600"}),"Kaytl Sabit Dersler",A.jsxs("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:[n.length," adet"]})]}),n.length===0?A.jsxs("div",{className:"text-center py-8 text-gray-500",children:[A.jsx(sm,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),A.jsx("p",{children:"Henz sabit ders eklenmemi."}),A.jsx("p",{className:"text-sm",children:"Yukardaki formu kullanarak sabit ders ekleyebilirsiniz."})]}):A.jsx("div",{className:"space-y-4",children:Object.entries(Z).map(([O,Q])=>A.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[A.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:[A.jsx("span",{className:"font-medium text-gray-900",children:Q[0].teacherName}),A.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",Q.length," sabit ders)"]})]}),A.jsx("div",{className:"divide-y divide-gray-100",children:Q.map(U=>A.jsxs("div",{className:"px-4 py-3 flex items-center justify-between hover:bg-gray-50",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded font-medium",children:U.className}),A.jsx("span",{className:"text-gray-900",children:U.subjectName}),A.jsxs("span",{className:"text-gray-500 text-sm",children:[U.day," - ",U.period,". ders"]})]}),A.jsx("button",{onClick:()=>J(U.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Sabit dersi sil",children:A.jsx(Ss,{className:"w-4 h-4"})})]},U.id))})]},O))})]})]})},mc=r=>{if(!r)return"";const e={:"c",:"c",:"g",:"g",:"s",:"s",:"u",:"u",:"o",:"o",:"i",:"i"};let t=r;return Object.keys(e).forEach(n=>{t=t.replace(new RegExp(n,"g"),e[n])}),t.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-+|-+$/g,"").trim()},NL=r=>`teach-${mc(r)}`,SL=r=>`cls-${mc(r)}`,kL=(r,e,t)=>`sub-${mc(`${r}-${e}-${t}`)}`,fA=r=>{if(!r)return"";const e={:"c",:"c",:"g",:"g",:"s",:"s",:"u",:"u",:"o",:"o",:"i",:"i"};let t=r;return Object.keys(e).forEach(n=>{t=t.replace(new RegExp(n,"g"),e[n])}),t.toLowerCase().replace(/[^a-z0-9]/g,"")},RA=(r,e)=>{if(!r)return"";let t=r.trim();t=t.replace(/^(teach|cls|sub|teacher|class|subject|teachers|classes|subjects)\s*-\s*/,"");const n=mc(t),s=e?.toLowerCase().replace(/s$/,"");return s==="teacher"?`teach-${n}`:s==="class"?`cls-${n}`:s==="subject"?`sub-${n}`:r.startsWith("teach")?`teach-${n}`:r.startsWith("cls")?`cls-${n}`:r.startsWith("sub")?`sub-${n}`:n};function FL(r){if(r)return r.levels?.[0]||r.level||void 0}const TL=({data:r,onUpdate:e,teachers:t,classes:n,subjects:s})=>{xa();const[i,l]=Ee.useState("teacher"),[c,u]=Ee.useState(""),d=()=>{let P=[];switch(i){case"teacher":P=t.filter(H=>r.teachers?.selectedTeachers.includes(H.id)).map(H=>({value:H.id,label:`${H.name} (${H.branch})`}));break;case"class":P=n.filter(H=>r.classes?.selectedClasses.includes(H.id)).map(H=>({value:H.id,label:`${H.name} (${(H.levels||[H.level]).join(", ")})`}));break;case"subject":P=s.filter(H=>r.subjects?.selectedSubjects.includes(H.id)).map(H=>{const D=H.branch&&H.branch!==H.name?` ${H.branch}`:"",J=H.className?` ${H.className}`:"",Z=`${H.name}${J}${D}`;return{value:H.id,label:Z.replace(/\s+/g," ").trim()}});break}return P.sort((H,D)=>H.label.localeCompare(D.label,"tr")),P},f=()=>{if(!c)return null;switch(i){case"teacher":return t.find(P=>P.id===c);case"class":return n.find(P=>P.id===c);case"subject":return s.find(P=>P.id===c);default:return null}},v=P=>{e({constraints:{...r.constraints||{timeConstraints:[],fixedSlots:[],globalRules:{}},timeConstraints:P}})},x=P=>{e({constraints:{...r.constraints||{timeConstraints:[],fixedSlots:[],globalRules:{}},fixedSlots:P}})},y=f();let C=y?.name||"";if(i==="subject"&&y){const P=y,H=P.branch&&P.branch!==P.name?` ${P.branch}`:"",D=P.className?` ${P.className}`:"";C=`${P.name}${D}${H}`.replace(/\s+/g," ").trim()}const N=y?FL(y):"Ortaokul",E=[{id:"teacher",label:"retmenler",icon:HE},{id:"class",label:"Snflar",icon:ms},{id:"subject",label:"Dersler",icon:wa},{id:"fixed",label:"Sabit Dersler",icon:sm}],_=E.find(P=>P.id===i);return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"text-center",children:[A.jsx(ti,{className:"w-12 h-12 text-ide-primary-600 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Zaman Kstlamalar"}),A.jsx("p",{className:"text-gray-600",children:"retmen, snf veya ders baznda msait olunmayan zamanlar belirleyin."})]}),A.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col sm:flex-row items-center justify-between gap-4",children:[A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{className:"p-2 bg-ide-primary-50 rounded-lg",children:A.jsx(ti,{className:"w-5 h-5 text-ide-primary-600"})}),A.jsxs("div",{children:[A.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Kstlama Durum zeti"}),A.jsx("p",{className:"text-xs text-gray-500",children:"Sistemdeki kstlamalarn gncel verilerle uyumu"})]})]}),A.jsxs("div",{className:"flex items-center space-x-6",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx(Hj,{className:"w-4 h-4 text-green-500"}),A.jsx("span",{className:"text-sm font-medium text-gray-700",children:(()=>{const P=r.constraints?.timeConstraints||[],H=new Set([...t.map(J=>J.id),...n.map(J=>J.id),...s.map(J=>J.id)]);return`${P.filter(J=>H.has(RA(J.entityId,J.entityType))).length} Aktif`})()})]}),(()=>{const P=r.constraints?.timeConstraints||[],H=new Set([...t.map(J=>J.id),...n.map(J=>J.id),...s.map(J=>J.id)]),D=P.filter(J=>!H.has(RA(J.entityId,J.entityType))).length;return D>0?A.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 bg-amber-50 rounded-full border border-amber-200 animate-pulse",children:[A.jsx(Ed,{className:"w-4 h-4 text-amber-500"}),A.jsxs("span",{className:"text-sm font-bold text-amber-700",children:[D," Sahipsiz (Uyumsuz)"]})]}):null})()]})]}),A.jsx("div",{className:"border-b border-gray-200",children:A.jsx("nav",{className:"-mb-px flex space-x-8",children:E.map(P=>A.jsxs("button",{onClick:()=>{l(P.id),u("")},className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center transition-colors duration-200 ${i===P.id?"border-ide-primary-500 text-ide-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[A.jsx(P.icon,{className:"w-4 h-4 mr-2"}),P.label]},P.id))})}),A.jsx("div",{className:"mt-6",children:i==="fixed"?A.jsx(_L,{teachers:t,classes:n,subjects:s,fixedSlots:r.constraints?.fixedSlots||[],onSave:x}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"md:col-span-2",children:A.jsx(Wc,{label:`${_?.label||"e"} Sein`,placeholder:`${_?.label||"e"} ara veya se...`,value:c,onChange:u,options:d(),className:"w-full"})}),c&&y?A.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden mt-4",children:A.jsx(CL,{entityType:i,entityId:c,entityName:C,entityLevel:N,constraints:r.constraints?.timeConstraints||[],onSave:v})}):A.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed mt-4",children:[A.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:gA.createElement(_?.icon||ti,{className:"w-8 h-8 text-gray-400"})}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"e Sein"}),A.jsxs("p",{className:"text-gray-500 max-w-md mx-auto",children:["Zaman kstlamalarn dzenlemek iin yukardaki listeden bir ",_?.label.toLowerCase()||"e"," sein."]})]})]})})]})},UL={Pazartesi:"Pzt",Sal:"Sal",aramba:"ar",Perembe:"Per",Cuma:"Cum"},jL=({generationResult:r,classes:e,teachers:t,subjects:n,onSave:s,onCancel:i})=>{const[l,c]=Ee.useState({}),[u,d]=Ee.useState(""),[f,v]=Ee.useState([]),[x,y]=Ee.useState("class"),[C,N]=Ee.useState([]),[E,_]=Ee.useState(null),[P,H]=Ee.useState(null),[D,J]=Ee.useState(new Set),[Z,O]=Ee.useState([]),[Q,U]=Ee.useState(null),[V,I]=Ee.useState(null),[L,F]=Ee.useState(!1),[ee,ge]=Ee.useState(""),ue=e.find(ne=>ne.id===u);Ee.useEffect(()=>{t.length>0&&f.length===0&&v([t[0].id])},[t]);const fe=(ne,pe)=>ne==="prep"?{isFixed:!0,label:pe==="Ortaokul"?"HAZIRLIK":"KAHVALTI"}:(pe==="lkokul"||pe==="Anaokulu")&&ne==="5"?{isFixed:!0,label:"LE YEME"}:pe==="Ortaokul"&&ne==="6"?{isFixed:!0,label:"LE YEME"}:ne==="afternoon-breakfast"?{isFixed:!0,label:"KND KAHVALTISI"}:{isFixed:!1,label:""},ae=(ne,pe)=>{const Ie=Dd(ne,pe);return Ie?mu(Ie.startTime,Ie.endTime):`${ne}. Ders`},$=ne=>{const pe={},Ie=t.find(Be=>Be.id===ne);Tr.forEach(Be=>{pe[Be]={},gn.forEach(Fe=>{pe[Be][Fe]=null})});const se=Be=>Be==="KULP"||Be.toLocaleLowerCase("tr-TR").includes("kulp")||Be.toLocaleLowerCase("tr-TR").includes("kulup")||Be.includes("virtual-class"),Te=(Be,Fe,De)=>Be!=="Perembe"?!1:De==="Ortaokul"?Fe==="7"||Fe==="8":De==="lkokul"||De==="Anaokulu"?Fe==="9"||Fe==="10":!1,we=r?.schedules?.find(Be=>Be.teacherId===ne);if(we?.schedule&&Object.entries(we.schedule).forEach(([Be,Fe])=>{pe[Be]&&Object.entries(Fe).forEach(([De,At])=>{if(At?.classId){const _e=se(At.classId)||se(At.subjectId);if(_e&&!Te(Be,De,Ie?.level))return;const Pe=n.find(Ye=>Ye.id===At.subjectId);pe[Be][De]={classId:_e?"KULP":At.classId,subjectId:At.subjectId,subjectName:_e?"KULP":Pe?.name||At.subjectId}}})}),Object.entries(l).forEach(([Be,Fe])=>{Object.entries(Fe).forEach(([De,At])=>{Object.entries(At).forEach(([_e,Pe])=>{if(!Pe)return;const Ye=se(Be)||se(Pe.subjectId);if(!(Ye&&!Te(De,_e,Ie?.level))&&(Pe.teacherId===ne||Ie?.isClubTeacher&&Ye)){if(pe[De][_e]&&pe[De][_e]?.classId===(Ye?"KULP":Be))return;const vt=n.find(ke=>ke.id===Pe.subjectId);pe[De][_e]={classId:Ye?"KULP":Be,subjectId:Pe.subjectId,subjectName:Ye?"KULP":vt?.name||Pe.subjectId}}})})}),Ie?.isClubTeacher){const Be="Perembe";Ie.level==="lkokul"||Ie.level==="Anaokulu"?["9","10"].forEach(Fe=>{pe[Be]&&(pe[Be][Fe]={classId:"KULP",subjectId:"auto-subject-kulup",subjectName:"KULP"})}):Ie.level==="Ortaokul"&&["7","8"].forEach(Fe=>{pe[Be]&&(pe[Be][Fe]={classId:"KULP",subjectId:"auto-subject-kulup",subjectName:"KULP"})})}return pe};Ee.useEffect(()=>{if(r?.finalGrid){const ne={};Object.entries(r.finalGrid).forEach(([pe,Ie])=>{ne[pe]={},Tr.forEach(se=>{ne[pe][se]={},gn.forEach(Te=>{const we=Ie[se]?.[Te];we&&we.subjectId?ne[pe][se][Te]={classId:we.classId||pe,subjectId:we.subjectId,teacherId:we.teacherId,isFixed:we.isFixed}:ne[pe][se][Te]=null})})}),e.forEach(pe=>{ne[pe.id]||(ne[pe.id]={},Tr.forEach(Ie=>{ne[pe.id][Ie]={},gn.forEach(se=>{ne[pe.id][Ie][se]=null})}))}),c(ne),e.length>0&&!u&&d(e[0].id),t.length>0&&f.length===0&&v([t[0].id])}},[r,e,t]),Ee.useEffect(()=>{if(r?.statistics?.unassignedLessons){const ne=r.statistics.unassignedLessons.map(pe=>{const Ie=e.find(we=>we.name===pe.className),se=n.find(we=>we.name===pe.subjectName),Te=t.find(we=>we.name===pe.teacherName);return{className:pe.className,classId:Ie?.id||"",subjectName:pe.subjectName,subjectId:se?.id||"",teacherName:pe.teacherName,teacherId:Te?.id||"",missingHours:pe.missingHours}});N(ne)}},[r,e,n,t]);const me=Ee.useMemo(()=>{const ne=new Map;return Object.entries(l).forEach(([pe,Ie])=>{Object.entries(Ie).forEach(([se,Te])=>{Object.entries(Te).forEach(([we,Be])=>{if(Be?.teacherId){const Fe=`${se}-${we}`;ne.has(Be.teacherId)||ne.set(Be.teacherId,new Set),ne.get(Be.teacherId).add(Fe)}})})}),ne},[l]),z=ne=>{const pe=new Set,Ie=me.get(ne.teacherId)||new Set,se=l[ne.classId],Te=e.find(we=>we.id===ne.classId);return se&&Tr.forEach(we=>{gn.forEach(Be=>{if(fe(Be,Te?.level).isFixed)return;const De=`${we}-${Be}`;!se[we]?.[Be]&&!Ie.has(De)&&pe.add(De)})}),pe},S=(ne,pe)=>{const Ie=me.get(ne)||new Set,se=l[pe],Te=e.find(Be=>Be.id===pe),we=[];return se?(Tr.forEach(Be=>{gn.forEach(Fe=>{if(fe(Fe,Te?.level).isFixed)return;const At=`${Be}-${Fe}`;!se[Be]?.[Fe]&&!Ie.has(At)&&we.push({day:Be,period:Fe,label:`${UL[Be]} ${Fe}.`})})}),we.slice(0,5)):we},K=ne=>{_(ne),H(null),I(null),J(z(ne))},Y=(ne,pe,Ie)=>{_(null),H({day:ne,period:pe,classId:Ie}),I(null),J(new Set)},G=ne=>{ne.preventDefault()},oe=(ne,pe,Ie,se)=>{for(const[Te,we]of Object.entries(l)){if(se&&Te===se)continue;if(we[pe]?.[Ie]?.teacherId===ne)return!0}return!1},ye=(ne,pe,Ie,se)=>{c(Te=>({...Te,[Ie]:{...Te[Ie],[ne]:{...Te[Ie]?.[ne],[pe]:{classId:Ie,subjectId:se.subjectId,teacherId:se.teacherId}}}})),N(Te=>Te.map(Be=>Be.classId===se.classId&&Be.subjectId===se.subjectId&&Be.teacherId===se.teacherId?{...Be,missingHours:Be.missingHours-1}:Be).filter(Be=>Be.missingHours>0))},Le=()=>{if(!V?.pendingAction)return;const{type:ne,lesson:pe,source:Ie,target:se}=V.pendingAction,Te=l[se.classId]?.[se.day]?.[se.period];if(Te&&!Te.isFixed){const we=e.find(De=>De.id===se.classId),Be=n.find(De=>De.id===Te.subjectId),Fe=t.find(De=>De.id===Te.teacherId);we&&Be&&Fe&&N(De=>{const At=De.findIndex(_e=>_e.classId===se.classId&&_e.subjectId===Te.subjectId&&_e.teacherId===Te.teacherId);if(At>=0){const _e=[...De];return _e[At]={..._e[At],missingHours:_e[At].missingHours+1},_e}else return[...De,{className:we.name,classId:se.classId,subjectName:Be.name,subjectId:Te.subjectId,teacherName:Fe.name,teacherId:Te.teacherId||"",missingHours:1}]})}if(ne==="new"&&pe)c(we=>({...we,[se.classId]:{...we[se.classId],[se.day]:{...we[se.classId]?.[se.day],[se.period]:{classId:se.classId,subjectId:pe.subjectId,teacherId:pe.teacherId}}}})),N(we=>we.map(Be=>Be.classId===pe.classId&&Be.subjectId===pe.subjectId&&Be.teacherId===pe.teacherId?{...Be,missingHours:Be.missingHours-1}:Be).filter(Be=>Be.missingHours>0));else if(ne==="move"&&Ie){const we=l[Ie.classId]?.[Ie.day]?.[Ie.period];we&&c(Be=>{const Fe=JSON.parse(JSON.stringify(Be));return Fe[Ie.classId][Ie.day][Ie.period]=null,Fe[se.classId][se.day][se.period]=we,Fe})}_(null),H(null),J(new Set),I(null)},be=(ne,pe,Ie)=>{const se=e.find(we=>we.id===Ie);if(!fe(pe,se?.level).isFixed){if(O(we=>[...we.slice(-9),JSON.parse(JSON.stringify(l))]),E){const we=E;if(oe(we.teacherId,ne,pe)){const Be=S(we.teacherId,Ie);I({message:`${we.teacherName} bu saatte baka snfta!`,alternatives:Be,pendingAction:{type:"new",lesson:we,target:{day:ne,period:pe,classId:Ie}}});return}if(l[Ie]?.[ne]?.[pe]){const Be=S(we.teacherId,Ie);I({message:"Bu slot dolu!",alternatives:Be,pendingAction:{type:"new",lesson:we,target:{day:ne,period:pe,classId:Ie}}});return}ye(ne,pe,Ie,we),_(null),J(new Set),I(null)}else if(P){const we=P,Be=l[we.classId]?.[we.day]?.[we.period];if(!Be)return;if(Be.teacherId&&oe(Be.teacherId,ne,pe,we.classId)){I({message:"retmen bu saatte baka snfta!",alternatives:[],pendingAction:{type:"move",source:we,target:{day:ne,period:pe,classId:Ie}}});return}const Fe=l[Ie]?.[ne]?.[pe];Fe&&!Fe.isFixed?c(De=>{const At=JSON.parse(JSON.stringify(De));return At[we.classId][we.day][we.period]=Fe,At[Ie][ne][pe]=Be,At}):Fe||c(De=>{const At=JSON.parse(JSON.stringify(De));return At[we.classId][we.day][we.period]=null,At[Ie][ne][pe]=Be,At}),H(null),J(new Set),I(null)}}},je=(ne,pe,Ie)=>{const se=l[Ie]?.[ne]?.[pe];if(!se)return;O(Fe=>[...Fe.slice(-9),JSON.parse(JSON.stringify(l))]);const Te=e.find(Fe=>Fe.id===Ie),we=n.find(Fe=>Fe.id===se.subjectId),Be=t.find(Fe=>Fe.id===se.teacherId);Te&&we&&Be&&N(Fe=>{const De=Fe.findIndex(At=>At.classId===Ie&&At.subjectId===se.subjectId&&At.teacherId===se.teacherId);if(De>=0){const At=[...Fe];return At[De]={...At[De],missingHours:At[De].missingHours+1},At}else return[...Fe,{className:Te.name,classId:Ie,subjectName:we.name,subjectId:se.subjectId,teacherName:Be.name,teacherId:se.teacherId||"",missingHours:1}]}),c(Fe=>{const De=JSON.parse(JSON.stringify(Fe));return De[Ie][ne][pe]=null,De})},Ge=(ne,pe)=>{E&&(O(Ie=>[...Ie.slice(-9),JSON.parse(JSON.stringify(l))]),ye(ne,pe,E.classId,E),_(null),J(new Set),I(null))},tt=()=>{if(Z.length>0){const ne=Z[Z.length-1];c(ne),O(pe=>pe.slice(0,-1))}},it=()=>{if(r?.finalGrid){const ne={};Object.entries(r.finalGrid).forEach(([pe,Ie])=>{ne[pe]={},Tr.forEach(se=>{ne[pe][se]={},gn.forEach(Te=>{const we=Ie[se]?.[Te];ne[pe][se][Te]=we?{...we}:null})})}),c(ne),O([]),r.statistics?.unassignedLessons&&N(r.statistics.unassignedLessons.map(pe=>{const Ie=e.find(we=>we.name===pe.className),se=n.find(we=>we.name===pe.subjectName),Te=t.find(we=>we.name===pe.teacherName);return{className:pe.className,classId:Ie?.id||"",subjectName:pe.subjectName,subjectId:se?.id||"",teacherName:pe.teacherName,teacherId:Te?.id||"",missingHours:pe.missingHours}}))}},It=()=>{if(C.length>0){F(!0);return}le()},le=()=>{F(!1);const ne={};Object.entries(l).forEach(([Ie,se])=>{Object.entries(se).forEach(([Te,we])=>{Object.entries(we).forEach(([Be,Fe])=>{if(Fe?.teacherId){const De=Fe.teacherId;ne[De]||(ne[De]={},Tr.forEach(At=>{ne[De][At]={},gn.forEach(_e=>ne[De][At][_e]=null)})),ne[De][Te][Be]={classId:Ie,subjectId:Fe.subjectId}}})})}),t.forEach(Ie=>{if(Ie.isClubTeacher){const se=Ie.id;ne[se]||(ne[se]={},Tr.forEach(we=>{ne[se][we]={},gn.forEach(Be=>ne[se][we][Be]=null)}));const Te="Perembe";Ie.level==="lkokul"||Ie.level==="Anaokulu"?["9","10"].forEach(we=>{ne[se][Te]&&(ne[se][Te][we]={classId:"KULP",subjectId:"auto-subject-kulup",teacherId:se,subjectName:"KULP"})}):Ie.level==="Ortaokul"&&["7","8"].forEach(we=>{ne[se][Te]&&(ne[se][Te][we]={classId:"KULP",subjectId:"auto-subject-kulup",teacherId:se,subjectName:"KULP"})})}});const pe=Object.entries(ne).map(([Ie,se])=>({teacherId:Ie,schedule:se,updatedAt:new Date}));s(pe)},ft=ne=>n.find(pe=>pe.id===ne)?.name||ne,ct=ne=>ne==="KULP"||ne.includes("kulup-virtual-teacher")||ne.includes("generic-teacher-kulup")?"KULP":t.find(pe=>pe.id===ne)?.name||ne,pt=ne=>e.find(pe=>pe.id===ne)?.name||ne,he=ne=>{if(Q===ne)U(null),J(new Set);else{U(ne);const pe=C.find(Ie=>`${Ie.classId}-${Ie.subjectId}-${Ie.teacherId}`===ne);pe&&(J(z(pe)),d(pe.classId),y("class"))}},Se=C.reduce((ne,pe)=>ne+pe.missingHours,0),Qe=(ne,pe)=>{let Ie=0;const se=e.find(Te=>Te.id===ne);return gn.forEach(Te=>{!fe(Te,se?.level).isFixed&&l[ne]?.[pe]?.[Te]&&Ie++}),Ie},X=(ne,pe)=>{const Ie=pe==="class"?e.find(Me=>Me.id===ne):void 0,se=pe==="teacher"?t.find(Me=>Me.id===ne):void 0,Te=pe==="class"?null:$(ne),we=pe==="teacher"&&f.length>1,Be=pe==="teacher"&&f.length>2,Fe=Be?"px-0.5 py-0.5":we?"px-1 py-1":"px-2 py-2",De=Be?"text-[9px]":we?"text-[10px]":"text-xs",At=Be?"text-[10px]":we?"text-xs":"text-sm",_e=Be?"text-[8px]":we?"text-[9px]":"text-xs",Pe=we?"w-8":"w-20",Ye=we?"w-10":"w-24",vt=Be?10:we?12:14,ke=pe==="class"?` ${Ie?.name||""} Snf`:` ${se?.name||""}`;let We=0;return pe==="teacher"&&Te&&Object.values(Te).forEach(Me=>Object.values(Me).forEach(rt=>{rt&&We++})),A.jsxs("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden h-full flex flex-col ${pe==="teacher"?"w-full":"min-w-[800px]"}`,children:[A.jsxs("div",{className:`bg-gradient-to-r from-emerald-600 to-emerald-700 ${we?"px-2 py-1.5":"px-4 py-2.5"} text-white flex justify-between items-center`,children:[A.jsx("span",{className:`font-semibold truncate ${At}`,children:ke}),pe==="teacher"&&A.jsxs("span",{className:`bg-white/20 px-1.5 py-0.5 rounded ${_e}`,children:[We," ders"]})]}),A.jsx("div",{className:"overflow-auto flex-1",children:A.jsxs("table",{className:"w-full border-collapse table-fixed",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:`${Fe} text-center ${_e} font-semibold text-gray-700 border border-gray-200 ${Pe}`,children:"Ders"}),A.jsx("th",{className:`${Fe} text-center ${_e} font-semibold text-gray-700 border border-gray-200 ${Ye}`,children:"Saat"}),Tr.map(Me=>A.jsxs("th",{className:`${Fe} text-center ${_e} font-semibold text-gray-700 border border-gray-200`,children:[we?Me.slice(0,3):Me,pe==="class"&&A.jsx("div",{className:`${_e} mt-0.5`,children:A.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-1 py-0 rounded-full",children:Qe(ne,Me)})})]},Me))]})}),A.jsxs("tbody",{children:[A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:`${Fe} bg-yellow-400 font-semibold text-gray-900 border border-gray-400 ${_e} text-center`,children:we?"HZR":Ie?.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI"}),A.jsx("td",{className:`${Fe} font-medium text-gray-900 border border-gray-400 ${_e} text-center whitespace-nowrap`,children:we?"08:30":Ie?.level==="Ortaokul"?"08:30-08:40":"08:30-08:50"}),A.jsx("td",{colSpan:5,className:`${Fe} font-semibold text-gray-900 border border-gray-400 ${De} text-center`,children:we||Ie?.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI / breakfast"})]}),gn.map(Me=>{const rt=pe==="teacher"?Me==="6":(Ie?.level==="lkokul"||Ie?.level==="Anaokulu")&&Me==="5"||Ie?.level==="Ortaokul"&&Me==="6",mt=Me==="8";return A.jsxs(gA.Fragment,{children:[A.jsxs("tr",{className:rt?"bg-yellow-400":"",children:[A.jsx("td",{className:`${Fe} font-semibold text-gray-900 ${_e} text-center border border-gray-300 ${rt?"bg-yellow-400":"bg-gray-50"}`,children:rt?we?"YMK":"YEMEK":Me}),A.jsx("td",{className:`${Fe} font-medium text-gray-900 ${_e} text-center border border-gray-300 whitespace-nowrap ${rt?"bg-yellow-400":"bg-gray-50"}`,children:rt?we?"12:00":Ie?.level==="lkokul"||Ie?.level==="Anaokulu"?"11:50-12:25":"12:30-13:05":we?ae(Me,Ie?.level).split("-")[0]:ae(Me,Ie?.level)}),rt?A.jsx("td",{colSpan:5,className:`${Fe} font-semibold text-gray-900 border border-gray-400 ${De} text-center`,children:we?"LE YEME":"LE YEME / LUNCH"}):Tr.map(bt=>{const dt=pe==="class"?l[ne]?.[bt]?.[Me]:Te?.[bt]?.[Me],_t=`${bt}-${Me}`,Wt=pe==="class"&&D.has(_t);return A.jsx("td",{onDragOver:G,onDrop:()=>{if(pe==="class")be(bt,Me,ne);else{const Ar=dt?.classId||E?.classId;Ar&&be(bt,Me,Ar)}},className:`${Fe} border border-gray-300 ${Wt?"bg-emerald-100":""}`,children:dt?A.jsxs("div",{draggable:!0,onDragStart:()=>Y(bt,Me,pe==="class"?ne:dt.classId),className:`text-center rounded group relative cursor-grab active:cursor-grabbing hover:bg-gray-100 h-full flex flex-col justify-center ${we?"p-0.5":"p-2"}`,children:[pe==="class"?A.jsxs(A.Fragment,{children:[A.jsx("div",{className:`font-semibold text-gray-900 ${De} leading-tight truncate`,children:ct(dt.teacherId||"")}),A.jsx("div",{className:`${_e} text-gray-500 truncate`,children:ft(dt.subjectId)})]}):A.jsxs(A.Fragment,{children:[A.jsx("div",{className:`font-semibold text-gray-900 ${De} leading-tight truncate`,children:pt(dt.classId)}),A.jsx("div",{className:`${_e} text-gray-500 truncate`,children:ft(dt.subjectId)})]}),!Be&&A.jsx("button",{onClick:()=>je(bt,Me,pe==="class"?ne:dt.classId),className:`absolute -top-1 -right-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center shadow ${we?"w-4 h-4":"w-5 h-5"}`,title:"Dersi Kaldr",children:A.jsx(Ss,{size:vt})})]}):A.jsx("div",{className:`text-center text-gray-300 ${_e} flex items-center justify-center h-full min-h-[1.5rem]`,children:Wt?A.jsx("span",{className:"text-emerald-600 font-medium",children:"+"}):""})},bt)})]}),mt&&A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:`${Fe} font-semibold text-gray-900 border border-gray-400 ${_e} text-center`,children:"ARA"}),A.jsx("td",{className:`${Fe} font-medium text-gray-900 border border-gray-400 ${_e} text-center whitespace-nowrap`,children:"14:35"}),A.jsx("td",{colSpan:5,className:`${Fe} font-semibold text-gray-900 border border-gray-400 ${De} text-center`,children:"IKND"})]})]},Me)})]})]})})]})};return A.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-100 flex flex-col",children:[A.jsx(KA,{isOpen:L,onClose:()=>F(!1),onConfirm:le,title:"Yerletirilmemi Dersler Var",message:`${C.length} ders iin toplam ${Se} saat henz yerletirilmedi.

Yerletirilmemi dersler:
${C.map(ne=>` ${ne.className} - ${ne.subjectName} (${ne.missingHours} saat)`).join(`
`)}

Yine de kaydetmek istiyor musunuz?`,type:"warning",confirmText:"Evet, Kaydet",cancelText:"ptal",confirmVariant:"primary"}),V&&A.jsx("div",{className:"fixed inset-0 z-[60] bg-black/40 flex items-center justify-center",children:A.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-5 max-w-md w-full mx-4",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[A.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center",children:A.jsx(cu,{className:"w-6 h-6 text-amber-600"})}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"akma Tespit Edildi"}),A.jsx("p",{className:"text-gray-600",children:V.message})]})]}),V.alternatives.length>0&&A.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[A.jsx("p",{className:"text-sm text-gray-600 mb-2 font-medium",children:"Alternatif bo slotlar:"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:V.alternatives.map((ne,pe)=>A.jsxs("button",{onClick:()=>Ge(ne.day,ne.period),className:"px-4 py-2 bg-emerald-50 text-emerald-700 text-sm rounded-lg hover:bg-emerald-100 font-medium flex items-center gap-1 border border-emerald-200",children:[ne.label,A.jsx(QE,{className:"w-3 h-3"})]},pe))})]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>{I(null),_(null),H(null),J(new Set)},className:"flex-1 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 font-medium",children:"ptal"}),A.jsx("button",{onClick:Le,className:"flex-1 py-2.5 bg-amber-600 text-white rounded-lg hover:bg-amber-700 font-medium",children:"Yine de Yerletir"})]})]})}),A.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between flex-shrink-0 shadow-sm",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:A.jsx(di,{className:"w-5 h-5 text-gray-500"})}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-gray-900 text-lg",children:"Program Dzenleyici"}),A.jsx("p",{className:"text-xs text-gray-500",children:"Dersleri srkle-brak ile dzenleyin"})]}),A.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1 ml-4",children:[A.jsxs("button",{onClick:()=>y("class"),className:`flex items-center gap-1.5 px-4 py-1.5 rounded-md text-sm font-medium transition-colors
                                ${x==="class"?"bg-white text-emerald-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[A.jsx(ms,{className:"w-4 h-4"}),"Snf"]}),A.jsxs("button",{onClick:()=>{y("teacher"),f.length===0&&t.length>0&&v([t[0].id])},className:`flex items-center gap-1.5 px-4 py-1.5 rounded-md text-sm font-medium transition-colors
                                ${x==="teacher"?"bg-white text-emerald-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[A.jsx(ei,{className:"w-4 h-4"}),"retmen"]})]}),A.jsx("div",{className:"h-6 w-px bg-gray-300 mx-2"}),x==="class"?A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("select",{value:u,onChange:ne=>d(ne.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",children:e.map(ne=>A.jsx("option",{value:ne.id,children:ne.name},ne.id))}),ue&&A.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:ue.level})]}):A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs("div",{className:"relative",children:[A.jsxs("button",{type:"button",onClick:()=>ge(ee?"":" "),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 bg-white flex items-center gap-2 min-w-[180px] justify-between",children:[A.jsx("span",{className:"text-gray-700",children:"retmen Ekle..."}),A.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),ee!==""&&A.jsxs("div",{className:"absolute top-full left-0 mt-1 w-72 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[A.jsx("div",{className:"p-2 border-b border-gray-100",children:A.jsx("input",{type:"text",placeholder:" retmen ara...",value:ee.trim(),onChange:ne=>ge(ne.target.value||" "),autoFocus:!0,className:"w-full px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"})}),A.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t.filter(ne=>!f.includes(ne.id)).filter(ne=>ee.trim()===""||ne.name.toLocaleLowerCase("tr-TR").includes(ee.trim().toLocaleLowerCase("tr-TR"))).sort((ne,pe)=>ne.name.localeCompare(pe.name,"tr-TR")).map(ne=>A.jsxs("button",{onClick:()=>{f.length>=3?alert("En fazla 3 retmen seebilirsiniz."):v(pe=>[...pe,ne.id]),ge("")},className:"w-full px-3 py-2 text-left text-sm hover:bg-emerald-50 border-b border-gray-50 last:border-0 flex items-center gap-2",children:[A.jsx("span",{className:"text-emerald-600",children:""}),A.jsx("span",{children:ne.name})]},ne.id)),t.filter(ne=>!f.includes(ne.id)).filter(ne=>ee.trim()===""||ne.name.toLocaleLowerCase("tr-TR").includes(ee.trim().toLocaleLowerCase("tr-TR"))).length===0&&A.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 text-center",children:"retmen bulunamad"})]}),A.jsx("div",{className:"p-2 border-t border-gray-100 text-center",children:A.jsx("button",{onClick:()=>ge(""),className:"text-xs text-gray-500 hover:text-gray-700",children:"Kapat"})})]})]}),A.jsx("div",{className:"flex gap-2",children:f.map(ne=>{const pe=t.find(Ie=>Ie.id===ne);return A.jsxs("div",{className:"bg-emerald-50 text-emerald-700 px-2 py-1 rounded-lg text-sm font-medium flex items-center gap-1 border border-emerald-100",children:[pe?.name,f.length>1&&A.jsx("button",{onClick:()=>v(Ie=>Ie.filter(se=>se!==ne)),className:"hover:text-red-500 ml-1 p-0.5 rounded-full hover:bg-emerald-100",children:A.jsx(di,{size:12})})]},ne)})})]})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[Se>0?A.jsxs("span",{className:"text-sm bg-amber-100 text-amber-700 px-3 py-1 rounded-full font-medium",children:[Se," bekliyor"]}):A.jsxs("span",{className:"text-sm bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full font-medium flex items-center gap-1",children:[A.jsx(il,{className:"w-4 h-4"})," Tamamland"]}),A.jsx("div",{className:"h-6 w-px bg-gray-300"}),A.jsx("button",{onClick:tt,disabled:Z.length===0,className:"p-2 hover:bg-gray-100 rounded-lg disabled:opacity-40 transition-colors",title:"Geri Al",children:A.jsx(rL,{className:"w-5 h-5"})}),A.jsx("button",{onClick:it,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Sfrla",children:A.jsx(O1,{className:"w-5 h-5"})}),A.jsxs("button",{onClick:It,className:"px-5 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 flex items-center gap-2 shadow-sm",children:[A.jsx(nf,{className:"w-4 h-4"}),"Kaydet ve Bitir"]})]})]}),A.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[A.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col flex-shrink-0",children:[A.jsx("div",{className:"p-3 border-b border-gray-200 bg-gradient-to-r from-amber-500 to-amber-600",children:A.jsxs("div",{className:"flex items-center gap-2 text-white",children:[Se>0?A.jsx(cu,{className:"w-5 h-5"}):A.jsx(il,{className:"w-5 h-5"}),A.jsx("span",{className:"font-semibold",children:"Bekleyen Dersler"}),A.jsx("span",{className:"ml-auto bg-white/20 px-2 py-0.5 rounded text-sm",children:Se})]})}),A.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:C.length===0?A.jsxs("div",{className:"text-center py-8",children:[A.jsx(il,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),A.jsx("p",{className:"font-semibold text-gray-800",children:"Harika!"}),A.jsx("p",{className:"text-sm text-gray-500",children:"Tm dersler yerletirildi."})]}):C.map((ne,pe)=>{const Ie=`${ne.classId}-${ne.subjectId}-${ne.teacherId}`,se=z(ne).size,Te=Q===Ie;return A.jsx("div",{draggable:!0,onDragStart:()=>K(ne),onDragEnd:()=>{V||(_(null),Te||J(new Set))},className:`p-3 bg-gray-50 rounded-lg border-2 cursor-grab active:cursor-grabbing transition-all
                                            ${Te?"border-emerald-500 bg-emerald-50":"border-gray-200 hover:border-gray-300"}`,children:A.jsxs("div",{className:"flex items-start gap-2",children:[A.jsx(Gj,{className:"w-4 h-4 text-gray-400 mt-0.5"}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsxs("div",{className:"flex justify-between items-center mb-1",children:[A.jsx("span",{className:"font-bold text-gray-900",children:ne.className}),A.jsxs("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-medium",children:[ne.missingHours," sa"]})]}),A.jsx("p",{className:"font-medium text-gray-700 text-sm",children:ne.subjectName}),A.jsx("p",{className:"text-xs text-gray-500",children:ne.teacherName}),se>0&&A.jsxs("button",{onClick:()=>he(Ie),className:`mt-2 flex items-center gap-1 text-xs font-medium
                                                            ${Te?"text-emerald-600":"text-gray-400 hover:text-emerald-600"}`,children:[A.jsx(OE,{className:"w-3 h-3"}),se," neri",A.jsx(bg,{className:`w-3 h-3 transition-transform ${Te?"rotate-180":""}`})]})]})]})},pe)})})]}),A.jsx("div",{className:"flex-1 p-4 overflow-auto flex gap-4",children:x==="class"?A.jsx("div",{className:"flex-1 min-w-[800px] h-full",children:X(u,"class")}):f.map(ne=>A.jsx("div",{className:`flex-1 h-full ${f.length>1?"min-w-[300px]":"min-w-[800px]"}`,children:X(ne,"teacher")},ne))})]})]})},LL=({generationPhase:r,generationResult:e,isGenerating:t,isSaving:n,optimizationProgress:s,existingSchedules:i,classes:l,teachers:c,subjects:u,totalLessons:d,onPreAssignClubs:f,onSaveClubs:v,onAssignRemaining:x,onSaveAndExit:y,onStopOptimization:C,onManualEdit:N,onManualEditCancel:E,onManualEditSave:_,onDeleteAllSchedules:P})=>{const H=t,D=e?.statistics.totalLessonsToPlace||d||0,J=e?.statistics.placedLessons||0,Z=D>0&&J===D;return A.jsxs("div",{className:"space-y-6 text-center",children:[r==="initial"&&A.jsxs(A.Fragment,{children:[A.jsx(ei,{className:"w-12 h-12 text-ide-primary-600 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Program Hazrl"}),A.jsx("p",{className:"text-gray-600 max-w-lg mx-auto mb-6",children:"nce kulp derslerini atayarak programn temelini oluturabilir veya dorudan tm program oluturabilirsiniz."}),A.jsx("div",{className:"flex flex-col justify-center items-center space-y-4",children:i.length>0?A.jsx("div",{className:"pt-4 w-full max-w-md mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500",children:A.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-lg p-6 text-center",children:[A.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(Ss,{className:"w-6 h-6 text-red-600"})}),A.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Mevcut Program Bulundu"}),A.jsxs("p",{className:"text-sm text-red-600 mb-6",children:["Yeni bir program oluturmadan nce mevcut ders programlarn temizlemeniz gerekmektedir.",A.jsx("br",{}),A.jsx("span",{className:"font-bold",children:"Bu ilem geri alnamaz!"})]}),A.jsxs("button",{onClick:P,className:"w-full inline-flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 shadow-sm transition-all hover:shadow-md",children:[A.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Mevcut Tm Programlar Temizle"]})]})}):A.jsx("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4 animate-in fade-in zoom-in-95 duration-500",children:A.jsx(Ct,{onClick:f,icon:ei,size:"lg",variant:"secondary",className:"border-ide-primary-200 text-ide-primary-700 bg-ide-primary-50 hover:bg-ide-primary-100",disabled:H,children:"Kulp Dersleri Ata"})})})]}),r==="club_pre_assigned"&&e&&A.jsxs(A.Fragment,{children:[A.jsx(il,{className:"w-12 h-12 text-ide-primary-500 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Kulp Dersleri Hazr!"}),A.jsx("p",{className:"text-gray-600 mb-6 font-medium text-lg",children:"Kulp dersleri baaryla yerletirildi. Devam etmek iin ltfen aadaki butona tklayarak yerleimi kaydedin."}),A.jsx("div",{className:"flex justify-center items-center space-x-8 my-6",children:A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-4xl font-bold text-ide-primary-600",children:e.statistics.placedLessons}),A.jsx("p",{className:"text-sm text-gray-500",children:"Yerleen Kulp"})]})}),A.jsx("div",{className:"mt-8 flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4",children:A.jsx(Ct,{onClick:v,icon:nf,size:"lg",variant:"primary",disabled:H,className:"w-full sm:w-auto px-8",children:"Kulpleri Kaydet ve Devam Et"})})]}),r==="club_saved"&&A.jsxs(A.Fragment,{children:[A.jsx(il,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Kulpler Kaydedildi!"}),A.jsx("p",{className:"text-gray-600 mb-6",children:"Kulp dersleri baaryla kaydedildi. imdi kalan dersleri atayabilirsiniz."}),A.jsx("div",{className:"flex justify-center items-center space-x-3",children:A.jsx(Ct,{onClick:x,variant:"primary",className:"flex-1",disabled:H,children:"Kalan Dersleri Ata"})})]}),H&&A.jsxs(A.Fragment,{children:[A.jsx($j,{className:"w-12 h-12 text-blue-600 mx-auto mb-4 animate-spin"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Program Oluturuluyor..."}),A.jsx("p",{className:"text-gray-600 max-w-lg mx-auto mb-8",children:"Mkemmel dalm iin hesaplamalar yaplyor. Ltfen bekleyin."}),A.jsxs("div",{className:"w-full max-w-md mx-auto mb-6",children:[A.jsxs("div",{className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[A.jsx("span",{children:"lerleme"}),A.jsxs("span",{children:["%",s]})]}),A.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:A.jsx("div",{className:"bg-blue-600 h-4 rounded-full transition-all duration-300 ease-out flex items-center justify-center",style:{width:`${s}%`},children:A.jsx("div",{className:"w-full h-full bg-white/20 animate-smooth-pulse"})})}),A.jsx("div",{className:"text-center mt-2 text-xs text-gray-500",children:"Bu ilem birka dakika srebilir..."})]}),A.jsx("div",{className:"mt-6",children:A.jsx(Ct,{onClick:C,icon:tL,size:"md",variant:"danger",children:"Durdur"})})]}),r==="completed"&&e&&A.jsxs(A.Fragment,{children:[Z?A.jsx(il,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}):A.jsx(Bf,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),A.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:Z?"Mkemmel zm Bulundu!":"Program Hazr"}),A.jsxs("div",{className:"flex justify-center items-center space-x-4 my-4",children:[A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-4xl font-bold text-gray-800",children:J}),A.jsx("p",{className:"text-sm text-gray-500",children:"Yerletirilen Ders"})]}),A.jsx("div",{className:"text-4xl font-light text-gray-300",children:"/"}),A.jsxs("div",{className:"text-center",children:[A.jsx("p",{className:"text-4xl font-bold text-gray-800",children:D}),A.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Ders"})]})]}),!Z&&A.jsxs("div",{className:"max-w-md mx-auto my-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[A.jsxs("h4",{className:"font-semibold text-blue-800",children:["Bilgi: Yerleemeyen ",e.statistics.unassignedLessons.reduce((O,Q)=>O+Q.missingHours,0)," ders saati var."]}),A.jsx("p",{className:"text-xs text-blue-600 mt-1 mb-2",children:"Program bu haliyle kaydedip kalanlar manuel dzenleyebilirsiniz."}),A.jsx("ul",{className:"text-left text-xs text-blue-700 mt-2 list-disc list-inside max-h-32 overflow-y-auto",children:e.statistics.unassignedLessons.map((O,Q)=>A.jsxs("li",{children:[O.className," - ",O.subjectName," (",O.teacherName,") - ",O.missingHours," sa"]},Q))})]}),A.jsxs("div",{className:"mt-8 space-y-3 sm:space-y-0 sm:flex sm:justify-center sm:space-x-4",children:[A.jsx(Ct,{onClick:N,icon:Jj,size:"lg",variant:"secondary",children:"Son Kontrol ve Dzenleme"}),A.jsx(Ct,{onClick:y,icon:nf,size:"lg",variant:"primary",disabled:n,children:n?"Kaydediliyor...":"Program Kaydet ve Bitir"})]})]}),r==="manual_editing"&&e&&A.jsx(jL,{generationResult:e,classes:l,teachers:c,subjects:u,onSave:_,onCancel:E})]})},QL=({steps:r,currentStepIndex:e,completedSteps:t,onStepClick:n})=>A.jsx("div",{className:"lg:col-span-1",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-8",children:[A.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Admlar"}),A.jsx("div",{className:"space-y-2",children:r.map((s,i)=>{const l=s.icon,c=t.has(i),u=i===e,d=t.has(i)||u||i>0&&t.has(i-1);return A.jsx("button",{onClick:()=>n(i),disabled:!d,className:`w-full text-left p-4 rounded-xl border-2 transition-all duration-300 transform hover:scale-[1.02] ${u?"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-400 shadow-lg ring-2 ring-blue-200":c?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-300 hover:border-green-400 shadow-md":d?"bg-white border-gray-200 hover:bg-gray-50 hover:border-gray-300 shadow-sm":"bg-gray-50 border-gray-100 text-gray-400 cursor-not-allowed opacity-60"}`,children:A.jsxs("div",{className:"flex items-center space-x-4",children:[A.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold text-sm transition-all ${u?"bg-gradient-to-r from-blue-500 to-indigo-500 shadow-lg":c?"bg-gradient-to-r from-green-500 to-emerald-500 shadow-md":d?"bg-gradient-to-r from-gray-400 to-gray-500":"bg-gray-300"}`,children:c?A.jsx(R1,{size:20}):A.jsx(l,{size:20})}),A.jsxs("div",{className:"flex-1 min-w-0",children:[A.jsx("p",{className:`font-semibold text-sm ${u?"text-blue-700":c?"text-green-700":d?"text-gray-700":"text-gray-400"}`,children:s.title}),A.jsx("p",{className:`text-xs mt-1 ${u?"text-blue-600":c?"text-green-600":d?"text-gray-500":"text-gray-400"}`,children:s.description})]}),u&&A.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-smooth-pulse"})]})},s.id)})})]})}),PL=({stepInfo:r,isEditing:e,isSaving:t,canSaveTemplate:n,onSaveTemplate:s})=>{const i=xc();return A.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:A.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:A.jsxs("div",{className:"flex items-center justify-between h-16",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(Bf,{className:"w-8 h-8 text-blue-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:e?"Program Dzenleme":"Program Oluturma Sihirbaz"}),A.jsx("p",{className:"text-sm text-gray-600",children:r})]})]}),A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx(Ct,{onClick:s,icon:nf,variant:"secondary",disabled:t||!n,children:t?"Kaydediliyor...":"ablonu Kaydet"}),A.jsx(Ct,{onClick:()=>i("/"),variant:"secondary",children:"ptal"})]})]})})})},im=r=>r.levels&&r.levels.length>0?r.levels[0]:r.level||"lkokul",M2=(r,e,t,n)=>{const s=[],i=[],l=Array.from(new Set(r.classes.selectedClasses)),c=new Set(r.subjects.selectedSubjects),u=new Set(r.teachers.selectedTeachers);l.forEach(v=>{const x=t.find(y=>y.id===v);!x||!x.assignments||x.assignments.length===0||x.assignments.forEach(y=>{const C=y.teacherId,N=e.find(P=>P.id===C);if(!u.has(C)||!N)return;const E=new Set(N.levels||[N.level]),_=im(x);if(!E.has(_)){i.push(`UYARI: ${N.name} (${Array.from(E).join(", ")}) retmeni, ${x.name} (${_}) snfnn seviyesiyle uyumsuz. Bu atama yoksayld.`);return}y.subjectIds.forEach(P=>{if(!c.has(P))return;const H=n.find(O=>O.id===P);if(!H)return;const D=r.subjects.subjectHours[P]||H.weeklyHours,J=r.subjects.subjectPriorities[P]||"medium";let Z;if(r.constraints.globalRules.useDistributionPatterns&&H.distributionPattern){Z=H.distributionPattern.split("+").map(Q=>parseInt(Q.trim())).filter(Q=>!isNaN(Q));const O=Z.reduce((Q,U)=>Q+U,0);O!==D&&i.push(`UYARI: ${H.name} (${x?.name||"Bilinmeyen snf"}) dersinde datm ekli (${H.distributionPattern} = ${O} saat) ile haftalk saat (${D}) uyumsuz`)}s.push({id:`${v}-${P}-${C}`,classId:v,subjectId:P,subjectName:H.name,teacherId:C,weeklyHours:D,assignedHours:0,distribution:Z,priority:J,isClubTeacher:N.isClubTeacher,isClubClass:x.isClubClass})})})});const d=e.filter(v=>v.isClubTeacher&&u.has(v.id)),f=t.filter(v=>v.isClubClass&&l.includes(v.id));return d.forEach(v=>{s.push({id:`auto-kulup-teacher-${v.id}`,classId:`kulup-virtual-class-${v.id}`,subjectId:"auto-subject-kulup",subjectName:"KULP",teacherId:v.id,weeklyHours:2,assignedHours:0,distribution:[2],priority:"high",isClubTeacher:!0,isClubClass:!0})}),f.forEach(v=>{s.push({id:`auto-kulup-class-${v.id}`,classId:v.id,subjectId:"auto-subject-kulup",subjectName:"KULP",teacherId:`kulup-virtual-teacher-${v.id}`,weeklyHours:2,assignedHours:0,distribution:[2],priority:"high",isClubTeacher:!0,isClubClass:!0})}),s.length===0&&i.length===0&&i.push("Seili kriterlere uygun ders elemesi bulunamad. Ltfen retmen, snf ve ders seimlerinizi kontrol edin."),{mappings:s,errors:i}},li=["Pazartesi","Sal","aramba","Perembe","Cuma"],Ti=["1","2","3","4","5","6","7","8","9","10"],DL=.95,RL=["grsel sanatlar","grsel","resim","beden eitimi","beden","spor","biliim teknolojileri","biliim","bilgisayar","mzik","semeli","kulp"],H2=r=>{if(!r)return!1;const e=r.toLowerCase().trim();return RL.some(t=>e.includes(t))},OL=r=>{const e=[];let t=r;for(;t>=2;)e.push(2),t-=2;return t===1&&e.push(1),e},ML=(r,e,t,n,s,i,l,c,u,d)=>{const f=he=>{const Se=`${he.subjectId}-${he.teacherId||"no-teacher"}`,Qe=c?.get(Se);if(Qe!==void 0)return Qe;const ne=n.find(pe=>pe.id===he.subjectId)?.name.toUpperCase()||"";return ne.includes("BLM")||ne.includes("TEKNOLOJ")?"IT_ROOM":ne.includes("BEDEN")||ne.includes("SPOR")?"GYM":null},v=he=>he.startsWith("kulup-virtual-class-")?he.replace("kulup-virtual-class-",""):he.startsWith("generic-class-kulup-")?he.replace("generic-class-kulup-",""):he,x=new Map;r.forEach(he=>{he.subjectName&&!x.has(he.subjectId)&&x.set(he.subjectId,he.subjectName)}),n.forEach(he=>{x.has(he.id)||x.set(he.id,he.name||he.id)});const y=(he,Se,Qe)=>{const X=x.get(he)||he,ne=fA(X),pe=fA(v(Se));return`${ne}::${pe}::${Qe}`},C={},N=new Map,E=new Map,_=new Map,P=new Map,H=new Map,D=new Map,J=new Map,Z=new Set,O=fA,Q=new Map,U=(he,Se)=>{if(he==="KULP"||he.startsWith("kulup-virtual-class-")){const X=t.find(ne=>ne.id===Se);return X?im(X):"lkokul"}const Qe=e.find(X=>X.id===he);return Qe?im(Qe):"lkokul"};s.forEach(he=>{if(he.constraintType){const Se=he.entityType?.toLowerCase().replace(/s$/,"")||"",Qe=RA(he.entityId,Se),X=O(he.entityId);if(P.set(`${Se}-${he.entityId}-${he.day}-${he.period}`,he.constraintType),P.set(`${Se}-${Qe}-${he.day}-${he.period}`,he.constraintType),Q.set(`${Se}-${X}-${he.day}-${he.period}`,he.constraintType),Se==="subject"){let ne=n.find(pe=>pe.id===he.entityId||pe.id===Qe);if(!ne){const pe=he.entityId.replace(/^sub-/,"");ne=n.find(Ie=>O(Ie.name)===O(pe)||O(Ie.id).includes(O(pe)))}if(ne){const pe=mc(ne.name);P.set(`subjectname-${pe}-${he.day}-${he.period}`,he.constraintType)}}}});const V=new Set(r.map(he=>he.classId));d&&d.forEach(he=>V.add(he.classId)),V.forEach(he=>{const Se=e.find(Qe=>Qe.id===he);if(Se&&he!=="KULP"){C[he]={},E.set(he,new Set),li.forEach(X=>{C[he][X]={}});const Qe=im(Se)==="Ortaokul"?"6":"5";Ti.includes(Qe)&&li.forEach(X=>{C[he][X][Qe]={isFixed:!0,classId:"fixed-period",subjectId:"Yemek"},E.get(he).add(`${X}-${Qe}`)})}else he.startsWith("kulup-virtual-class-")&&(C[he]={},E.set(he,new Set),li.forEach(Qe=>{C[he][Qe]={}}))}),C.KULP||(C.KULP={},E.set("KULP",new Set),li.forEach(he=>{C.KULP[he]={}}));const I=new Map,L=new Map;r.forEach(he=>{I.set(he.teacherId,(I.get(he.teacherId)||0)+he.weeklyHours),L.set(he.classId,(L.get(he.classId)||0)+he.weeklyHours)});const F=new Map,ee=new Map,ge=new Map,ue=new Set(r.map(he=>he.teacherId));l&&l.forEach(he=>ue.add(he.teacherId)),d&&d.forEach(he=>ue.add(he.teacherId)),ue.forEach(he=>{N.set(he,new Set),H.set(he,new Map),D.set(he,new Map),li.forEach(Ie=>H.get(he).set(Ie,0));const Se=I.get(he)||1,Qe=Se>=28?7:6,X=Math.floor(Se/5),ne=Se%5,pe=Math.min(X+1,Qe);ee.set(he,X),F.set(he,pe),ge.set(he,ne),J.set(he,Math.max(1,pe))});const fe=new Map;ue.forEach(he=>fe.set(he,O(he)));const ae=new Map;V.forEach(he=>ae.set(he,O(he))),l&&l.forEach(he=>{const{teacherId:Se,schedule:Qe}=he;Object.entries(Qe).forEach(([X,ne])=>{Object.entries(ne).forEach(([pe,Ie])=>{if(Ie&&Ie.classId){const se=Ie.classId,Te=v(se);C[Te]&&(C[Te][X][pe]={...Ie,teacherId:Se,isFixed:!0},E.has(Te)||E.set(Te,new Set),E.get(Te).add(`${X}-${pe}`)),Te!==se&&C[se]&&(C[se][X][pe]={...Ie,teacherId:Se,isFixed:!0},E.has(se)||E.set(se,new Set),E.get(se).add(`${X}-${pe}`)),N.has(Se)||N.set(Se,new Set),N.get(Se).add(`${X}-${pe}`);const we=Se,Be=X,Fe=H.get(we);Fe&&Fe.set(Be,(Fe.get(Be)||0)+1);const De=D.get(we);if(De){De.has(se)||De.set(se,new Map);const At=De.get(se);At.set(Be,(At.get(Be)||0)+1)}if(Ie.subjectId&&Z.add(y(Ie.subjectId,se,Be)),Ie.subjectId){const At=f({subjectId:Ie.subjectId,teacherId:Se});if(At){const _e=`${X}-${pe}-${At}`;_.has(_e)||_.set(_e,[]),_.get(_e).push(`initial-${Se}`)}}}})})});const $=r.map(he=>({...he}));if(d&&d.length>0){const he=new Map;d.forEach(Se=>{const Qe=`${Se.teacherId}|||${Se.classId}|||${Se.subjectId}`;he.set(Qe,(he.get(Qe)||0)+1);const X=`${Se.day}-${Se.period}`;N.has(Se.teacherId)&&N.get(Se.teacherId).add(X),E.has(Se.classId)&&E.get(Se.classId).add(X);const ne=H.get(Se.teacherId);ne&&ne.set(Se.day,(ne.get(Se.day)||0)+1)}),$.forEach(Se=>{he.forEach((Qe,X)=>{const[ne,pe,Ie]=X.split("|||");if(Se.teacherId===ne&&Se.classId===pe){const se=Se.subjectId.toLowerCase().trim(),Te=Ie.toLowerCase().trim();(se===Te||se.includes(Te)||Te.includes(se))&&(Se.weeklyHours=Math.max(0,Se.weeklyHours-Qe))}})})}const me=[],z=[],S=[];$.forEach(he=>{const Se=n.find(se=>se.id===he.subjectId),Qe=Se&&(Se.name.toUpperCase().includes("KULP")||Se.branch.toUpperCase().includes("KULP"))||he.id.startsWith("auto-kulup-");let X=he.weeklyHours;const ne=(se,Te)=>{if(!Qe&&se===3&&!u?.enforceDistributionPatterns){z.push({mapping:he,blockLength:2,taskId:`${he.id}-${Te}-2`,isPlaced:!1}),S.push({mapping:he,blockLength:1,taskId:`${he.id}-${Te}-1`,isPlaced:!1}),X-=3;return}const we={mapping:he,blockLength:se,taskId:`${he.id}-${Te}`,isPlaced:!1};Qe?me.push(we):se>1?z.push(we):S.push(we),X-=se},pe=[...he.distribution||[]],Ie=pe.reduce((se,Te)=>se+Te,0);if(u?.enforceDistributionPatterns&&pe.length>0&&Ie===he.weeklyHours)pe.forEach((se,Te)=>ne(se,`dist-${Te}`));else if(pe.length>0){pe.forEach((Te,we)=>{X>=Te&&ne(Te,`dist-${we}`)});let se=0;for(;X>0;)X>=2?ne(2,`rem-${se++}`):ne(1,`rem-${se++}`)}else OL(he.weeklyHours).forEach((Te,we)=>ne(Te,`auto-${we}`))});const K=[...me,...z,...S];if(d&&d.length>0){const he=new Map;d.forEach(Se=>{const Qe=`${Se.teacherId}|||${Se.classId}|||${Se.subjectId}`,X=he.get(Qe);X?X.count++:he.set(Qe,{count:1,teacherId:Se.teacherId,classId:Se.classId,subjectId:Se.subjectId})}),he.forEach((Se,Qe)=>{const{count:X,teacherId:ne,classId:pe,subjectId:Ie}=Se,se=Ie.toLowerCase().trim();K.filter(we=>{if(we.mapping.teacherId!==ne||we.mapping.classId!==pe)return!1;const Be=we.mapping.subjectId.toLowerCase().trim(),Fe=(we.mapping.subjectName||"").toLowerCase().trim();return Be===se||Be.includes(se)||se.includes(Be)||Fe.includes("ade")&&se.includes("ade")}).forEach(we=>{we.isPlaced||(we.isPlaced=!0)})}),d.forEach(Se=>{C[Se.classId]||(C[Se.classId]={},E.set(Se.classId,new Set),li.forEach(Te=>{C[Se.classId][Te]={}}));const Qe=Se.period,X=Se.day;if(C[Se.classId][X]||(C[Se.classId][X]={}),C[Se.classId][X][Qe])return;let pe=!1;for(const Te of Object.keys(C)){if(Te===Se.classId)continue;const we=C[Te]?.[X]?.[Qe];if(we&&we.teacherId===Se.teacherId){pe=!0,console.error(` [SABT-DERS-AKIMA] ${Se.teacherId} ${X}-${Qe}: ${Te} zaten var, ${Se.classId} atlanyor!`);break}}if(pe)return;const Ie=`${X}-${Qe}`;C[Se.classId][X][Qe]={subjectId:Se.subjectId,teacherId:Se.teacherId,isFixed:!0,isFixedSlot:!0},N.has(Se.teacherId)||N.set(Se.teacherId,new Set),N.get(Se.teacherId).add(Ie),E.has(Se.classId)||E.set(Se.classId,new Set),E.get(Se.classId).add(Ie);const se=H.get(Se.teacherId);se&&se.set(X,(se.get(X)||0)+1),Z.add(y(Se.subjectId,Se.classId,X))})}d&&d.length>0&&new Set(d.map(Se=>Se.teacherId)).forEach(Se=>{N.get(Se)});const Y=(he,Se,Qe)=>{const X=(Fe,De)=>{const At=`${Se}-${Qe}`,_e=P.get(`${Fe}-${De}-${At}`);if(_e)return _e;const Pe=`${Fe}-${RA(De,Fe)}-${At}`,Ye=P.get(Pe);if(Ye)return Ye;let vt="";return Fe==="teacher"?vt=fe.get(De)||O(De):Fe==="class"?vt=ae.get(De)||O(De):vt=O(De),Q.get(`${Fe}-${vt}-${At}`)},ne=X("teacher",he.teacherId),pe=X("class",he.classId),Ie=X("subject",he.subjectId),se=n.find(Fe=>Fe.id===he.subjectId),Te=se?mc(se.name):"",we=Te?P.get(`subjectname-${Te}-${Se}-${Qe}`):void 0;if(ne==="unavailable"||pe==="unavailable"||Ie==="unavailable"||we==="unavailable")return{available:!1,score:0};let Be=0;return[ne,pe,Ie,we].forEach(Fe=>{Fe==="preferred"&&(Be+=2),Fe==="restricted"&&(Be-=1)}),{available:!0,score:Be}},G=(he,Se,Qe)=>{he.sort((X,ne)=>{const pe=`${X.mapping.classId}-${X.mapping.teacherId}-${X.mapping.subjectId}-${X.blockLength}`,Ie=`${ne.mapping.classId}-${ne.mapping.teacherId}-${ne.mapping.subjectId}-${ne.blockLength}`,se=i?.get(pe)||0,Te=i?.get(Ie)||0,we=se*1e3+X.blockLength*2e3+(I.get(X.mapping.teacherId)||0)*2+(L.get(X.mapping.classId)||0),Be=Te*1e3+ne.blockLength*2e3+(I.get(ne.mapping.teacherId)||0)*2+(L.get(ne.mapping.classId)||0);return we!==Be?Be-we:Math.random()-.5});for(const X of he){const ne=U(X.mapping.classId,X.mapping.teacherId);let pe=!1;const Ie=X.mapping.id.startsWith("auto-kulup-"),se="Perembe",Te=ne==="Ortaokul"?["7","8"]:["9","10"],we=Ie?[se]:[...Se].sort(()=>Math.random()-.5);for(const Be of we){const Fe=[],De=Ie?Te:Qe,At=X.mapping.teacherId,_e=H.get(At)?.get(Be)||0,Pe=F.get(At)||5,Ye=ee.get(At)||4;let vt=0;li.forEach(mt=>{(H.get(At)?.get(mt)||0)>=Pe&&vt++});const ke=ge.get(At)||0;let We=0;const Me=_e+X.blockLength;Me<=Ye?We=30:Me<=Pe?vt<ke?We=20:We=5:We=-20;const rt=y(X.mapping.subjectId,X.mapping.classId,Be);if(!Z.has(rt)){for(let mt=0;mt<=De.length-X.blockLength;mt++){const bt=De.slice(mt,mt+X.blockLength);let dt=!0,_t=We;const{teacherId:Wt,classId:Ar}=X.mapping,_r=(I.get(Wt)||0)>=28?8:7;if((H.get(Wt)?.get(Be)||0)+X.blockLength>_r){dt=!1;continue}D.get(Wt).has(Ar)||D.get(Wt).set(Ar,new Map);const yr=y(X.mapping.subjectId,Ar,Be);if(Z.has(yr)){dt=!1;continue}if(dt)for(const _n of bt){const Nr=`${Be}-${_n}`,An=N.get(X.mapping.teacherId),Ur=E.get(X.mapping.classId);if(An&&An.has(Nr),An&&An.has(Nr)||Ur&&Ur.has(Nr)){dt=!1;break}const Xr=f(X.mapping);if(Xr){const ta=`${Be}-${_n}-${Xr}`,ys=Xr==="GYM"?2:1;if((_.get(ta)||[]).length>=ys){dt=!1;break}}const{available:Hr,score:Hi}=Y(X.mapping,Be,_n);if(!Hr){dt=!1;break}_t+=Hi}dt&&Fe.push({startIndex:mt,score:_t})}if(Fe.length>0){Fe.sort((_r,Ot)=>Ot.score-_r.score||Math.random()-.5);const mt=Fe[0],dt=(Ie?Te:Qe).slice(mt.startIndex,mt.startIndex+X.blockLength);for(const _r of dt){const Ot=`${Be}-${_r}`;let yr=!1;for(const Nr of Object.keys(C)){if(Nr===X.mapping.classId)continue;const An=C[Nr]?.[Be]?.[_r];if(An&&An.teacherId===X.mapping.teacherId){yr=!0;break}}if(yr)continue;C[X.mapping.classId][Be][_r]={subjectId:X.mapping.subjectId,teacherId:X.mapping.teacherId,classId:X.mapping.classId,taskId:X.taskId},N.get(X.mapping.teacherId).add(Ot),E.get(X.mapping.classId).add(Ot);const _n=f(X.mapping);if(_n){const Nr=`${Be}-${_r}-${_n}`;_.has(Nr)||_.set(Nr,[]),_.get(Nr).push(X.taskId)}}const{teacherId:_t,classId:Wt}=X.mapping,Ar=H.get(_t).get(Be)||0;H.get(_t).set(Be,Ar+X.blockLength);const vn=D.get(_t).get(Wt).get(Be)||0;D.get(_t).get(Wt).set(Be,vn+X.blockLength),Z.add(y(X.mapping.subjectId,Wt,Be)),X.isPlaced=!0,pe=!0}if(pe)break}}}},oe=me.filter(he=>{const Se=U(he.mapping.classId,he.mapping.teacherId);return Se==="lkokul"||Se==="Anaokulu"}),ye=me.filter(he=>U(he.mapping.classId,he.mapping.teacherId)==="Ortaokul");G(oe,["Perembe"],["9","10"]),G(ye,["Perembe"],["7","8"]);const Le=[...z,...S].sort((he,Se)=>{const Qe=f(he.mapping)?1:0,X=f(Se.mapping)?1:0;return Qe!==X?X-Qe:Se.blockLength-he.blockLength});G(Le,li,Ti);const be=60;for(let he=0;he<be;he++){const Se=K.filter(X=>!X.isPlaced);if(Se.length===0)break;let Qe=!1;for(const X of Se){let ne=!1;const pe=[...li].sort(()=>Math.random()-.5);for(const Ie of pe){const se=y(X.mapping.subjectId,X.mapping.classId,Ie);if(Z.has(se))continue;const Te=[];for(let we=0;we<=Ti.length-X.blockLength;we++)Te.push(we);Te.sort(()=>Math.random()-.5);for(const we of Te){const Be=Ti.slice(we,we+X.blockLength),Fe=[];let De=!1;for(const ke of Be){const We=C[X.mapping.classId][Ie][ke];if(We){if(We.isFixed){De=!0;break}const mt=K.find(bt=>bt.isPlaced&&bt.taskId===We.taskId);if(mt&&!Fe.includes(mt))Fe.push(mt);else{De=!0;break}}const Me=N.get(X.mapping.teacherId);if(Me&&Me.has(`${Ie}-${ke}`)){let mt=!1;for(const bt of V){if(bt===X.mapping.classId)continue;const dt=C[bt][Ie][ke];if(dt&&dt.teacherId===X.mapping.teacherId){const _t=K.find(Wt=>Wt.isPlaced&&Wt.taskId===dt.taskId);if(_t&&!Fe.includes(_t)){Fe.push(_t),mt=!0;break}}}if(!mt){const bt=C[X.mapping.classId][Ie][ke];if(!bt||bt.teacherId!==X.mapping.teacherId){De=!0;break}}}const rt=f(X.mapping);if(rt){const mt=`${Ie}-${ke}-${rt}`,bt=rt==="GYM"?2:1,dt=_.get(mt)||[];if(dt.length>=bt){for(const _t of dt){if(_t.startsWith("initial-")){De=!0;break}const Wt=K.find(Ar=>Ar.isPlaced&&Ar.taskId===_t);Wt&&!Fe.includes(Wt)&&Fe.push(Wt)}Fe.length===0&&!De&&(De=!0)}}if(!Y(X.mapping,Ie,ke).available){De=!0;break}}if(!De){const{teacherId:ke,classId:We}=X.mapping;let Me=0;Fe.forEach(Wt=>{Wt.mapping.teacherId===ke&&(Me+=Wt.blockLength)});const rt=y(X.mapping.subjectId,We,Ie),mt=Fe.some(Wt=>y(Wt.mapping.subjectId,Wt.mapping.classId,Ie)===rt);Z.has(rt)&&!mt&&(De=!0);const dt=(I.get(ke)||0)>=28?8:7;(H.get(ke)?.get(Ie)||0)-Me+X.blockLength>dt&&(De=!0)}if(De||Fe.length===0||Fe.length>3)continue;const At=f(X.mapping),_e=[],Pe=new Map;for(const ke of Fe){const We=[];for(const Me of li)for(const rt of Ti){const mt=C[ke.mapping.classId][Me][rt];if(mt?.taskId===ke.taskId&&!mt.isFixed){We.push({d:Me,p:rt}),C[ke.mapping.classId][Me][rt]=null;const bt=N.get(ke.mapping.teacherId);bt&&bt.delete(`${Me}-${rt}`);const dt=E.get(ke.mapping.classId);dt&&dt.delete(`${Me}-${rt}`);const _t=f(ke.mapping);if(_t){const Wt=`${Me}-${rt}-${_t}`,Ar=_.get(Wt)||[];_.set(Wt,Ar.filter(vn=>vn!==ke.taskId))}}}if(Pe.set(ke.taskId,We),We.length>0){const Me=We[0].d,rt=ke.mapping.teacherId,mt=ke.mapping.classId,bt=H.get(rt).get(Me)||0;H.get(rt).set(Me,Math.max(0,bt-ke.blockLength));const dt=D.get(rt).get(mt).get(Me)||0;D.get(rt).get(mt).set(Me,Math.max(0,dt-ke.blockLength)),Z.delete(y(ke.mapping.subjectId,mt,Me))}ke.isPlaced=!1}At&&Be.forEach(ke=>{const We=`${Ie}-${ke}-${At}`;_.has(We)||_.set(We,[]),_.get(We).push(`temp-${X.taskId}`),_e.push(We)});const Ye=new Map;let vt=!0;for(const ke of Fe){const We=[],Me=[...li].sort(()=>Math.random()-.5);for(const rt of Me)for(let mt=0;mt<=Ti.length-ke.blockLength;mt++){const bt=Ti.slice(mt,mt+ke.blockLength);let dt=!0;for(const _t of bt){const Wt=`${rt}-${_t}`;if(rt===Ie&&Be.includes(_t)&&ke.mapping.classId===X.mapping.classId){dt=!1;break}if(C[ke.mapping.classId][rt][_t]){dt=!1;break}const Ar=N.get(ke.mapping.teacherId),vn=E.get(ke.mapping.classId);if(Ar&&Ar.has(Wt)||vn&&vn.has(Wt)||!Y(ke.mapping,rt,_t).available){dt=!1;break}const _r=f(ke.mapping);if(_r){const Ot=`${rt}-${_t}-${_r}`,yr=_r==="GYM"?2:1;if((_.get(Ot)||[]).length>=yr){dt=!1;break}}if(rt===Ie&&Be.includes(_t)&&X.mapping.teacherId===ke.mapping.teacherId){dt=!1;break}}if(dt&&(U(ke.mapping.classId,ke.mapping.teacherId)==="Ortaokul"&&(D.get(ke.mapping.teacherId)?.get(ke.mapping.classId)?.get(rt)||0)+ke.blockLength>Math.max(3,ke.blockLength)&&(dt=!1),dt)){const _t=y(ke.mapping.subjectId,ke.mapping.classId,rt);Z.has(_t)&&(dt=!1)}dt&&We.push({d2:rt,ps:bt})}if(We.length>0){const rt=We[Math.floor(Math.random()*We.length)];Ye.set(ke.taskId,rt);for(const mt of rt.ps){C[ke.mapping.classId][rt.d2][mt]={taskId:ke.taskId},N.get(ke.mapping.teacherId).add(`${rt.d2}-${mt}`),E.get(ke.mapping.classId).add(`${rt.d2}-${mt}`);const bt=f(ke.mapping);if(bt){const dt=`${rt.d2}-${mt}-${bt}`;_.has(dt)||_.set(dt,[]),_.get(dt).push(ke.taskId)}}if(U(ke.mapping.classId,ke.mapping.teacherId)==="Ortaokul"){D.get(ke.mapping.teacherId).has(ke.mapping.classId)||D.get(ke.mapping.teacherId).set(ke.mapping.classId,new Map);const mt=D.get(ke.mapping.teacherId).get(ke.mapping.classId).get(rt.d2)||0;D.get(ke.mapping.teacherId).get(ke.mapping.classId).set(rt.d2,mt+ke.blockLength)}Z.add(y(ke.mapping.subjectId,ke.mapping.classId,rt.d2))}else{vt=!1;break}}if(_e.forEach(ke=>{const We=_.get(ke)||[];_.set(ke,We.filter(Me=>Me!==`temp-${X.taskId}`))}),vt){const ke=y(X.mapping.subjectId,X.mapping.classId,Ie),We=Fe.some(Me=>{const rt=Pe.get(Me.taskId);return rt?rt.some(mt=>mt.d===Ie&&y(Me.mapping.subjectId,Me.mapping.classId,mt.d)===ke):!1});Z.has(ke)&&!We&&(vt=!1)}if(vt){for(const ke of Fe){const We=Ye.get(ke.taskId);for(const Me of We.ps)C[ke.mapping.classId][We.d2][Me]={subjectId:ke.mapping.subjectId,teacherId:ke.mapping.teacherId,classId:ke.mapping.classId,taskId:ke.taskId};ke.isPlaced=!0}for(const ke of Be){C[X.mapping.classId][Ie][ke]={subjectId:X.mapping.subjectId,teacherId:X.mapping.teacherId,classId:X.mapping.classId,taskId:X.taskId},N.get(X.mapping.teacherId).add(`${Ie}-${ke}`),E.get(X.mapping.classId).add(`${Ie}-${ke}`);const We=f(X.mapping);if(We){const Me=`${Ie}-${ke}-${We}`;_.has(Me)||_.set(Me,[]),_.get(Me).push(X.taskId)}}if(U(X.mapping.classId,X.mapping.teacherId)==="Ortaokul"){D.get(X.mapping.teacherId).has(X.mapping.classId)||D.get(X.mapping.teacherId).set(X.mapping.classId,new Map);const ke=D.get(X.mapping.teacherId).get(X.mapping.classId).get(Ie)||0;D.get(X.mapping.teacherId).get(X.mapping.classId).set(Ie,ke+X.blockLength)}Z.add(y(X.mapping.subjectId,X.mapping.classId,Ie)),X.isPlaced=!0,ne=!0,Qe=!0;break}else{for(const[ke,We]of Ye.entries()){const Me=Fe.find(rt=>rt.taskId===ke);for(const rt of We.ps){if(C[Me.mapping.classId][We.d2][rt]?.isFixed)continue;C[Me.mapping.classId][We.d2][rt]=null,N.get(Me.mapping.teacherId).delete(`${We.d2}-${rt}`),E.get(Me.mapping.classId).delete(`${We.d2}-${rt}`);const bt=f(Me.mapping);if(bt){const dt=`${We.d2}-${rt}-${bt}`,_t=_.get(dt)||[];_.set(dt,_t.filter(Wt=>Wt!==Me.taskId))}}if(U(Me.mapping.classId,Me.mapping.teacherId)==="Ortaokul"){const rt=H.get(Me.mapping.teacherId).get(We.d2)||0;H.get(Me.mapping.teacherId).set(We.d2,Math.max(0,rt-Me.blockLength));const mt=D.get(Me.mapping.teacherId).get(Me.mapping.classId).get(We.d2)||0;D.get(Me.mapping.teacherId).get(Me.mapping.classId).set(We.d2,Math.max(0,mt-Me.blockLength))}Z.delete(y(Me.mapping.subjectId,Me.mapping.classId,We.d2))}for(const ke of Fe){const We=Pe.get(ke.taskId);for(const Me of We){C[ke.mapping.classId][Me.d][Me.p]={subjectId:ke.mapping.subjectId,teacherId:ke.mapping.teacherId,classId:ke.mapping.classId,taskId:ke.taskId},N.get(ke.mapping.teacherId).add(`${Me.d}-${Me.p}`),E.get(ke.mapping.classId).add(`${Me.d}-${Me.p}`);const rt=f(ke.mapping);if(rt){const mt=`${Me.d}-${Me.p}-${rt}`;_.has(mt)||_.set(mt,[]),_.get(mt).push(ke.taskId)}}if(We.length>0){const Me=We[0].d;if(Z.add(y(ke.mapping.subjectId,ke.mapping.classId,Me)),U(ke.mapping.classId,ke.mapping.teacherId)==="Ortaokul"){const rt=D.get(ke.mapping.teacherId).get(ke.mapping.classId).get(Me)||0;D.get(ke.mapping.teacherId).get(ke.mapping.classId).set(Me,rt+ke.blockLength)}}ke.isPlaced=!0}}}if(ne)break}if(!ne&&he<30){const Ie=[...li].sort(()=>Math.random()-.5);for(const se of Ie){const Te=y(X.mapping.subjectId,X.mapping.classId,se);if(Z.has(Te))continue;const we=[];for(let Be=0;Be<=Ti.length-X.blockLength;Be++)we.push(Be);we.sort(()=>Math.random()-.5);for(const Be of we){const Fe=Ti.slice(Be,Be+X.blockLength);let De=!0;const At=[];for(const _e of Fe){if(!Y(X.mapping,se,_e).available){De=!1;break}const Pe=N.get(X.mapping.teacherId);if(Pe&&Pe.has(`${se}-${_e}`))for(const ke of V){if(ke===X.mapping.classId)continue;const We=C[ke][se][_e];if(We&&We.teacherId===X.mapping.teacherId){const Me=K.find(rt=>rt.isPlaced&&rt.taskId===We.taskId);Me&&!At.includes(Me)&&At.push(Me)}}const Ye=C[X.mapping.classId][se][_e];if(Ye){if(Ye.isFixed){De=!1;break}const ke=K.find(We=>We.isPlaced&&We.taskId===Ye.taskId);ke&&!At.includes(ke)&&At.push(ke)}const vt=f(X.mapping);if(vt){const ke=`${se}-${_e}-${vt}`,We=vt==="GYM"?2:1,Me=_.get(ke)||[];if(Me.length>=We)for(const rt of Me){if(rt.startsWith("initial-")){De=!1;break}const mt=K.find(bt=>bt.isPlaced&&bt.taskId===rt);mt&&!At.includes(mt)&&At.push(mt)}}}if(De){const{teacherId:_e,classId:Pe}=X.mapping;let Ye=0;At.forEach(mt=>{mt.mapping.teacherId===_e&&(Ye+=mt.blockLength)});const vt=y(X.mapping.subjectId,Pe,se),ke=At.some(mt=>y(mt.mapping.subjectId,mt.mapping.classId,se)===vt);Z.has(vt)&&!ke&&(De=!1);const Me=(I.get(_e)||0)>=28?8:7;(H.get(_e)?.get(se)||0)-Ye+X.blockLength>Me&&(De=!1)}if(De){const _e=y(X.mapping.subjectId,X.mapping.classId,se),Pe=At.some(Ye=>y(Ye.mapping.subjectId,Ye.mapping.classId,se)===_e);Z.has(_e)&&!Pe&&(De=!1)}if(De){for(const ke of At){ke.isPlaced=!1;const We=ke.mapping.classId,Me=ke.mapping.teacherId;for(const rt of li)for(const mt of Ti){const bt=C[We][rt][mt];if(bt?.taskId===ke.taskId&&!bt.isFixed){C[We][rt][mt]=null;const dt=N.get(Me);dt&&dt.delete(`${rt}-${mt}`);const _t=E.get(We);_t&&_t.delete(`${rt}-${mt}`);const Wt=f(ke.mapping);if(Wt){const Ar=`${rt}-${mt}-${Wt}`,vn=_.get(Ar)||[];_.set(Ar,vn.filter(_r=>_r!==ke.taskId))}if(U(We,Me)==="Ortaokul"){const Ar=D.get(Me)?.get(We)?.get(rt)||0;D.get(Me)?.get(We)?.set(rt,Math.max(0,Ar-ke.blockLength))}Z.delete(y(ke.mapping.subjectId,We,rt))}}}for(const ke of Fe){C[X.mapping.classId][se][ke]={subjectId:X.mapping.subjectId,teacherId:X.mapping.teacherId,classId:X.mapping.classId,taskId:X.taskId},N.get(X.mapping.teacherId).add(`${se}-${ke}`),E.get(X.mapping.classId).add(`${se}-${ke}`);const We=f(X.mapping);if(We){const Me=`${se}-${ke}-${We}`;_.has(Me)||_.set(Me,[]),_.get(Me).push(X.taskId)}}const{teacherId:_e,classId:Pe}=X.mapping,Ye=H.get(_e).get(se)||0;H.get(_e).set(se,Ye+X.blockLength),D.get(_e).has(Pe)||D.get(_e).set(Pe,new Map);const vt=D.get(_e).get(Pe).get(se)||0;D.get(_e).get(Pe).set(se,vt+X.blockLength),Z.add(y(X.mapping.subjectId,X.mapping.classId,se)),X.isPlaced=!0,ne=!0,Qe=!0;break}}if(ne)break}}}if(!Qe)break}const je=K.reduce((he,Se)=>Se.mapping.id.startsWith("auto-kulup-teacher-")?he:he+Se.blockLength,0);let Ge=0;K.forEach(he=>{he.isPlaced&&!he.mapping.id.startsWith("auto-kulup-teacher-")&&(Ge+=he.blockLength)});const tt=je>0?Ge/je:1,it=K.filter(he=>{if(he.mapping.id.startsWith("auto-kulup-teacher-"))return!1;const Se=(he.mapping.subjectName||he.mapping.subjectId||"").toLowerCase();return H2(Se)}),It=it.length===0||it.every(he=>he.isPlaced);if(tt>=DL&&tt<1&&It){const he=K.filter(Se=>!Se.isPlaced&&!Se.mapping.id.startsWith("auto-kulup-teacher-"));for(const Se of he){if(Se.isPlaced)continue;const Qe=Se.mapping.classId,X=Se.mapping.teacherId,ne=Se.mapping.subjectId;Se.mapping.teacherName,Se.mapping.className,Se.mapping.subjectName;let pe=0;const Ie=Se.blockLength;for(const se of li){if(pe>=Ie)break;const Te=y(ne,Qe,se);let we=0;for(const Fe of Ti){const De=C[Qe]?.[se]?.[Fe];De&&De.subjectId===ne&&we++}if(we>=2)continue;let Be=!1;for(const Fe of Ti){if(pe>=Ie||Be)break;if(C[Qe]?.[se]?.[Fe])continue;const De=`${se}-${Fe}`;if(N.has(X)||N.set(X,new Set),N.get(X).has(De)||(E.has(Qe)||E.set(Qe,new Set),E.get(Qe).has(De))||!Y(Se.mapping,se,Fe).available)continue;let _e=!1;for(const Ye of Object.keys(C)){if(Ye===Qe)continue;const vt=C[Ye]?.[se]?.[Fe];if(vt&&vt.teacherId===X){_e=!0;break}}if(_e)continue;C[Qe][se][Fe]={subjectId:ne,teacherId:X,taskId:Se.taskId+`-flex-${pe}`},N.get(X).add(De),E.get(Qe).add(De),Z.add(Te);const Pe=H.get(X);Pe&&Pe.set(se,(Pe.get(se)||0)+1),pe++,Be=!0}}if(pe<Ie)for(const se of li){if(pe>=Ie)break;let Te=0;for(const Be of Ti){const Fe=C[Qe]?.[se]?.[Be];Fe&&Fe.subjectId===ne&&Te++}if(Te>=2)continue;const we=y(ne,Qe,se);for(const Be of Ti){if(pe>=Ie)break;const Fe=C[Qe]?.[se]?.[Be];if(!Fe||Fe.isFixed||Fe.isFixedSlot)continue;const At=n.find(vt=>vt.id===Fe.subjectId)?.name||"";if(H2(At))continue;let _e=0;for(const vt of Ti){const ke=C[Qe]?.[se]?.[vt];ke&&ke.subjectId===Fe.subjectId&&ke.teacherId===Fe.teacherId&&_e++}if(_e>2)continue;const Pe=Fe.teacherId;let Ye=!1;for(const vt of li){if(Ye)break;if(vt===se)continue;const ke=y(Fe.subjectId,Qe,vt);if(!Z.has(ke))for(const We of Ti){if(Ye)break;const Me=`${vt}-${We}`;if(N.has(Pe)||N.set(Pe,new Set),N.get(Pe).has(Me)||(E.has(Qe)||E.set(Qe,new Set),E.get(Qe).has(Me))||C[Qe]?.[vt]?.[We])continue;let rt=!1;for(const _t of Object.keys(C)){if(_t===Qe)continue;const Wt=C[_t]?.[vt]?.[We];if(Wt&&Wt.teacherId===Pe){rt=!0;break}}if(rt)continue;C[Qe][vt][We]={...Fe},N.get(Pe).delete(`${se}-${Be}`),N.get(Pe).add(Me),E.get(Qe).delete(`${se}-${Be}`),E.get(Qe).add(Me);const mt=y(Fe.subjectId,Qe,se);Z.delete(mt),Z.add(ke);let bt=!1;for(const _t of Object.keys(C)){if(_t===Qe)continue;const Wt=C[_t]?.[se]?.[Be];if(Wt&&Wt.teacherId===X){bt=!0;break}}if(bt){C[Qe][se][Be]={...Fe},C[Qe][vt][We]=null,N.get(Pe).delete(Me),N.get(Pe).add(`${se}-${Be}`),E.get(Qe).delete(Me),E.get(Qe).add(`${se}-${Be}`),Z.delete(ke),Z.add(mt);continue}C[Qe][se][Be]={subjectId:ne,teacherId:X,taskId:Se.taskId+`-flex-${pe}`},N.has(X)||N.set(X,new Set),N.get(X).add(`${se}-${Be}`),Z.add(we);const dt=H.get(X);dt&&dt.set(se,(dt.get(se)||0)+1),pe++,Ye=!0}}if(Ye)break}}pe>=Ie&&(Se.isPlaced=!0)}}let le=0;if(K.forEach(he=>{he.isPlaced&&!he.mapping.id.startsWith("auto-kulup-teacher-")&&(le+=he.blockLength)}),$.some(he=>he.subjectId!=="auto-subject-kulup")){const he=d?.length||0;le+=he}const ct={};Object.entries(C).forEach(([he,Se])=>{Object.entries(Se).forEach(([Qe,X])=>{Object.entries(X).forEach(([ne,pe])=>{if(pe&&pe.teacherId){const Ie=`${pe.teacherId}-${Qe}-${ne}`;ct[Ie]||(ct[Ie]=[]),ct[Ie].push({classId:he,day:Qe,period:ne})}})})});let pt=0;return Object.entries(ct).forEach(([he,Se])=>{Se.length>1&&(pt++,console.error(` [GENERATION-AKIMA] ${he}: ${Se.map(Qe=>Qe.classId).join(" vs ")}`))}),pt>0&&console.error(` [GENERATION-AKIMA-ZET] Toplam ${pt} akma tespit edildi!`),{grid:C,tasks:K,placedCount:le,conflictCount:pt}};async function V2(r,e,t,n,s,i,l,c,u,d){const f=fA,v=r.filter(I=>!I.id.startsWith("auto-kulup-teacher-")).reduce((I,L)=>I+L.weeklyHours,0),x=i?.enforceDistributionPatterns?150:100;let y=0,C={schedules:u?u.map(I=>({...I,updatedAt:new Date})):[],placedLessons:-1,unassignedTasks:[],grid:void 0,conflictCount:void 0};const N=new Map,E=s.map(I=>({...I,entityId:RA(I.entityId,I.entityType)})),_=new Map,P=(I,L)=>{const F=`${I}-${L||"no-teacher"}`;if(_.has(F))return _.get(F);const ee=n.find(ae=>ae.id===I||RA(ae.id,"subject")===RA(I,"subject")),ge=L?e.find(ae=>ae.id===L||RA(ae.id,"teacher")===RA(L,"teacher")):null,ue=ae=>{if(!ae)return null;const $=fA(ae);return $.includes("bilisim")||$.includes("teknoloji")||$.includes("bilgisayar")?"IT_ROOM":$.includes("beden")||$.includes("spor")||$.includes("gym")?"GYM":null};let fe=null;if(ee&&(fe=ue(ee.name)||ue(ee.branch)),fe||(fe=ue(I)),!fe&&ge){const ae=fA(ge.branch||"");ae.includes("bilisim")||ae.includes("teknoloji")||ae.includes("bilgisayar")?fe="IT_ROOM":(ae.includes("beden")||ae.includes("spor")||ae.includes("gym"))&&(fe="GYM")}return _.set(F,fe),fe};for(r.forEach(I=>P(I.subjectId,I.teacherId)),u&&u.forEach(I=>{Object.values(I.schedule).forEach(L=>{Object.values(L).forEach(F=>{F?.subjectId&&P(F.subjectId,I.teacherId)})})});C.placedLessons<v&&y<x&&!l.current;){y++,y%6===0&&(c&&c(Math.round(y/x*100)),await new Promise(ee=>setTimeout(ee,0)));const I=ML(r,t,e,n,E,N,u,_,i,d);I.tasks.forEach(ee=>{if(!ee.isPlaced){const ge=`${ee.mapping.classId}-${ee.mapping.teacherId}-${ee.mapping.subjectId}-${ee.blockLength}`;N.set(ge,(N.get(ge)||0)+1)}});const L=C.conflictCount??1/0;if(I.conflictCount===0&&L===0&&I.placedCount>C.placedLessons||I.conflictCount===0&&L>0||I.conflictCount>0&&I.conflictCount<L||I.conflictCount===L&&I.placedCount>C.placedLessons){const ee=new Set(r.map(fe=>fe.teacherId));u&&u.forEach(fe=>ee.add(fe.teacherId)),d&&d.length>0&&d.forEach(fe=>ee.add(fe.teacherId)),Object.values(I.grid).forEach(fe=>{Object.values(fe).forEach(ae=>{Object.values(ae).forEach($=>{$&&$.teacherId&&ee.add($.teacherId)})})});const ge={};ee.forEach(fe=>{ge[fe]={},li.forEach(ae=>ge[fe][ae]={})}),Object.entries(I.grid).forEach(([fe,ae])=>{Object.entries(ae).forEach(([$,me])=>{Object.entries(me).forEach(([z,S])=>{S&&S.teacherId&&ee.has(S.teacherId)&&(ge[S.teacherId][$][z]={classId:fe,subjectId:S.subjectId,...S.isFixed&&{isFixed:!0},...S.isFixedSlot&&{isFixedSlot:!0}})})})});const ue=new Map;Object.entries(I.grid).forEach(([fe,ae])=>{ue.has(fe)||ue.set(fe,new Map),Object.entries(ae).forEach(([$,me])=>{Object.entries(me).forEach(([z,S])=>{if(S&&S.subjectId){const K=ue.get(fe).get(S.subjectId)||0;ue.get(fe).set(S.subjectId,K+1)}})})}),ue.forEach((fe,ae)=>{fe.forEach(($,me)=>{})}),C={schedules:Object.entries(ge).map(([fe,ae])=>({teacherId:fe,schedule:ae,updatedAt:new Date})),placedLessons:I.placedCount,unassignedTasks:I.tasks.filter(fe=>!fe.isPlaced),grid:I.grid,conflictCount:I.conflictCount}}}const H=[],D=new Map;s.forEach(I=>{if(D.set(`${I.entityType}-${I.entityId}-${I.day}-${I.period}`,I.constraintType),I.entityType==="subject"){const L=n.find(F=>F.id===I.entityId);L&&D.set(`subjectname-${mc(L.name)}-${I.day}-${I.period}`,I.constraintType)}}),C.schedules.forEach(I=>{Object.entries(I.schedule).forEach(([L,F])=>{Object.entries(F).forEach(([ee,ge])=>{if(((ae,$,me,z)=>{const S=D.get(`${ae}-${$}-${me}-${z}`);if(S)return S;const K=D.get(`${ae}-${RA($,ae)}-${me}-${z}`);if(K)return K;const Y=f($);for(const[G,oe]of D.entries())if(G.includes(`${me}-${z}`)&&G.startsWith(`${ae}-`)){const ye=G.split("-");if(ye.length>=4){const Le=ye.slice(1,-2).join("");if(f(Le)===Y)return oe}}})("teacher",I.teacherId,L,ee)==="unavailable"&&H.push(`VOLASYON: ${I.teacherId} retmeni ${L} ${ee}. saatte megul ama ders atand!`),ge.subjectId){const ae=n.find($=>$.id===ge.subjectId);if(ae){const $=mc(ae.name);D.get(`subjectname-${$}-${L}-${ee}`)==="unavailable"&&H.push(`VOLASYON: ${ae.name} dersi ${L} ${ee}. saatte yasak ama ${I.teacherId} tarafndan ${ge.classId} snfna verildi!`)}}})})});const J=C.unassignedTasks.filter(I=>!I.mapping.id.startsWith("auto-kulup-teacher-")).map(I=>({className:t.find(L=>L.id===I.mapping.classId)?.name||"Bilinmeyen",subjectName:n.find(L=>L.id===I.mapping.subjectId)?.name||"Bilinmeyen",teacherName:e.find(L=>L.id===I.mapping.teacherId)?.name||"Bilinmeyen",missingHours:I.blockLength})),Z=new Map,O=new Map,Q="|||";r.filter(I=>!I.id.startsWith("auto-kulup-teacher-")).forEach(I=>{const L=`${I.classId}${Q}${I.subjectId}`,F=Z.get(L);F?F.count+=I.weeklyHours:Z.set(L,{classId:I.classId,subjectId:I.subjectId,count:I.weeklyHours})}),C.grid&&Object.entries(C.grid).forEach(([I,L])=>{Object.values(L).forEach(F=>{Object.values(F).forEach(ee=>{if(ee&&ee.subjectId){const ge=`${I}${Q}${ee.subjectId}`;O.set(ge,(O.get(ge)||0)+1)}})})}),Z.forEach((I,L)=>{const F=O.get(L)||0;I.count!==F&&(I.count-F,t.find(ee=>ee.id===I.classId)?.name||I.classId,n.find(ee=>ee.id===I.subjectId)?.name||I.subjectId)});const U=new Map,V=new Map;return r.filter(I=>!I.id.startsWith("auto-kulup-teacher-")).forEach(I=>{const L=I.teacherId,F=U.get(L);F?F.count+=I.weeklyHours:U.set(L,{teacherId:L,count:I.weeklyHours})}),C.grid&&Object.values(C.grid).forEach(I=>{Object.values(I).forEach(L=>{Object.values(L).forEach(F=>{F&&F.teacherId&&!F.teacherId.startsWith("KULP")&&V.set(F.teacherId,(V.get(F.teacherId)||0)+1)})})}),U.forEach((I,L)=>{const F=V.get(L)||0;I.count!==F&&(I.count-F,e.find(ee=>ee.id===L)?.name)}),{success:!0,schedules:C.schedules,statistics:{totalLessonsToPlace:v,placedLessons:C.placedLessons,unassignedLessons:J},warnings:C.placedLessons<v?[`Eksik ders: ${v-C.placedLessons}`]:[],errors:H.slice(0,10),finalGrid:C.grid||{}}}const pp=[{id:"basic-info",title:"Temel Bilgiler",description:"Program ad ve dnem",icon:DE},{id:"subjects",title:"Dersler",description:"Ders seimi ve saatleri",icon:wa},{id:"classes",title:"Snflar",description:"Snf seimi ve zellikleri",icon:ms},{id:"classrooms",title:"Derslikler",description:"Derslik ynetimi",icon:_d},{id:"teachers",title:"retmenler",description:"retmen seimi ve dersleri",icon:ei},{id:"constraints",title:"Kstlamalar",description:"Zaman kurallar",icon:fi},{id:"generation",title:"Program Olutur",description:"Otomatik oluturma",icon:Bf}],HL=()=>{const r=xc(),{confirmation:e,showConfirmation:t,hideConfirmation:n}=Eo(),s=Bo(),{data:i}=or("teachers"),{data:l}=or("classes"),{data:c}=or("subjects"),{add:u,update:d,data:f}=or("schedule-templates"),{add:v,update:x,data:y,remove:C}=or("schedules"),{success:N,error:E,warning:_,info:P}=xa(),[H,D]=Ee.useState(0),[J,Z]=Ee.useState({basicInfo:{name:"",academicYear:"2024/2025",semester:"Gz",startDate:"2024-09-01",endDate:"2025-06-13",description:"",institutionTitle:"Okul Mdr",dailyHours:9,weekDays:5,weekendClasses:!1},subjects:{selectedSubjects:[],subjectHours:{},subjectPriorities:{}},classes:{selectedClasses:[],classCapacities:{},classPreferences:{}},classrooms:[],teachers:{selectedTeachers:[],teacherSubjects:{},teacherMaxHours:{},teacherPreferences:{}},constraints:{timeConstraints:[],fixedSlots:[],globalRules:{maxDailyHoursTeacher:6,maxDailyHoursClass:9,maxConsecutiveHours:3,avoidConsecutiveSameSubject:!0,preferMorningHours:!0,avoidFirstLastPeriod:!1,lunchBreakRequired:!0,lunchBreakDuration:1,useDistributionPatterns:!0,preferBlockScheduling:!0,enforceDistributionPatterns:!0,maximumBlockSize:2}},generationSettings:{algorithm:"balanced",prioritizeTeacherPreferences:!0,prioritizeClassPreferences:!0,allowOverlaps:!1,generateMultipleOptions:!0,optimizationLevel:"balanced"}}),[O,Q]=Ee.useState(new Set),[U,V]=Ee.useState(null),[I,L]=Ee.useState("initial"),[F,ee]=Ee.useState(null),[ge,ue]=Ee.useState(0),[fe,ae]=Ee.useState(!1),[$,me]=Ee.useState(!1),z=Ee.useRef(!1);Ee.useEffect(()=>{const pt=new URLSearchParams(s.search).get("templateId");if(pt&&f.length>0){const he=f.find(Se=>Se.id===pt);if(he&&he.wizardData){V(pt);const Se={...he.wizardData};Se.constraints?.timeConstraints&&(Se.constraints.timeConstraints=Se.constraints.timeConstraints.map(X=>({...X,entityId:RA(X.entityId,X.entityType)}))),Z(Se);const Qe=new Set;he.wizardData.basicInfo?.name&&Qe.add(0),he.wizardData.subjects?.selectedSubjects?.length>0&&Qe.add(1),he.wizardData.classes?.selectedClasses?.length>0&&Qe.add(2),he.wizardData.classrooms?.length>0&&Qe.add(3),he.wizardData.teachers?.selectedTeachers?.length>0&&Qe.add(4),he.wizardData.constraints&&Qe.add(5),Q(Qe)}}},[s.search,f]),Ee.useEffect(()=>{if(!y||y.length===0)return;const ct=new Map;y.forEach(pt=>{const he=ct.get(pt.teacherId)||[];he.push(pt),ct.set(pt.teacherId,he)}),ct.forEach((pt,he)=>{if(pt.length>1){pt.sort((Se,Qe)=>{const X=Ie=>Ie?typeof Ie.toMillis=="function"?Ie.toMillis():Ie.seconds?Ie.seconds*1e3:Ie instanceof Date?Ie.getTime():0:0,ne=X(Se.updatedAt);return X(Qe.updatedAt)-ne});for(let Se=1;Se<pt.length;Se++)C(pt[Se].id);P("Veri Temizlii",`retmen ${he} iin ift kaytlar temizlendi.`)}})},[y]);const S=ct=>{Z(pt=>({...pt,teachers:{...pt.teachers,selectedTeachers:ct}}))},K=pp[H],Y=()=>{switch(K.id){case"basic-info":return!!(J.basicInfo.name&&J.basicInfo.academicYear);case"subjects":return J.subjects.selectedSubjects.length>0;case"classes":return J.classes.selectedClasses.length>0;case"teachers":return J.teachers.selectedTeachers.length>0;default:return!0}},G=()=>{Y()?(Q(ct=>new Set(Array.from(ct).concat(H))),H<pp.length-1&&D(H+1)):_(" Eksik Bilgi","Ltfen gerekli alanlar doldurun")},oe=()=>{H>0&&D(H-1)},ye=ct=>{(O.has(ct)||ct<H)&&Y()&&D(ct)},Le=(ct,pt)=>{Z(he=>({...he,[ct]:pt}))},be=async()=>{if(!J.basicInfo.name){_(" Program Ad Gerekli","Ltfen program adn girin");return}ae(!0);try{const ct={name:J.basicInfo.name,description:J.basicInfo.description,academicYear:J.basicInfo.academicYear,semester:J.basicInfo.semester,updatedAt:new Date,wizardData:J,status:"draft",generatedSchedules:[]};if(U)await d(U,ct),N(" ablon Gncellendi",`'${ct.name}' baaryla gncellendi`);else{const pt=await u(ct);if(pt.success&&pt.id)V(pt.id),r(`/schedule-wizard?templateId=${pt.id}`,{replace:!0}),N(" ablon Kaydedildi",`'${ct.name}' baaryla kaydedildi`);else throw new Error(pt.error||"ablon eklenirken bilinmeyen bir hata olutu.")}}catch(ct){E(" Kayt Hatas",`ablon kaydedilirken bir hata olutu: ${ct.message}`)}finally{ae(!1)}},je=()=>{L("generating"),z.current=!1,setTimeout(async()=>{try{P("Kulp dersleri atanyor...");const{mappings:ct,errors:pt}=M2(J,i,l,c);if(pt.length>0){E("Planlama Hatas",`Kulpler atanamad:
- ${pt.join(`
- `)}`),L("initial");return}const he=ct.filter(Qe=>Qe.subjectId==="auto-subject-kulup"),Se=await V2(he,i,l,c,J.constraints?.timeConstraints||[],J.constraints.globalRules,z,Qe=>{},void 0,J.constraints?.fixedSlots||[]);ee(Se),L("club_pre_assigned"),N("Kulp Dersleri Atand","Kulp dersleri baaryla yerletirildi.")}catch(ct){console.error(ct),E("Kritik Hata",`Kulp atamas srasnda beklenmedik bir hata olutu: ${ct.message}`),L("initial")}finally{me(!1)}},50)},Ge=async()=>{if(F){ae(!0);try{const ct={};Object.entries(F.finalGrid).forEach(([Se,Qe])=>{Object.entries(Qe).forEach(([X,ne])=>{Object.entries(ne).forEach(([pe,Ie])=>{if(Ie?.teacherId){const se=Ie.teacherId;if(!ct[se]){ct[se]={};const Te=["Pazartesi","Sal","aramba","Perembe","Cuma"],we=["1","2","3","4","5","6","7","8","9","10"];Te.forEach(Be=>{ct[se][Be]={},we.forEach(Fe=>ct[se][Be][Fe]=null)})}ct[se][X][pe]={classId:Se,subjectId:Ie.subjectId}}})})});const pt=[];for(const Se in ct){const Qe=ct[Se];let X=!1;for(const ne in Qe){for(const pe in Qe[ne])if(Qe[ne][pe]?.subjectId==="auto-subject-kulup"){X=!0;break}if(X)break}X&&pt.push({teacherId:Se,schedule:Qe,updatedAt:new Date})}const he=pt.map(async Se=>{const Qe=y.find(X=>X.teacherId===Se.teacherId);Qe?await x(Qe.id,{schedule:Se.schedule,updatedAt:new Date}):await v(Se)});await Promise.all(he),N("Kulpler Kaydedildi","Kulp atamalar baaryla kaydedildi. imdi kalan dersleri atayabilirsiniz."),L("club_saved")}catch(ct){console.error(ct),E("Kayt Hatas",`Kulpler kaydedilirken bir sorun olutu: ${ct.message}`)}finally{ae(!1)}}},tt=async()=>{me(!0),await new Promise(ct=>setTimeout(ct,100));try{const{mappings:ct}=M2(J,i,l,c),pt=ct.filter(Qe=>Qe.subjectId!=="auto-subject-kulup"),he=(F?.schedules||[]).map(Qe=>{const X={};return Object.entries(Qe.schedule||{}).forEach(([ne,pe])=>{Object.entries(pe||{}).forEach(([Ie,se])=>{se&&(se.subjectId==="auto-subject-kulup"||se.teacherId==="KULP"||se.classId?.startsWith("generic-")||se.isFixed)&&(X[ne]||(X[ne]={}),X[ne][Ie]=se)})}),{...Qe,schedule:X}}),Se=await V2(pt,i,l,c,J.constraints?.timeConstraints||[],J.constraints.globalRules,z,Qe=>{ue(Qe)},he,J.constraints?.fixedSlots||[]);ee(Se),L("completed"),N("Program Tamamland","Tm dersler baaryla datld.")}catch(ct){console.error(ct),E("Datm Hatas",`Ders datm srasnda bir hata olutu: ${ct.message}`)}finally{me(!1)}},it=async()=>{if(F){ae(!0);try{const ct=[],pt={};let he=0;F.finalGrid&&Object.entries(F.finalGrid).forEach(([Be,Fe])=>{Object.entries(Fe).forEach(([De,At])=>{Object.entries(At).forEach(([_e,Pe])=>{if(Pe)if(Pe.teacherId&&Pe.subjectId){pt[Pe.teacherId]||(pt[Pe.teacherId]={teacherId:Pe.teacherId,schedule:{Pazartesi:{},Sal:{},aramba:{},Perembe:{},Cuma:{}}});const Ye=pt[Pe.teacherId].schedule[De][_e];if(Ye){console.error(` [AKIMA] ${Pe.teacherId} ${De} ${_e}: ${Ye.classId} korunuyor, ${Be} atlanyor!`);return}pt[Pe.teacherId].schedule[De][_e]={classId:Be,subjectId:Pe.subjectId,...Pe.isFixed&&{isFixed:!0},...Pe.isFixedSlot&&{isFixedSlot:!0}}}else he++,console.error(` [ATLANAN-SLOT] ${Be} ${De} ${_e}: teacherId=${Pe.teacherId}, subjectId=${Pe.subjectId}`)})})}),he>0&&console.error(` [ZET] ${he} slot atland (teacherId veya subjectId eksik)!`);let Se=0,Qe=0;const X={};Object.entries(F.finalGrid||{}).forEach(([Be,Fe])=>{Object.entries(Fe).forEach(([De,At])=>{Object.entries(At).forEach(([_e,Pe])=>{Pe&&(Se++,Pe.teacherId&&Pe.subjectId&&(Qe++,X[Be]=(X[Be]||0)+1))})})});let ne=0;const pe={};Object.values(pt).forEach(Be=>{Object.values(Be.schedule).forEach(Fe=>{Object.values(Fe).forEach(De=>{De&&De.classId&&(ne++,pe[De.classId]=(pe[De.classId]||0)+1)})}),ct.push(Be)});let Ie=0,se=0;const Te=ct.map(async Be=>{const Fe=y.filter(At=>At.teacherId===Be.teacherId);let De=0;if(Object.values(Be.schedule).forEach(At=>{Object.values(At).forEach(_e=>{_e&&_e.classId&&De++})}),Fe.length>0)for(const At of Fe)await C(At.id);try{await v(Be),Ie+=De,se++}catch(At){console.error(` [HATA] ${Be.teacherId} iin kaydetme baarsz:`,At)}});await Promise.all(Te);const we={name:J.basicInfo.name||`Program ${new Date().toLocaleDateString("tr-TR")}`,description:J.basicInfo.description||"Sihirbaz tarafndan oluturuldu",academicYear:J.basicInfo.academicYear,semester:J.basicInfo.semester,updatedAt:new Date,wizardData:J,status:"published",generatedSchedules:[]};U?await d(U,we):await u(we),N(" Program Kaydedildi!",`${F.schedules.length} retmen iin program gncellendi ve taslak kaydedildi.`),r("/all-schedules")}catch(ct){E("Kayt Hatas",`Program kaydedilirken bir hata olutu: ${ct.message}`)}finally{ae(!1)}}},It=()=>{z.current=!0},le=()=>{const ct=F?.statistics.totalLessonsToPlace||J.subjects.selectedSubjects.reduce((Se,Qe)=>Se+(J.subjects.subjectHours[Qe]||0),0)||0,pt=()=>{t({title:"Tm Programlar Sil",message:`Mevcut tm ders programlar kalc olarak silinecek.
Bu ilem geri alnamaz ve sfrdan balamanz gerekecek.

Devam etmek istiyor musunuz?`,type:"danger",confirmText:"Evet, Hepsini Sil",cancelText:"Vazge",confirmVariant:"danger"},()=>{y.forEach(Se=>C(Se.id)),N("Baarl","Tm programlar temizlendi.")})},he=async Se=>{ae(!0);try{const Qe=Se.map(async ne=>{const pe=y.find(Ie=>Ie.teacherId===ne.teacherId);pe?await x(pe.id,{schedule:ne.schedule,updatedAt:new Date}):await v(ne)});await Promise.all(Qe);const X={name:J.basicInfo.name||`Program ${new Date().toLocaleDateString("tr-TR")}`,description:J.basicInfo.description||"Sihirbaz tarafndan oluturuldu",academicYear:J.basicInfo.academicYear,semester:J.basicInfo.semester,updatedAt:new Date,wizardData:J,status:"published",generatedSchedules:[]};U?await d(U,X):await u(X),N(" Program Kaydedildi!","Tm deiiklikler baaryla kaydedildi."),r("/all-schedules")}catch(Qe){E("Kayt Hatas",`Program kaydedilirken bir hata olutu: ${Qe.message}`)}finally{ae(!1)}};return A.jsx(LL,{generationPhase:I,generationResult:F,isGenerating:$,isSaving:fe,optimizationProgress:ge,existingSchedules:y,classes:l,teachers:i,subjects:c,totalLessons:ct,onPreAssignClubs:je,onSaveClubs:Ge,onAssignRemaining:tt,onSaveAndExit:it,onStopOptimization:It,onManualEdit:()=>L("manual_editing"),onManualEditCancel:()=>L("completed"),onManualEditSave:he,onDeleteAllSchedules:pt})},ft=()=>{switch(K.id){case"basic-info":return A.jsx(vL,{data:J.basicInfo,onUpdate:ct=>Le("basicInfo",ct)});case"subjects":return A.jsx(wL,{data:J.subjects,onUpdate:ct=>Le("subjects",ct),subjects:c});case"classes":return A.jsx(xL,{data:J,onUpdate:ct=>Le("classes",ct.classes),classes:l});case"classrooms":return A.jsx(bL,{data:J,onUpdate:ct=>Le("classrooms",ct.classrooms)});case"teachers":return A.jsx(BL,{selectedTeachers:J.teachers.selectedTeachers,onSelectedTeachersChange:S,wizardData:J,all_classes:l,teachers:i});case"constraints":return A.jsx(TL,{data:J,onUpdate:ct=>Le("constraints",ct.constraints),teachers:i,classes:l,subjects:c});case"generation":return le();default:return A.jsx("div",{children:"Bilinmeyen adm"})}};return A.jsxs("div",{className:"min-h-screen bg-gray-50",children:[A.jsx(PL,{title:J.basicInfo.name||"Program",stepInfo:`Adm ${H+1}: ${K.title}`,isEditing:!!U,isSaving:fe,canSaveTemplate:!!J.basicInfo.name,onSaveTemplate:be}),A.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[A.jsx(QL,{steps:pp,currentStepIndex:H,completedSteps:O,onStepClick:ye}),A.jsx("div",{className:"lg:col-span-3",children:A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[A.jsx("div",{className:"p-6",children:ft()}),A.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsx(Ct,{onClick:oe,icon:Kj,variant:"secondary",disabled:H===0,children:"nceki"}),H<pp.length-1&&A.jsx(Ct,{onClick:G,icon:av,variant:"primary",disabled:!Y(),children:"Sonraki"})]})})]})})]})}),A.jsx(KA,{...e,onClose:n})]})};var Av=function(r,e){return Av=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},Av(r,e)};function zA(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Av(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ov=function(){return ov=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ov.apply(this,arguments)};function Zi(r,e,t,n){function s(i){return i instanceof t?i:new t(function(l){l(i)})}return new(t||(t=Promise))(function(i,l){function c(f){try{d(n.next(f))}catch(v){l(v)}}function u(f){try{d(n.throw(f))}catch(v){l(v)}}function d(f){f.done?i(f.value):s(f.value).then(c,u)}d((n=n.apply(r,[])).next())})}function Pi(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(d){return function(f){return u([d,f])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,s=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){t.label=d[1];break}if(d[0]===6&&t.label<i[1]){t.label=i[1],i=d;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(d);break}i[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(r,t)}catch(f){d=[6,f],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function mp(r,e,t){if(arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||e)}var ul=(function(){function r(e,t,n,s){this.left=e,this.top=t,this.width=n,this.height=s}return r.prototype.add=function(e,t,n,s){return new r(this.left+e,this.top+t,this.width+n,this.height+s)},r.fromClientRect=function(e,t){return new r(t.left+e.windowBounds.left,t.top+e.windowBounds.top,t.width,t.height)},r.fromDOMRectList=function(e,t){var n=Array.from(t).find(function(s){return s.width!==0});return n?new r(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):r.EMPTY},r.EMPTY=new r(0,0,0,0),r})(),Cg=function(r,e){return ul.fromClientRect(r,e.getBoundingClientRect())},VL=function(r){var e=r.body,t=r.documentElement;if(!e||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,t.scrollWidth),Math.max(e.offsetWidth,t.offsetWidth),Math.max(e.clientWidth,t.clientWidth)),s=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));return new ul(0,0,n,s)},Eg=function(r){for(var e=[],t=0,n=r.length;t<n;){var s=r.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){var i=r.charCodeAt(t++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),t--)}else e.push(s)}return e},us=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],s=-1,i="";++s<t;){var l=r[s];l<=65535?n.push(l):(l-=65536,n.push((l>>10)+55296,l%1024+56320)),(s+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},K2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",KL=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gp=0;gp<K2.length;gp++)KL[K2.charCodeAt(gp)]=gp;var z2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Eh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yp=0;yp<z2.length;yp++)Eh[z2.charCodeAt(yp)]=yp;var zL=function(r){var e=r.length*.75,t=r.length,n,s=0,i,l,c,u;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),f=Array.isArray(d)?d:new Uint8Array(d);for(n=0;n<t;n+=4)i=Eh[r.charCodeAt(n)],l=Eh[r.charCodeAt(n+1)],c=Eh[r.charCodeAt(n+2)],u=Eh[r.charCodeAt(n+3)],f[s++]=i<<2|l>>4,f[s++]=(l&15)<<4|c>>2,f[s++]=(c&3)<<6|u&63;return d},GL=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},$L=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},ru=5,H1=11,M0=2,qL=H1-ru,WE=65536>>ru,WL=1<<ru,H0=WL-1,YL=1024>>ru,JL=WE+YL,XL=JL,ZL=32,eQ=XL+ZL,tQ=65536>>H1,rQ=1<<qL,nQ=rQ-1,G2=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},sQ=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},iQ=function(r,e){var t=zL(r),n=Array.isArray(t)?$L(t):new Uint32Array(t),s=Array.isArray(t)?GL(t):new Uint16Array(t),i=24,l=G2(s,i/2,n[4]/2),c=n[5]===2?G2(s,(i+n[4])/2):sQ(n,Math.ceil((i+n[4])/4));return new aQ(n[0],n[1],n[2],n[3],l,c)},aQ=(function(){function r(e,t,n,s,i,l){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=l}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>ru],t=(t<<M0)+(e&H0),this.data[t];if(e<=65535)return t=this.index[WE+(e-55296>>ru)],t=(t<<M0)+(e&H0),this.data[t];if(e<this.highStart)return t=eQ-tQ+(e>>H1),t=this.index[t],t+=e>>ru&nQ,t=this.index[t],t=(t<<M0)+(e&H0),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",AQ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vp=0;vp<$2.length;vp++)AQ[$2.charCodeAt(vp)]=vp;var oQ="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",q2=50,lQ=1,YE=2,JE=3,cQ=4,uQ=5,W2=7,XE=8,Y2=9,Zl=10,lv=11,J2=12,cv=13,dQ=14,Ih=15,uv=16,wp=17,hh=18,hQ=19,X2=20,dv=21,fh=22,V0=23,Ou=24,Pa=25,_h=26,Nh=27,Mu=28,fQ=29,Yc=30,pQ=31,xp=32,bp=33,hv=34,fv=35,pv=36,sf=37,mv=38,am=39,Am=40,K0=41,ZE=42,mQ=43,gQ=[9001,65288],eI="!",Er="",Bp="",gv=iQ(oQ),qo=[Yc,pv],yv=[lQ,YE,JE,uQ],tI=[Zl,XE],Z2=[Nh,_h],yQ=yv.concat(tI),eb=[mv,am,Am,hv,fv],vQ=[Ih,cv],wQ=function(r,e){e===void 0&&(e="strict");var t=[],n=[],s=[];return r.forEach(function(i,l){var c=gv.get(i);if(c>q2?(s.push(!0),c-=q2):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(l),t.push(uv);if(c===cQ||c===lv){if(l===0)return n.push(l),t.push(Yc);var u=t[l-1];return yQ.indexOf(u)===-1?(n.push(n[l-1]),t.push(u)):(n.push(l),t.push(Yc))}if(n.push(l),c===pQ)return t.push(e==="strict"?dv:sf);if(c===ZE||c===fQ)return t.push(Yc);if(c===mQ)return i>=131072&&i<=196605||i>=196608&&i<=262141?t.push(sf):t.push(Yc);t.push(c)}),[n,t,s]},z0=function(r,e,t,n){var s=n[t];if(Array.isArray(r)?r.indexOf(s)!==-1:r===s)for(var i=t;i<=n.length;){i++;var l=n[i];if(l===e)return!0;if(l!==Zl)break}if(s===Zl)for(var i=t;i>0;){i--;var c=n[i];if(Array.isArray(r)?r.indexOf(c)!==-1:r===c)for(var u=t;u<=n.length;){u++;var l=n[u];if(l===e)return!0;if(l!==Zl)break}if(c!==Zl)break}return!1},tb=function(r,e){for(var t=r;t>=0;){var n=e[t];if(n===Zl)t--;else return n}return 0},xQ=function(r,e,t,n,s){if(t[n]===0)return Er;var i=n-1;if(Array.isArray(s)&&s[i]===!0)return Er;var l=i-1,c=i+1,u=e[i],d=l>=0?e[l]:0,f=e[c];if(u===YE&&f===JE)return Er;if(yv.indexOf(u)!==-1)return eI;if(yv.indexOf(f)!==-1||tI.indexOf(f)!==-1)return Er;if(tb(i,e)===XE)return Bp;if(gv.get(r[i])===lv||(u===xp||u===bp)&&gv.get(r[c])===lv||u===W2||f===W2||u===Y2||[Zl,cv,Ih].indexOf(u)===-1&&f===Y2||[wp,hh,hQ,Ou,Mu].indexOf(f)!==-1||tb(i,e)===fh||z0(V0,fh,i,e)||z0([wp,hh],dv,i,e)||z0(J2,J2,i,e))return Er;if(u===Zl)return Bp;if(u===V0||f===V0)return Er;if(f===uv||u===uv)return Bp;if([cv,Ih,dv].indexOf(f)!==-1||u===dQ||d===pv&&vQ.indexOf(u)!==-1||u===Mu&&f===pv||f===X2||qo.indexOf(f)!==-1&&u===Pa||qo.indexOf(u)!==-1&&f===Pa||u===Nh&&[sf,xp,bp].indexOf(f)!==-1||[sf,xp,bp].indexOf(u)!==-1&&f===_h||qo.indexOf(u)!==-1&&Z2.indexOf(f)!==-1||Z2.indexOf(u)!==-1&&qo.indexOf(f)!==-1||[Nh,_h].indexOf(u)!==-1&&(f===Pa||[fh,Ih].indexOf(f)!==-1&&e[c+1]===Pa)||[fh,Ih].indexOf(u)!==-1&&f===Pa||u===Pa&&[Pa,Mu,Ou].indexOf(f)!==-1)return Er;if([Pa,Mu,Ou,wp,hh].indexOf(f)!==-1)for(var v=i;v>=0;){var x=e[v];if(x===Pa)return Er;if([Mu,Ou].indexOf(x)!==-1)v--;else break}if([Nh,_h].indexOf(f)!==-1)for(var v=[wp,hh].indexOf(u)!==-1?l:i;v>=0;){var x=e[v];if(x===Pa)return Er;if([Mu,Ou].indexOf(x)!==-1)v--;else break}if(mv===u&&[mv,am,hv,fv].indexOf(f)!==-1||[am,hv].indexOf(u)!==-1&&[am,Am].indexOf(f)!==-1||[Am,fv].indexOf(u)!==-1&&f===Am||eb.indexOf(u)!==-1&&[X2,_h].indexOf(f)!==-1||eb.indexOf(f)!==-1&&u===Nh||qo.indexOf(u)!==-1&&qo.indexOf(f)!==-1||u===Ou&&qo.indexOf(f)!==-1||qo.concat(Pa).indexOf(u)!==-1&&f===fh&&gQ.indexOf(r[c])===-1||qo.concat(Pa).indexOf(f)!==-1&&u===hh)return Er;if(u===K0&&f===K0){for(var y=t[i],C=1;y>0&&(y--,e[y]===K0);)C++;if(C%2!==0)return Er}return u===xp&&f===bp?Er:Bp},bQ=function(r,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=wQ(r,e.lineBreak),n=t[0],s=t[1],i=t[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(c){return[Pa,Yc,ZE].indexOf(c)!==-1?sf:c}));var l=e.wordBreak==="keep-all"?i.map(function(c,u){return c&&r[u]>=19968&&r[u]<=40959}):void 0;return[n,s,l]},BQ=(function(){function r(e,t,n,s){this.codePoints=e,this.required=t===eI,this.start=n,this.end=s}return r.prototype.slice=function(){return us.apply(void 0,this.codePoints.slice(this.start,this.end))},r})(),CQ=function(r,e){var t=Eg(r),n=bQ(t,e),s=n[0],i=n[1],l=n[2],c=t.length,u=0,d=0;return{next:function(){if(d>=c)return{done:!0,value:null};for(var f=Er;d<c&&(f=xQ(t,i,s,++d,l))===Er;);if(f!==Er||d===c){var v=new BQ(t,f,u,d);return u=d,{value:v,done:!1}}return{done:!0,value:null}}}},EQ=1,IQ=2,Cf=4,rb=8,Pm=10,nb=47,Dh=92,_Q=9,NQ=32,Cp=34,ph=61,SQ=35,kQ=36,FQ=37,Ep=39,Ip=40,mh=41,TQ=95,ma=45,UQ=33,jQ=60,LQ=62,QQ=64,PQ=91,DQ=93,RQ=61,OQ=123,_p=63,MQ=125,sb=124,HQ=126,VQ=128,ib=65533,G0=42,eu=43,KQ=44,zQ=58,GQ=59,af=46,$Q=0,qQ=8,WQ=11,YQ=14,JQ=31,XQ=127,fo=-1,rI=48,nI=97,sI=101,ZQ=102,e6=117,t6=122,iI=65,aI=69,AI=70,r6=85,n6=90,Ri=function(r){return r>=rI&&r<=57},s6=function(r){return r>=55296&&r<=57343},Hu=function(r){return Ri(r)||r>=iI&&r<=AI||r>=nI&&r<=ZQ},i6=function(r){return r>=nI&&r<=t6},a6=function(r){return r>=iI&&r<=n6},A6=function(r){return i6(r)||a6(r)},o6=function(r){return r>=VQ},Np=function(r){return r===Pm||r===_Q||r===NQ},Dm=function(r){return A6(r)||o6(r)||r===TQ},ab=function(r){return Dm(r)||Ri(r)||r===ma},l6=function(r){return r>=$Q&&r<=qQ||r===WQ||r>=YQ&&r<=JQ||r===XQ},Gl=function(r,e){return r!==Dh?!1:e!==Pm},Sp=function(r,e,t){return r===ma?Dm(e)||Gl(e,t):Dm(r)?!0:!!(r===Dh&&Gl(r,e))},$0=function(r,e,t){return r===eu||r===ma?Ri(e)?!0:e===af&&Ri(t):Ri(r===af?e:r)},c6=function(r){var e=0,t=1;(r[e]===eu||r[e]===ma)&&(r[e]===ma&&(t=-1),e++);for(var n=[];Ri(r[e]);)n.push(r[e++]);var s=n.length?parseInt(us.apply(void 0,n),10):0;r[e]===af&&e++;for(var i=[];Ri(r[e]);)i.push(r[e++]);var l=i.length,c=l?parseInt(us.apply(void 0,i),10):0;(r[e]===aI||r[e]===sI)&&e++;var u=1;(r[e]===eu||r[e]===ma)&&(r[e]===ma&&(u=-1),e++);for(var d=[];Ri(r[e]);)d.push(r[e++]);var f=d.length?parseInt(us.apply(void 0,d),10):0;return t*(s+c*Math.pow(10,-l))*Math.pow(10,u*f)},u6={type:2},d6={type:3},h6={type:4},f6={type:13},p6={type:8},m6={type:21},g6={type:9},y6={type:10},v6={type:11},w6={type:12},x6={type:14},kp={type:23},b6={type:1},B6={type:25},C6={type:24},E6={type:26},I6={type:27},_6={type:28},N6={type:29},S6={type:31},vv={type:32},oI=(function(){function r(){this._value=[]}return r.prototype.write=function(e){this._value=this._value.concat(Eg(e))},r.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==vv;)e.push(t),t=this.consumeToken();return e},r.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Cp:return this.consumeStringToken(Cp);case SQ:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(ab(t)||Gl(n,s)){var i=Sp(t,n,s)?IQ:EQ,l=this.consumeName();return{type:5,value:l,flags:i}}break;case kQ:if(this.peekCodePoint(0)===ph)return this.consumeCodePoint(),f6;break;case Ep:return this.consumeStringToken(Ep);case Ip:return u6;case mh:return d6;case G0:if(this.peekCodePoint(0)===ph)return this.consumeCodePoint(),x6;break;case eu:if($0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case KQ:return h6;case ma:var c=e,u=this.peekCodePoint(0),d=this.peekCodePoint(1);if($0(c,u,d))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(Sp(c,u,d))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(u===ma&&d===LQ)return this.consumeCodePoint(),this.consumeCodePoint(),C6;break;case af:if($0(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case nb:if(this.peekCodePoint(0)===G0)for(this.consumeCodePoint();;){var f=this.consumeCodePoint();if(f===G0&&(f=this.consumeCodePoint(),f===nb))return this.consumeToken();if(f===fo)return this.consumeToken()}break;case zQ:return E6;case GQ:return I6;case jQ:if(this.peekCodePoint(0)===UQ&&this.peekCodePoint(1)===ma&&this.peekCodePoint(2)===ma)return this.consumeCodePoint(),this.consumeCodePoint(),B6;break;case QQ:var v=this.peekCodePoint(0),x=this.peekCodePoint(1),y=this.peekCodePoint(2);if(Sp(v,x,y)){var l=this.consumeName();return{type:7,value:l}}break;case PQ:return _6;case Dh:if(Gl(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case DQ:return N6;case RQ:if(this.peekCodePoint(0)===ph)return this.consumeCodePoint(),p6;break;case OQ:return v6;case MQ:return w6;case e6:case r6:var C=this.peekCodePoint(0),N=this.peekCodePoint(1);return C===eu&&(Hu(N)||N===_p)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case sb:if(this.peekCodePoint(0)===ph)return this.consumeCodePoint(),g6;if(this.peekCodePoint(0)===sb)return this.consumeCodePoint(),m6;break;case HQ:if(this.peekCodePoint(0)===ph)return this.consumeCodePoint(),y6;break;case fo:return vv}return Np(e)?(this.consumeWhiteSpace(),S6):Ri(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Dm(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:us(e)}},r.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},r.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},r.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},r.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();Hu(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===_p&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(us.apply(void 0,e.map(function(u){return u===_p?rI:u})),16),i=parseInt(us.apply(void 0,e.map(function(u){return u===_p?AI:u})),16);return{type:30,start:s,end:i}}var l=parseInt(us.apply(void 0,e),16);if(this.peekCodePoint(0)===ma&&Hu(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var c=[];Hu(t)&&c.length<6;)c.push(t),t=this.consumeCodePoint();var i=parseInt(us.apply(void 0,c),16);return{type:30,start:l,end:i}}else return{type:30,start:l,end:l}},r.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ip?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ip?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},r.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===fo)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===Ep||t===Cp){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===fo||this.peekCodePoint(0)===mh)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),kp)}for(;;){var s=this.consumeCodePoint();if(s===fo||s===mh)return{type:22,value:us.apply(void 0,e)};if(Np(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===fo||this.peekCodePoint(0)===mh?(this.consumeCodePoint(),{type:22,value:us.apply(void 0,e)}):(this.consumeBadUrlRemnants(),kp);if(s===Cp||s===Ep||s===Ip||l6(s))return this.consumeBadUrlRemnants(),kp;if(s===Dh)if(Gl(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),kp;else e.push(s)}},r.prototype.consumeWhiteSpace=function(){for(;Np(this.peekCodePoint(0));)this.consumeCodePoint()},r.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===mh||e===fo)return;Gl(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},r.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var s=Math.min(t,e);n+=us.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},r.prototype.consumeStringToken=function(e){var t="",n=0;do{var s=this._value[n];if(s===fo||s===void 0||s===e)return t+=this.consumeStringSlice(n),{type:0,value:t};if(s===Pm)return this._value.splice(0,n),b6;if(s===Dh){var i=this._value[n+1];i!==fo&&i!==void 0&&(i===Pm?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):Gl(s,i)&&(t+=this.consumeStringSlice(n),t+=us(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},r.prototype.consumeNumber=function(){var e=[],t=Cf,n=this.peekCodePoint(0);for((n===eu||n===ma)&&e.push(this.consumeCodePoint());Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===af&&Ri(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=rb;Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===aI||n===sI)&&((s===eu||s===ma)&&Ri(i)||Ri(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=rb;Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[c6(e),t]},r.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],s=this.peekCodePoint(0),i=this.peekCodePoint(1),l=this.peekCodePoint(2);if(Sp(s,i,l)){var c=this.consumeName();return{type:15,number:t,flags:n,unit:c}}return s===FQ?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},r.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Hu(e)){for(var t=us(e);Hu(this.peekCodePoint(0))&&t.length<6;)t+=us(this.consumeCodePoint());Np(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||s6(n)||n>1114111?ib:n}return e===fo?ib:e},r.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(ab(t))e+=us(t);else if(Gl(t,this.peekCodePoint(0)))e+=us(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),e}},r})(),lI=(function(){function r(e){this._tokens=e}return r.create=function(e){var t=new oI;return t.write(e),new r(t.read())},r.parseValue=function(e){return r.create(e).parseComponentValue()},r.parseValues=function(e){return r.create(e).parseComponentValues()},r.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},r.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===32)return e;e.push(t),e.push()}},r.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},r.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||F6(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},r.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},r.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?vv:e},r.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},r})(),Ef=function(r){return r.type===15},Rd=function(r){return r.type===17},ln=function(r){return r.type===20},k6=function(r){return r.type===0},wv=function(r,e){return ln(r)&&r.value===e},cI=function(r){return r.type!==31},Nd=function(r){return r.type!==31&&r.type!==4},Io=function(r){var e=[],t=[];return r.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&e.push(t),e},F6=function(r,e){return e===11&&r.type===12||e===28&&r.type===29?!0:e===2&&r.type===3},gc=function(r){return r.type===17||r.type===15},_s=function(r){return r.type===16||gc(r)},uI=function(r){return r.length>1?[r[0],r[1]]:[r[0]]},pi={type:17,number:0,flags:Cf},V1={type:16,number:50,flags:Cf},ec={type:16,number:100,flags:Cf},Sh=function(r,e,t){var n=r[0],s=r[1];return[yn(n,e),yn(typeof s<"u"?s:n,t)]},yn=function(r,e){if(r.type===16)return r.number/100*e;if(Ef(r))switch(r.unit){case"rem":case"em":return 16*r.number;default:return r.number}return r.number},dI="deg",hI="grad",fI="rad",pI="turn",Ig={name:"angle",parse:function(r,e){if(e.type===15)switch(e.unit){case dI:return Math.PI*e.number/180;case hI:return Math.PI/200*e.number;case fI:return e.number;case pI:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},mI=function(r){return r.type===15&&(r.unit===dI||r.unit===hI||r.unit===fI||r.unit===pI)},gI=function(r){var e=r.filter(ln).map(function(t){return t.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[pi,pi];case"to top":case"bottom":return pA(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[pi,ec];case"to right":case"left":return pA(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ec,ec];case"to bottom":case"top":return pA(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ec,pi];case"to left":case"right":return pA(270)}return 0},pA=function(r){return Math.PI*r/180},cc={name:"color",parse:function(r,e){if(e.type===18){var t=T6[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(r,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3);return tc(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),i=e.value.substring(2,3),l=e.value.substring(3,4);return tc(parseInt(n+n,16),parseInt(s+s,16),parseInt(i+i,16),parseInt(l+l,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6);return tc(parseInt(n,16),parseInt(s,16),parseInt(i,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),i=e.value.substring(4,6),l=e.value.substring(6,8);return tc(parseInt(n,16),parseInt(s,16),parseInt(i,16),parseInt(l,16)/255)}}if(e.type===20){var c=al[e.value.toUpperCase()];if(typeof c<"u")return c}return al.TRANSPARENT}},uc=function(r){return(255&r)===0},Js=function(r){var e=255&r,t=255&r>>8,n=255&r>>16,s=255&r>>24;return e<255?"rgba("+s+","+n+","+t+","+e/255+")":"rgb("+s+","+n+","+t+")"},tc=function(r,e,t,n){return(r<<24|e<<16|t<<8|Math.round(n*255)<<0)>>>0},Ab=function(r,e){if(r.type===17)return r.number;if(r.type===16){var t=e===3?1:255;return e===3?r.number/100*t:Math.round(r.number/100*t)}return 0},ob=function(r,e){var t=e.filter(Nd);if(t.length===3){var n=t.map(Ab),s=n[0],i=n[1],l=n[2];return tc(s,i,l,1)}if(t.length===4){var c=t.map(Ab),s=c[0],i=c[1],l=c[2],u=c[3];return tc(s,i,l,u)}return 0};function q0(r,e,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(e-r)*t*6+r:t<1/2?e:t<2/3?(e-r)*6*(2/3-t)+r:r}var lb=function(r,e){var t=e.filter(Nd),n=t[0],s=t[1],i=t[2],l=t[3],c=(n.type===17?pA(n.number):Ig.parse(r,n))/(Math.PI*2),u=_s(s)?s.number/100:0,d=_s(i)?i.number/100:0,f=typeof l<"u"&&_s(l)?yn(l,1):1;if(u===0)return tc(d*255,d*255,d*255,1);var v=d<=.5?d*(u+1):d+u-d*u,x=d*2-v,y=q0(x,v,c+1/3),C=q0(x,v,c),N=q0(x,v,c-1/3);return tc(y*255,C*255,N*255,f)},T6={hsl:lb,hsla:lb,rgb:ob,rgba:ob},Rh=function(r,e){return cc.parse(r,lI.create(e).parseComponentValue())},al={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},U6={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(ln(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},j6={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_g=function(r,e){var t=cc.parse(r,e[0]),n=e[1];return n&&_s(n)?{color:t,stop:n}:{color:t,stop:null}},cb=function(r,e){var t=r[0],n=r[r.length-1];t.stop===null&&(t.stop=pi),n.stop===null&&(n.stop=ec);for(var s=[],i=0,l=0;l<r.length;l++){var c=r[l].stop;if(c!==null){var u=yn(c,e);u>i?s.push(u):s.push(i),i=u}else s.push(null)}for(var d=null,l=0;l<s.length;l++){var f=s[l];if(f===null)d===null&&(d=l);else if(d!==null){for(var v=l-d,x=s[d-1],y=(f-x)/(v+1),C=1;C<=v;C++)s[d+C-1]=y*C;d=null}}return r.map(function(N,E){var _=N.color;return{color:_,stop:Math.max(Math.min(1,s[E]/e),0)}})},L6=function(r,e,t){var n=e/2,s=t/2,i=yn(r[0],e)-n,l=s-yn(r[1],t);return(Math.atan2(l,i)+Math.PI*2)%(Math.PI*2)},Q6=function(r,e,t){var n=typeof r=="number"?r:L6(r,e,t),s=Math.abs(e*Math.sin(n))+Math.abs(t*Math.cos(n)),i=e/2,l=t/2,c=s/2,u=Math.sin(n-Math.PI/2)*c,d=Math.cos(n-Math.PI/2)*c;return[s,i-d,i+d,l-u,l+u]},DA=function(r,e){return Math.sqrt(r*r+e*e)},ub=function(r,e,t,n,s){var i=[[0,0],[0,e],[r,0],[r,e]];return i.reduce(function(l,c){var u=c[0],d=c[1],f=DA(t-u,n-d);return(s?f<l.optimumDistance:f>l.optimumDistance)?{optimumCorner:c,optimumDistance:f}:l},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},P6=function(r,e,t,n,s){var i=0,l=0;switch(r.size){case 0:r.shape===0?i=l=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-s)):r.shape===1&&(i=Math.min(Math.abs(e),Math.abs(e-n)),l=Math.min(Math.abs(t),Math.abs(t-s)));break;case 2:if(r.shape===0)i=l=Math.min(DA(e,t),DA(e,t-s),DA(e-n,t),DA(e-n,t-s));else if(r.shape===1){var c=Math.min(Math.abs(t),Math.abs(t-s))/Math.min(Math.abs(e),Math.abs(e-n)),u=ub(n,s,e,t,!0),d=u[0],f=u[1];i=DA(d-e,(f-t)/c),l=c*i}break;case 1:r.shape===0?i=l=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(t),Math.abs(t-s)):r.shape===1&&(i=Math.max(Math.abs(e),Math.abs(e-n)),l=Math.max(Math.abs(t),Math.abs(t-s)));break;case 3:if(r.shape===0)i=l=Math.max(DA(e,t),DA(e,t-s),DA(e-n,t),DA(e-n,t-s));else if(r.shape===1){var c=Math.max(Math.abs(t),Math.abs(t-s))/Math.max(Math.abs(e),Math.abs(e-n)),v=ub(n,s,e,t,!1),d=v[0],f=v[1];i=DA(d-e,(f-t)/c),l=c*i}break}return Array.isArray(r.size)&&(i=yn(r.size[0],n),l=r.size.length===2?yn(r.size[1],s):i),[i,l]},D6=function(r,e){var t=pA(180),n=[];return Io(e).forEach(function(s,i){if(i===0){var l=s[0];if(l.type===20&&l.value==="to"){t=gI(s);return}else if(mI(l)){t=Ig.parse(r,l);return}}var c=_g(r,s);n.push(c)}),{angle:t,stops:n,type:1}},Fp=function(r,e){var t=pA(180),n=[];return Io(e).forEach(function(s,i){if(i===0){var l=s[0];if(l.type===20&&["top","left","right","bottom"].indexOf(l.value)!==-1){t=gI(s);return}else if(mI(l)){t=(Ig.parse(r,l)+pA(270))%pA(360);return}}var c=_g(r,s);n.push(c)}),{angle:t,stops:n,type:1}},R6=function(r,e){var t=pA(180),n=[],s=1,i=0,l=3,c=[];return Io(e).forEach(function(u,d){var f=u[0];if(d===0){if(ln(f)&&f.value==="linear"){s=1;return}else if(ln(f)&&f.value==="radial"){s=2;return}}if(f.type===18){if(f.name==="from"){var v=cc.parse(r,f.values[0]);n.push({stop:pi,color:v})}else if(f.name==="to"){var v=cc.parse(r,f.values[0]);n.push({stop:ec,color:v})}else if(f.name==="color-stop"){var x=f.values.filter(Nd);if(x.length===2){var v=cc.parse(r,x[1]),y=x[0];Rd(y)&&n.push({stop:{type:16,number:y.number*100,flags:y.flags},color:v})}}}}),s===1?{angle:(t+pA(180))%pA(360),stops:n,type:s}:{size:l,shape:i,stops:n,position:c,type:s}},yI="closest-side",vI="farthest-side",wI="closest-corner",xI="farthest-corner",bI="circle",BI="ellipse",CI="cover",EI="contain",O6=function(r,e){var t=0,n=3,s=[],i=[];return Io(e).forEach(function(l,c){var u=!0;if(c===0){var d=!1;u=l.reduce(function(v,x){if(d)if(ln(x))switch(x.value){case"center":return i.push(V1),v;case"top":case"left":return i.push(pi),v;case"right":case"bottom":return i.push(ec),v}else(_s(x)||gc(x))&&i.push(x);else if(ln(x))switch(x.value){case bI:return t=0,!1;case BI:return t=1,!1;case"at":return d=!0,!1;case yI:return n=0,!1;case CI:case vI:return n=1,!1;case EI:case wI:return n=2,!1;case xI:return n=3,!1}else if(gc(x)||_s(x))return Array.isArray(n)||(n=[]),n.push(x),!1;return v},u)}if(u){var f=_g(r,l);s.push(f)}}),{size:n,shape:t,stops:s,position:i,type:2}},Tp=function(r,e){var t=0,n=3,s=[],i=[];return Io(e).forEach(function(l,c){var u=!0;if(c===0?u=l.reduce(function(f,v){if(ln(v))switch(v.value){case"center":return i.push(V1),!1;case"top":case"left":return i.push(pi),!1;case"right":case"bottom":return i.push(ec),!1}else if(_s(v)||gc(v))return i.push(v),!1;return f},u):c===1&&(u=l.reduce(function(f,v){if(ln(v))switch(v.value){case bI:return t=0,!1;case BI:return t=1,!1;case EI:case yI:return n=0,!1;case vI:return n=1,!1;case wI:return n=2,!1;case CI:case xI:return n=3,!1}else if(gc(v)||_s(v))return Array.isArray(n)||(n=[]),n.push(v),!1;return f},u)),u){var d=_g(r,l);s.push(d)}}),{size:n,shape:t,stops:s,position:i,type:2}},M6=function(r){return r.type===1},H6=function(r){return r.type===2},K1={name:"image",parse:function(r,e){if(e.type===22){var t={url:e.value,type:0};return r.cache.addImage(e.value),t}if(e.type===18){var n=II[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(r,e.values)}throw new Error("Unsupported image type "+e.type)}};function V6(r){return!(r.type===20&&r.value==="none")&&(r.type!==18||!!II[r.name])}var II={"linear-gradient":D6,"-moz-linear-gradient":Fp,"-ms-linear-gradient":Fp,"-o-linear-gradient":Fp,"-webkit-linear-gradient":Fp,"radial-gradient":O6,"-moz-radial-gradient":Tp,"-ms-radial-gradient":Tp,"-o-radial-gradient":Tp,"-webkit-radial-gradient":Tp,"-webkit-gradient":R6},K6={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e.filter(function(n){return Nd(n)&&V6(n)}).map(function(n){return K1.parse(r,n)})}},z6={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(r,e){return e.map(function(t){if(ln(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},G6={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(r,e){return Io(e).map(function(t){return t.filter(_s)}).map(uI)}},$6={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(r,e){return Io(e).map(function(t){return t.filter(ln).map(function(n){return n.value}).join(" ")}).map(q6)}},q6=function(r){switch(r){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},cd;(function(r){r.AUTO="auto",r.CONTAIN="contain",r.COVER="cover"})(cd||(cd={}));var W6={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(r,e){return Io(e).map(function(t){return t.filter(Y6)})}},Y6=function(r){return ln(r)||_s(r)},Ng=function(r){return{name:"border-"+r+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},J6=Ng("top"),X6=Ng("right"),Z6=Ng("bottom"),eP=Ng("left"),Sg=function(r){return{name:"border-radius-"+r,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return uI(t.filter(_s))}}},tP=Sg("top-left"),rP=Sg("top-right"),nP=Sg("bottom-right"),sP=Sg("bottom-left"),kg=function(r){return{name:"border-"+r+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},iP=kg("top"),aP=kg("right"),AP=kg("bottom"),oP=kg("left"),Fg=function(r){return{name:"border-"+r+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return Ef(t)?t.number:0}}},lP=Fg("top"),cP=Fg("right"),uP=Fg("bottom"),dP=Fg("left"),hP={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fP={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(r,e){return e==="rtl"?1:0}},pP={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(r,e){return e.filter(ln).reduce(function(t,n){return t|mP(n.value)},0)}},mP=function(r){switch(r){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gP={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},yP={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(r,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Rm;(function(r){r.NORMAL="normal",r.STRICT="strict"})(Rm||(Rm={}));var vP={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="strict"?Rm.STRICT:Rm.NORMAL}},wP={name:"line-height",initialValue:"normal",prefix:!1,type:4},db=function(r,e){return ln(r)&&r.value==="normal"?1.2*e:r.type===17?e*r.number:_s(r)?yn(r,e):e},xP={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(r,e){return e.type===20&&e.value==="none"?null:K1.parse(r,e)}},bP={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(r,e){return e==="inside"?0:1}},xv={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Tg=function(r){return{name:"margin-"+r,initialValue:"0",prefix:!1,type:4}},BP=Tg("top"),CP=Tg("right"),EP=Tg("bottom"),IP=Tg("left"),_P={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(r,e){return e.filter(ln).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},NP={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){return e==="break-word"?"break-word":"normal"}},Ug=function(r){return{name:"padding-"+r,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},SP=Ug("top"),kP=Ug("right"),FP=Ug("bottom"),TP=Ug("left"),UP={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(r,e){switch(e){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},jP={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(r,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},LP={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&wv(e[0],"none")?[]:Io(e).map(function(t){for(var n={color:al.TRANSPARENT,offsetX:pi,offsetY:pi,blur:pi},s=0,i=0;i<t.length;i++){var l=t[i];gc(l)?(s===0?n.offsetX=l:s===1?n.offsetY=l:n.blur=l,s++):n.color=cc.parse(r,l)}return n})}},QP={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},PP={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(r,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var t=OP[e.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}return null}},DP=function(r){var e=r.filter(function(t){return t.type===17}).map(function(t){return t.number});return e.length===6?e:null},RP=function(r){var e=r.filter(function(u){return u.type===17}).map(function(u){return u.number}),t=e[0],n=e[1];e[2],e[3];var s=e[4],i=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var l=e[12],c=e[13];return e[14],e[15],e.length===16?[t,n,s,i,l,c]:null},OP={matrix:DP,matrix3d:RP},hb={type:16,number:50,flags:Cf},MP=[hb,hb],HP={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(r,e){var t=e.filter(_s);return t.length!==2?MP:[t[0],t[1]]}},VP={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(r,e){switch(e){case"hidden":return 1;case"collapse":return 2;default:return 0}}},Oh;(function(r){r.NORMAL="normal",r.BREAK_ALL="break-all",r.KEEP_ALL="keep-all"})(Oh||(Oh={}));var KP={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"break-all":return Oh.BREAK_ALL;case"keep-all":return Oh.KEEP_ALL;default:return Oh.NORMAL}}},zP={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(r,e){if(e.type===20)return{auto:!0,order:0};if(Rd(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},_I={name:"time",parse:function(r,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},GP={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(r,e){return Rd(e)?e.number:1}},$P={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},qP={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(r,e){return e.filter(ln).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},WP={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(r,e){var t=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:t.push(s.value);break;case 17:t.push(s.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},YP={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},JP={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(r,e){return Rd(e)?e.number:ln(e)&&e.value==="bold"?700:400}},XP={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.filter(ln).map(function(t){return t.value})}},ZP={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(r,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Ms=function(r,e){return(r&e)!==0},eD={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(r,e){if(e.length===0)return[];var t=e[0];return t.type===20&&t.value==="none"?[]:e}},tD={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;for(var n=[],s=e.filter(cI),i=0;i<s.length;i++){var l=s[i],c=s[i+1];if(l.type===20){var u=c&&Rd(c)?c.number:1;n.push({counter:l.value,increment:u})}}return n}},rD={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return[];for(var t=[],n=e.filter(cI),s=0;s<n.length;s++){var i=n[s],l=n[s+1];if(ln(i)&&i.value!=="none"){var c=l&&Rd(l)?l.number:0;t.push({counter:i.value,reset:c})}}return t}},nD={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(r,e){return e.filter(Ef).map(function(t){return _I.parse(r,t)})}},sD={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(r,e){if(e.length===0)return null;var t=e[0];if(t.type===20&&t.value==="none")return null;var n=[],s=e.filter(k6);if(s.length%2!==0)return null;for(var i=0;i<s.length;i+=2){var l=s[i].value,c=s[i+1].value;n.push({open:l,close:c})}return n}},fb=function(r,e,t){if(!r)return"";var n=r[Math.min(e,r.length-1)];return n?t?n.open:n.close:""},iD={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(r,e){return e.length===1&&wv(e[0],"none")?[]:Io(e).map(function(t){for(var n={color:255,offsetX:pi,offsetY:pi,blur:pi,spread:pi,inset:!1},s=0,i=0;i<t.length;i++){var l=t[i];wv(l,"inset")?n.inset=!0:gc(l)?(s===0?n.offsetX=l:s===1?n.offsetY=l:s===2?n.blur=l:n.spread=l,s++):n.color=cc.parse(r,l)}return n})}},aD={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(r,e){var t=[0,1,2],n=[];return e.filter(ln).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},AD={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},oD={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(r,e){return Ef(e)?e.number:0}},lD=(function(){function r(e,t){var n,s;this.animationDuration=jt(e,nD,t.animationDuration),this.backgroundClip=jt(e,U6,t.backgroundClip),this.backgroundColor=jt(e,j6,t.backgroundColor),this.backgroundImage=jt(e,K6,t.backgroundImage),this.backgroundOrigin=jt(e,z6,t.backgroundOrigin),this.backgroundPosition=jt(e,G6,t.backgroundPosition),this.backgroundRepeat=jt(e,$6,t.backgroundRepeat),this.backgroundSize=jt(e,W6,t.backgroundSize),this.borderTopColor=jt(e,J6,t.borderTopColor),this.borderRightColor=jt(e,X6,t.borderRightColor),this.borderBottomColor=jt(e,Z6,t.borderBottomColor),this.borderLeftColor=jt(e,eP,t.borderLeftColor),this.borderTopLeftRadius=jt(e,tP,t.borderTopLeftRadius),this.borderTopRightRadius=jt(e,rP,t.borderTopRightRadius),this.borderBottomRightRadius=jt(e,nP,t.borderBottomRightRadius),this.borderBottomLeftRadius=jt(e,sP,t.borderBottomLeftRadius),this.borderTopStyle=jt(e,iP,t.borderTopStyle),this.borderRightStyle=jt(e,aP,t.borderRightStyle),this.borderBottomStyle=jt(e,AP,t.borderBottomStyle),this.borderLeftStyle=jt(e,oP,t.borderLeftStyle),this.borderTopWidth=jt(e,lP,t.borderTopWidth),this.borderRightWidth=jt(e,cP,t.borderRightWidth),this.borderBottomWidth=jt(e,uP,t.borderBottomWidth),this.borderLeftWidth=jt(e,dP,t.borderLeftWidth),this.boxShadow=jt(e,iD,t.boxShadow),this.color=jt(e,hP,t.color),this.direction=jt(e,fP,t.direction),this.display=jt(e,pP,t.display),this.float=jt(e,gP,t.cssFloat),this.fontFamily=jt(e,WP,t.fontFamily),this.fontSize=jt(e,YP,t.fontSize),this.fontStyle=jt(e,ZP,t.fontStyle),this.fontVariant=jt(e,XP,t.fontVariant),this.fontWeight=jt(e,JP,t.fontWeight),this.letterSpacing=jt(e,yP,t.letterSpacing),this.lineBreak=jt(e,vP,t.lineBreak),this.lineHeight=jt(e,wP,t.lineHeight),this.listStyleImage=jt(e,xP,t.listStyleImage),this.listStylePosition=jt(e,bP,t.listStylePosition),this.listStyleType=jt(e,xv,t.listStyleType),this.marginTop=jt(e,BP,t.marginTop),this.marginRight=jt(e,CP,t.marginRight),this.marginBottom=jt(e,EP,t.marginBottom),this.marginLeft=jt(e,IP,t.marginLeft),this.opacity=jt(e,GP,t.opacity);var i=jt(e,_P,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=jt(e,NP,t.overflowWrap),this.paddingTop=jt(e,SP,t.paddingTop),this.paddingRight=jt(e,kP,t.paddingRight),this.paddingBottom=jt(e,FP,t.paddingBottom),this.paddingLeft=jt(e,TP,t.paddingLeft),this.paintOrder=jt(e,aD,t.paintOrder),this.position=jt(e,jP,t.position),this.textAlign=jt(e,UP,t.textAlign),this.textDecorationColor=jt(e,$P,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=jt(e,qP,(s=t.textDecorationLine)!==null&&s!==void 0?s:t.textDecoration),this.textShadow=jt(e,LP,t.textShadow),this.textTransform=jt(e,QP,t.textTransform),this.transform=jt(e,PP,t.transform),this.transformOrigin=jt(e,HP,t.transformOrigin),this.visibility=jt(e,VP,t.visibility),this.webkitTextStrokeColor=jt(e,AD,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=jt(e,oD,t.webkitTextStrokeWidth),this.wordBreak=jt(e,KP,t.wordBreak),this.zIndex=jt(e,zP,t.zIndex)}return r.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},r.prototype.isTransparent=function(){return uc(this.backgroundColor)},r.prototype.isTransformed=function(){return this.transform!==null},r.prototype.isPositioned=function(){return this.position!==0},r.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},r.prototype.isFloating=function(){return this.float!==0},r.prototype.isInlineLevel=function(){return Ms(this.display,4)||Ms(this.display,33554432)||Ms(this.display,268435456)||Ms(this.display,536870912)||Ms(this.display,67108864)||Ms(this.display,134217728)},r})(),cD=(function(){function r(e,t){this.content=jt(e,eD,t.content),this.quotes=jt(e,sD,t.quotes)}return r})(),pb=(function(){function r(e,t){this.counterIncrement=jt(e,tD,t.counterIncrement),this.counterReset=jt(e,rD,t.counterReset)}return r})(),jt=function(r,e,t){var n=new oI,s=t!==null&&typeof t<"u"?t.toString():e.initialValue;n.write(s);var i=new lI(n.read());switch(e.type){case 2:var l=i.parseComponentValue();return e.parse(r,ln(l)?l.value:e.initialValue);case 0:return e.parse(r,i.parseComponentValue());case 1:return e.parse(r,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(e.format){case"angle":return Ig.parse(r,i.parseComponentValue());case"color":return cc.parse(r,i.parseComponentValue());case"image":return K1.parse(r,i.parseComponentValue());case"length":var c=i.parseComponentValue();return gc(c)?c:pi;case"length-percentage":var u=i.parseComponentValue();return _s(u)?u:pi;case"time":return _I.parse(r,i.parseComponentValue())}break}},uD="data-html2canvas-debug",dD=function(r){var e=r.getAttribute(uD);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},bv=function(r,e){var t=dD(r);return t===1||e===t},_o=(function(){function r(e,t){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,bv(t,3))debugger;this.styles=new lD(e,window.getComputedStyle(t,null)),Ev(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Cg(this.context,t),bv(t,4)&&(this.flags|=16)}return r})(),hD="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",mb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kh=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Up=0;Up<mb.length;Up++)kh[mb.charCodeAt(Up)]=Up;var fD=function(r){var e=r.length*.75,t=r.length,n,s=0,i,l,c,u;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var d=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),f=Array.isArray(d)?d:new Uint8Array(d);for(n=0;n<t;n+=4)i=kh[r.charCodeAt(n)],l=kh[r.charCodeAt(n+1)],c=kh[r.charCodeAt(n+2)],u=kh[r.charCodeAt(n+3)],f[s++]=i<<2|l>>4,f[s++]=(l&15)<<4|c>>2,f[s++]=(c&3)<<6|u&63;return d},pD=function(r){for(var e=r.length,t=[],n=0;n<e;n+=2)t.push(r[n+1]<<8|r[n]);return t},mD=function(r){for(var e=r.length,t=[],n=0;n<e;n+=4)t.push(r[n+3]<<24|r[n+2]<<16|r[n+1]<<8|r[n]);return t},nu=5,z1=11,W0=2,gD=z1-nu,NI=65536>>nu,yD=1<<nu,Y0=yD-1,vD=1024>>nu,wD=NI+vD,xD=wD,bD=32,BD=xD+bD,CD=65536>>z1,ED=1<<gD,ID=ED-1,gb=function(r,e,t){return r.slice?r.slice(e,t):new Uint16Array(Array.prototype.slice.call(r,e,t))},_D=function(r,e,t){return r.slice?r.slice(e,t):new Uint32Array(Array.prototype.slice.call(r,e,t))},ND=function(r,e){var t=fD(r),n=Array.isArray(t)?mD(t):new Uint32Array(t),s=Array.isArray(t)?pD(t):new Uint16Array(t),i=24,l=gb(s,i/2,n[4]/2),c=n[5]===2?gb(s,(i+n[4])/2):_D(n,Math.ceil((i+n[4])/4));return new SD(n[0],n[1],n[2],n[3],l,c)},SD=(function(){function r(e,t,n,s,i,l){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=s,this.index=i,this.data=l}return r.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=this.index[e>>nu],t=(t<<W0)+(e&Y0),this.data[t];if(e<=65535)return t=this.index[NI+(e-55296>>nu)],t=(t<<W0)+(e&Y0),this.data[t];if(e<this.highStart)return t=BD-CD+(e>>z1),t=this.index[t],t+=e>>nu&ID,t=this.index[t],t=(t<<W0)+(e&Y0),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},r})(),yb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kD=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jp=0;jp<yb.length;jp++)kD[yb.charCodeAt(jp)]=jp;var FD=1,J0=2,X0=3,vb=4,wb=5,TD=7,xb=8,Z0=9,ey=10,bb=11,Bb=12,Cb=13,Eb=14,ty=15,UD=function(r){for(var e=[],t=0,n=r.length;t<n;){var s=r.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){var i=r.charCodeAt(t++);(i&64512)===56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),t--)}else e.push(s)}return e},jD=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,r);var t=r.length;if(!t)return"";for(var n=[],s=-1,i="";++s<t;){var l=r[s];l<=65535?n.push(l):(l-=65536,n.push((l>>10)+55296,l%1024+56320)),(s+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},LD=ND(hD),dA="",ry="",QD=function(r){return LD.get(r)},PD=function(r,e,t){var n=t-2,s=e[n],i=e[t-1],l=e[t];if(i===J0&&l===X0)return dA;if(i===J0||i===X0||i===vb||l===J0||l===X0||l===vb)return ry;if(i===xb&&[xb,Z0,bb,Bb].indexOf(l)!==-1||(i===bb||i===Z0)&&(l===Z0||l===ey)||(i===Bb||i===ey)&&l===ey||l===Cb||l===wb||l===TD||i===FD)return dA;if(i===Cb&&l===Eb){for(;s===wb;)s=e[--n];if(s===Eb)return dA}if(i===ty&&l===ty){for(var c=0;s===ty;)c++,s=e[--n];if(c%2===0)return dA}return ry},DD=function(r){var e=UD(r),t=e.length,n=0,s=0,i=e.map(QD);return{next:function(){if(n>=t)return{done:!0,value:null};for(var l=dA;n<t&&(l=PD(e,i,++n))===dA;);if(l!==dA||n===t){var c=jD.apply(null,e.slice(s,n));return s=n,{value:c,done:!1}}return{done:!0,value:null}}}},RD=function(r){for(var e=DD(r),t=[],n;!(n=e.next()).done;)n.value&&t.push(n.value.slice());return t},OD=function(r){var e=123;if(r.createRange){var t=r.createRange();if(t.getBoundingClientRect){var n=r.createElement("boundtest");n.style.height=e+"px",n.style.display="block",r.body.appendChild(n),t.selectNode(n);var s=t.getBoundingClientRect(),i=Math.round(s.height);if(r.body.removeChild(n),i===e)return!0}}return!1},MD=function(r){var e=r.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",r.body.appendChild(e);var t=r.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=Eg(n.data).map(function(u){return us(u)}),i=0,l={},c=s.every(function(u,d){t.setStart(n,i),t.setEnd(n,i+u.length);var f=t.getBoundingClientRect();i+=u.length;var v=f.x>l.x||f.y>l.y;return l=f,d===0?!0:v});return r.body.removeChild(e),c},HD=function(){return typeof new Image().crossOrigin<"u"},VD=function(){return typeof new XMLHttpRequest().responseType=="string"},KD=function(r){var e=new Image,t=r.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch{return!1}return!0},Ib=function(r){return r[0]===0&&r[1]===255&&r[2]===0&&r[3]===255},zD=function(r){var e=r.createElement("canvas"),t=100;e.width=t,e.height=t;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var s=new Image,i=e.toDataURL();s.src=i;var l=Bv(t,t,0,0,s);return n.fillStyle="red",n.fillRect(0,0,t,t),_b(l).then(function(c){n.drawImage(c,0,0);var u=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var d=r.createElement("div");return d.style.backgroundImage="url("+i+")",d.style.height=t+"px",Ib(u)?_b(Bv(t,t,0,0,d)):Promise.reject(!1)}).then(function(c){return n.drawImage(c,0,0),Ib(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},Bv=function(r,e,t,n,s){var i="http://www.w3.org/2000/svg",l=document.createElementNS(i,"svg"),c=document.createElementNS(i,"foreignObject");return l.setAttributeNS(null,"width",r.toString()),l.setAttributeNS(null,"height",e.toString()),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",t.toString()),c.setAttributeNS(null,"y",n.toString()),c.setAttributeNS(null,"externalResourcesRequired","true"),l.appendChild(c),c.appendChild(s),l},_b=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},ci={get SUPPORT_RANGE_BOUNDS(){var r=OD(document);return Object.defineProperty(ci,"SUPPORT_RANGE_BOUNDS",{value:r}),r},get SUPPORT_WORD_BREAKING(){var r=ci.SUPPORT_RANGE_BOUNDS&&MD(document);return Object.defineProperty(ci,"SUPPORT_WORD_BREAKING",{value:r}),r},get SUPPORT_SVG_DRAWING(){var r=KD(document);return Object.defineProperty(ci,"SUPPORT_SVG_DRAWING",{value:r}),r},get SUPPORT_FOREIGNOBJECT_DRAWING(){var r=typeof Array.from=="function"&&typeof window.fetch=="function"?zD(document):Promise.resolve(!1);return Object.defineProperty(ci,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:r}),r},get SUPPORT_CORS_IMAGES(){var r=HD();return Object.defineProperty(ci,"SUPPORT_CORS_IMAGES",{value:r}),r},get SUPPORT_RESPONSE_TYPE(){var r=VD();return Object.defineProperty(ci,"SUPPORT_RESPONSE_TYPE",{value:r}),r},get SUPPORT_CORS_XHR(){var r="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ci,"SUPPORT_CORS_XHR",{value:r}),r},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var r=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ci,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:r}),r}},Mh=(function(){function r(e,t){this.text=e,this.bounds=t}return r})(),GD=function(r,e,t,n){var s=WD(e,t),i=[],l=0;return s.forEach(function(c){if(t.textDecorationLine.length||c.trim().length>0)if(ci.SUPPORT_RANGE_BOUNDS){var u=Nb(n,l,c.length).getClientRects();if(u.length>1){var d=G1(c),f=0;d.forEach(function(x){i.push(new Mh(x,ul.fromDOMRectList(r,Nb(n,f+l,x.length).getClientRects()))),f+=x.length})}else i.push(new Mh(c,ul.fromDOMRectList(r,u)))}else{var v=n.splitText(c.length);i.push(new Mh(c,$D(r,n))),n=v}else ci.SUPPORT_RANGE_BOUNDS||(n=n.splitText(c.length));l+=c.length}),i},$D=function(r,e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var i=Cg(r,n);return n.firstChild&&s.replaceChild(n.firstChild,n),i}}return ul.EMPTY},Nb=function(r,e,t){var n=r.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(r,e),s.setEnd(r,e+t),s},G1=function(r){if(ci.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(r)).map(function(t){return t.segment})}return RD(r)},qD=function(r,e){if(ci.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(r)).map(function(n){return n.segment})}return JD(r,e)},WD=function(r,e){return e.letterSpacing!==0?G1(r):qD(r,e)},YD=[32,160,4961,65792,65793,4153,4241],JD=function(r,e){for(var t=CQ(r,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,i=function(){if(s.value){var l=s.value.slice(),c=Eg(l),u="";c.forEach(function(d){YD.indexOf(d)===-1?u+=us(d):(u.length&&n.push(u),n.push(us(d)),u="")}),u.length&&n.push(u)}};!(s=t.next()).done;)i();return n},XD=(function(){function r(e,t,n){this.text=ZD(t.data,n.textTransform),this.textBounds=GD(e,this.text,n,t)}return r})(),ZD=function(r,e){switch(e){case 1:return r.toLowerCase();case 3:return r.replace(eR,tR);case 2:return r.toUpperCase();default:return r}},eR=/(^|\s|:|-|\(|\))([a-z])/g,tR=function(r,e,t){return r.length>0?e+t.toUpperCase():r},SI=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e})(_o),kI=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e})(_o),FI=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this,i=new XMLSerializer,l=Cg(t,n);return n.setAttribute("width",l.width+"px"),n.setAttribute("height",l.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e})(_o),TI=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;return s.value=n.value,s}return e})(_o),Cv=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e})(_o),rR=[{type:15,flags:0,unit:"px",number:3}],nR=[{type:16,flags:0,number:50}],sR=function(r){return r.width>r.height?new ul(r.left+(r.width-r.height)/2,r.top,r.height,r.height):r.width<r.height?new ul(r.left,r.top+(r.height-r.width)/2,r.width,r.width):r},iR=function(r){var e=r.type===aR?new Array(r.value.length+1).join(""):r.value;return e.length===0?r.placeholder||"":e},Om="checkbox",Mm="radio",aR="password",Sb=707406591,$1=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=iR(n),(s.type===Om||s.type===Mm)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=sR(s.bounds)),s.type){case Om:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=rR;break;case Mm:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=nR;break}return s}return e})(_o),UI=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return s.value=i&&i.text||"",s}return e})(_o),jI=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;return s.value=n.value,s}return e})(_o),LI=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=PI(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Rh(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):al.TRANSPARENT,l=n.contentWindow.document.body?Rh(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):al.TRANSPARENT;s.backgroundColor=uc(i)?uc(l)?s.styles.backgroundColor:l:i}}catch{}return s}return e})(_o),AR=["OL","UL","MENU"],om=function(r,e,t,n){for(var s=e.firstChild,i=void 0;s;s=i)if(i=s.nextSibling,DI(s)&&s.data.trim().length>0)t.textNodes.push(new XD(r,s,t.styles));else if(nd(s))if(HI(s)&&s.assignedNodes)s.assignedNodes().forEach(function(c){return om(r,c,t,n)});else{var l=QI(r,s);l.styles.isVisible()&&(oR(s,l,n)?l.flags|=4:lR(l.styles)&&(l.flags|=2),AR.indexOf(s.tagName)!==-1&&(l.flags|=8),t.elements.push(l),s.slot,s.shadowRoot?om(r,s.shadowRoot,l,n):!Hm(s)&&!RI(s)&&!Vm(s)&&om(r,s,l,n))}},QI=function(r,e){return Iv(e)?new SI(r,e):OI(e)?new kI(r,e):RI(e)?new FI(r,e):cR(e)?new TI(r,e):uR(e)?new Cv(r,e):dR(e)?new $1(r,e):Vm(e)?new UI(r,e):Hm(e)?new jI(r,e):MI(e)?new LI(r,e):new _o(r,e)},PI=function(r,e){var t=QI(r,e);return t.flags|=4,om(r,e,t,t),t},oR=function(r,e,t){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||q1(r)&&t.styles.isTransparent()},lR=function(r){return r.isPositioned()||r.isFloating()},DI=function(r){return r.nodeType===Node.TEXT_NODE},nd=function(r){return r.nodeType===Node.ELEMENT_NODE},Ev=function(r){return nd(r)&&typeof r.style<"u"&&!lm(r)},lm=function(r){return typeof r.className=="object"},cR=function(r){return r.tagName==="LI"},uR=function(r){return r.tagName==="OL"},dR=function(r){return r.tagName==="INPUT"},hR=function(r){return r.tagName==="HTML"},RI=function(r){return r.tagName==="svg"},q1=function(r){return r.tagName==="BODY"},OI=function(r){return r.tagName==="CANVAS"},kb=function(r){return r.tagName==="VIDEO"},Iv=function(r){return r.tagName==="IMG"},MI=function(r){return r.tagName==="IFRAME"},Fb=function(r){return r.tagName==="STYLE"},fR=function(r){return r.tagName==="SCRIPT"},Hm=function(r){return r.tagName==="TEXTAREA"},Vm=function(r){return r.tagName==="SELECT"},HI=function(r){return r.tagName==="SLOT"},Tb=function(r){return r.tagName.indexOf("-")>0},pR=(function(){function r(){this.counters={}}return r.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},r.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},r.prototype.pop=function(e){var t=this;e.forEach(function(n){return t.counters[n].pop()})},r.prototype.parse=function(e){var t=this,n=e.counterIncrement,s=e.counterReset,i=!0;n!==null&&n.forEach(function(c){var u=t.counters[c.counter];u&&c.increment!==0&&(i=!1,u.length||u.push(1),u[Math.max(0,u.length-1)]+=c.increment)});var l=[];return i&&s.forEach(function(c){var u=t.counters[c.counter];l.push(c.counter),u||(u=t.counters[c.counter]=[]),u.push(c.reset)}),l},r})(),Ub={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},jb={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mR={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},gR={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Vu=function(r,e,t,n,s,i){return r<e||r>t?Af(r,s,i.length>0):n.integers.reduce(function(l,c,u){for(;r>=c;)r-=c,l+=n.values[u];return l},"")+i},VI=function(r,e,t,n){var s="";do t||r--,s=n(r)+s,r/=e;while(r*e>=e);return s},cs=function(r,e,t,n,s){var i=t-e+1;return(r<0?"-":"")+(VI(Math.abs(r),i,n,function(l){return us(Math.floor(l%i)+e)})+s)},Gc=function(r,e,t){t===void 0&&(t=". ");var n=e.length;return VI(Math.abs(r),n,!1,function(s){return e[Math.floor(s%n)]})+t},Xu=1,Kl=2,zl=4,Fh=8,Wo=function(r,e,t,n,s,i){if(r<-9999||r>9999)return Af(r,4,s.length>0);var l=Math.abs(r),c=s;if(l===0)return e[0]+c;for(var u=0;l>0&&u<=4;u++){var d=l%10;d===0&&Ms(i,Xu)&&c!==""?c=e[d]+c:d>1||d===1&&u===0||d===1&&u===1&&Ms(i,Kl)||d===1&&u===1&&Ms(i,zl)&&r>100||d===1&&u>1&&Ms(i,Fh)?c=e[d]+(u>0?t[u-1]:"")+c:d===1&&u>0&&(c=t[u-1]+c),l=Math.floor(l/10)}return(r<0?n:"")+c},Lb="",Qb="",Pb="",ny="",Af=function(r,e,t){var n=t?". ":"",s=t?"":"",i=t?", ":"",l=t?" ":"";switch(e){case 0:return""+l;case 1:return""+l;case 2:return""+l;case 5:var c=cs(r,48,57,!0,n);return c.length<4?"0"+c:c;case 4:return Gc(r,"",s);case 6:return Vu(r,1,3999,Ub,3,n).toLowerCase();case 7:return Vu(r,1,3999,Ub,3,n);case 8:return cs(r,945,969,!1,n);case 9:return cs(r,97,122,!1,n);case 10:return cs(r,65,90,!1,n);case 11:return cs(r,1632,1641,!0,n);case 12:case 49:return Vu(r,1,9999,jb,3,n);case 35:return Vu(r,1,9999,jb,3,n).toLowerCase();case 13:return cs(r,2534,2543,!0,n);case 14:case 30:return cs(r,6112,6121,!0,n);case 15:return Gc(r,"",s);case 16:return Gc(r,"",s);case 17:case 48:return Wo(r,"",Lb,"",s,Kl|zl|Fh);case 47:return Wo(r,"",Qb,"",s,Xu|Kl|zl|Fh);case 42:return Wo(r,"",Lb,"",s,Kl|zl|Fh);case 41:return Wo(r,"",Qb,"",s,Xu|Kl|zl|Fh);case 26:return Wo(r,"","",Pb,s,0);case 25:return Wo(r,"","",Pb,s,Xu|Kl|zl);case 31:return Wo(r,"","",ny,i,Xu|Kl|zl);case 33:return Wo(r,"","",ny,i,0);case 32:return Wo(r,"","",ny,i,Xu|Kl|zl);case 18:return cs(r,2406,2415,!0,n);case 20:return Vu(r,1,19999,gR,3,n);case 21:return cs(r,2790,2799,!0,n);case 22:return cs(r,2662,2671,!0,n);case 22:return Vu(r,1,10999,mR,3,n);case 23:return Gc(r,"");case 24:return Gc(r,"");case 27:return cs(r,3302,3311,!0,n);case 28:return Gc(r,"",s);case 29:return Gc(r,"",s);case 34:return cs(r,3792,3801,!0,n);case 37:return cs(r,6160,6169,!0,n);case 38:return cs(r,4160,4169,!0,n);case 39:return cs(r,2918,2927,!0,n);case 40:return cs(r,1776,1785,!0,n);case 43:return cs(r,3046,3055,!0,n);case 44:return cs(r,3174,3183,!0,n);case 45:return cs(r,3664,3673,!0,n);case 46:return cs(r,3872,3881,!0,n);default:return cs(r,48,57,!0,n)}},KI="data-html2canvas-ignore",Db=(function(){function r(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new pR,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return r.prototype.toIFrame=function(e,t){var n=this,s=yR(e,t);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,l=e.defaultView.pageYOffset,c=s.contentWindow,u=c.document,d=xR(s).then(function(){return Zi(n,void 0,void 0,function(){var f,v;return Pi(this,function(x){switch(x.label){case 0:return this.scrolledElements.forEach(ER),c&&(c.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.scrollY!==t.top||c.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-t.left,c.scrollY-t.top,0,0))),f=this.options.onclone,v=this.clonedReferenceElement,typeof v>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:u.fonts&&u.fonts.ready?[4,u.fonts.ready]:[3,2];case 1:x.sent(),x.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,wR(u)]:[3,4];case 3:x.sent(),x.label=4;case 4:return typeof f=="function"?[2,Promise.resolve().then(function(){return f(u,v)}).then(function(){return s})]:[2,s]}})})});return u.open(),u.write(BR(document.doctype)+"<html></html>"),CR(this.referenceElement.ownerDocument,i,l),u.replaceChild(u.adoptNode(this.documentElement),u.documentElement),u.close(),d},r.prototype.createElementClone=function(e){if(bv(e,2))debugger;if(OI(e))return this.createCanvasClone(e);if(kb(e))return this.createVideoClone(e);if(Fb(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Iv(t)&&(Iv(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),Tb(t)?this.createCustomElementClone(t):t},r.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return sy(e.style,t),t},r.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(i,l){return l&&typeof l.cssText=="string"?i+l.cssText:i},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return e.cloneNode(!1)},r.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var i=e.getContext("2d"),l=s.getContext("2d");if(l)if(!this.options.allowTaint&&i)l.putImageData(i.getImageData(0,0,e.width,e.height),0,0);else{var c=(t=e.getContext("webgl2"))!==null&&t!==void 0?t:e.getContext("webgl");if(c){var u=c.getContextAttributes();u?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}l.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},r.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},r.prototype.appendChildNode=function(e,t,n){(!nd(t)||!fR(t)&&!t.hasAttribute(KI)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!nd(t)||!Fb(t))&&e.appendChild(this.cloneNode(t,n))},r.prototype.cloneChildNodes=function(e,t,n){for(var s=this,i=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;i;i=i.nextSibling)if(nd(i)&&HI(i)&&typeof i.assignedNodes=="function"){var l=i.assignedNodes();l.length&&l.forEach(function(c){return s.appendChildNode(t,c,n)})}else this.appendChildNode(t,i,n)},r.prototype.cloneNode=function(e,t){if(DI(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&nd(e)&&(Ev(e)||lm(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var i=n.getComputedStyle(e),l=n.getComputedStyle(e,":before"),c=n.getComputedStyle(e,":after");this.referenceElement===e&&Ev(s)&&(this.clonedReferenceElement=s),q1(s)&&NR(s);var u=this.counters.parse(new pb(this.context,i)),d=this.resolvePseudoContent(e,s,l,Hh.BEFORE);Tb(e)&&(t=!0),kb(e)||this.cloneChildNodes(e,s,t),d&&s.insertBefore(d,s.firstChild);var f=this.resolvePseudoContent(e,s,c,Hh.AFTER);return f&&s.appendChild(f),this.counters.pop(u),(i&&(this.options.copyStyles||lm(e))&&!MI(e)||t)&&sy(i,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(Hm(e)||Vm(e))&&(Hm(s)||Vm(s))&&(s.value=e.value),s}return e.cloneNode(!1)},r.prototype.resolvePseudoContent=function(e,t,n,s){var i=this;if(n){var l=n.content,c=t.ownerDocument;if(!(!c||!l||l==="none"||l==="-moz-alt-content"||n.display==="none")){this.counters.parse(new pb(this.context,n));var u=new cD(this.context,n),d=c.createElement("html2canvaspseudoelement");sy(n,d),u.content.forEach(function(v){if(v.type===0)d.appendChild(c.createTextNode(v.value));else if(v.type===22){var x=c.createElement("img");x.src=v.value,x.style.opacity="1",d.appendChild(x)}else if(v.type===18){if(v.name==="attr"){var y=v.values.filter(ln);y.length&&d.appendChild(c.createTextNode(e.getAttribute(y[0].value)||""))}else if(v.name==="counter"){var C=v.values.filter(Nd),N=C[0],E=C[1];if(N&&ln(N)){var _=i.counters.getCounterValue(N.value),P=E&&ln(E)?xv.parse(i.context,E.value):3;d.appendChild(c.createTextNode(Af(_,P,!1)))}}else if(v.name==="counters"){var H=v.values.filter(Nd),N=H[0],D=H[1],E=H[2];if(N&&ln(N)){var J=i.counters.getCounterValues(N.value),Z=E&&ln(E)?xv.parse(i.context,E.value):3,O=D&&D.type===0?D.value:"",Q=J.map(function(I){return Af(I,Z,!1)}).join(O);d.appendChild(c.createTextNode(Q))}}}else if(v.type===20)switch(v.value){case"open-quote":d.appendChild(c.createTextNode(fb(u.quotes,i.quoteDepth++,!0)));break;case"close-quote":d.appendChild(c.createTextNode(fb(u.quotes,--i.quoteDepth,!1)));break;default:d.appendChild(c.createTextNode(v.value))}}),d.className=_v+" "+Nv;var f=s===Hh.BEFORE?" "+_v:" "+Nv;return lm(t)?t.className.baseValue+=f:t.className+=f,d}}},r.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},r})(),Hh;(function(r){r[r.BEFORE=0]="BEFORE",r[r.AFTER=1]="AFTER"})(Hh||(Hh={}));var yR=function(r,e){var t=r.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=e.width.toString(),t.height=e.height.toString(),t.scrolling="no",t.setAttribute(KI,"true"),r.body.appendChild(t),t},vR=function(r){return new Promise(function(e){if(r.complete){e();return}if(!r.src){e();return}r.onload=e,r.onerror=e})},wR=function(r){return Promise.all([].slice.call(r.images,0).map(vR))},xR=function(r){return new Promise(function(e,t){var n=r.contentWindow;if(!n)return t("No window assigned for iframe");var s=n.document;n.onload=r.onload=function(){n.onload=r.onload=null;var i=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(i),e(r))},50)}})},bR=["all","d","content"],sy=function(r,e){for(var t=r.length-1;t>=0;t--){var n=r.item(t);bR.indexOf(n)===-1&&e.style.setProperty(n,r.getPropertyValue(n))}return e},BR=function(r){var e="";return r&&(e+="<!DOCTYPE ",r.name&&(e+=r.name),r.internalSubset&&(e+=r.internalSubset),r.publicId&&(e+='"'+r.publicId+'"'),r.systemId&&(e+='"'+r.systemId+'"'),e+=">"),e},CR=function(r,e,t){r&&r.defaultView&&(e!==r.defaultView.pageXOffset||t!==r.defaultView.pageYOffset)&&r.defaultView.scrollTo(e,t)},ER=function(r){var e=r[0],t=r[1],n=r[2];e.scrollLeft=t,e.scrollTop=n},IR=":before",_R=":after",_v="___html2canvas___pseudoelement_before",Nv="___html2canvas___pseudoelement_after",Rb=`{
    content: "" !important;
    display: none !important;
}`,NR=function(r){SR(r,"."+_v+IR+Rb+`
         .`+Nv+_R+Rb)},SR=function(r,e){var t=r.ownerDocument;if(t){var n=t.createElement("style");n.textContent=e,r.appendChild(n)}},zI=(function(){function r(){}return r.getOrigin=function(e){var t=r._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},r.isSameOrigin=function(e){return r.getOrigin(e)===r._origin},r.setContext=function(e){r._link=e.document.createElement("a"),r._origin=r.getOrigin(e.location.href)},r._origin="about:blank",r})(),kR=(function(){function r(e,t){this.context=e,this._options=t,this._cache={}}return r.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(ay(e)||jR(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},r.prototype.match=function(e){return this._cache[e]},r.prototype.loadImage=function(e){return Zi(this,void 0,void 0,function(){var t,n,s,i,l=this;return Pi(this,function(c){switch(c.label){case 0:return t=zI.isSameOrigin(e),n=!iy(e)&&this._options.useCORS===!0&&ci.SUPPORT_CORS_IMAGES&&!t,s=!iy(e)&&!t&&!ay(e)&&typeof this._options.proxy=="string"&&ci.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!iy(e)&&!ay(e)&&!s&&!n?[2]:(i=e,s?[4,this.proxy(i)]:[3,2]);case 1:i=c.sent(),c.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(u,d){var f=new Image;f.onload=function(){return u(f)},f.onerror=d,(LR(i)||n)&&(f.crossOrigin="anonymous"),f.src=i,f.complete===!0&&setTimeout(function(){return u(f)},500),l._options.imageTimeout>0&&setTimeout(function(){return d("Timed out ("+l._options.imageTimeout+"ms) loading image")},l._options.imageTimeout)})];case 3:return[2,c.sent()]}})})},r.prototype.has=function(e){return typeof this._cache[e]<"u"},r.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},r.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(i,l){var c=ci.SUPPORT_RESPONSE_TYPE?"blob":"text",u=new XMLHttpRequest;u.onload=function(){if(u.status===200)if(c==="text")i(u.response);else{var v=new FileReader;v.addEventListener("load",function(){return i(v.result)},!1),v.addEventListener("error",function(x){return l(x)},!1),v.readAsDataURL(u.response)}else l("Failed to proxy resource "+s+" with status code "+u.status)},u.onerror=l;var d=n.indexOf("?")>-1?"&":"?";if(u.open("GET",""+n+d+"url="+encodeURIComponent(e)+"&responseType="+c),c!=="text"&&u instanceof XMLHttpRequest&&(u.responseType=c),t._options.imageTimeout){var f=t._options.imageTimeout;u.timeout=f,u.ontimeout=function(){return l("Timed out ("+f+"ms) proxying "+s)}}u.send()})},r})(),FR=/^data:image\/svg\+xml/i,TR=/^data:image\/.*;base64,/i,UR=/^data:image\/.*/i,jR=function(r){return ci.SUPPORT_SVG_DRAWING||!QR(r)},iy=function(r){return UR.test(r)},LR=function(r){return TR.test(r)},ay=function(r){return r.substr(0,4)==="blob"},QR=function(r){return r.substr(-3).toLowerCase()==="svg"||FR.test(r)},Ft=(function(){function r(e,t){this.type=0,this.x=e,this.y=t}return r.prototype.add=function(e,t){return new r(this.x+e,this.y+t)},r})(),Ku=function(r,e,t){return new Ft(r.x+(e.x-r.x)*t,r.y+(e.y-r.y)*t)},Lp=(function(){function r(e,t,n,s){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=s}return r.prototype.subdivide=function(e,t){var n=Ku(this.start,this.startControl,e),s=Ku(this.startControl,this.endControl,e),i=Ku(this.endControl,this.end,e),l=Ku(n,s,e),c=Ku(s,i,e),u=Ku(l,c,e);return t?new r(this.start,n,l,u):new r(u,c,i,this.end)},r.prototype.add=function(e,t){return new r(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},r.prototype.reverse=function(){return new r(this.end,this.endControl,this.startControl,this.start)},r})(),hA=function(r){return r.type===1},PR=(function(){function r(e){var t=e.styles,n=e.bounds,s=Sh(t.borderTopLeftRadius,n.width,n.height),i=s[0],l=s[1],c=Sh(t.borderTopRightRadius,n.width,n.height),u=c[0],d=c[1],f=Sh(t.borderBottomRightRadius,n.width,n.height),v=f[0],x=f[1],y=Sh(t.borderBottomLeftRadius,n.width,n.height),C=y[0],N=y[1],E=[];E.push((i+u)/n.width),E.push((C+v)/n.width),E.push((l+N)/n.height),E.push((d+x)/n.height);var _=Math.max.apply(Math,E);_>1&&(i/=_,l/=_,u/=_,d/=_,v/=_,x/=_,C/=_,N/=_);var P=n.width-u,H=n.height-x,D=n.width-v,J=n.height-N,Z=t.borderTopWidth,O=t.borderRightWidth,Q=t.borderBottomWidth,U=t.borderLeftWidth,V=yn(t.paddingTop,e.bounds.width),I=yn(t.paddingRight,e.bounds.width),L=yn(t.paddingBottom,e.bounds.width),F=yn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||l>0?Pn(n.left+U/3,n.top+Z/3,i-U/3,l-Z/3,Yr.TOP_LEFT):new Ft(n.left+U/3,n.top+Z/3),this.topRightBorderDoubleOuterBox=i>0||l>0?Pn(n.left+P,n.top+Z/3,u-O/3,d-Z/3,Yr.TOP_RIGHT):new Ft(n.left+n.width-O/3,n.top+Z/3),this.bottomRightBorderDoubleOuterBox=v>0||x>0?Pn(n.left+D,n.top+H,v-O/3,x-Q/3,Yr.BOTTOM_RIGHT):new Ft(n.left+n.width-O/3,n.top+n.height-Q/3),this.bottomLeftBorderDoubleOuterBox=C>0||N>0?Pn(n.left+U/3,n.top+J,C-U/3,N-Q/3,Yr.BOTTOM_LEFT):new Ft(n.left+U/3,n.top+n.height-Q/3),this.topLeftBorderDoubleInnerBox=i>0||l>0?Pn(n.left+U*2/3,n.top+Z*2/3,i-U*2/3,l-Z*2/3,Yr.TOP_LEFT):new Ft(n.left+U*2/3,n.top+Z*2/3),this.topRightBorderDoubleInnerBox=i>0||l>0?Pn(n.left+P,n.top+Z*2/3,u-O*2/3,d-Z*2/3,Yr.TOP_RIGHT):new Ft(n.left+n.width-O*2/3,n.top+Z*2/3),this.bottomRightBorderDoubleInnerBox=v>0||x>0?Pn(n.left+D,n.top+H,v-O*2/3,x-Q*2/3,Yr.BOTTOM_RIGHT):new Ft(n.left+n.width-O*2/3,n.top+n.height-Q*2/3),this.bottomLeftBorderDoubleInnerBox=C>0||N>0?Pn(n.left+U*2/3,n.top+J,C-U*2/3,N-Q*2/3,Yr.BOTTOM_LEFT):new Ft(n.left+U*2/3,n.top+n.height-Q*2/3),this.topLeftBorderStroke=i>0||l>0?Pn(n.left+U/2,n.top+Z/2,i-U/2,l-Z/2,Yr.TOP_LEFT):new Ft(n.left+U/2,n.top+Z/2),this.topRightBorderStroke=i>0||l>0?Pn(n.left+P,n.top+Z/2,u-O/2,d-Z/2,Yr.TOP_RIGHT):new Ft(n.left+n.width-O/2,n.top+Z/2),this.bottomRightBorderStroke=v>0||x>0?Pn(n.left+D,n.top+H,v-O/2,x-Q/2,Yr.BOTTOM_RIGHT):new Ft(n.left+n.width-O/2,n.top+n.height-Q/2),this.bottomLeftBorderStroke=C>0||N>0?Pn(n.left+U/2,n.top+J,C-U/2,N-Q/2,Yr.BOTTOM_LEFT):new Ft(n.left+U/2,n.top+n.height-Q/2),this.topLeftBorderBox=i>0||l>0?Pn(n.left,n.top,i,l,Yr.TOP_LEFT):new Ft(n.left,n.top),this.topRightBorderBox=u>0||d>0?Pn(n.left+P,n.top,u,d,Yr.TOP_RIGHT):new Ft(n.left+n.width,n.top),this.bottomRightBorderBox=v>0||x>0?Pn(n.left+D,n.top+H,v,x,Yr.BOTTOM_RIGHT):new Ft(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=C>0||N>0?Pn(n.left,n.top+J,C,N,Yr.BOTTOM_LEFT):new Ft(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||l>0?Pn(n.left+U,n.top+Z,Math.max(0,i-U),Math.max(0,l-Z),Yr.TOP_LEFT):new Ft(n.left+U,n.top+Z),this.topRightPaddingBox=u>0||d>0?Pn(n.left+Math.min(P,n.width-O),n.top+Z,P>n.width+O?0:Math.max(0,u-O),Math.max(0,d-Z),Yr.TOP_RIGHT):new Ft(n.left+n.width-O,n.top+Z),this.bottomRightPaddingBox=v>0||x>0?Pn(n.left+Math.min(D,n.width-U),n.top+Math.min(H,n.height-Q),Math.max(0,v-O),Math.max(0,x-Q),Yr.BOTTOM_RIGHT):new Ft(n.left+n.width-O,n.top+n.height-Q),this.bottomLeftPaddingBox=C>0||N>0?Pn(n.left+U,n.top+Math.min(J,n.height-Q),Math.max(0,C-U),Math.max(0,N-Q),Yr.BOTTOM_LEFT):new Ft(n.left+U,n.top+n.height-Q),this.topLeftContentBox=i>0||l>0?Pn(n.left+U+F,n.top+Z+V,Math.max(0,i-(U+F)),Math.max(0,l-(Z+V)),Yr.TOP_LEFT):new Ft(n.left+U+F,n.top+Z+V),this.topRightContentBox=u>0||d>0?Pn(n.left+Math.min(P,n.width+U+F),n.top+Z+V,P>n.width+U+F?0:u-U+F,d-(Z+V),Yr.TOP_RIGHT):new Ft(n.left+n.width-(O+I),n.top+Z+V),this.bottomRightContentBox=v>0||x>0?Pn(n.left+Math.min(D,n.width-(U+F)),n.top+Math.min(H,n.height+Z+V),Math.max(0,v-(O+I)),x-(Q+L),Yr.BOTTOM_RIGHT):new Ft(n.left+n.width-(O+I),n.top+n.height-(Q+L)),this.bottomLeftContentBox=C>0||N>0?Pn(n.left+U+F,n.top+J,Math.max(0,C-(U+F)),N-(Q+L),Yr.BOTTOM_LEFT):new Ft(n.left+U+F,n.top+n.height-(Q+L))}return r})(),Yr;(function(r){r[r.TOP_LEFT=0]="TOP_LEFT",r[r.TOP_RIGHT=1]="TOP_RIGHT",r[r.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Yr||(Yr={}));var Pn=function(r,e,t,n,s){var i=4*((Math.sqrt(2)-1)/3),l=t*i,c=n*i,u=r+t,d=e+n;switch(s){case Yr.TOP_LEFT:return new Lp(new Ft(r,d),new Ft(r,d-c),new Ft(u-l,e),new Ft(u,e));case Yr.TOP_RIGHT:return new Lp(new Ft(r,e),new Ft(r+l,e),new Ft(u,d-c),new Ft(u,d));case Yr.BOTTOM_RIGHT:return new Lp(new Ft(u,e),new Ft(u,e+c),new Ft(r+l,d),new Ft(r,d));case Yr.BOTTOM_LEFT:default:return new Lp(new Ft(u,d),new Ft(u-l,d),new Ft(r,e+c),new Ft(r,e))}},Km=function(r){return[r.topLeftBorderBox,r.topRightBorderBox,r.bottomRightBorderBox,r.bottomLeftBorderBox]},DR=function(r){return[r.topLeftContentBox,r.topRightContentBox,r.bottomRightContentBox,r.bottomLeftContentBox]},zm=function(r){return[r.topLeftPaddingBox,r.topRightPaddingBox,r.bottomRightPaddingBox,r.bottomLeftPaddingBox]},RR=(function(){function r(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return r})(),Qp=(function(){function r(e,t){this.path=e,this.target=t,this.type=1}return r})(),OR=(function(){function r(e){this.opacity=e,this.type=2,this.target=6}return r})(),MR=function(r){return r.type===0},GI=function(r){return r.type===1},HR=function(r){return r.type===2},Ob=function(r,e){return r.length===e.length?r.some(function(t,n){return t===e[n]}):!1},VR=function(r,e,t,n,s){return r.map(function(i,l){switch(l){case 0:return i.add(e,t);case 1:return i.add(e+n,t);case 2:return i.add(e+n,t+s);case 3:return i.add(e,t+s)}return i})},$I=(function(){function r(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return r})(),qI=(function(){function r(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new PR(this.container),this.container.styles.opacity<1&&this.effects.push(new OR(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new RR(n,s,i))}if(this.container.styles.overflowX!==0){var l=Km(this.curves),c=zm(this.curves);Ob(l,c)?this.effects.push(new Qp(l,6)):(this.effects.push(new Qp(l,2)),this.effects.push(new Qp(c,4)))}}return r.prototype.getEffects=function(e){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var i=n.effects.filter(function(u){return!GI(u)});if(t||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,i),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var l=Km(n.curves),c=zm(n.curves);Ob(l,c)||s.unshift(new Qp(c,6))}}else s.unshift.apply(s,i);n=n.parent}return s.filter(function(u){return Ms(u.target,e)})},r})(),Sv=function(r,e,t,n){r.container.elements.forEach(function(s){var i=Ms(s.flags,4),l=Ms(s.flags,2),c=new qI(s,r);Ms(s.styles.display,2048)&&n.push(c);var u=Ms(s.flags,8)?[]:n;if(i||l){var d=i||s.styles.isPositioned()?t:e,f=new $I(c);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var v=s.styles.zIndex.order;if(v<0){var x=0;d.negativeZIndex.some(function(C,N){return v>C.element.container.styles.zIndex.order?(x=N,!1):x>0}),d.negativeZIndex.splice(x,0,f)}else if(v>0){var y=0;d.positiveZIndex.some(function(C,N){return v>=C.element.container.styles.zIndex.order?(y=N+1,!1):y>0}),d.positiveZIndex.splice(y,0,f)}else d.zeroOrAutoZIndexOrTransformedOrOpacity.push(f)}else s.styles.isFloating()?d.nonPositionedFloats.push(f):d.nonPositionedInlineLevel.push(f);Sv(c,f,i?f:t,u)}else s.styles.isInlineLevel()?e.inlineLevel.push(c):e.nonInlineLevel.push(c),Sv(c,e,t,u);Ms(s.flags,8)&&WI(s,u)})},WI=function(r,e){for(var t=r instanceof Cv?r.start:1,n=r instanceof Cv?r.reversed:!1,s=0;s<e.length;s++){var i=e[s];i.container instanceof TI&&typeof i.container.value=="number"&&i.container.value!==0&&(t=i.container.value),i.listValue=Af(t,i.container.styles.listStyleType,!0),t+=n?-1:1}},KR=function(r){var e=new qI(r,null),t=new $I(e),n=[];return Sv(e,t,t,n),WI(e.container,n),t},Mb=function(r,e){switch(e){case 0:return mA(r.topLeftBorderBox,r.topLeftPaddingBox,r.topRightBorderBox,r.topRightPaddingBox);case 1:return mA(r.topRightBorderBox,r.topRightPaddingBox,r.bottomRightBorderBox,r.bottomRightPaddingBox);case 2:return mA(r.bottomRightBorderBox,r.bottomRightPaddingBox,r.bottomLeftBorderBox,r.bottomLeftPaddingBox);default:return mA(r.bottomLeftBorderBox,r.bottomLeftPaddingBox,r.topLeftBorderBox,r.topLeftPaddingBox)}},zR=function(r,e){switch(e){case 0:return mA(r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox,r.topRightBorderBox,r.topRightBorderDoubleOuterBox);case 1:return mA(r.topRightBorderBox,r.topRightBorderDoubleOuterBox,r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox);case 2:return mA(r.bottomRightBorderBox,r.bottomRightBorderDoubleOuterBox,r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox);default:return mA(r.bottomLeftBorderBox,r.bottomLeftBorderDoubleOuterBox,r.topLeftBorderBox,r.topLeftBorderDoubleOuterBox)}},GR=function(r,e){switch(e){case 0:return mA(r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox,r.topRightBorderDoubleInnerBox,r.topRightPaddingBox);case 1:return mA(r.topRightBorderDoubleInnerBox,r.topRightPaddingBox,r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox);case 2:return mA(r.bottomRightBorderDoubleInnerBox,r.bottomRightPaddingBox,r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox);default:return mA(r.bottomLeftBorderDoubleInnerBox,r.bottomLeftPaddingBox,r.topLeftBorderDoubleInnerBox,r.topLeftPaddingBox)}},$R=function(r,e){switch(e){case 0:return Pp(r.topLeftBorderStroke,r.topRightBorderStroke);case 1:return Pp(r.topRightBorderStroke,r.bottomRightBorderStroke);case 2:return Pp(r.bottomRightBorderStroke,r.bottomLeftBorderStroke);default:return Pp(r.bottomLeftBorderStroke,r.topLeftBorderStroke)}},Pp=function(r,e){var t=[];return hA(r)?t.push(r.subdivide(.5,!1)):t.push(r),hA(e)?t.push(e.subdivide(.5,!0)):t.push(e),t},mA=function(r,e,t,n){var s=[];return hA(r)?s.push(r.subdivide(.5,!1)):s.push(r),hA(t)?s.push(t.subdivide(.5,!0)):s.push(t),hA(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),hA(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},YI=function(r){var e=r.bounds,t=r.styles;return e.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Gm=function(r){var e=r.styles,t=r.bounds,n=yn(e.paddingLeft,t.width),s=yn(e.paddingRight,t.width),i=yn(e.paddingTop,t.width),l=yn(e.paddingBottom,t.width);return t.add(n+e.borderLeftWidth,i+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+i+l))},qR=function(r,e){return r===0?e.bounds:r===2?Gm(e):YI(e)},WR=function(r,e){return r===0?e.bounds:r===2?Gm(e):YI(e)},Ay=function(r,e,t){var n=qR(Zu(r.styles.backgroundOrigin,e),r),s=WR(Zu(r.styles.backgroundClip,e),r),i=YR(Zu(r.styles.backgroundSize,e),t,n),l=i[0],c=i[1],u=Sh(Zu(r.styles.backgroundPosition,e),n.width-l,n.height-c),d=JR(Zu(r.styles.backgroundRepeat,e),u,i,n,s),f=Math.round(n.left+u[0]),v=Math.round(n.top+u[1]);return[d,f,v,l,c]},zu=function(r){return ln(r)&&r.value===cd.AUTO},Dp=function(r){return typeof r=="number"},YR=function(r,e,t){var n=e[0],s=e[1],i=e[2],l=r[0],c=r[1];if(!l)return[0,0];if(_s(l)&&c&&_s(c))return[yn(l,t.width),yn(c,t.height)];var u=Dp(i);if(ln(l)&&(l.value===cd.CONTAIN||l.value===cd.COVER)){if(Dp(i)){var d=t.width/t.height;return d<i!=(l.value===cd.COVER)?[t.width,t.width/i]:[t.height*i,t.height]}return[t.width,t.height]}var f=Dp(n),v=Dp(s),x=f||v;if(zu(l)&&(!c||zu(c))){if(f&&v)return[n,s];if(!u&&!x)return[t.width,t.height];if(x&&u){var y=f?n:s*i,C=v?s:n/i;return[y,C]}var N=f?n:t.width,E=v?s:t.height;return[N,E]}if(u){var _=0,P=0;return _s(l)?_=yn(l,t.width):_s(c)&&(P=yn(c,t.height)),zu(l)?_=P*i:(!c||zu(c))&&(P=_/i),[_,P]}var H=null,D=null;if(_s(l)?H=yn(l,t.width):c&&_s(c)&&(D=yn(c,t.height)),H!==null&&(!c||zu(c))&&(D=f&&v?H/n*s:t.height),D!==null&&zu(l)&&(H=f&&v?D/s*n:t.width),H!==null&&D!==null)return[H,D];throw new Error("Unable to calculate background-size for element")},Zu=function(r,e){var t=r[e];return typeof t>"u"?r[0]:t},JR=function(r,e,t,n,s){var i=e[0],l=e[1],c=t[0],u=t[1];switch(r){case 2:return[new Ft(Math.round(n.left),Math.round(n.top+l)),new Ft(Math.round(n.left+n.width),Math.round(n.top+l)),new Ft(Math.round(n.left+n.width),Math.round(u+n.top+l)),new Ft(Math.round(n.left),Math.round(u+n.top+l))];case 3:return[new Ft(Math.round(n.left+i),Math.round(n.top)),new Ft(Math.round(n.left+i+c),Math.round(n.top)),new Ft(Math.round(n.left+i+c),Math.round(n.height+n.top)),new Ft(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new Ft(Math.round(n.left+i),Math.round(n.top+l)),new Ft(Math.round(n.left+i+c),Math.round(n.top+l)),new Ft(Math.round(n.left+i+c),Math.round(n.top+l+u)),new Ft(Math.round(n.left+i),Math.round(n.top+l+u))];default:return[new Ft(Math.round(s.left),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.top)),new Ft(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Ft(Math.round(s.left),Math.round(s.height+s.top))]}},XR="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Hb="Hidden Text",ZR=(function(){function r(e){this._data={},this._document=e}return r.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),s=this._document.createElement("img"),i=this._document.createElement("span"),l=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",l.appendChild(n),s.src=XR,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Hb)),n.appendChild(i),n.appendChild(s);var c=s.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(Hb)),n.style.lineHeight="normal",s.style.verticalAlign="super";var u=s.offsetTop-n.offsetTop+2;return l.removeChild(n),{baseline:c,middle:u}},r.prototype.getMetrics=function(e,t){var n=e+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},r})(),JI=(function(){function r(e,t){this.context=e,this.options=t}return r})(),e8=1e4,t8=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new ZR(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(t){this.ctx.save(),HR(t)&&(this.ctx.globalAlpha=t.opacity),MR(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),GI(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return Zi(this,void 0,void 0,function(){var n;return Pi(this,function(s){switch(s.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(t){return Zi(this,void 0,void 0,function(){return Pi(this,function(n){switch(n.label){case 0:if(Ms(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(t,n,s){var i=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+s);else{var l=G1(t.text);l.reduce(function(c,u){return i.ctx.fillText(u,c,t.bounds.top+s),c+i.ctx.measureText(u).width},t.bounds.left)}},e.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(l){return l==="normal"||l==="small-caps"}).join(""),s=a8(t.fontFamily).join(", "),i=Ef(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,i,s].join(" "),s,i]},e.prototype.renderTextNode=function(t,n){return Zi(this,void 0,void 0,function(){var s,i,l,c,u,d,f,v,x=this;return Pi(this,function(y){return s=this.createFontStyle(n),i=s[0],l=s[1],c=s[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",u=this.fontMetrics.getMetrics(l,c),d=u.baseline,f=u.middle,v=n.paintOrder,t.textBounds.forEach(function(C){v.forEach(function(N){switch(N){case 0:x.ctx.fillStyle=Js(n.color),x.renderTextWithLetterSpacing(C,n.letterSpacing,d);var E=n.textShadow;E.length&&C.text.trim().length&&(E.slice(0).reverse().forEach(function(_){x.ctx.shadowColor=Js(_.color),x.ctx.shadowOffsetX=_.offsetX.number*x.options.scale,x.ctx.shadowOffsetY=_.offsetY.number*x.options.scale,x.ctx.shadowBlur=_.blur.number,x.renderTextWithLetterSpacing(C,n.letterSpacing,d)}),x.ctx.shadowColor="",x.ctx.shadowOffsetX=0,x.ctx.shadowOffsetY=0,x.ctx.shadowBlur=0),n.textDecorationLine.length&&(x.ctx.fillStyle=Js(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(_){switch(_){case 1:x.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top+d),C.bounds.width,1);break;case 2:x.ctx.fillRect(C.bounds.left,Math.round(C.bounds.top),C.bounds.width,1);break;case 3:x.ctx.fillRect(C.bounds.left,Math.ceil(C.bounds.top+f),C.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&C.text.trim().length&&(x.ctx.strokeStyle=Js(n.webkitTextStrokeColor),x.ctx.lineWidth=n.webkitTextStrokeWidth,x.ctx.lineJoin=window.chrome?"miter":"round",x.ctx.strokeText(C.text,C.bounds.left,C.bounds.top+d)),x.ctx.strokeStyle="",x.ctx.lineWidth=0,x.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(t,n,s){if(s&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var i=Gm(t),l=zm(n);this.path(l),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,t.intrinsicWidth,t.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return Zi(this,void 0,void 0,function(){var n,s,i,l,c,u,P,P,d,f,v,x,D,y,C,J,N,E,_,P,H,D,J;return Pi(this,function(Z){switch(Z.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,s=t.curves,i=n.styles,l=0,c=n.textNodes,Z.label=1;case 1:return l<c.length?(u=c[l],[4,this.renderTextNode(u,i)]):[3,4];case 2:Z.sent(),Z.label=3;case 3:return l++,[3,1];case 4:if(!(n instanceof SI))return[3,8];Z.label=5;case 5:return Z.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return P=Z.sent(),this.renderReplacedElement(n,s,P),[3,8];case 7:return Z.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof kI&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof FI))return[3,12];Z.label=9;case 9:return Z.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return P=Z.sent(),this.renderReplacedElement(n,s,P),[3,12];case 11:return Z.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof LI&&n.tree?(d=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,d.render(n.tree)]):[3,14];case 13:f=Z.sent(),n.width&&n.height&&this.ctx.drawImage(f,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),Z.label=14;case 14:if(n instanceof $1&&(v=Math.min(n.bounds.width,n.bounds.height),n.type===Om?n.checked&&(this.ctx.save(),this.path([new Ft(n.bounds.left+v*.39363,n.bounds.top+v*.79),new Ft(n.bounds.left+v*.16,n.bounds.top+v*.5549),new Ft(n.bounds.left+v*.27347,n.bounds.top+v*.44071),new Ft(n.bounds.left+v*.39694,n.bounds.top+v*.5649),new Ft(n.bounds.left+v*.72983,n.bounds.top+v*.23),new Ft(n.bounds.left+v*.84,n.bounds.top+v*.34085),new Ft(n.bounds.left+v*.39363,n.bounds.top+v*.79)]),this.ctx.fillStyle=Js(Sb),this.ctx.fill(),this.ctx.restore()):n.type===Mm&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+v/2,n.bounds.top+v/2,v/4,0,Math.PI*2,!0),this.ctx.fillStyle=Js(Sb),this.ctx.fill(),this.ctx.restore())),r8(n)&&n.value.length){switch(x=this.createFontStyle(i),D=x[0],y=x[1],C=this.fontMetrics.getMetrics(D,y).baseline,this.ctx.font=D,this.ctx.fillStyle=Js(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=s8(n.styles.textAlign),J=Gm(n),N=0,n.styles.textAlign){case 1:N+=J.width/2;break;case 2:N+=J.width;break}E=J.add(N,0,0,-J.height/2+1),this.ctx.save(),this.path([new Ft(J.left,J.top),new Ft(J.left+J.width,J.top),new Ft(J.left+J.width,J.top+J.height),new Ft(J.left,J.top+J.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Mh(n.value,E),i.letterSpacing,C),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ms(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(_=n.styles.listStyleImage,_.type!==0)return[3,18];P=void 0,H=_.url,Z.label=15;case 15:return Z.trys.push([15,17,,18]),[4,this.context.cache.match(H)];case 16:return P=Z.sent(),this.ctx.drawImage(P,n.bounds.left-(P.width+10),n.bounds.top),[3,18];case 17:return Z.sent(),this.context.logger.error("Error loading list-style-image "+H),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(D=this.createFontStyle(i)[0],this.ctx.font=D,this.ctx.fillStyle=Js(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",J=new ul(n.bounds.left,n.bounds.top+yn(n.styles.paddingTop,n.bounds.width),n.bounds.width,db(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Mh(t.listValue,J),i.letterSpacing,db(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Z.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(t){return Zi(this,void 0,void 0,function(){var n,s,_,i,l,_,c,u,_,d,f,_,v,x,_,y,C,_,N,E,_;return Pi(this,function(P){switch(P.label){case 0:if(Ms(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:P.sent(),n=0,s=t.negativeZIndex,P.label=2;case 2:return n<s.length?(_=s[n],[4,this.renderStack(_)]):[3,5];case 3:P.sent(),P.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:P.sent(),i=0,l=t.nonInlineLevel,P.label=7;case 7:return i<l.length?(_=l[i],[4,this.renderNode(_)]):[3,10];case 8:P.sent(),P.label=9;case 9:return i++,[3,7];case 10:c=0,u=t.nonPositionedFloats,P.label=11;case 11:return c<u.length?(_=u[c],[4,this.renderStack(_)]):[3,14];case 12:P.sent(),P.label=13;case 13:return c++,[3,11];case 14:d=0,f=t.nonPositionedInlineLevel,P.label=15;case 15:return d<f.length?(_=f[d],[4,this.renderStack(_)]):[3,18];case 16:P.sent(),P.label=17;case 17:return d++,[3,15];case 18:v=0,x=t.inlineLevel,P.label=19;case 19:return v<x.length?(_=x[v],[4,this.renderNode(_)]):[3,22];case 20:P.sent(),P.label=21;case 21:return v++,[3,19];case 22:y=0,C=t.zeroOrAutoZIndexOrTransformedOrOpacity,P.label=23;case 23:return y<C.length?(_=C[y],[4,this.renderStack(_)]):[3,26];case 24:P.sent(),P.label=25;case 25:return y++,[3,23];case 26:N=0,E=t.positiveZIndex,P.label=27;case 27:return N<E.length?(_=E[N],[4,this.renderStack(_)]):[3,30];case 28:P.sent(),P.label=29;case 29:return N++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var n=this;t.forEach(function(s,i){var l=hA(s)?s.start:s;i===0?n.ctx.moveTo(l.x,l.y):n.ctx.lineTo(l.x,l.y),hA(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(t,n,s,i){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},e.prototype.resizeImage=function(t,n,s){var i;if(t.width===n&&t.height===s)return t;var l=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,c=l.createElement("canvas");c.width=Math.max(1,n),c.height=Math.max(1,s);var u=c.getContext("2d");return u.drawImage(t,0,0,t.width,t.height,0,0,n,s),c},e.prototype.renderBackgroundImage=function(t){return Zi(this,void 0,void 0,function(){var n,s,i,l,c,u;return Pi(this,function(d){switch(d.label){case 0:n=t.styles.backgroundImage.length-1,s=function(f){var v,x,y,V,ue,fe,F,ee,Q,C,V,ue,fe,F,ee,N,E,_,P,H,D,J,Z,O,Q,U,V,I,L,F,ee,ge,ue,fe,ae,$,me,z,S,K,Y,G;return Pi(this,function(oe){switch(oe.label){case 0:if(f.type!==0)return[3,5];v=void 0,x=f.url,oe.label=1;case 1:return oe.trys.push([1,3,,4]),[4,i.context.cache.match(x)];case 2:return v=oe.sent(),[3,4];case 3:return oe.sent(),i.context.logger.error("Error loading background-image "+x),[3,4];case 4:return v&&(y=Ay(t,n,[v.width,v.height,v.width/v.height]),V=y[0],ue=y[1],fe=y[2],F=y[3],ee=y[4],Q=i.ctx.createPattern(i.resizeImage(v,F,ee),"repeat"),i.renderRepeat(V,Q,ue,fe)),[3,6];case 5:M6(f)?(C=Ay(t,n,[null,null,null]),V=C[0],ue=C[1],fe=C[2],F=C[3],ee=C[4],N=Q6(f.angle,F,ee),E=N[0],_=N[1],P=N[2],H=N[3],D=N[4],J=document.createElement("canvas"),J.width=F,J.height=ee,Z=J.getContext("2d"),O=Z.createLinearGradient(_,H,P,D),cb(f.stops,E).forEach(function(ye){return O.addColorStop(ye.stop,Js(ye.color))}),Z.fillStyle=O,Z.fillRect(0,0,F,ee),F>0&&ee>0&&(Q=i.ctx.createPattern(J,"repeat"),i.renderRepeat(V,Q,ue,fe))):H6(f)&&(U=Ay(t,n,[null,null,null]),V=U[0],I=U[1],L=U[2],F=U[3],ee=U[4],ge=f.position.length===0?[V1]:f.position,ue=yn(ge[0],F),fe=yn(ge[ge.length-1],ee),ae=P6(f,ue,fe,F,ee),$=ae[0],me=ae[1],$>0&&me>0&&(z=i.ctx.createRadialGradient(I+ue,L+fe,0,I+ue,L+fe,$),cb(f.stops,$*2).forEach(function(ye){return z.addColorStop(ye.stop,Js(ye.color))}),i.path(V),i.ctx.fillStyle=z,$!==me?(S=t.bounds.left+.5*t.bounds.width,K=t.bounds.top+.5*t.bounds.height,Y=me/$,G=1/Y,i.ctx.save(),i.ctx.translate(S,K),i.ctx.transform(1,0,0,Y,0,0),i.ctx.translate(-S,-K),i.ctx.fillRect(I,G*(L-K)+K,F,ee*G),i.ctx.restore()):i.ctx.fill())),oe.label=6;case 6:return n--,[2]}})},i=this,l=0,c=t.styles.backgroundImage.slice(0).reverse(),d.label=1;case 1:return l<c.length?(u=c[l],[5,s(u)]):[3,4];case 2:d.sent(),d.label=3;case 3:return l++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(t,n,s){return Zi(this,void 0,void 0,function(){return Pi(this,function(i){return this.path(Mb(s,n)),this.ctx.fillStyle=Js(t),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(t,n,s,i){return Zi(this,void 0,void 0,function(){var l,c;return Pi(this,function(u){switch(u.label){case 0:return n<3?[4,this.renderSolidBorder(t,s,i)]:[3,2];case 1:return u.sent(),[2];case 2:return l=zR(i,s),this.path(l),this.ctx.fillStyle=Js(t),this.ctx.fill(),c=GR(i,s),this.path(c),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(t){return Zi(this,void 0,void 0,function(){var n,s,i,l,c,u,d,f,v=this;return Pi(this,function(x){switch(x.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,s=!uc(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],l=n8(Zu(n.backgroundClip,0),t.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(l),this.ctx.clip(),uc(n.backgroundColor)||(this.ctx.fillStyle=Js(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:x.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(y){v.ctx.save();var C=Km(t.curves),N=y.inset?0:e8,E=VR(C,-N+(y.inset?1:-1)*y.spread.number,(y.inset?1:-1)*y.spread.number,y.spread.number*(y.inset?-2:2),y.spread.number*(y.inset?-2:2));y.inset?(v.path(C),v.ctx.clip(),v.mask(E)):(v.mask(C),v.ctx.clip(),v.path(E)),v.ctx.shadowOffsetX=y.offsetX.number+N,v.ctx.shadowOffsetY=y.offsetY.number,v.ctx.shadowColor=Js(y.color),v.ctx.shadowBlur=y.blur.number,v.ctx.fillStyle=y.inset?Js(y.color):"rgba(0,0,0,1)",v.ctx.fill(),v.ctx.restore()}),x.label=2;case 2:c=0,u=0,d=i,x.label=3;case 3:return u<d.length?(f=d[u],f.style!==0&&!uc(f.color)&&f.width>0?f.style!==2?[3,5]:[4,this.renderDashedDottedBorder(f.color,f.width,c,t.curves,2)]:[3,11]):[3,13];case 4:return x.sent(),[3,11];case 5:return f.style!==3?[3,7]:[4,this.renderDashedDottedBorder(f.color,f.width,c,t.curves,3)];case 6:return x.sent(),[3,11];case 7:return f.style!==4?[3,9]:[4,this.renderDoubleBorder(f.color,f.width,c,t.curves)];case 8:return x.sent(),[3,11];case 9:return[4,this.renderSolidBorder(f.color,c,t.curves)];case 10:x.sent(),x.label=11;case 11:c++,x.label=12;case 12:return u++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(t,n,s,i,l){return Zi(this,void 0,void 0,function(){var c,u,d,f,v,x,y,C,N,E,_,P,H,D,J,Z,J,Z;return Pi(this,function(O){return this.ctx.save(),c=$R(i,s),u=Mb(i,s),l===2&&(this.path(u),this.ctx.clip()),hA(u[0])?(d=u[0].start.x,f=u[0].start.y):(d=u[0].x,f=u[0].y),hA(u[1])?(v=u[1].end.x,x=u[1].end.y):(v=u[1].x,x=u[1].y),s===0||s===2?y=Math.abs(d-v):y=Math.abs(f-x),this.ctx.beginPath(),l===3?this.formatPath(c):this.formatPath(u.slice(0,2)),C=n<3?n*3:n*2,N=n<3?n*2:n,l===3&&(C=n,N=n),E=!0,y<=C*2?E=!1:y<=C*2+N?(_=y/(2*C+N),C*=_,N*=_):(P=Math.floor((y+N)/(C+N)),H=(y-P*C)/(P-1),D=(y-(P+1)*C)/P,N=D<=0||Math.abs(N-H)<Math.abs(N-D)?H:D),E&&(l===3?this.ctx.setLineDash([0,C+N]):this.ctx.setLineDash([C,N])),l===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Js(t),this.ctx.stroke(),this.ctx.setLineDash([]),l===2&&(hA(u[0])&&(J=u[3],Z=u[0],this.ctx.beginPath(),this.formatPath([new Ft(J.end.x,J.end.y),new Ft(Z.start.x,Z.start.y)]),this.ctx.stroke()),hA(u[1])&&(J=u[1],Z=u[2],this.ctx.beginPath(),this.formatPath([new Ft(J.end.x,J.end.y),new Ft(Z.start.x,Z.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(t){return Zi(this,void 0,void 0,function(){var n;return Pi(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Js(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=KR(t),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(JI),r8=function(r){return r instanceof jI||r instanceof UI?!0:r instanceof $1&&r.type!==Mm&&r.type!==Om},n8=function(r,e){switch(r){case 0:return Km(e);case 2:return DR(e);default:return zm(e)}},s8=function(r){switch(r){case 1:return"center";case 2:return"right";default:return"left"}},i8=["-apple-system","system-ui"],a8=function(r){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?r.filter(function(e){return i8.indexOf(e)===-1}):r},A8=(function(r){zA(e,r);function e(t,n){var s=r.call(this,t,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(t){return Zi(this,void 0,void 0,function(){var n,s;return Pi(this,function(i){switch(i.label){case 0:return n=Bv(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,o8(n)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Js(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(JI),o8=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(r))})},l8=(function(){function r(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,mp([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.getTime=function(){return Date.now()-this.start},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,mp([this.id,this.getTime()+"ms"],e))},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,mp([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,mp([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},r.instances={},r})(),c8=(function(){function r(e,t){var n;this.windowBounds=t,this.instanceName="#"+r.instanceCount++,this.logger=new l8({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new kR(this,e)}return r.instanceCount=1,r})(),Sd=function(r,e){return e===void 0&&(e={}),u8(r,e)};typeof window<"u"&&zI.setContext(window);var u8=function(r,e){return Zi(void 0,void 0,void 0,function(){var t,n,s,i,l,c,u,d,f,v,x,y,C,N,E,_,P,H,D,J,O,Z,O,Q,U,V,I,L,F,ee,ge,ue,fe,ae,$,me,z,S,K,Y;return Pi(this,function(G){switch(G.label){case 0:if(!r||typeof r!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=r.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(n=t.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(Q=e.allowTaint)!==null&&Q!==void 0?Q:!1,imageTimeout:(U=e.imageTimeout)!==null&&U!==void 0?U:15e3,proxy:e.proxy,useCORS:(V=e.useCORS)!==null&&V!==void 0?V:!1},i=ov({logging:(I=e.logging)!==null&&I!==void 0?I:!0,cache:e.cache},s),l={windowWidth:(L=e.windowWidth)!==null&&L!==void 0?L:n.innerWidth,windowHeight:(F=e.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:(ee=e.scrollX)!==null&&ee!==void 0?ee:n.pageXOffset,scrollY:(ge=e.scrollY)!==null&&ge!==void 0?ge:n.pageYOffset},c=new ul(l.scrollX,l.scrollY,l.windowWidth,l.windowHeight),u=new c8(i,c),d=(ue=e.foreignObjectRendering)!==null&&ue!==void 0?ue:!1,f={allowTaint:(fe=e.allowTaint)!==null&&fe!==void 0?fe:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:d,copyStyles:d},u.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),v=new Db(u,r,f),x=v.clonedReferenceElement,x?[4,v.toIFrame(t,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return y=G.sent(),C=q1(x)||hR(x)?VL(x.ownerDocument):Cg(u,x),N=C.width,E=C.height,_=C.left,P=C.top,H=d8(u,x,e.backgroundColor),D={canvas:e.canvas,backgroundColor:H,scale:($=(ae=e.scale)!==null&&ae!==void 0?ae:n.devicePixelRatio)!==null&&$!==void 0?$:1,x:((me=e.x)!==null&&me!==void 0?me:0)+_,y:((z=e.y)!==null&&z!==void 0?z:0)+P,width:(S=e.width)!==null&&S!==void 0?S:Math.ceil(N),height:(K=e.height)!==null&&K!==void 0?K:Math.ceil(E)},d?(u.logger.debug("Document cloned, using foreign object rendering"),O=new A8(u,D),[4,O.render(x)]):[3,3];case 2:return J=G.sent(),[3,5];case 3:return u.logger.debug("Document cloned, element located at "+_+","+P+" with size "+N+"x"+E+" using computed rendering"),u.logger.debug("Starting DOM parsing"),Z=PI(u,x),H===Z.styles.backgroundColor&&(Z.styles.backgroundColor=al.TRANSPARENT),u.logger.debug("Starting renderer for element at "+D.x+","+D.y+" with size "+D.width+"x"+D.height),O=new t8(u,D),[4,O.render(Z)];case 4:J=G.sent(),G.label=5;case 5:return(!((Y=e.removeContainer)!==null&&Y!==void 0)||Y)&&(Db.destroy(y)||u.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),u.logger.debug("Finished rendering"),[2,J]}})})},d8=function(r,e,t){var n=e.ownerDocument,s=n.documentElement?Rh(r,getComputedStyle(n.documentElement).backgroundColor):al.TRANSPARENT,i=n.body?Rh(r,getComputedStyle(n.body).backgroundColor):al.TRANSPARENT,l=typeof t=="string"?Rh(r,t):t===null?al.TRANSPARENT:4294967295;return e===n.documentElement?uc(s)?uc(i)?l:i:s:l};const h8=Object.freeze(Object.defineProperty({__proto__:null,default:Sd},Symbol.toStringTag,{value:"Module"})),f8="modulepreload",p8=function(r){return"/"+r},Vb={},oy=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");s=u(t.map(d=>{if(d=p8(d),d in Vb)return;Vb[d]=!0;const f=d.endsWith(".css"),v=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":f8,f||(x.as="script"),x.crossOrigin="",x.href=d,c&&x.setAttribute("nonce",c),document.head.appendChild(x),f)return new Promise((y,C)=>{x.addEventListener("load",y),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}var VA=Uint8Array,Ma=Uint16Array,W1=Int32Array,Y1=new VA([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),J1=new VA([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Kb=new VA([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XI=function(r,e){for(var t=new Ma(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var s=new W1(t[30]),n=1;n<30;++n)for(var i=t[n];i<t[n+1];++i)s[i]=i-t[n]<<5|n;return{b:t,r:s}},ZI=XI(Y1,2),m8=ZI.b,kv=ZI.r;m8[28]=258,kv[258]=28;var g8=XI(J1,0),zb=g8.r,Fv=new Ma(32768);for(var In=0;In<32768;++In){var Hl=(In&43690)>>1|(In&21845)<<1;Hl=(Hl&52428)>>2|(Hl&13107)<<2,Hl=(Hl&61680)>>4|(Hl&3855)<<4,Fv[In]=((Hl&65280)>>8|(Hl&255)<<8)>>1}var Vh=(function(r,e,t){for(var n=r.length,s=0,i=new Ma(e);s<n;++s)r[s]&&++i[r[s]-1];var l=new Ma(e);for(s=1;s<e;++s)l[s]=l[s-1]+i[s-1]<<1;var c;if(t){c=new Ma(1<<e);var u=15-e;for(s=0;s<n;++s)if(r[s])for(var d=s<<4|r[s],f=e-r[s],v=l[r[s]-1]++<<f,x=v|(1<<f)-1;v<=x;++v)c[Fv[v]>>u]=d}else for(c=new Ma(n),s=0;s<n;++s)r[s]&&(c[s]=Fv[l[r[s]-1]++]>>15-r[s]);return c}),uu=new VA(288);for(var In=0;In<144;++In)uu[In]=8;for(var In=144;In<256;++In)uu[In]=9;for(var In=256;In<280;++In)uu[In]=7;for(var In=280;In<288;++In)uu[In]=8;var $m=new VA(32);for(var In=0;In<32;++In)$m[In]=5;var y8=Vh(uu,9,0),v8=Vh($m,5,0),e4=function(r){return(r+7)/8|0},w8=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new VA(r.subarray(e,t))},Yo=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},gh=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},ly=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var s=t.length,i=t.slice();if(!s)return{t:r4,l:0};if(s==1){var l=new VA(t[0].s+1);return l[t[0].s]=1,{t:l,l:1}}t.sort(function(J,Z){return J.f-Z.f}),t.push({s:-1,f:25001});var c=t[0],u=t[1],d=0,f=1,v=2;for(t[0]={s:-1,f:c.f+u.f,l:c,r:u};f!=s-1;)c=t[t[d].f<t[v].f?d++:v++],u=t[d!=f&&t[d].f<t[v].f?d++:v++],t[f++]={s:-1,f:c.f+u.f,l:c,r:u};for(var x=i[0].s,n=1;n<s;++n)i[n].s>x&&(x=i[n].s);var y=new Ma(x+1),C=Tv(t[f-1],y,0);if(C>e){var n=0,N=0,E=C-e,_=1<<E;for(i.sort(function(Z,O){return y[O.s]-y[Z.s]||Z.f-O.f});n<s;++n){var P=i[n].s;if(y[P]>e)N+=_-(1<<C-y[P]),y[P]=e;else break}for(N>>=E;N>0;){var H=i[n].s;y[H]<e?N-=1<<e-y[H]++-1:++n}for(;n>=0&&N;--n){var D=i[n].s;y[D]==e&&(--y[D],++N)}C=e}return{t:new VA(y),l:C}},Tv=function(r,e,t){return r.s==-1?Math.max(Tv(r.l,e,t+1),Tv(r.r,e,t+1)):e[r.s]=t},Gb=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new Ma(++e),n=0,s=r[0],i=1,l=function(u){t[n++]=u},c=1;c<=e;++c)if(r[c]==s&&c!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(s),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(s);i=1,s=r[c]}return{c:t.subarray(0,n),n:e}},yh=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},t4=function(r,e,t){var n=t.length,s=e4(e+2);r[s]=n&255,r[s+1]=n>>8,r[s+2]=r[s]^255,r[s+3]=r[s+1]^255;for(var i=0;i<n;++i)r[s+i+4]=t[i];return(s+4+n)*8},$b=function(r,e,t,n,s,i,l,c,u,d,f){Yo(e,f++,t),++s[256];for(var v=ly(s,15),x=v.t,y=v.l,C=ly(i,15),N=C.t,E=C.l,_=Gb(x),P=_.c,H=_.n,D=Gb(N),J=D.c,Z=D.n,O=new Ma(19),Q=0;Q<P.length;++Q)++O[P[Q]&31];for(var Q=0;Q<J.length;++Q)++O[J[Q]&31];for(var U=ly(O,7),V=U.t,I=U.l,L=19;L>4&&!V[Kb[L-1]];--L);var F=d+5<<3,ee=yh(s,uu)+yh(i,$m)+l,ge=yh(s,x)+yh(i,N)+l+14+3*L+yh(O,V)+2*O[16]+3*O[17]+7*O[18];if(u>=0&&F<=ee&&F<=ge)return t4(e,f,r.subarray(u,u+d));var ue,fe,ae,$;if(Yo(e,f,1+(ge<ee)),f+=2,ge<ee){ue=Vh(x,y,0),fe=x,ae=Vh(N,E,0),$=N;var me=Vh(V,I,0);Yo(e,f,H-257),Yo(e,f+5,Z-1),Yo(e,f+10,L-4),f+=14;for(var Q=0;Q<L;++Q)Yo(e,f+3*Q,V[Kb[Q]]);f+=3*L;for(var z=[P,J],S=0;S<2;++S)for(var K=z[S],Q=0;Q<K.length;++Q){var Y=K[Q]&31;Yo(e,f,me[Y]),f+=V[Y],Y>15&&(Yo(e,f,K[Q]>>5&127),f+=K[Q]>>12)}}else ue=y8,fe=uu,ae=v8,$=$m;for(var Q=0;Q<c;++Q){var G=n[Q];if(G>255){var Y=G>>18&31;gh(e,f,ue[Y+257]),f+=fe[Y+257],Y>7&&(Yo(e,f,G>>23&31),f+=Y1[Y]);var oe=G&31;gh(e,f,ae[oe]),f+=$[oe],oe>3&&(gh(e,f,G>>5&8191),f+=J1[oe])}else gh(e,f,ue[G]),f+=fe[G]}return gh(e,f,ue[256]),f+fe[256]},x8=new W1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),r4=new VA(0),b8=function(r,e,t,n,s,i){var l=i.z||r.length,c=new VA(n+l+5*(1+Math.ceil(l/7e3))+s),u=c.subarray(n,c.length-s),d=i.l,f=(i.r||0)&7;if(e){f&&(u[0]=i.r>>3);for(var v=x8[e-1],x=v>>13,y=v&8191,C=(1<<t)-1,N=i.p||new Ma(32768),E=i.h||new Ma(C+1),_=Math.ceil(t/3),P=2*_,H=function(It){return(r[It]^r[It+1]<<_^r[It+2]<<P)&C},D=new W1(25e3),J=new Ma(288),Z=new Ma(32),O=0,Q=0,U=i.i||0,V=0,I=i.w||0,L=0;U+2<l;++U){var F=H(U),ee=U&32767,ge=E[F];if(N[ee]=ge,E[F]=ee,I<=U){var ue=l-U;if((O>7e3||V>24576)&&(ue>423||!d)){f=$b(r,u,0,D,J,Z,Q,V,L,U-L,f),V=O=Q=0,L=U;for(var fe=0;fe<286;++fe)J[fe]=0;for(var fe=0;fe<30;++fe)Z[fe]=0}var ae=2,$=0,me=y,z=ee-ge&32767;if(ue>2&&F==H(U-z))for(var S=Math.min(x,ue)-1,K=Math.min(32767,U),Y=Math.min(258,ue);z<=K&&--me&&ee!=ge;){if(r[U+ae]==r[U+ae-z]){for(var G=0;G<Y&&r[U+G]==r[U+G-z];++G);if(G>ae){if(ae=G,$=z,G>S)break;for(var oe=Math.min(z,G-2),ye=0,fe=0;fe<oe;++fe){var Le=U-z+fe&32767,be=N[Le],je=Le-be&32767;je>ye&&(ye=je,ge=Le)}}}ee=ge,ge=N[ee],z+=ee-ge&32767}if($){D[V++]=268435456|kv[ae]<<18|zb[$];var Ge=kv[ae]&31,tt=zb[$]&31;Q+=Y1[Ge]+J1[tt],++J[257+Ge],++Z[tt],I=U+ae,++O}else D[V++]=r[U],++J[r[U]]}}for(U=Math.max(U,I);U<l;++U)D[V++]=r[U],++J[r[U]];f=$b(r,u,d,D,J,Z,Q,V,L,U-L,f),d||(i.r=f&7|u[f/8|0]<<3,f-=7,i.h=E,i.p=N,i.i=U,i.w=I)}else{for(var U=i.w||0;U<l+d;U+=65535){var it=U+65535;it>=l&&(u[f/8|0]=d,it=l),f=t4(u,f+1,r.subarray(U,it))}i.i=l}return w8(c,0,n+e4(f)+s)},n4=function(){var r=1,e=0;return{p:function(t){for(var n=r,s=e,i=t.length|0,l=0;l!=i;){for(var c=Math.min(l+2655,i);l<c;++l)s+=n+=t[l];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}r=n,e=s},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},B8=function(r,e,t,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),l=new VA(i.length+r.length);l.set(i),l.set(r,i.length),r=l,s.w=i.length}return b8(r,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,s)},s4=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},C8=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var s=n4();s.p(e.dictionary),s4(r,2,s.d())}};function Uv(r,e){e||(e={});var t=n4();t.p(r);var n=B8(r,e,e.dictionary?6:2,4);return C8(n,e),s4(n,n.length-4,t.d()),n}var E8=typeof TextDecoder<"u"&&new TextDecoder,I8=0;try{E8.decode(r4,{stream:!0}),I8=1}catch{}function _8(r){if(Array.isArray(r))return r}function N8(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,s,i,l,c=[],u=!0,d=!1;try{if(i=(t=t.call(r)).next,e!==0)for(;!(u=(n=i.call(t)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}function qb(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function S8(r,e){if(r){if(typeof r=="string")return qb(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?qb(r,e):void 0}}function k8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wb(r,e){return _8(r)||N8(r,e)||S8(r,e)||k8()}function Yb(r,e="utf8"){return new TextDecoder(e).decode(r)}const F8=new TextEncoder;function T8(r){return F8.encode(r)}const U8=1024*8,j8=(()=>{const r=new Uint8Array(4),e=new Uint32Array(r.buffer);return!((e[0]=1)&r[0])})(),cy={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class X1{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=U8,t={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=t.offset?t.offset>>>0:0,i=e.byteLength-s;let l=s;(ArrayBuffer.isView(e)||e instanceof X1)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const n=cy[t].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===j8&&t!=="uint8"&&t!=="int8"){const c=new Uint8Array(this.buffer.slice(s,s+n));c.reverse();const u=new cy[t](c.buffer);return this.offset+=n,u.reverse(),u}const l=new cy[t](i);return this.offset+=n,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(e=1){return Yb(this.readBytes(e))}decodeText(e=1,t="utf8"){return Yb(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(T8(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Od(r){let e=r.length;for(;--e>=0;)r[e]=0}const L8=3,Q8=258,i4=29,P8=256,D8=P8+1+i4,a4=30,R8=512,O8=new Array((D8+2)*2);Od(O8);const M8=new Array(a4*2);Od(M8);const H8=new Array(R8);Od(H8);const V8=new Array(Q8-L8+1);Od(V8);const K8=new Array(i4);Od(K8);const z8=new Array(a4);Od(z8);const G8=(r,e,t,n)=>{let s=r&65535|0,i=r>>>16&65535|0,l=0;for(;t!==0;){l=t>2e3?2e3:t,t-=l;do s=s+e[n++]|0,i=i+s|0;while(--l);s%=65521,i%=65521}return s|i<<16|0};var jv=G8;const $8=()=>{let r,e=[];for(var t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e},q8=new Uint32Array($8()),W8=(r,e,t,n)=>{const s=q8,i=n+t;r^=-1;for(let l=n;l<i;l++)r=r>>>8^s[(r^e[l])&255];return r^-1};var po=W8,Lv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},A4={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Y8=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var J8=function(r){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const n in t)Y8(t,n)&&(r[n]=t[n])}}return r},X8=r=>{let e=0;for(let n=0,s=r.length;n<s;n++)e+=r[n].length;const t=new Uint8Array(e);for(let n=0,s=0,i=r.length;n<i;n++){let l=r[n];t.set(l,s),s+=l.length}return t},o4={assign:J8,flattenChunks:X8};let l4=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l4=!1}const of=new Uint8Array(256);for(let r=0;r<256;r++)of[r]=r>=252?6:r>=248?5:r>=240?4:r>=224?3:r>=192?2:1;of[254]=of[254]=1;var Z8=r=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(r);let e,t,n,s,i,l=r.length,c=0;for(s=0;s<l;s++)t=r.charCodeAt(s),(t&64512)===55296&&s+1<l&&(n=r.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),c+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(c),i=0,s=0;i<c;s++)t=r.charCodeAt(s),(t&64512)===55296&&s+1<l&&(n=r.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?e[i++]=t:t<2048?(e[i++]=192|t>>>6,e[i++]=128|t&63):t<65536?(e[i++]=224|t>>>12,e[i++]=128|t>>>6&63,e[i++]=128|t&63):(e[i++]=240|t>>>18,e[i++]=128|t>>>12&63,e[i++]=128|t>>>6&63,e[i++]=128|t&63);return e};const eO=(r,e)=>{if(e<65534&&r.subarray&&l4)return String.fromCharCode.apply(null,r.length===e?r:r.subarray(0,e));let t="";for(let n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t};var tO=(r,e)=>{const t=e||r.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(r.subarray(0,e));let n,s;const i=new Array(t*2);for(s=0,n=0;n<t;){let l=r[n++];if(l<128){i[s++]=l;continue}let c=of[l];if(c>4){i[s++]=65533,n+=c-1;continue}for(l&=c===2?31:c===3?15:7;c>1&&n<t;)l=l<<6|r[n++]&63,c--;if(c>1){i[s++]=65533;continue}l<65536?i[s++]=l:(l-=65536,i[s++]=55296|l>>10&1023,i[s++]=56320|l&1023)}return eO(i,s)},rO=(r,e)=>{e=e||r.length,e>r.length&&(e=r.length);let t=e-1;for(;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+of[r[t]]>e?t:e},Qv={string2buf:Z8,buf2string:tO,utf8border:rO};function nO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var sO=nO;const Rp=16209,iO=16191;var aO=function(e,t){let n,s,i,l,c,u,d,f,v,x,y,C,N,E,_,P,H,D,J,Z,O,Q,U,V;const I=e.state;n=e.next_in,U=e.input,s=n+(e.avail_in-5),i=e.next_out,V=e.output,l=i-(t-e.avail_out),c=i+(e.avail_out-257),u=I.dmax,d=I.wsize,f=I.whave,v=I.wnext,x=I.window,y=I.hold,C=I.bits,N=I.lencode,E=I.distcode,_=(1<<I.lenbits)-1,P=(1<<I.distbits)-1;e:do{C<15&&(y+=U[n++]<<C,C+=8,y+=U[n++]<<C,C+=8),H=N[y&_];t:for(;;){if(D=H>>>24,y>>>=D,C-=D,D=H>>>16&255,D===0)V[i++]=H&65535;else if(D&16){J=H&65535,D&=15,D&&(C<D&&(y+=U[n++]<<C,C+=8),J+=y&(1<<D)-1,y>>>=D,C-=D),C<15&&(y+=U[n++]<<C,C+=8,y+=U[n++]<<C,C+=8),H=E[y&P];r:for(;;){if(D=H>>>24,y>>>=D,C-=D,D=H>>>16&255,D&16){if(Z=H&65535,D&=15,C<D&&(y+=U[n++]<<C,C+=8,C<D&&(y+=U[n++]<<C,C+=8)),Z+=y&(1<<D)-1,Z>u){e.msg="invalid distance too far back",I.mode=Rp;break e}if(y>>>=D,C-=D,D=i-l,Z>D){if(D=Z-D,D>f&&I.sane){e.msg="invalid distance too far back",I.mode=Rp;break e}if(O=0,Q=x,v===0){if(O+=d-D,D<J){J-=D;do V[i++]=x[O++];while(--D);O=i-Z,Q=V}}else if(v<D){if(O+=d+v-D,D-=v,D<J){J-=D;do V[i++]=x[O++];while(--D);if(O=0,v<J){D=v,J-=D;do V[i++]=x[O++];while(--D);O=i-Z,Q=V}}}else if(O+=v-D,D<J){J-=D;do V[i++]=x[O++];while(--D);O=i-Z,Q=V}for(;J>2;)V[i++]=Q[O++],V[i++]=Q[O++],V[i++]=Q[O++],J-=3;J&&(V[i++]=Q[O++],J>1&&(V[i++]=Q[O++]))}else{O=i-Z;do V[i++]=V[O++],V[i++]=V[O++],V[i++]=V[O++],J-=3;while(J>2);J&&(V[i++]=V[O++],J>1&&(V[i++]=V[O++]))}}else if((D&64)===0){H=E[(H&65535)+(y&(1<<D)-1)];continue r}else{e.msg="invalid distance code",I.mode=Rp;break e}break}}else if((D&64)===0){H=N[(H&65535)+(y&(1<<D)-1)];continue t}else if(D&32){I.mode=iO;break e}else{e.msg="invalid literal/length code",I.mode=Rp;break e}break}}while(n<s&&i<c);J=C>>3,n-=J,C-=J<<3,y&=(1<<C)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<c?257+(c-i):257-(i-c),I.hold=y,I.bits=C};const Gu=15,Jb=852,Xb=592,Zb=0,uy=1,eB=2,AO=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oO=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),lO=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cO=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),uO=(r,e,t,n,s,i,l,c)=>{const u=c.bits;let d=0,f=0,v=0,x=0,y=0,C=0,N=0,E=0,_=0,P=0,H,D,J,Z,O,Q=null,U;const V=new Uint16Array(Gu+1),I=new Uint16Array(Gu+1);let L=null,F,ee,ge;for(d=0;d<=Gu;d++)V[d]=0;for(f=0;f<n;f++)V[e[t+f]]++;for(y=u,x=Gu;x>=1&&V[x]===0;x--);if(y>x&&(y=x),x===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,c.bits=1,0;for(v=1;v<x&&V[v]===0;v++);for(y<v&&(y=v),E=1,d=1;d<=Gu;d++)if(E<<=1,E-=V[d],E<0)return-1;if(E>0&&(r===Zb||x!==1))return-1;for(I[1]=0,d=1;d<Gu;d++)I[d+1]=I[d]+V[d];for(f=0;f<n;f++)e[t+f]!==0&&(l[I[e[t+f]]++]=f);if(r===Zb?(Q=L=l,U=20):r===uy?(Q=AO,L=oO,U=257):(Q=lO,L=cO,U=0),P=0,f=0,d=v,O=i,C=y,N=0,J=-1,_=1<<y,Z=_-1,r===uy&&_>Jb||r===eB&&_>Xb)return 1;for(;;){F=d-N,l[f]+1<U?(ee=0,ge=l[f]):l[f]>=U?(ee=L[l[f]-U],ge=Q[l[f]-U]):(ee=96,ge=0),H=1<<d-N,D=1<<C,v=D;do D-=H,s[O+(P>>N)+D]=F<<24|ee<<16|ge|0;while(D!==0);for(H=1<<d-1;P&H;)H>>=1;if(H!==0?(P&=H-1,P+=H):P=0,f++,--V[d]===0){if(d===x)break;d=e[t+l[f]]}if(d>y&&(P&Z)!==J){for(N===0&&(N=y),O+=v,C=d-N,E=1<<C;C+N<x&&(E-=V[C+N],!(E<=0));)C++,E<<=1;if(_+=1<<C,r===uy&&_>Jb||r===eB&&_>Xb)return 1;J=P&Z,s[J]=y<<24|C<<16|O-i|0}}return P!==0&&(s[O+P]=d-N<<24|64<<16|0),c.bits=y,0};var Kh=uO;const dO=0,c4=1,u4=2,{Z_FINISH:tB,Z_BLOCK:hO,Z_TREES:Op,Z_OK:du,Z_STREAM_END:fO,Z_NEED_DICT:pO,Z_STREAM_ERROR:yA,Z_DATA_ERROR:d4,Z_MEM_ERROR:h4,Z_BUF_ERROR:mO,Z_DEFLATED:rB}=A4,jg=16180,nB=16181,sB=16182,iB=16183,aB=16184,AB=16185,oB=16186,lB=16187,cB=16188,uB=16189,qm=16190,Jo=16191,dy=16192,dB=16193,hy=16194,hB=16195,fB=16196,pB=16197,mB=16198,Mp=16199,Hp=16200,gB=16201,yB=16202,vB=16203,wB=16204,xB=16205,fy=16206,bB=16207,BB=16208,Dn=16209,f4=16210,p4=16211,gO=852,yO=592,vO=15,wO=vO,CB=r=>(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24);function xO(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gu=r=>{if(!r)return 1;const e=r.state;return!e||e.strm!==r||e.mode<jg||e.mode>p4?1:0},m4=r=>{if(gu(r))return yA;const e=r.state;return r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=jg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(gO),e.distcode=e.distdyn=new Int32Array(yO),e.sane=1,e.back=-1,du},g4=r=>{if(gu(r))return yA;const e=r.state;return e.wsize=0,e.whave=0,e.wnext=0,m4(r)},y4=(r,e)=>{let t;if(gu(r))return yA;const n=r.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?yA:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,g4(r))},v4=(r,e)=>{if(!r)return yA;const t=new xO;r.state=t,t.strm=r,t.window=null,t.mode=jg;const n=y4(r,e);return n!==du&&(r.state=null),n},bO=r=>v4(r,wO);let EB=!0,py,my;const BO=r=>{if(EB){py=new Int32Array(512),my=new Int32Array(32);let e=0;for(;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(Kh(c4,r.lens,0,288,py,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;Kh(u4,r.lens,0,32,my,0,r.work,{bits:5}),EB=!1}r.lencode=py,r.lenbits=9,r.distcode=my,r.distbits=5},w4=(r,e,t,n)=>{let s;const i=r.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(t-i.wsize,t),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(t-n,t-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(t-n,t),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},CO=(r,e)=>{let t,n,s,i,l,c,u,d,f,v,x,y,C,N,E=0,_,P,H,D,J,Z,O,Q;const U=new Uint8Array(4);let V,I;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gu(r)||!r.output||!r.input&&r.avail_in!==0)return yA;t=r.state,t.mode===Jo&&(t.mode=dy),l=r.next_out,s=r.output,u=r.avail_out,i=r.next_in,n=r.input,c=r.avail_in,d=t.hold,f=t.bits,v=c,x=u,Q=du;e:for(;;)switch(t.mode){case jg:if(t.wrap===0){t.mode=dy;break}for(;f<16;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(t.wrap&2&&d===35615){t.wbits===0&&(t.wbits=15),t.check=0,U[0]=d&255,U[1]=d>>>8&255,t.check=po(t.check,U,2,0),d=0,f=0,t.mode=nB;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((d&255)<<8)+(d>>8))%31){r.msg="incorrect header check",t.mode=Dn;break}if((d&15)!==rB){r.msg="unknown compression method",t.mode=Dn;break}if(d>>>=4,f-=4,O=(d&15)+8,t.wbits===0&&(t.wbits=O),O>15||O>t.wbits){r.msg="invalid window size",t.mode=Dn;break}t.dmax=1<<t.wbits,t.flags=0,r.adler=t.check=1,t.mode=d&512?uB:Jo,d=0,f=0;break;case nB:for(;f<16;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(t.flags=d,(t.flags&255)!==rB){r.msg="unknown compression method",t.mode=Dn;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Dn;break}t.head&&(t.head.text=d>>8&1),t.flags&512&&t.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,t.check=po(t.check,U,2,0)),d=0,f=0,t.mode=sB;case sB:for(;f<32;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}t.head&&(t.head.time=d),t.flags&512&&t.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,U[2]=d>>>16&255,U[3]=d>>>24&255,t.check=po(t.check,U,4,0)),d=0,f=0,t.mode=iB;case iB:for(;f<16;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}t.head&&(t.head.xflags=d&255,t.head.os=d>>8),t.flags&512&&t.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,t.check=po(t.check,U,2,0)),d=0,f=0,t.mode=aB;case aB:if(t.flags&1024){for(;f<16;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}t.length=d,t.head&&(t.head.extra_len=d),t.flags&512&&t.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,t.check=po(t.check,U,2,0)),d=0,f=0}else t.head&&(t.head.extra=null);t.mode=AB;case AB:if(t.flags&1024&&(y=t.length,y>c&&(y=c),y&&(t.head&&(O=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(i,i+y),O)),t.flags&512&&t.wrap&4&&(t.check=po(t.check,n,y,i)),c-=y,i+=y,t.length-=y),t.length))break e;t.length=0,t.mode=oB;case oB:if(t.flags&2048){if(c===0)break e;y=0;do O=n[i+y++],t.head&&O&&t.length<65536&&(t.head.name+=String.fromCharCode(O));while(O&&y<c);if(t.flags&512&&t.wrap&4&&(t.check=po(t.check,n,y,i)),c-=y,i+=y,O)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=lB;case lB:if(t.flags&4096){if(c===0)break e;y=0;do O=n[i+y++],t.head&&O&&t.length<65536&&(t.head.comment+=String.fromCharCode(O));while(O&&y<c);if(t.flags&512&&t.wrap&4&&(t.check=po(t.check,n,y,i)),c-=y,i+=y,O)break e}else t.head&&(t.head.comment=null);t.mode=cB;case cB:if(t.flags&512){for(;f<16;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(t.wrap&4&&d!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Dn;break}d=0,f=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=Jo;break;case uB:for(;f<32;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}r.adler=t.check=CB(d),d=0,f=0,t.mode=qm;case qm:if(t.havedict===0)return r.next_out=l,r.avail_out=u,r.next_in=i,r.avail_in=c,t.hold=d,t.bits=f,pO;r.adler=t.check=1,t.mode=Jo;case Jo:if(e===hO||e===Op)break e;case dy:if(t.last){d>>>=f&7,f-=f&7,t.mode=fy;break}for(;f<3;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}switch(t.last=d&1,d>>>=1,f-=1,d&3){case 0:t.mode=dB;break;case 1:if(BO(t),t.mode=Mp,e===Op){d>>>=2,f-=2;break e}break;case 2:t.mode=fB;break;case 3:r.msg="invalid block type",t.mode=Dn}d>>>=2,f-=2;break;case dB:for(d>>>=f&7,f-=f&7;f<32;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if((d&65535)!==(d>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Dn;break}if(t.length=d&65535,d=0,f=0,t.mode=hy,e===Op)break e;case hy:t.mode=hB;case hB:if(y=t.length,y){if(y>c&&(y=c),y>u&&(y=u),y===0)break e;s.set(n.subarray(i,i+y),l),c-=y,i+=y,u-=y,l+=y,t.length-=y;break}t.mode=Jo;break;case fB:for(;f<14;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(t.nlen=(d&31)+257,d>>>=5,f-=5,t.ndist=(d&31)+1,d>>>=5,f-=5,t.ncode=(d&15)+4,d>>>=4,f-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Dn;break}t.have=0,t.mode=pB;case pB:for(;t.have<t.ncode;){for(;f<3;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}t.lens[L[t.have++]]=d&7,d>>>=3,f-=3}for(;t.have<19;)t.lens[L[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},Q=Kh(dO,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,Q){r.msg="invalid code lengths set",t.mode=Dn;break}t.have=0,t.mode=mB;case mB:for(;t.have<t.nlen+t.ndist;){for(;E=t.lencode[d&(1<<t.lenbits)-1],_=E>>>24,P=E>>>16&255,H=E&65535,!(_<=f);){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(H<16)d>>>=_,f-=_,t.lens[t.have++]=H;else{if(H===16){for(I=_+2;f<I;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(d>>>=_,f-=_,t.have===0){r.msg="invalid bit length repeat",t.mode=Dn;break}O=t.lens[t.have-1],y=3+(d&3),d>>>=2,f-=2}else if(H===17){for(I=_+3;f<I;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}d>>>=_,f-=_,O=0,y=3+(d&7),d>>>=3,f-=3}else{for(I=_+7;f<I;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}d>>>=_,f-=_,O=0,y=11+(d&127),d>>>=7,f-=7}if(t.have+y>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Dn;break}for(;y--;)t.lens[t.have++]=O}}if(t.mode===Dn)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Dn;break}if(t.lenbits=9,V={bits:t.lenbits},Q=Kh(c4,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,Q){r.msg="invalid literal/lengths set",t.mode=Dn;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},Q=Kh(u4,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,Q){r.msg="invalid distances set",t.mode=Dn;break}if(t.mode=Mp,e===Op)break e;case Mp:t.mode=Hp;case Hp:if(c>=6&&u>=258){r.next_out=l,r.avail_out=u,r.next_in=i,r.avail_in=c,t.hold=d,t.bits=f,aO(r,x),l=r.next_out,s=r.output,u=r.avail_out,i=r.next_in,n=r.input,c=r.avail_in,d=t.hold,f=t.bits,t.mode===Jo&&(t.back=-1);break}for(t.back=0;E=t.lencode[d&(1<<t.lenbits)-1],_=E>>>24,P=E>>>16&255,H=E&65535,!(_<=f);){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(P&&(P&240)===0){for(D=_,J=P,Z=H;E=t.lencode[Z+((d&(1<<D+J)-1)>>D)],_=E>>>24,P=E>>>16&255,H=E&65535,!(D+_<=f);){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}d>>>=D,f-=D,t.back+=D}if(d>>>=_,f-=_,t.back+=_,t.length=H,P===0){t.mode=xB;break}if(P&32){t.back=-1,t.mode=Jo;break}if(P&64){r.msg="invalid literal/length code",t.mode=Dn;break}t.extra=P&15,t.mode=gB;case gB:if(t.extra){for(I=t.extra;f<I;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}t.length+=d&(1<<t.extra)-1,d>>>=t.extra,f-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=yB;case yB:for(;E=t.distcode[d&(1<<t.distbits)-1],_=E>>>24,P=E>>>16&255,H=E&65535,!(_<=f);){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if((P&240)===0){for(D=_,J=P,Z=H;E=t.distcode[Z+((d&(1<<D+J)-1)>>D)],_=E>>>24,P=E>>>16&255,H=E&65535,!(D+_<=f);){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}d>>>=D,f-=D,t.back+=D}if(d>>>=_,f-=_,t.back+=_,P&64){r.msg="invalid distance code",t.mode=Dn;break}t.offset=H,t.extra=P&15,t.mode=vB;case vB:if(t.extra){for(I=t.extra;f<I;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}t.offset+=d&(1<<t.extra)-1,d>>>=t.extra,f-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Dn;break}t.mode=wB;case wB:if(u===0)break e;if(y=x-u,t.offset>y){if(y=t.offset-y,y>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Dn;break}y>t.wnext?(y-=t.wnext,C=t.wsize-y):C=t.wnext-y,y>t.length&&(y=t.length),N=t.window}else N=s,C=l-t.offset,y=t.length;y>u&&(y=u),u-=y,t.length-=y;do s[l++]=N[C++];while(--y);t.length===0&&(t.mode=Hp);break;case xB:if(u===0)break e;s[l++]=t.length,u--,t.mode=Hp;break;case fy:if(t.wrap){for(;f<32;){if(c===0)break e;c--,d|=n[i++]<<f,f+=8}if(x-=u,r.total_out+=x,t.total+=x,t.wrap&4&&x&&(r.adler=t.check=t.flags?po(t.check,s,x,l-x):jv(t.check,s,x,l-x)),x=u,t.wrap&4&&(t.flags?d:CB(d))!==t.check){r.msg="incorrect data check",t.mode=Dn;break}d=0,f=0}t.mode=bB;case bB:if(t.wrap&&t.flags){for(;f<32;){if(c===0)break e;c--,d+=n[i++]<<f,f+=8}if(t.wrap&4&&d!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Dn;break}d=0,f=0}t.mode=BB;case BB:Q=fO;break e;case Dn:Q=d4;break e;case f4:return h4;case p4:default:return yA}return r.next_out=l,r.avail_out=u,r.next_in=i,r.avail_in=c,t.hold=d,t.bits=f,(t.wsize||x!==r.avail_out&&t.mode<Dn&&(t.mode<fy||e!==tB))&&w4(r,r.output,r.next_out,x-r.avail_out),v-=r.avail_in,x-=r.avail_out,r.total_in+=v,r.total_out+=x,t.total+=x,t.wrap&4&&x&&(r.adler=t.check=t.flags?po(t.check,s,x,r.next_out-x):jv(t.check,s,x,r.next_out-x)),r.data_type=t.bits+(t.last?64:0)+(t.mode===Jo?128:0)+(t.mode===Mp||t.mode===hy?256:0),(v===0&&x===0||e===tB)&&Q===du&&(Q=mO),Q},EO=r=>{if(gu(r))return yA;let e=r.state;return e.window&&(e.window=null),r.state=null,du},IO=(r,e)=>{if(gu(r))return yA;const t=r.state;return(t.wrap&2)===0?yA:(t.head=e,e.done=!1,du)},_O=(r,e)=>{const t=e.length;let n,s,i;return gu(r)||(n=r.state,n.wrap!==0&&n.mode!==qm)?yA:n.mode===qm&&(s=1,s=jv(s,e,t,0),s!==n.check)?d4:(i=w4(r,e,t,t),i?(n.mode=f4,h4):(n.havedict=1,du))};var NO=g4,SO=y4,kO=m4,FO=bO,TO=v4,UO=CO,jO=EO,LO=IO,QO=_O,PO="pako inflate (from Nodeca project)",Xo={inflateReset:NO,inflateReset2:SO,inflateResetKeep:kO,inflateInit:FO,inflateInit2:TO,inflate:UO,inflateEnd:jO,inflateGetHeader:LO,inflateSetDictionary:QO,inflateInfo:PO};function DO(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var RO=DO;const x4=Object.prototype.toString,{Z_NO_FLUSH:OO,Z_FINISH:MO,Z_OK:lf,Z_STREAM_END:gy,Z_NEED_DICT:yy,Z_STREAM_ERROR:HO,Z_DATA_ERROR:IB,Z_MEM_ERROR:VO}=A4;function If(r){this.options=o4.assign({chunkSize:1024*64,windowBits:15,to:""},r||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sO,this.strm.avail_out=0;let t=Xo.inflateInit2(this.strm,e.windowBits);if(t!==lf)throw new Error(Lv[t]);if(this.header=new RO,Xo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Qv.string2buf(e.dictionary):x4.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Xo.inflateSetDictionary(this.strm,e.dictionary),t!==lf)))throw new Error(Lv[t])}If.prototype.push=function(r,e){const t=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,l,c;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?MO:OO,x4.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),i=Xo.inflate(t,l),i===yy&&s&&(i=Xo.inflateSetDictionary(t,s),i===lf?i=Xo.inflate(t,l):i===IB&&(i=yy));t.avail_in>0&&i===gy&&t.state.wrap>0&&r[t.next_in]!==0;)Xo.inflateReset(t),i=Xo.inflate(t,l);switch(i){case HO:case IB:case yy:case VO:return this.onEnd(i),this.ended=!0,!1}if(c=t.avail_out,t.next_out&&(t.avail_out===0||i===gy))if(this.options.to==="string"){let u=Qv.utf8border(t.output,t.next_out),d=t.next_out-u,f=Qv.buf2string(t.output,u);t.next_out=d,t.avail_out=n-d,d&&t.output.set(t.output.subarray(u,u+d),0),this.onData(f)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(i===lf&&c===0)){if(i===gy)return i=Xo.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};If.prototype.onData=function(r){this.chunks.push(r)};If.prototype.onEnd=function(r){r===lf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o4.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function KO(r,e){const t=new If(e);if(t.push(r),t.err)throw t.msg||Lv[t.err];return t.result}var zO=If,GO=KO,$O={Inflate:zO,inflate:GO};const{Inflate:qO,inflate:WO}=$O;var _B=qO,YO=WO;const b4=[];for(let r=0;r<256;r++){let e=r;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;b4[r]=e}const NB=4294967295;function JO(r,e,t){let n=r;for(let s=0;s<t;s++)n=b4[(n^e[s])&255]^n>>>8;return n}function XO(r,e){return(JO(NB,r,e)^NB)>>>0}function SB(r,e,t){const n=r.readUint32(),s=XO(new Uint8Array(r.buffer,r.byteOffset+r.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${t}. Expected ${n}, found ${s}`)}function B4(r,e,t){for(let n=0;n<t;n++)e[n]=r[n]}function C4(r,e,t,n){let s=0;for(;s<n;s++)e[s]=r[s];for(;s<t;s++)e[s]=r[s]+e[s-n]&255}function E4(r,e,t,n){let s=0;if(t.length===0)for(;s<n;s++)e[s]=r[s];else for(;s<n;s++)e[s]=r[s]+t[s]&255}function I4(r,e,t,n,s){let i=0;if(t.length===0){for(;i<s;i++)e[i]=r[i];for(;i<n;i++)e[i]=r[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=r[i]+(t[i]>>1)&255;for(;i<n;i++)e[i]=r[i]+(e[i-s]+t[i]>>1)&255}}function _4(r,e,t,n,s){let i=0;if(t.length===0){for(;i<s;i++)e[i]=r[i];for(;i<n;i++)e[i]=r[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=r[i]+t[i]&255;for(;i<n;i++)e[i]=r[i]+ZO(e[i-s],t[i],t[i-s])&255}}function ZO(r,e,t){const n=r+e-t,s=Math.abs(n-r),i=Math.abs(n-e),l=Math.abs(n-t);return s<=i&&s<=l?r:i<=l?e:t}function eM(r,e,t,n,s,i){switch(r){case 0:B4(e,t,s);break;case 1:C4(e,t,s,i);break;case 2:E4(e,t,n,s);break;case 3:I4(e,t,n,s,i);break;case 4:_4(e,t,n,s,i);break;default:throw new Error(`Unsupported filter: ${r}`)}}const tM=new Uint16Array([255]),rM=new Uint8Array(tM.buffer),nM=rM[0]===255;function sM(r){const{data:e,width:t,height:n,channels:s,depth:i}=r,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(i/8)*s,u=new Uint8Array(n*t*c);let d=0;for(let f=0;f<7;f++){const v=l[f],x=Math.ceil((t-v.x)/v.xStep),y=Math.ceil((n-v.y)/v.yStep);if(x<=0||y<=0)continue;const C=x*c,N=new Uint8Array(C);for(let E=0;E<y;E++){const _=e[d++],P=e.subarray(d,d+C);d+=C;const H=new Uint8Array(C);eM(_,P,H,N,C,c),N.set(H);for(let D=0;D<x;D++){const J=v.x+D*v.xStep,Z=v.y+E*v.yStep;if(!(J>=t||Z>=n))for(let O=0;O<c;O++)u[(Z*t+J)*c+O]=H[D*c+O]}}}if(i===16){const f=new Uint16Array(u.buffer);if(nM)for(let v=0;v<f.length;v++)f[v]=iM(f[v]);return f}else return u}function iM(r){return(r&255)<<8|r>>8&255}const aM=new Uint16Array([255]),AM=new Uint8Array(aM.buffer),oM=AM[0]===255,lM=new Uint8Array(0);function kB(r){const{data:e,width:t,height:n,channels:s,depth:i}=r,l=Math.ceil(i/8)*s,c=Math.ceil(i/8*s*t),u=new Uint8Array(n*c);let d=lM,f=0,v,x;for(let y=0;y<n;y++){switch(v=e.subarray(f+1,f+1+c),x=u.subarray(y*c,(y+1)*c),e[f]){case 0:B4(v,x,c);break;case 1:C4(v,x,c,l);break;case 2:E4(v,x,d,c);break;case 3:I4(v,x,d,c,l);break;case 4:_4(v,x,d,c,l);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}d=x,f+=c+1}if(i===16){const y=new Uint16Array(u.buffer);if(oM)for(let C=0;C<y.length;C++)y[C]=cM(y[C]);return y}else return u}function cM(r){return(r&255)<<8|r>>8&255}const cm=Uint8Array.of(137,80,78,71,13,10,26,10);function FB(r){if(!uM(r.readBytes(cm.length)))throw new Error("wrong PNG signature")}function uM(r){if(r.length<cm.length)return!1;for(let e=0;e<cm.length;e++)if(r[e]!==cm[e])return!1;return!0}const dM="tEXt",hM=0,N4=new TextDecoder("latin1");function fM(r){if(mM(r),r.length===0||r.length>79)throw new Error("keyword length must be between 1 and 79")}const pM=/^[\u0000-\u00FF]*$/;function mM(r){if(!pM.test(r))throw new Error("invalid latin1 text")}function gM(r,e,t){const n=S4(e);r[n]=yM(e,t-n.length-1)}function S4(r){for(r.mark();r.readByte()!==hM;);const e=r.offset;r.reset();const t=N4.decode(r.readBytes(e-r.offset-1));return r.skip(1),fM(t),t}function yM(r,e){return N4.decode(r.readBytes(e))}const La={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},vy={UNKNOWN:-1,DEFLATE:0},TB={UNKNOWN:-1,ADAPTIVE:0},wy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Vp={NONE:0,BACKGROUND:1,PREVIOUS:2},xy={SOURCE:0,OVER:1};class vM extends X1{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new _B,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=vy.UNKNOWN,this._filterMethod=TB.UNKNOWN,this._interlaceMethod=wy.UNKNOWN,this._colorType=La.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(FB(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(FB(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case dM:gM(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?SB(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?SB(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=wM(this.readUint8());const t=this.readUint8();this._colorType=t;let n;switch(t){case La.GREYSCALE:n=1;break;case La.TRUECOLOUR:n=3;break;case La.INDEXED_COLOUR:n=1;break;case La.GREYSCALE_ALPHA:n=2;break;case La.TRUECOLOUR_ALPHA:n=4;break;case La.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==vy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let s=0;s<t;s++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case La.GREYSCALE:case La.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case La.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const n=this.readByte();this._palette[t].push(n)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case La.UNKNOWN:case La.GREYSCALE_ALPHA:case La.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=S4(this),n=this.readUint8();if(n!==vy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const s=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:YO(s)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=kB({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(n,s,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case Vp.NONE:break;case Vp.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let i=0;i<this._png.width;i++){const l=(s*e.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)n.data[l+c]=0}break;case Vp.PREVIOUS:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,s=(i,l)=>{const c=((i+t.yOffset)*this._png.width+t.xOffset+l)*this._png.channels,u=(i*t.width+l)*this._png.channels;return{index:c,frameIndex:u}};switch(t.blendOp){case xy.SOURCE:for(let i=0;i<t.height;i++)for(let l=0;l<t.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++)e.data[c+d]=t.data[u+d]}break;case xy.OVER:for(let i=0;i<t.height;i++)for(let l=0;l<t.width;l++){const{index:c,frameIndex:u}=s(i,l);for(let d=0;d<this._png.channels;d++){const f=t.data[u+this._png.channels-1]/n,v=d%(this._png.channels-1)===0?1:t.data[u+d],x=Math.floor(f*v+(1-f)*e.data[c+d]);e.data[c+d]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==TB.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===wy.NO_INTERLACE)this._png.data=kB({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===wy.ADAM7)this._png.data=sM({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Vp.NONE,blendOp:xy.SOURCE,data:e}),this._inflator=new _B,this._writingDataChunks=!1}}function wM(r){if(r!==1&&r!==2&&r!==4&&r!==8&&r!==16)throw new Error(`invalid bit depth: ${r}`);return r}var UB;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.METRE=1]="METRE"})(UB||(UB={}));function xM(r,e){return new vM(r,e).decode()}var ar=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function by(){ar.console&&typeof ar.console.log=="function"&&ar.console.log.apply(ar.console,arguments)}var un={log:by,warn:function(r){ar.console&&(typeof ar.console.warn=="function"?ar.console.warn.apply(ar.console,arguments):by.call(null,arguments))},error:function(r){ar.console&&(typeof ar.console.error=="function"?ar.console.error.apply(ar.console,arguments):by(r))}};function By(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){qc(n.response,e,t)},n.onerror=function(){un.error("could not download file")},n.send()}function jB(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Kp(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var qc=ar.saveAs||((typeof window>"u"?"undefined":sn(window))!=="object"||window!==ar?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=ar.URL||ar.webkitURL,s=document.createElement("a");e=e||r.name||"download",s.download=e,s.rel="noopener",typeof r=="string"?(s.href=r,s.origin!==location.origin?jB(s.href)?By(r,e,t):Kp(s,s.target="_blank"):Kp(s)):(s.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){Kp(s)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(jB(r))By(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){Kp(n)})}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:sn(i)!=="object"&&(un.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return By(r,e,t);var s=r.type==="application/octet-stream",i=/constructor/i.test(ar.HTMLElement)||ar.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&i)&&(typeof FileReader>"u"?"undefined":sn(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var f=c.result;f=l?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},c.readAsDataURL(r)}else{var u=ar.URL||ar.webkitURL,d=u.createObjectURL(r);n?n.location=d:location.href=d,n=null,setTimeout(function(){u.revokeObjectURL(d)},4e4)}});function k4(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],n=0;n<t.length;n++){var s=t[n].re,i=t[n].process,l=s.exec(r);l&&(e=i(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),d=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),d.length==1&&(d="0"+d),"#"+c+u+d}}var um=ar.atob.bind(ar),LB=ar.btoa.bind(ar);function Cy(r,e){var t=r[0],n=r[1],s=r[2],i=r[3];t=Ui(t,n,s,i,e[0],7,-680876936),i=Ui(i,t,n,s,e[1],12,-389564586),s=Ui(s,i,t,n,e[2],17,606105819),n=Ui(n,s,i,t,e[3],22,-1044525330),t=Ui(t,n,s,i,e[4],7,-176418897),i=Ui(i,t,n,s,e[5],12,1200080426),s=Ui(s,i,t,n,e[6],17,-1473231341),n=Ui(n,s,i,t,e[7],22,-45705983),t=Ui(t,n,s,i,e[8],7,1770035416),i=Ui(i,t,n,s,e[9],12,-1958414417),s=Ui(s,i,t,n,e[10],17,-42063),n=Ui(n,s,i,t,e[11],22,-1990404162),t=Ui(t,n,s,i,e[12],7,1804603682),i=Ui(i,t,n,s,e[13],12,-40341101),s=Ui(s,i,t,n,e[14],17,-1502002290),t=ji(t,n=Ui(n,s,i,t,e[15],22,1236535329),s,i,e[1],5,-165796510),i=ji(i,t,n,s,e[6],9,-1069501632),s=ji(s,i,t,n,e[11],14,643717713),n=ji(n,s,i,t,e[0],20,-373897302),t=ji(t,n,s,i,e[5],5,-701558691),i=ji(i,t,n,s,e[10],9,38016083),s=ji(s,i,t,n,e[15],14,-660478335),n=ji(n,s,i,t,e[4],20,-405537848),t=ji(t,n,s,i,e[9],5,568446438),i=ji(i,t,n,s,e[14],9,-1019803690),s=ji(s,i,t,n,e[3],14,-187363961),n=ji(n,s,i,t,e[8],20,1163531501),t=ji(t,n,s,i,e[13],5,-1444681467),i=ji(i,t,n,s,e[2],9,-51403784),s=ji(s,i,t,n,e[7],14,1735328473),t=Li(t,n=ji(n,s,i,t,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Li(i,t,n,s,e[8],11,-2022574463),s=Li(s,i,t,n,e[11],16,1839030562),n=Li(n,s,i,t,e[14],23,-35309556),t=Li(t,n,s,i,e[1],4,-1530992060),i=Li(i,t,n,s,e[4],11,1272893353),s=Li(s,i,t,n,e[7],16,-155497632),n=Li(n,s,i,t,e[10],23,-1094730640),t=Li(t,n,s,i,e[13],4,681279174),i=Li(i,t,n,s,e[0],11,-358537222),s=Li(s,i,t,n,e[3],16,-722521979),n=Li(n,s,i,t,e[6],23,76029189),t=Li(t,n,s,i,e[9],4,-640364487),i=Li(i,t,n,s,e[12],11,-421815835),s=Li(s,i,t,n,e[15],16,530742520),t=Qi(t,n=Li(n,s,i,t,e[2],23,-995338651),s,i,e[0],6,-198630844),i=Qi(i,t,n,s,e[7],10,1126891415),s=Qi(s,i,t,n,e[14],15,-1416354905),n=Qi(n,s,i,t,e[5],21,-57434055),t=Qi(t,n,s,i,e[12],6,1700485571),i=Qi(i,t,n,s,e[3],10,-1894986606),s=Qi(s,i,t,n,e[10],15,-1051523),n=Qi(n,s,i,t,e[1],21,-2054922799),t=Qi(t,n,s,i,e[8],6,1873313359),i=Qi(i,t,n,s,e[15],10,-30611744),s=Qi(s,i,t,n,e[6],15,-1560198380),n=Qi(n,s,i,t,e[13],21,1309151649),t=Qi(t,n,s,i,e[4],6,-145523070),i=Qi(i,t,n,s,e[11],10,-1120210379),s=Qi(s,i,t,n,e[2],15,718787259),n=Qi(n,s,i,t,e[9],21,-343485551),r[0]=rc(t,r[0]),r[1]=rc(n,r[1]),r[2]=rc(s,r[2]),r[3]=rc(i,r[3])}function Lg(r,e,t,n,s,i){return e=rc(rc(e,r),rc(n,i)),rc(e<<s|e>>>32-s,t)}function Ui(r,e,t,n,s,i,l){return Lg(e&t|~e&n,r,e,s,i,l)}function ji(r,e,t,n,s,i,l){return Lg(e&n|t&~n,r,e,s,i,l)}function Li(r,e,t,n,s,i,l){return Lg(e^t^n,r,e,s,i,l)}function Qi(r,e,t,n,s,i,l){return Lg(t^(e|~n),r,e,s,i,l)}function F4(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Cy(n,bM(r.substring(e-64,e)));r=r.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)s[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Cy(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,Cy(n,s),n}function bM(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}var QB="0123456789abcdef".split("");function BM(r){for(var e="",t=0;t<4;t++)e+=QB[r>>8*t+4&15]+QB[r>>8*t&15];return e}function CM(r){return String.fromCharCode(255&r,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function Pv(r){return F4(r).map(CM).join("")}var EM=(function(r){for(var e=0;e<r.length;e++)r[e]=BM(r[e]);return r.join("")})(F4("hello"))!="5d41402abc4b2a76b9719d911017c592";function rc(r,e){if(EM){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}function Dv(r,e){var t,n,s,i;if(r!==t){for(var l=(s=r,i=1+(256/r.length|0),new Array(i+1).join(s)),c=[],u=0;u<256;u++)c[u]=u;var d=0;for(u=0;u<256;u++){var f=c[u];d=(d+f+l.charCodeAt(u))%256,c[u]=c[d],c[d]=f}t=r,n=c}else c=n;var v=e.length,x=0,y=0,C="";for(u=0;u<v;u++)y=(y+(f=c[x=(x+1)%256]))%256,c[x]=c[y],c[y]=f,l=c[(c[x]+c[y])%256],C+=String.fromCharCode(e.charCodeAt(u)^l);return C}var PB={print:4,modify:8,copy:16,"annot-forms":32};function ed(r,e,t,n){this.v=1,this.r=2;var s=192;r.forEach(function(c){if(PB.perm!==void 0)throw new Error("Invalid permission: "+c);s+=PB[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),l=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^s)),this.encryptionKey=Pv(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Dv(this.encryptionKey,this.padding)}function td(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var s=r.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):r[n]}return e}function DB(r){if(sn(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,s){if(s=s||!1,typeof t!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[n,!!s],i},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[t]){var l=e[t][i];try{l[0].apply(r,n)}catch(c){ar.console&&un.error("jsPDF PubSub Error",c.message,c)}l[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Wm(r){if(!(this instanceof Wm))return new Wm(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function T4(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Jc(r,e,t,n,s){if(!(this instanceof Jc))return new Jc(r,e,t,n,s);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,T4.call(this,n,s)}function sd(r,e,t,n,s){if(!(this instanceof sd))return new sd(r,e,t,n,s);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,T4.call(this,n,s)}function qt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],l=[],c=1,u=16,d="S",f=null;sn(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,s=r.format||s,i=r.compress||r.compressPdf||i,(f=r.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),c=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(u=r.floatPrecision),d=r.defaultPathOperation||"S"),l=r.filters||(i===!0?["FlateEncode"]:l),n=n||"mm",t=(""+(t||"P")).toLowerCase();var v=r.putOnlyUsedFonts||!1,x={},y={internal:{},__private__:{}};y.__private__.PubSub=DB;var C="1.3",N=y.__private__.getPdfVersion=function(){return C};y.__private__.setPdfVersion=function(b){C=b};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return E};var _=y.__private__.getPageFormat=function(b){return E[b]};s=s||"a4";var P="compat",H="advanced",D=P;function J(){this.saveGraphicsState(),le(new Ot(Fe,0,0,-Fe,0,Qs()*Fe).toString()+" cm"),this.setFontSize(this.getFontSize()/Fe),d="n",D=H}function Z(){this.restoreGraphicsState(),d="S",D=P}var O=y.__private__.combineFontStyleAndFontWeight=function(b,q){if(b=="bold"&&q=="normal"||b=="bold"&&q==400||b=="normal"&&q=="italic"||b=="bold"&&q=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return q&&(b=q==400||q==="normal"?b==="italic"?"italic":"normal":q!=700&&q!=="bold"||b!=="normal"?(q==700?"bold":q)+""+b:"bold"),b};y.advancedAPI=function(b){var q=D===P;return q&&J.call(this),typeof b!="function"||(b(this),q&&Z.call(this)),this},y.compatAPI=function(b){var q=D===H;return q&&Z.call(this),typeof b!="function"||(b(this),q&&J.call(this)),this},y.isAdvancedAPI=function(){return D===H};var Q,U=function(b){if(D!==H)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=y.roundToPrecision=y.__private__.roundToPrecision=function(b,q){var Ce=e||q;if(isNaN(b)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(Ce).replace(/0+$/,"")};Q=y.hpf=y.__private__.hpf=typeof u=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return V(b,u)}:u==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return V(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return V(b,16)};var I=y.f2=y.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return V(b,2)},L=y.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return V(b,3)},F=y.scale=y.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return D===P?b*Fe:D===H?b:void 0},ee=function(b){return F((function(q){return D===P?Qs()-q:D===H?q:void 0})(b))};y.__private__.setPrecision=y.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(e=parseInt(b,10))};var ge,ue="00000000000000000000000000000000",fe=y.__private__.getFileId=function(){return ue},ae=y.__private__.setFileId=function(b){return ue=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Zr=new ed(f.userPermissions,f.userPassword,f.ownerPassword,ue)),ue};y.setFileId=function(b){return ae(b),this},y.getFileId=function(){return fe()};var $=y.__private__.convertDateToPDFDate=function(b){var q=b.getTimezoneOffset(),Ce=q<0?"+":"-",Ue=Math.floor(Math.abs(q/60)),Ke=Math.abs(q%60),lt=[Ce,Y(Ue),"'",Y(Ke),"'"].join("");return["D:",b.getFullYear(),Y(b.getMonth()+1),Y(b.getDate()),Y(b.getHours()),Y(b.getMinutes()),Y(b.getSeconds()),lt].join("")},me=y.__private__.convertPDFDateToDate=function(b){var q=parseInt(b.substr(2,4),10),Ce=parseInt(b.substr(6,2),10)-1,Ue=parseInt(b.substr(8,2),10),Ke=parseInt(b.substr(10,2),10),lt=parseInt(b.substr(12,2),10),gt=parseInt(b.substr(14,2),10);return new Date(q,Ce,Ue,Ke,lt,gt,0)},z=y.__private__.setCreationDate=function(b){var q;if(b===void 0&&(b=new Date),b instanceof Date)q=$(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");q=b}return ge=q},S=y.__private__.getCreationDate=function(b){var q=ge;return b==="jsDate"&&(q=me(ge)),q};y.setCreationDate=function(b){return z(b),this},y.getCreationDate=function(b){return S(b)};var K,Y=y.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},G=y.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},oe=0,ye=[],Le=[],be=0,je=[],Ge=[],tt=!1,it=Le;y.__private__.setCustomOutputDestination=function(b){tt=!0,it=b};var It=function(b){tt||(it=b)};y.__private__.resetCustomOutputDestination=function(){tt=!1,it=Le};var le=y.__private__.out=function(b){return b=b.toString(),be+=b.length+1,it.push(b),it},ft=y.__private__.write=function(b){return le(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},ct=y.__private__.getArrayBuffer=function(b){for(var q=b.length,Ce=new ArrayBuffer(q),Ue=new Uint8Array(Ce);q--;)Ue[q]=b.charCodeAt(q);return Ce},pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return pt};var he=r.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(b){return he=D===H?b/Fe:b,this};var Se,Qe=y.__private__.getFontSize=y.getFontSize=function(){return D===P?he:he*Fe},X=r.R2L||!1;y.__private__.setR2L=y.setR2L=function(b){return X=b,this},y.__private__.getR2L=y.getR2L=function(){return X};var ne,pe=y.__private__.setZoomMode=function(b){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))Se=b;else if(isNaN(b)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');Se=b}else Se=parseInt(b,10)};y.__private__.getZoomMode=function(){return Se};var Ie,se=y.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');ne=b};y.__private__.getPageMode=function(){return ne};var Te=y.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');Ie=b};y.__private__.getLayoutMode=function(){return Ie},y.__private__.setDisplayMode=y.setDisplayMode=function(b,q,Ce){return pe(b),Te(q),se(Ce),this};var we={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(b){if(Object.keys(we).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return we[b]},y.__private__.getDocumentProperties=function(){return we},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(b){for(var q in we)we.hasOwnProperty(q)&&b[q]&&(we[q]=b[q]);return this},y.__private__.setDocumentProperty=function(b,q){if(Object.keys(we).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return we[b]=q};var Be,Fe,De,At,_e,Pe={},Ye={},vt=[],ke={},We={},Me={},rt={},mt=null,bt=0,dt=[],_t=new DB(y),Wt=r.hotfixes||[],Ar={},vn={},_r=[],Ot=function b(q,Ce,Ue,Ke,lt,gt){if(!(this instanceof b))return new b(q,Ce,Ue,Ke,lt,gt);isNaN(q)&&(q=1),isNaN(Ce)&&(Ce=0),isNaN(Ue)&&(Ue=0),isNaN(Ke)&&(Ke=1),isNaN(lt)&&(lt=0),isNaN(gt)&&(gt=0),this._matrix=[q,Ce,Ue,Ke,lt,gt]};Object.defineProperty(Ot.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ot.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ot.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ot.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ot.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ot.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ot.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Ot.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Ot.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Ot.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Ot.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Ot.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Ot.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ot.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ot.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ot.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ot.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Q).join(b)},Ot.prototype.multiply=function(b){var q=b.sx*this.sx+b.shy*this.shx,Ce=b.sx*this.shy+b.shy*this.sy,Ue=b.shx*this.sx+b.sy*this.shx,Ke=b.shx*this.shy+b.sy*this.sy,lt=b.tx*this.sx+b.ty*this.shx+this.tx,gt=b.tx*this.shy+b.ty*this.sy+this.ty;return new Ot(q,Ce,Ue,Ke,lt,gt)},Ot.prototype.decompose=function(){var b=this.sx,q=this.shy,Ce=this.shx,Ue=this.sy,Ke=this.tx,lt=this.ty,gt=Math.sqrt(b*b+q*q),Ut=(b/=gt)*Ce+(q/=gt)*Ue;Ce-=b*Ut,Ue-=q*Ut;var Mt=Math.sqrt(Ce*Ce+Ue*Ue);return Ut/=Mt,b*(Ue/=Mt)<q*(Ce/=Mt)&&(b=-b,q=-q,Ut=-Ut,gt=-gt),{scale:new Ot(gt,0,0,Mt,0,0),translate:new Ot(1,0,0,1,Ke,lt),rotate:new Ot(b,q,-q,b,0,0),skew:new Ot(1,0,Ut,1,0,0)}},Ot.prototype.toString=function(b){return this.join(" ")},Ot.prototype.inversed=function(){var b=this.sx,q=this.shy,Ce=this.shx,Ue=this.sy,Ke=this.tx,lt=this.ty,gt=1/(b*Ue-q*Ce),Ut=Ue*gt,Mt=-q*gt,Zt=-Ce*gt,rr=b*gt;return new Ot(Ut,Mt,Zt,rr,-Ut*Ke-Zt*lt,-Mt*Ke-rr*lt)},Ot.prototype.applyToPoint=function(b){var q=b.x*this.sx+b.y*this.shx+this.tx,Ce=b.x*this.shy+b.y*this.sy+this.ty;return new si(q,Ce)},Ot.prototype.applyToRectangle=function(b){var q=this.applyToPoint(b),Ce=this.applyToPoint(new si(b.x+b.w,b.y+b.h));return new eA(q.x,q.y,Ce.x-q.x,Ce.y-q.y)},Ot.prototype.clone=function(){var b=this.sx,q=this.shy,Ce=this.shx,Ue=this.sy,Ke=this.tx,lt=this.ty;return new Ot(b,q,Ce,Ue,Ke,lt)},y.Matrix=Ot;var yr=y.matrixMult=function(b,q){return q.multiply(b)},_n=new Ot(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=_n;var Nr=function(b,q){if(!We[b]){var Ce=(q instanceof Jc?"Sh":"P")+(Object.keys(ke).length+1).toString(10);q.id=Ce,We[b]=Ce,ke[Ce]=q,_t.publish("addPattern",q)}};y.ShadingPattern=Jc,y.TilingPattern=sd,y.addShadingPattern=function(b,q){return U("addShadingPattern()"),Nr(b,q),this},y.beginTilingPattern=function(b){U("beginTilingPattern()"),Ls(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},y.endTilingPattern=function(b,q){U("endTilingPattern()"),q.stream=Ge[K].join(`
`),Nr(b,q),_t.publish("endTilingPattern",q),_r.pop().restore()};var An,Ur=y.__private__.newObject=function(){var b=Xr();return Hr(b,!0),b},Xr=y.__private__.newObjectDeferred=function(){return oe++,ye[oe]=function(){return be},oe},Hr=function(b,q){return q=typeof q=="boolean"&&q,ye[b]=be,q&&le(b+" 0 obj"),b},Hi=y.__private__.newAdditionalObject=function(){var b={objId:Xr(),content:""};return je.push(b),b},ta=Xr(),ys=Xr(),yi=y.__private__.decodeColorString=function(b){var q=b.split(" ");if(q.length!==2||q[1]!=="g"&&q[1]!=="G")q.length!==5||q[4]!=="k"&&q[4]!=="K"||(q=[(1-q[0])*(1-q[3]),(1-q[1])*(1-q[3]),(1-q[2])*(1-q[3]),"r"]);else{var Ce=parseFloat(q[0]);q=[Ce,Ce,Ce,"r"]}for(var Ue="#",Ke=0;Ke<3;Ke++)Ue+=("0"+Math.floor(255*parseFloat(q[Ke])).toString(16)).slice(-2);return Ue},Rn=y.__private__.encodeColorString=function(b){var q;typeof b=="string"&&(b={ch1:b});var Ce=b.ch1,Ue=b.ch2,Ke=b.ch3,lt=b.ch4,gt=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var Ut=new k4(Ce);if(Ut.ok)Ce=Ut.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var Mt=parseInt(Ce.substr(1),16);Ce=Mt>>16&255,Ue=Mt>>8&255,Ke=255&Mt}if(Ue===void 0||lt===void 0&&Ce===Ue&&Ue===Ke)q=typeof Ce=="string"?Ce+" "+gt[0]:b.precision===2?I(Ce/255)+" "+gt[0]:L(Ce/255)+" "+gt[0];else if(lt===void 0||sn(lt)==="object"){if(lt&&!isNaN(lt.a)&&lt.a===0)return["1.","1.","1.",gt[1]].join(" ");q=typeof Ce=="string"?[Ce,Ue,Ke,gt[1]].join(" "):b.precision===2?[I(Ce/255),I(Ue/255),I(Ke/255),gt[1]].join(" "):[L(Ce/255),L(Ue/255),L(Ke/255),gt[1]].join(" ")}else q=typeof Ce=="string"?[Ce,Ue,Ke,lt,gt[2]].join(" "):b.precision===2?[I(Ce),I(Ue),I(Ke),I(lt),gt[2]].join(" "):[L(Ce),L(Ue),L(Ke),L(lt),gt[2]].join(" ");return q},Fs=y.__private__.getFilters=function(){return l},Nn=y.__private__.putStream=function(b){var q=(b=b||{}).data||"",Ce=b.filters||Fs(),Ue=b.alreadyAppliedFilters||[],Ke=b.addLength1||!1,lt=q.length,gt=b.objectId,Ut=function(kn){return kn};if(f!==null&&gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Ut=Zr.encryptor(gt,0));var Mt={};Ce===!0&&(Ce=["FlateEncode"]);var Zt=b.additionalKeyValues||[],rr=(Mt=qt.API.processDataByFilters!==void 0?qt.API.processDataByFilters(q,Ce):{data:q,reverseChain:[]}).reverseChain+(Array.isArray(Ue)?Ue.join(" "):Ue.toString());if(Mt.data.length!==0&&(Zt.push({key:"Length",value:Mt.data.length}),Ke===!0&&Zt.push({key:"Length1",value:lt})),rr.length!=0)if(rr.split("/").length-1==1)Zt.push({key:"Filter",value:rr});else{Zt.push({key:"Filter",value:"["+rr+"]"});for(var wr=0;wr<Zt.length;wr+=1)if(Zt[wr].key==="DecodeParms"){for(var jr=[],xn=0;xn<Mt.reverseChain.split("/").length-1;xn+=1)jr.push("null");jr.push(Zt[wr].value),Zt[wr].value="["+jr.join(" ")+"]"}}le("<<");for(var Vr=0;Vr<Zt.length;Vr++)le("/"+Zt[Vr].key+" "+Zt[Vr].value);le(">>"),Mt.data.length!==0&&(le("stream"),le(Ut(Mt.data)),le("endstream"))},Ha=y.__private__.putPage=function(b){var q=b.number,Ce=b.data,Ue=b.objId,Ke=b.contentsObjId;Hr(Ue,!0),le("<</Type /Page"),le("/Parent "+b.rootDictionaryObjId+" 0 R"),le("/Resources "+b.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(Q(b.mediaBox.bottomLeftX))+" "+parseFloat(Q(b.mediaBox.bottomLeftY))+" "+Q(b.mediaBox.topRightX)+" "+Q(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&le("/CropBox ["+Q(b.cropBox.bottomLeftX)+" "+Q(b.cropBox.bottomLeftY)+" "+Q(b.cropBox.topRightX)+" "+Q(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&le("/BleedBox ["+Q(b.bleedBox.bottomLeftX)+" "+Q(b.bleedBox.bottomLeftY)+" "+Q(b.bleedBox.topRightX)+" "+Q(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&le("/TrimBox ["+Q(b.trimBox.bottomLeftX)+" "+Q(b.trimBox.bottomLeftY)+" "+Q(b.trimBox.topRightX)+" "+Q(b.trimBox.topRightY)+"]"),b.artBox!==null&&le("/ArtBox ["+Q(b.artBox.bottomLeftX)+" "+Q(b.artBox.bottomLeftY)+" "+Q(b.artBox.topRightX)+" "+Q(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&le("/UserUnit "+b.userUnit),_t.publish("putPage",{objId:Ue,pageContext:dt[q],pageNumber:q,page:Ce}),le("/Contents "+Ke+" 0 R"),le(">>"),le("endobj");var lt=Ce.join(`
`);return D===H&&(lt+=`
Q`),Hr(Ke,!0),Nn({data:lt,filters:Fs(),objectId:Ke}),le("endobj"),Ue},vi=y.__private__.putPages=function(){var b,q,Ce=[];for(b=1;b<=bt;b++)dt[b].objId=Xr(),dt[b].contentsObjId=Xr();for(b=1;b<=bt;b++)Ce.push(Ha({number:b,data:Ge[b],objId:dt[b].objId,contentsObjId:dt[b].contentsObjId,mediaBox:dt[b].mediaBox,cropBox:dt[b].cropBox,bleedBox:dt[b].bleedBox,trimBox:dt[b].trimBox,artBox:dt[b].artBox,userUnit:dt[b].userUnit,rootDictionaryObjId:ta,resourceDictionaryObjId:ys}));Hr(ta,!0),le("<</Type /Pages");var Ue="/Kids [";for(q=0;q<bt;q++)Ue+=Ce[q]+" 0 R ";le(Ue+"]"),le("/Count "+bt),le(">>"),le("endobj"),_t.publish("postPutPages")},ra=function(b){_t.publish("putFont",{font:b,out:le,newObject:Ur,putStream:Nn}),b.isAlreadyPutted!==!0&&(b.objectNumber=Ur(),le("<<"),le("/Type /Font"),le("/BaseFont /"+td(b.postScriptName)),le("/Subtype /Type1"),typeof b.encoding=="string"&&le("/Encoding /"+b.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},Ba=function(b){b.objectNumber=Ur();var q=[];q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Form"}),q.push({key:"BBox",value:"["+[Q(b.x),Q(b.y),Q(b.x+b.width),Q(b.y+b.height)].join(" ")+"]"}),q.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var Ce=b.pages[1].join(`
`);Nn({data:Ce,additionalKeyValues:q,objectId:b.objectNumber}),le("endobj")},Va=function(b,q){q||(q=21);var Ce=Ur(),Ue=(function(gt,Ut){var Mt,Zt=[],rr=1/(Ut-1);for(Mt=0;Mt<1;Mt+=rr)Zt.push(Mt);if(Zt.push(1),gt[0].offset!=0){var wr={offset:0,color:gt[0].color};gt.unshift(wr)}if(gt[gt.length-1].offset!=1){var jr={offset:1,color:gt[gt.length-1].color};gt.push(jr)}for(var xn="",Vr=0,kn=0;kn<Zt.length;kn++){for(Mt=Zt[kn];Mt>gt[Vr+1].offset;)Vr++;var hn=gt[Vr].offset,Fn=(Mt-hn)/(gt[Vr+1].offset-hn),bn=gt[Vr].color,xi=gt[Vr+1].color;xn+=G(Math.round((1-Fn)*bn[0]+Fn*xi[0]).toString(16))+G(Math.round((1-Fn)*bn[1]+Fn*xi[1]).toString(16))+G(Math.round((1-Fn)*bn[2]+Fn*xi[2]).toString(16))}return xn.trim()})(b.colors,q),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+q+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nn({data:Ue,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),le("endobj"),b.objectNumber=Ur(),le("<< /ShadingType "+b.type),le("/ColorSpace /DeviceRGB");var lt="/Coords ["+Q(parseFloat(b.coords[0]))+" "+Q(parseFloat(b.coords[1]))+" ";b.type===2?lt+=Q(parseFloat(b.coords[2]))+" "+Q(parseFloat(b.coords[3])):lt+=Q(parseFloat(b.coords[2]))+" "+Q(parseFloat(b.coords[3]))+" "+Q(parseFloat(b.coords[4]))+" "+Q(parseFloat(b.coords[5])),le(lt+="]"),b.matrix&&le("/Matrix ["+b.matrix.toString()+"]"),le("/Function "+Ce+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},vA=function(b,q){var Ce=Xr(),Ue=Ur();q.push({resourcesOid:Ce,objectOid:Ue}),b.objectNumber=Ue;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+b.boundingBox.map(Q).join(" ")+"]"}),Ke.push({key:"XStep",value:Q(b.xStep)}),Ke.push({key:"YStep",value:Q(b.yStep)}),Ke.push({key:"Resources",value:Ce+" 0 R"}),b.matrix&&Ke.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),Nn({data:b.stream,additionalKeyValues:Ke,objectId:b.objectNumber}),le("endobj")},Ec=function(b){for(var q in b.objectNumber=Ur(),le("<<"),b)switch(q){case"opacity":le("/ca "+I(b[q]));break;case"stroke-opacity":le("/CA "+I(b[q]))}le(">>"),le("endobj")},Rr=function(b){Hr(b.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var q in le("/Font <<"),Pe)Pe.hasOwnProperty(q)&&(v===!1||v===!0&&x.hasOwnProperty(q))&&le("/"+q+" "+Pe[q].objectNumber+" 0 R");le(">>")})(),(function(){if(Object.keys(ke).length>0){for(var q in le("/Shading <<"),ke)ke.hasOwnProperty(q)&&ke[q]instanceof Jc&&ke[q].objectNumber>=0&&le("/"+q+" "+ke[q].objectNumber+" 0 R");_t.publish("putShadingPatternDict"),le(">>")}})(),(function(q){if(Object.keys(ke).length>0){for(var Ce in le("/Pattern <<"),ke)ke.hasOwnProperty(Ce)&&ke[Ce]instanceof y.TilingPattern&&ke[Ce].objectNumber>=0&&ke[Ce].objectNumber<q&&le("/"+Ce+" "+ke[Ce].objectNumber+" 0 R");_t.publish("putTilingPatternDict"),le(">>")}})(b.objectOid),(function(){if(Object.keys(Me).length>0){var q;for(q in le("/ExtGState <<"),Me)Me.hasOwnProperty(q)&&Me[q].objectNumber>=0&&le("/"+q+" "+Me[q].objectNumber+" 0 R");_t.publish("putGStateDict"),le(">>")}})(),(function(){for(var q in le("/XObject <<"),Ar)Ar.hasOwnProperty(q)&&Ar[q].objectNumber>=0&&le("/"+q+" "+Ar[q].objectNumber+" 0 R");_t.publish("putXobjectDict"),le(">>")})(),le(">>"),le("endobj")},So=function(b){Ye[b.fontName]=Ye[b.fontName]||{},Ye[b.fontName][b.fontStyle]=b.id},Ka=function(b,q,Ce,Ue,Ke){var lt={id:"F"+(Object.keys(Pe).length+1).toString(10),postScriptName:b,fontName:q,fontStyle:Ce,encoding:Ue,isStandardFont:Ke||!1,metadata:{}};return _t.publish("addFont",{font:lt,instance:this}),Pe[lt.id]=lt,So(lt),lt.id},is=y.__private__.pdfEscape=y.pdfEscape=function(b,q){return(function(Ce,Ue){var Ke,lt,gt,Ut,Mt,Zt,rr,wr,jr;if(gt=(Ue=Ue||{}).sourceEncoding||"Unicode",Mt=Ue.outputEncoding,(Ue.autoencode||Mt)&&Pe[Be].metadata&&Pe[Be].metadata[gt]&&Pe[Be].metadata[gt].encoding&&(Ut=Pe[Be].metadata[gt].encoding,!Mt&&Pe[Be].encoding&&(Mt=Pe[Be].encoding),!Mt&&Ut.codePages&&(Mt=Ut.codePages[0]),typeof Mt=="string"&&(Mt=Ut[Mt]),Mt)){for(rr=!1,Zt=[],Ke=0,lt=Ce.length;Ke<lt;Ke++)(wr=Mt[Ce.charCodeAt(Ke)])?Zt.push(String.fromCharCode(wr)):Zt.push(Ce[Ke]),Zt[Ke].charCodeAt(0)>>8&&(rr=!0);Ce=Zt.join("")}for(Ke=Ce.length;rr===void 0&&Ke!==0;)Ce.charCodeAt(Ke-1)>>8&&(rr=!0),Ke--;if(!rr)return Ce;for(Zt=Ue.noBOM?[]:[254,255],Ke=0,lt=Ce.length;Ke<lt;Ke++){if((jr=(wr=Ce.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+Ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(jr),Zt.push(wr-(jr<<8))}return String.fromCharCode.apply(void 0,Zt)})(b,q).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hs=y.__private__.beginPage=function(b){Ge[++bt]=[],dt[bt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},za(bt),It(Ge[K])},qA=function(b,q){var Ce,Ue,Ke;switch(t=q||t,typeof b=="string"&&(Ce=_(b.toLowerCase()),Array.isArray(Ce)&&(Ue=Ce[0],Ke=Ce[1])),Array.isArray(b)&&(Ue=b[0]*Fe,Ke=b[1]*Fe),isNaN(Ue)&&(Ue=s[0],Ke=s[1]),(Ue>14400||Ke>14400)&&(un.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ue=Math.min(14400,Ue),Ke=Math.min(14400,Ke)),s=[Ue,Ke],t.substr(0,1)){case"l":Ke>Ue&&(s=[Ke,Ue]);break;case"p":Ue>Ke&&(s=[Ke,Ue])}Hs(s),Yt(ni),le(sa),zr!==0&&le(zr+" J"),Fo!==0&&le(Fo+" j"),_t.publish("addPage",{pageNumber:bt})},WA=function(b){b>0&&b<=bt&&(Ge.splice(b,1),dt.splice(b,1),bt--,K>bt&&(K=bt),this.setPage(K))},za=function(b){b>0&&b<=bt&&(K=b)},Vs=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Ge.length-1},ko=function(b,q,Ce){var Ue,Ke=void 0;return Ce=Ce||{},b=b!==void 0?b:Pe[Be].fontName,q=q!==void 0?q:Pe[Be].fontStyle,Ue=b.toLowerCase(),Ye[Ue]!==void 0&&Ye[Ue][q]!==void 0?Ke=Ye[Ue][q]:Ye[b]!==void 0&&Ye[b][q]!==void 0?Ke=Ye[b][q]:Ce.disableWarning===!1&&un.warn("Unable to look up font label for font '"+b+"', '"+q+"'. Refer to getFontList() for available fonts."),Ke||Ce.noFallback||(Ke=Ye.times[q])==null&&(Ke=Ye.times.normal),Ke},dn=y.__private__.putInfo=function(){var b=Ur(),q=function(Ue){return Ue};for(var Ce in f!==null&&(q=Zr.encryptor(b,0)),le("<<"),le("/Producer ("+is(q("jsPDF "+qt.version))+")"),we)we.hasOwnProperty(Ce)&&we[Ce]&&le("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+is(q(we[Ce]))+")");le("/CreationDate ("+is(q(ge))+")"),le(">>"),le("endobj")},Ga=y.__private__.putCatalog=function(b){var q=(b=b||{}).rootDictionaryObjId||ta;switch(Ur(),le("<<"),le("/Type /Catalog"),le("/Pages "+q+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+Se;Ce.substr(Ce.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&le("/OpenAction [3 0 R /XYZ null null "+I(Se)+"]")}switch(Ie||(Ie="continuous"),Ie){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}ne&&le("/PageMode /"+ne),_t.publish("putCatalog"),le(">>"),le("endobj")},hl=y.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(oe+1)),le("/Root "+oe+" 0 R"),le("/Info "+(oe-1)+" 0 R"),f!==null&&le("/Encrypt "+Zr.oid+" 0 R"),le("/ID [ <"+ue+"> <"+ue+"> ]"),le(">>")},wn=y.__private__.putHeader=function(){le("%PDF-"+C),le("%")},wA=y.__private__.putXRef=function(){var b="0000000000";le("xref"),le("0 "+(oe+1)),le("0000000000 65535 f ");for(var q=1;q<=oe;q++)typeof ye[q]=="function"?le((b+ye[q]()).slice(-10)+" 00000 n "):ye[q]!==void 0?le((b+ye[q]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},ri=y.__private__.buildDocument=function(){var b;oe=0,be=0,Le=[],ye=[],je=[],ta=Xr(),ys=Xr(),It(Le),_t.publish("buildDocument"),wn(),vi(),(function(){_t.publish("putAdditionalObjects");for(var Ce=0;Ce<je.length;Ce++){var Ue=je[Ce];Hr(Ue.objId,!0),le(Ue.content),le("endobj")}_t.publish("postPutAdditionalObjects")})(),b=[],(function(){for(var Ce in Pe)Pe.hasOwnProperty(Ce)&&(v===!1||v===!0&&x.hasOwnProperty(Ce))&&ra(Pe[Ce])})(),(function(){var Ce;for(Ce in Me)Me.hasOwnProperty(Ce)&&Ec(Me[Ce])})(),(function(){for(var Ce in Ar)Ar.hasOwnProperty(Ce)&&Ba(Ar[Ce])})(),(function(Ce){var Ue;for(Ue in ke)ke.hasOwnProperty(Ue)&&(ke[Ue]instanceof Jc?Va(ke[Ue]):ke[Ue]instanceof sd&&vA(ke[Ue],Ce))})(b),_t.publish("putResources"),b.forEach(Rr),Rr({resourcesOid:ys,objectOid:Number.MAX_SAFE_INTEGER}),_t.publish("postPutResources"),f!==null&&(Zr.oid=Ur(),le("<<"),le("/Filter /Standard"),le("/V "+Zr.v),le("/R "+Zr.r),le("/U <"+Zr.toHexString(Zr.U)+">"),le("/O <"+Zr.toHexString(Zr.O)+">"),le("/P "+Zr.P),le(">>"),le("endobj")),dn(),Ga();var q=be;return wA(),hl(),le("startxref"),le(""+q),le("%%EOF"),It(Ge[K]),Le.join(`
`)},Vi=y.__private__.getBlob=function(b){return new Blob([ct(b)],{type:"application/pdf"})},$a=y.output=y.__private__.output=(An=function(b,q){switch(typeof(q=q||{})=="string"?q={filename:q}:q.filename=q.filename||"generated.pdf",b){case void 0:return ri();case"save":y.save(q.filename);break;case"arraybuffer":return ct(ri());case"blob":return Vi(ri());case"bloburi":case"bloburl":if(ar.URL!==void 0&&typeof ar.URL.createObjectURL=="function")return ar.URL&&ar.URL.createObjectURL(Vi(ri()))||void 0;un.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",Ue=ri();try{Ce=LB(Ue)}catch{Ce=LB(unescape(encodeURIComponent(Ue)))}return"data:application/pdf;filename="+q.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ar)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",lt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';q.pdfObjectUrl&&(Ke=q.pdfObjectUrl,lt="");var gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+lt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(q)+");<\/script></body></html>",Ut=ar.open();return Ut!==null&&Ut.document.write(gt),Ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ar)==="[object Window]"){var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(q.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+q.filename+'" width="500px" height="400px" /></body></html>',Zt=ar.open();if(Zt!==null){Zt.document.write(Mt);var rr=this;Zt.document.documentElement.querySelector("#pdfViewer").onload=function(){Zt.document.title=q.filename,Zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(rr.output("bloburl"))}}return Zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ar)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",q)+'"></iframe></body></html>',jr=ar.open();if(jr!==null&&(jr.document.write(wr),jr.document.title=q.filename),jr||typeof safari>"u")return jr;break;case"datauri":case"dataurl":return ar.document.location.href=this.output("datauristring",q);default:return null}},An.foo=function(){try{return An.apply(this,arguments)}catch(Ce){var b=Ce.stack||"";~b.indexOf(" at ")&&(b=b.split(" at ")[1]);var q="Error in function "+b.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!ar.console)throw new Error(q);ar.console.error(q,Ce),ar.alert&&alert(q)}},An.foo.bar=An,An.foo),wi=function(b){return Array.isArray(Wt)===!0&&Wt.indexOf(b)>-1};switch(n){case"pt":Fe=1;break;case"mm":Fe=72/25.4;break;case"cm":Fe=72/2.54;break;case"in":Fe=72;break;case"px":Fe=wi("px_scaling")==1?.75:96/72;break;case"pc":case"em":Fe=12;break;case"ex":Fe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Fe=n}var Zr=null;z(),ae();var On=y.__private__.getPageInfo=y.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dt[b].objId,pageNumber:b,pageContext:dt[b]}},qa=y.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var q in dt)if(dt[q].objId===b)break;return On(q)},Wa=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:dt[K].objId,pageNumber:K,pageContext:dt[K]}};y.addPage=function(){return qA.apply(this,arguments),this},y.setPage=function(){return za.apply(this,arguments),It.call(this,Ge[K]),this},y.insertPage=function(b){return this.addPage(),this.movePage(K,b),this},y.movePage=function(b,q){var Ce,Ue;if(b>q){Ce=Ge[b],Ue=dt[b];for(var Ke=b;Ke>q;Ke--)Ge[Ke]=Ge[Ke-1],dt[Ke]=dt[Ke-1];Ge[q]=Ce,dt[q]=Ue,this.setPage(q)}else if(b<q){Ce=Ge[b],Ue=dt[b];for(var lt=b;lt<q;lt++)Ge[lt]=Ge[lt+1],dt[lt]=dt[lt+1];Ge[q]=Ce,dt[q]=Ue,this.setPage(q)}return this},y.deletePage=function(){return WA.apply(this,arguments),this},y.__private__.text=y.text=function(b,q,Ce,Ue,Ke){var lt,gt,Ut,Mt,Zt,rr,wr,jr,xn,Vr=(Ue=Ue||{}).scope||this;if(typeof b=="number"&&typeof q=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var kn=Ce;Ce=q,q=b,b=kn}if(arguments[3]instanceof Ot==0?(Ut=arguments[4],Mt=arguments[5],sn(wr=arguments[3])==="object"&&wr!==null||(typeof Ut=="string"&&(Mt=Ut,Ut=null),typeof wr=="string"&&(Mt=wr,wr=null),typeof wr=="number"&&(Ut=wr,wr=null),Ue={flags:wr,angle:Ut,align:Mt})):(U("The transform parameter of text() with a Matrix value"),xn=Ke),isNaN(q)||isNaN(Ce)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return Vr;var hn,Fn="",bn=typeof Ue.lineHeightFactor=="number"?Ue.lineHeightFactor:Ts,xi=Vr.internal.scaleFactor;function aa(Lr){return Lr=Lr.split("	").join(Array(Ue.TabLen||9).join(" ")),is(Lr,wr)}function bi(Lr){for(var $r,Un=Lr.concat(),Yn=[],Na=Un.length;Na--;)typeof($r=Un.shift())=="string"?Yn.push($r):Array.isArray(Lr)&&($r.length===1||$r[1]===void 0&&$r[2]===void 0)?Yn.push($r[0]):Yn.push([$r[0],$r[1],$r[2]]);return Yn}function m(Lr,$r){var Un;if(typeof Lr=="string")Un=$r(Lr)[0];else if(Array.isArray(Lr)){for(var Yn,Na,_c=Lr.concat(),bl=[],_A=_c.length;_A--;)typeof(Yn=_c.shift())=="string"?bl.push($r(Yn)[0]):Array.isArray(Yn)&&typeof Yn[0]=="string"&&(Na=$r(Yn[0],Yn[1],Yn[2]),bl.push([Na[0],Na[1],Na[2]]));Un=bl}return Un}var T=!1,M=!0;if(typeof b=="string")T=!0;else if(Array.isArray(b)){var ce=b.concat();gt=[];for(var ze,et=ce.length;et--;)(typeof(ze=ce.shift())!="string"||Array.isArray(ze)&&typeof ze[0]!="string")&&(M=!1);T=M}if(T===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var Nt=he/Vr.internal.scaleFactor,Br=Nt*(bn-1);switch(Ue.baseline){case"bottom":Ce-=Br;break;case"top":Ce+=Nt-Br;break;case"hanging":Ce+=Nt-2*Br;break;case"middle":Ce+=Nt/2-Br}if((rr=Ue.maxWidth||0)>0&&(typeof b=="string"?b=Vr.splitTextToSize(b,rr):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(Lr,$r){return Lr.concat(Vr.splitTextToSize($r,rr))},[]))),lt={text:b,x:q,y:Ce,options:Ue,mutex:{pdfEscape:is,activeFontKey:Be,fonts:Pe,activeFontSize:he}},_t.publish("preProcessText",lt),b=lt.text,Ut=(Ue=lt.options).angle,xn instanceof Ot==0&&Ut&&typeof Ut=="number"){Ut*=Math.PI/180,Ue.rotationDirection===0&&(Ut=-Ut),D===H&&(Ut=-Ut);var Bn=Math.cos(Ut),mr=Math.sin(Ut);xn=new Ot(Bn,mr,-mr,Bn,0,0)}else Ut&&Ut instanceof Ot&&(xn=Ut);D!==H||xn||(xn=_n),(Zt=Ue.charSpace||js)!==void 0&&(Fn+=Q(F(Zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(jr=Ue.horizontalScale)!==void 0&&(Fn+=Q(100*jr)+` Tz
`),Ue.lang;var kr=-1,Gr=Ue.renderingMode!==void 0?Ue.renderingMode:Ue.stroke,Ps=Vr.internal.getCurrentPageInfo().pageContext;switch(Gr){case 0:case!1:case"fill":kr=0;break;case 1:case!0:case"stroke":kr=1;break;case 2:case"fillThenStroke":kr=2;break;case 3:case"invisible":kr=3;break;case 4:case"fillAndAddForClipping":kr=4;break;case 5:case"strokeAndAddPathForClipping":kr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":kr=6;break;case 7:case"addToPathForClipping":kr=7}var Ks=Ps.usedRenderingMode!==void 0?Ps.usedRenderingMode:-1;kr!==-1?Fn+=kr+` Tr
`:Ks!==-1&&(Fn+=`0 Tr
`),kr!==-1&&(Ps.usedRenderingMode=kr),Mt=Ue.align||"left";var xs,Aa=he*bn,yl=Vr.internal.pageSize.getWidth(),vl=Pe[Be];Zt=Ue.charSpace||js,rr=Ue.maxWidth||0,wr=Object.assign({autoencode:!0,noBOM:!0},Ue.flags);var BA=[],oa=function(Lr){return Vr.getStringUnitWidth(Lr,{font:vl,charSpace:Zt,fontSize:he,doKerning:!1})*he/xi};if(Object.prototype.toString.call(b)==="[object Array]"){var $i;gt=bi(b),Mt!=="left"&&(xs=gt.map(oa));var qi,ro=0;if(Mt==="right"){q-=xs[0],b=[],et=gt.length;for(var rA=0;rA<et;rA++)rA===0?(qi=Sn(q),$i=Ea(Ce)):(qi=F(ro-xs[rA]),$i=-Aa),b.push([gt[rA],qi,$i]),ro=xs[rA]}else if(Mt==="center"){q-=xs[0]/2,b=[],et=gt.length;for(var CA=0;CA<et;CA++)CA===0?(qi=Sn(q),$i=Ea(Ce)):(qi=F((ro-xs[CA])/2),$i=-Aa),b.push([gt[CA],qi,$i]),ro=xs[CA]}else if(Mt==="left"){b=[],et=gt.length;for(var EA=0;EA<et;EA++)b.push(gt[EA])}else if(Mt==="justify"&&vl.encoding==="Identity-H"){b=[],et=gt.length,rr=rr!==0?rr:yl;for(var nA=0,Mn=0;Mn<et;Mn++)if($i=Mn===0?Ea(Ce):-Aa,qi=Mn===0?Sn(q):nA,Mn<et-1){var To=F((rr-xs[Mn])/(gt[Mn].split(" ").length-1)),sA=gt[Mn].split(" ");b.push([sA[0]+" ",qi,$i]),nA=0;for(var _a=1;_a<sA.length;_a++){var Uo=(oa(sA[_a-1]+" "+sA[_a])-oa(sA[_a]))*xi+To;_a==sA.length-1?b.push([sA[_a],Uo,0]):b.push([sA[_a]+" ",Uo,0]),nA-=Uo}}else b.push([gt[Mn],qi,$i]);b.push(["",nA,0])}else{if(Mt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],et=gt.length,rr=rr!==0?rr:yl,Mn=0;Mn<et;Mn++){$i=Mn===0?Ea(Ce):-Aa,qi=Mn===0?Sn(q):0;var jo=gt[Mn].split(" ").length-1,wl=jo>0?(rr-xs[Mn])/jo:0;Mn<et-1?BA.push(Q(F(wl))):BA.push(0),b.push([gt[Mn],qi,$i])}}}(typeof Ue.R2L=="boolean"?Ue.R2L:X)===!0&&(b=m(b,function(Lr,$r,Un){return[Lr.split("").reverse().join(""),$r,Un]})),lt={text:b,x:q,y:Ce,options:Ue,mutex:{pdfEscape:is,activeFontKey:Be,fonts:Pe,activeFontSize:he}},_t.publish("postProcessText",lt),b=lt.text,hn=lt.mutex.isHex||!1;var xl=Pe[Be].encoding;xl!=="WinAnsiEncoding"&&xl!=="StandardEncoding"||(b=m(b,function(Lr,$r,Un){return[aa(Lr),$r,Un]})),gt=bi(b),b=[];for(var IA,no,so,Lo=Array.isArray(gt[0])?1:0,io="",Qo=function(Lr,$r,Un){var Yn="";return Un instanceof Ot?(Un=typeof Ue.angle=="number"?yr(Un,new Ot(1,0,0,1,Lr,$r)):yr(new Ot(1,0,0,1,Lr,$r),Un),D===H&&(Un=yr(new Ot(1,0,0,-1,0,0),Un)),Yn=Un.join(" ")+` Tm
`):Yn=Q(Lr)+" "+Q($r)+` Td
`,Yn},Tn=0;Tn<gt.length;Tn++){switch(io="",Lo){case 1:so=(hn?"<":"(")+gt[Tn][0]+(hn?">":")"),IA=parseFloat(gt[Tn][1]),no=parseFloat(gt[Tn][2]);break;case 0:so=(hn?"<":"(")+gt[Tn]+(hn?">":")"),IA=Sn(q),no=Ea(Ce)}BA!==void 0&&BA[Tn]!==void 0&&(io=BA[Tn]+` Tw
`),Tn===0?b.push(io+Qo(IA,no,xn)+so):Lo===0?b.push(io+so):Lo===1&&b.push(io+Qo(IA,no,xn)+so)}b=Lo===0?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var Bi=`BT
/`;return Bi+=Be+" "+he+` Tf
`,Bi+=Q(he*bn)+` TL
`,Bi+=Us+`
`,Bi+=Fn,Bi+=b,le(Bi+="ET"),x[Be]=!0,Vr};var Ya=y.__private__.clip=y.clip=function(b){return le(b==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return Ya("evenodd")},y.__private__.discardPath=y.discardPath=function(){return le("n"),this};var vr=y.__private__.isValidStyle=function(b){var q=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(q=!0),q};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(b){return vr(b)&&(d=b),this};var Ca=y.__private__.getStyle=y.getStyle=function(b){var q=d;switch(b){case"D":case"S":q="S";break;case"F":q="f";break;case"FD":case"DF":q="B";break;case"f":case"f*":case"B":case"B*":q=b}return q},pr=y.close=function(){return le("h"),this};y.stroke=function(){return le("S"),this},y.fill=function(b){return Ki("f",b),this},y.fillEvenOdd=function(b){return Ki("f*",b),this},y.fillStroke=function(b){return Ki("B",b),this},y.fillStrokeEvenOdd=function(b){return Ki("B*",b),this};var Ki=function(b,q){sn(q)==="object"?fl(q,b):le(b)},Ja=function(b){b===null||D===H&&b===void 0||(b=Ca(b),le(b))};function YA(b,q,Ce,Ue,Ke){var lt=new sd(q||this.boundingBox,Ce||this.xStep,Ue||this.yStep,this.gState,Ke||this.matrix);lt.stream=this.stream;var gt=b+"$$"+this.cloneIndex+++"$$";return Nr(gt,lt),lt}var fl=function(b,q){var Ce=We[b.key],Ue=ke[Ce];if(Ue instanceof Jc)le("q"),le(pl(q)),Ue.gState&&y.setGState(Ue.gState),le(b.matrix.toString()+" cm"),le("/"+Ce+" sh"),le("Q");else if(Ue instanceof sd){var Ke=new Ot(1,0,0,-1,0,Qs());b.matrix&&(Ke=Ke.multiply(b.matrix||_n),Ce=YA.call(Ue,b.key,b.boundingBox,b.xStep,b.yStep,Ke).id),le("q"),le("/Pattern cs"),le("/"+Ce+" scn"),Ue.gState&&y.setGState(Ue.gState),le(q),le("Q")}},pl=function(b){switch(b){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},JA=y.moveTo=function(b,q){return le(Q(F(b))+" "+Q(ee(q))+" m"),this},XA=y.lineTo=function(b,q){return le(Q(F(b))+" "+Q(ee(q))+" l"),this},qn=y.curveTo=function(b,q,Ce,Ue,Ke,lt){return le([Q(F(b)),Q(ee(q)),Q(F(Ce)),Q(ee(Ue)),Q(F(Ke)),Q(ee(lt)),"c"].join(" ")),this};y.__private__.line=y.line=function(b,q,Ce,Ue,Ke){if(isNaN(b)||isNaN(q)||isNaN(Ce)||isNaN(Ue)||!vr(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return D===P?this.lines([[Ce-b,Ue-q]],b,q,[1,1],Ke||"S"):this.lines([[Ce-b,Ue-q]],b,q,[1,1]).stroke()},y.__private__.lines=y.lines=function(b,q,Ce,Ue,Ke,lt){var gt,Ut,Mt,Zt,rr,wr,jr,xn,Vr,kn,hn,Fn;if(typeof b=="number"&&(Fn=Ce,Ce=q,q=b,b=Fn),Ue=Ue||[1,1],lt=lt||!1,isNaN(q)||isNaN(Ce)||!Array.isArray(b)||!Array.isArray(Ue)||!vr(Ke)||typeof lt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(JA(q,Ce),gt=Ue[0],Ut=Ue[1],Zt=b.length,kn=q,hn=Ce,Mt=0;Mt<Zt;Mt++)(rr=b[Mt]).length===2?(kn=rr[0]*gt+kn,hn=rr[1]*Ut+hn,XA(kn,hn)):(wr=rr[0]*gt+kn,jr=rr[1]*Ut+hn,xn=rr[2]*gt+kn,Vr=rr[3]*Ut+hn,kn=rr[4]*gt+kn,hn=rr[5]*Ut+hn,qn(wr,jr,xn,Vr,kn,hn));return lt&&pr(),Ja(Ke),this},y.path=function(b){for(var q=0;q<b.length;q++){var Ce=b[q],Ue=Ce.c;switch(Ce.op){case"m":JA(Ue[0],Ue[1]);break;case"l":XA(Ue[0],Ue[1]);break;case"c":qn.apply(this,Ue);break;case"h":pr()}}return this},y.__private__.rect=y.rect=function(b,q,Ce,Ue,Ke){if(isNaN(b)||isNaN(q)||isNaN(Ce)||isNaN(Ue)||!vr(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return D===P&&(Ue=-Ue),le([Q(F(b)),Q(ee(q)),Q(F(Ce)),Q(F(Ue)),"re"].join(" ")),Ja(Ke),this},y.__private__.triangle=y.triangle=function(b,q,Ce,Ue,Ke,lt,gt){if(isNaN(b)||isNaN(q)||isNaN(Ce)||isNaN(Ue)||isNaN(Ke)||isNaN(lt)||!vr(gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-b,Ue-q],[Ke-Ce,lt-Ue],[b-Ke,q-lt]],b,q,[1,1],gt,!0),this},y.__private__.roundedRect=y.roundedRect=function(b,q,Ce,Ue,Ke,lt,gt){if(isNaN(b)||isNaN(q)||isNaN(Ce)||isNaN(Ue)||isNaN(Ke)||isNaN(lt)||!vr(gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ut=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*Ce),lt=Math.min(lt,.5*Ue),this.lines([[Ce-2*Ke,0],[Ke*Ut,0,Ke,lt-lt*Ut,Ke,lt],[0,Ue-2*lt],[0,lt*Ut,-Ke*Ut,lt,-Ke,lt],[2*Ke-Ce,0],[-Ke*Ut,0,-Ke,-lt*Ut,-Ke,-lt],[0,2*lt-Ue],[0,-lt*Ut,Ke*Ut,-lt,Ke,-lt]],b+Ke,q,[1,1],gt,!0),this},y.__private__.ellipse=y.ellipse=function(b,q,Ce,Ue,Ke){if(isNaN(b)||isNaN(q)||isNaN(Ce)||isNaN(Ue)||!vr(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var lt=4/3*(Math.SQRT2-1)*Ce,gt=4/3*(Math.SQRT2-1)*Ue;return JA(b+Ce,q),qn(b+Ce,q-gt,b+lt,q-Ue,b,q-Ue),qn(b-lt,q-Ue,b-Ce,q-gt,b-Ce,q),qn(b-Ce,q+gt,b-lt,q+Ue,b,q+Ue),qn(b+lt,q+Ue,b+Ce,q+gt,b+Ce,q),Ja(Ke),this},y.__private__.circle=y.circle=function(b,q,Ce,Ue){if(isNaN(b)||isNaN(q)||isNaN(Ce)||!vr(Ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,q,Ce,Ce,Ue)},y.setFont=function(b,q,Ce){return Ce&&(q=O(q,Ce)),Be=ko(b,q,{disableWarning:!1}),this};var as=y.__private__.getFont=y.getFont=function(){return Pe[ko.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var b,q,Ce={};for(b in Ye)if(Ye.hasOwnProperty(b))for(q in Ce[b]=[],Ye[b])Ye[b].hasOwnProperty(q)&&Ce[b].push(q);return Ce},y.addFont=function(b,q,Ce,Ue,Ke){var lt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&lt.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&lt.indexOf(arguments[3])==-1&&(Ce=O(Ce,Ue)),Ka.call(this,b,q,Ce,Ke=Ke||"Identity-H")};var Ts,ni=r.lineWidth||.200025,Xa=y.__private__.getLineWidth=y.getLineWidth=function(){return ni},Yt=y.__private__.setLineWidth=y.setLineWidth=function(b){return ni=b,le(Q(F(b))+" w"),this};y.__private__.setLineDash=qt.API.setLineDash=qt.API.setLineDashPattern=function(b,q){if(b=b||[],q=q||0,isNaN(q)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(Ce){return Q(F(Ce))}).join(" "),q=Q(F(q)),le("["+b+"] "+q+" d"),this};var na=y.__private__.getLineHeight=y.getLineHeight=function(){return he*Ts};y.__private__.getLineHeight=y.getLineHeight=function(){return he*Ts};var Ic=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(Ts=b),this},ml=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Ts};Ic(r.lineHeight);var Sn=y.__private__.getHorizontalCoordinate=function(b){return F(b)},Ea=y.__private__.getVerticalCoordinate=function(b){return D===H?b:dt[K].mediaBox.topRightY-dt[K].mediaBox.bottomLeftY-F(b)},gl=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(b){return Q(Sn(b))},Ia=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(b){return Q(Ea(b))},sa=r.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return yi(sa)},y.__private__.setStrokeColor=y.setDrawColor=function(b,q,Ce,Ue){return sa=Rn({ch1:b,ch2:q,ch3:Ce,ch4:Ue,pdfColorType:"draw",precision:2}),le(sa),this};var ZA=r.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return yi(ZA)},y.__private__.setFillColor=y.setFillColor=function(b,q,Ce,Ue){return ZA=Rn({ch1:b,ch2:q,ch3:Ce,ch4:Ue,pdfColorType:"fill",precision:2}),le(ZA),this};var Us=r.textColor||"0 g",zi=y.__private__.getTextColor=y.getTextColor=function(){return yi(Us)};y.__private__.setTextColor=y.setTextColor=function(b,q,Ce,Ue){return Us=Rn({ch1:b,ch2:q,ch3:Ce,ch4:Ue,pdfColorType:"text",precision:3}),this};var js=r.charSpace,Za=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(js||0)};y.__private__.setCharSpace=y.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return js=b,this};var zr=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(b){var q=y.CapJoinStyles[b];if(q===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return zr=q,le(q+" J"),this};var Fo=0;y.__private__.setLineJoin=y.setLineJoin=function(b){var q=y.CapJoinStyles[b];if(q===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fo=q,le(q+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(Q(F(b))+" M"),this},y.GState=Wm,y.setGState=function(b){(b=typeof b=="string"?Me[rt[b]]:eo(null,b)).equals(mt)||(le("/"+b.id+" gs"),mt=b)};var eo=function(b,q){if(!b||!rt[b]){var Ce=!1;for(var Ue in Me)if(Me.hasOwnProperty(Ue)&&Me[Ue].equals(q)){Ce=!0;break}if(Ce)q=Me[Ue];else{var Ke="GS"+(Object.keys(Me).length+1).toString(10);Me[Ke]=q,q.id=Ke}return b&&(rt[b]=q.id),_t.publish("addGState",q),q}};y.addGState=function(b,q){return eo(b,q),this},y.saveGraphicsState=function(){return le("q"),vt.push({key:Be,size:he,color:Us}),this},y.restoreGraphicsState=function(){le("Q");var b=vt.pop();return Be=b.key,he=b.size,Us=b.color,mt=null,this},y.setCurrentTransformationMatrix=function(b){return le(b.toString()+" cm"),this},y.comment=function(b){return le("#"+b),this};var si=function(b,q){var Ce=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(lt){isNaN(lt)||(Ce=parseFloat(lt))}});var Ue=q||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ue},set:function(lt){isNaN(lt)||(Ue=parseFloat(lt))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(lt){Ke=lt.toString()}}),this},eA=function(b,q,Ce,Ue){si.call(this,b,q),this.type="rect";var Ke=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(gt){isNaN(gt)||(Ke=parseFloat(gt))}});var lt=Ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return lt},set:function(gt){isNaN(gt)||(lt=parseFloat(gt))}}),this},tA=function(){this.page=bt,this.currentPage=K,this.pages=Ge.slice(0),this.pagesContext=dt.slice(0),this.x=De,this.y=At,this.matrix=_e,this.width=vs(K),this.height=xA(K),this.outputDestination=it,this.id="",this.objectNumber=-1};tA.prototype.restore=function(){bt=this.page,K=this.currentPage,dt=this.pagesContext,Ge=this.pages,De=this.x,At=this.y,_e=this.matrix,to(K,this.width),ws(K,this.height),it=this.outputDestination};var Ls=function(b,q,Ce,Ue,Ke){_r.push(new tA),bt=K=0,Ge=[],De=b,At=q,_e=Ke,Hs([Ce,Ue])};for(var ia in y.beginFormObject=function(b,q,Ce,Ue,Ke){return Ls(b,q,Ce,Ue,Ke),this},y.endFormObject=function(b){return(function(q){if(vn[q])_r.pop().restore();else{var Ce=new tA,Ue="Xo"+(Object.keys(Ar).length+1).toString(10);Ce.id=Ue,vn[q]=Ue,Ar[Ue]=Ce,_t.publish("addFormObject",Ce),_r.pop().restore()}})(b),this},y.doFormObject=function(b,q){var Ce=Ar[vn[b]];return le("q"),le(q.toString()+" cm"),le("/"+Ce.id+" Do"),le("Q"),this},y.getFormObject=function(b){var q=Ar[vn[b]];return{x:q.x,y:q.y,width:q.width,height:q.height,matrix:q.matrix}},y.save=function(b,q){return b=b||"generated.pdf",(q=q||{}).returnPromise=q.returnPromise||!1,q.returnPromise===!1?(qc(Vi(ri()),b),typeof qc.unload=="function"&&ar.setTimeout&&setTimeout(qc.unload,911),this):new Promise(function(Ce,Ue){try{var Ke=qc(Vi(ri()),b);typeof qc.unload=="function"&&ar.setTimeout&&setTimeout(qc.unload,911),Ce(Ke)}catch(lt){Ue(lt.message)}})},qt.API)qt.API.hasOwnProperty(ia)&&(ia==="events"&&qt.API.events.length?(function(b,q){var Ce,Ue,Ke;for(Ke=q.length-1;Ke!==-1;Ke--)Ce=q[Ke][0],Ue=q[Ke][1],b.subscribe.apply(b,[Ce].concat(typeof Ue=="function"?[Ue]:Ue))})(_t,qt.API.events):y[ia]=qt.API[ia]);function vs(b){return dt[b].mediaBox.topRightX-dt[b].mediaBox.bottomLeftX}function to(b,q){dt[b].mediaBox.topRightX=q+dt[b].mediaBox.bottomLeftX}function xA(b){return dt[b].mediaBox.topRightY-dt[b].mediaBox.bottomLeftY}function ws(b,q){dt[b].mediaBox.topRightY=q+dt[b].mediaBox.bottomLeftY}var Gi=y.getPageWidth=function(b){return vs(b=b||K)/Fe},Wn=y.setPageWidth=function(b,q){to(b,q*Fe)},Qs=y.getPageHeight=function(b){return xA(b=b||K)/Fe},bA=y.setPageHeight=function(b,q){ws(b,q*Fe)};return y.internal={pdfEscape:is,getStyle:Ca,getFont:as,getFontSize:Qe,getCharSpace:Za,getTextColor:zi,getLineHeight:na,getLineHeightFactor:ml,getLineWidth:Xa,write:ft,getHorizontalCoordinate:Sn,getVerticalCoordinate:Ea,getCoordinateString:gl,getVerticalCoordinateString:Ia,collections:{},newObject:Ur,newAdditionalObject:Hi,newObjectDeferred:Xr,newObjectDeferredBegin:Hr,getFilters:Fs,putStream:Nn,events:_t,scaleFactor:Fe,pageSize:{getWidth:function(){return Gi(K)},setWidth:function(b){Wn(K,b)},getHeight:function(){return Qs(K)},setHeight:function(b){bA(K,b)}},encryptionOptions:f,encryption:Zr,getEncryptor:function(b){return f!==null?Zr.encryptor(b,0):function(q){return q}},output:$a,getNumberOfPages:Vs,get pages(){return Ge},out:le,f2:I,f3:L,getPageInfo:On,getPageInfoByObjId:qa,getCurrentPageInfo:Wa,getPDFVersion:N,Point:si,Rectangle:eA,Matrix:Ot,hasHotfix:wi},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return Gi(K)},set:function(b){Wn(K,b)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return Qs(K)},set:function(b){bA(K,b)},enumerable:!0,configurable:!0}),(function(b){for(var q=0,Ce=pt.length;q<Ce;q++){var Ue=Ka.call(this,b[q][0],b[q][1],b[q][2],pt[q][3],!0);v===!1&&(x[Ue]=!0);var Ke=b[q][0].split("-");So({id:Ue,fontName:Ke[0],fontStyle:Ke[1]||""})}_t.publish("addFonts",{fonts:Pe,dictionary:Ye})}).call(y,pt),Be="F1",qA(s,t),_t.publish("initialized"),y}ed.prototype.lsbFirstWord=function(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)},ed.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ed.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},ed.prototype.processOwnerPassword=function(r,e){return Dv(Pv(e).substr(0,5),r)},ed.prototype.encryptor=function(r,e){var t=Pv(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Dv(t,n)}},Wm.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||sn(r)!==sn(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},qt.API={events:[]},qt.version="4.0.0";var rs=qt.API,Z1=1,yu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$u=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dr=function(r){return r.toFixed(2)},Vl=function(r){return r.toFixed(5)};rs.__acroform__={};var ba=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},RB=function(r){return r*Z1},mo=function(r){var e=new j4,t=Vt.internal.getHeight(r)||0,n=Vt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(dr(n)),Number(dr(t))],e},IM=rs.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|1<<e},_M=rs.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&~(1<<e)},NM=rs.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},hs=rs.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return NM(r,e-1)},fs=rs.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return IM(r,e-1)},ps=rs.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _M(r,e-1)},SM=rs.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=r[0],i=r[1],l=r[2],c=r[3],u={};return u.lowerLeft_X=t(s)||0,u.lowerLeft_Y=n(i+c)||0,u.upperRight_X=t(s+l)||0,u.upperRight_Y=n(i)||0,[Number(dr(u.lowerLeft_X)),Number(dr(u.lowerLeft_Y)),Number(dr(u.upperRight_X)),Number(dr(u.upperRight_Y))]},kM=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=Rv(r,t),s=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+s+" "+dr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=mo(r);return i.scope=r.scope,i.stream=e.join(`
`),i}},Rv=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=r.multiline?s.map(function(I){return I.split(`
`)}):s.map(function(I){return[I]});var i=t,l=Vt.internal.getHeight(r)||0;l=l<0?-l:l;var c=Vt.internal.getWidth(r)||0;c=c<0?-c:c;var u=function(I,L,F){if(I+1<s.length){var ee=L+" "+s[I+1][0];return zp(ee,r,F).width<=c-4}return!1};i++;e:for(;i>0;){e="",i--;var d,f,v=zp("3",r,i).height,x=r.multiline?l-i:(l-v)/2,y=x+=2,C=0,N=0,E=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+zp(e,r,i=12).width+", FieldWidth:"+c+`
`;break}for(var _="",P=0,H=0;H<s.length;H++)if(s.hasOwnProperty(H)){var D=!1;if(s[H].length!==1&&E!==s[H].length-1){if((v+2)*(P+2)+2>l)continue e;_+=s[H][E],D=!0,N=H,H--}else{_=(_+=s[H][E]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var J=parseInt(H),Z=u(J,_,i),O=H>=s.length-1;if(Z&&!O){_+=" ",E=0;continue}if(Z||O){if(O)N=J;else if(r.multiline&&(v+2)*(P+2)+2>l)continue e}else{if(!r.multiline||(v+2)*(P+2)+2>l)continue e;N=J}}for(var Q="",U=C;U<=N;U++){var V=s[U];if(r.multiline){if(U===N){Q+=V[E]+" ",E=(E+1)%V.length;continue}if(U===C){Q+=V[V.length-1]+" ";continue}}Q+=V[0]+" "}switch(Q=Q.substr(Q.length-1)==" "?Q.substr(0,Q.length-1):Q,f=zp(Q,r,i).width,r.textAlign){case"right":d=c-f-2;break;case"center":d=(c-f)/2;break;default:d=2}e+=dr(d)+" "+dr(y)+` Td
`,e+="("+yu(Q)+`) Tj
`,e+=-dr(d)+` 0 Td
`,y=-(i+2),f=0,C=D?N:N+1,P++,_=""}break}return n.text=e,n.fontSize=i,n},zp=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},FM={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TM=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},UM=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(GA.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(FM)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Z1=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new L4,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&TM(i,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,s){var i=!n;for(var l in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var c=n[l],u=[],d=c.Rect;if(c.Rect&&(c.Rect=SM(c.Rect,s)),s.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Vt.createDefaultAppearanceStream(c),sn(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=d,c.hasAppearanceStream&&!c.appearanceStreamContent){var f=kM(c);u.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(c.appearanceStreamContent){var v="";for(var x in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(x)){var y=c.appearanceStreamContent[x];if(v+="/"+x+" ",v+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var l in y)if(y.hasOwnProperty(l)){var C=y[l];typeof C=="function"&&(C=C.call(s,c)),v+="/"+l+" "+C+" ",s.internal.acroformPlugin.xForms.indexOf(C)>=0||s.internal.acroformPlugin.xForms.push(C)}}else typeof(C=y)=="function"&&(C=C.call(s,c)),v+="/"+l+" "+C,s.internal.acroformPlugin.xForms.indexOf(C)>=0||s.internal.acroformPlugin.xForms.push(C);v+=">>"}u.push({key:"AP",value:`<<
`+v+">>"})}s.internal.putStream({additionalKeyValues:u,objectId:c.objId}),s.internal.out("endobj")}i&&(function(N,E){for(var _ in N)if(N.hasOwnProperty(_)){var P=_,H=N[_];E.internal.newObjectDeferredBegin(H.objId,!0),sn(H)==="object"&&typeof H.putStream=="function"&&H.putStream(),delete N[P]}})(s.internal.acroformPlugin.xForms,s)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},U4=rs.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(l){return l};if(Array.isArray(r)){for(var s="[",i=0;i<r.length;i++)switch(i!==0&&(s+=" "),sn(r[i])){case"boolean":case"number":case"object":s+=r[i].toString();break;case"string":r[i].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),s+="("+yu(n(r[i].toString()))+")"):s+=r[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ey=function(r,e,t){var n=function(s){return s};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),"("+yu(n(r))+")"},go=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};go.prototype.toString=function(){return this.objId+" 0 R"},go.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},go.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],s=this[n];s&&(Array.isArray(s)?r.push({key:n,value:U4(s,this.objId,this.scope)}):s instanceof go?(s.scope=this.scope,r.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&r.push({key:n,value:s}))}return r};var j4=function(){go.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};ba(j4,go);var L4=function(){go.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+yu(t(r))+")"}},set:function(t){r=t}})};ba(L4,go);var GA=function r(){go.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');e=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!hs(e,3)},set:function(_){_?this.F=fs(e,3):this.F=ps(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');t=_}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(_){n=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(_){n[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(_){n[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(_){n[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(_){n[3]=_}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ym)return;i="FieldObject"+r.FieldNum++}var _=function(P){return P};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+yu(_(i))+")"},set:function(_){i=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(_){i=_}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(_){c=_}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Z1:d},set:function(_){d=_}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(_){f=_}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Ym||this instanceof su))return Ey(v,this.objId,this.scope)},set:function(_){_=_.toString(),v=_}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Zs==0?Ey(x,this.objId,this.scope):x},set:function(_){_=_.toString(),x=this instanceof Zs==0?_.substr(0,1)==="("?$u(_.substr(1,_.length-2)):$u(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs==1?$u(x.substr(1,x.length-1)):x},set:function(_){_=_.toString(),x=this instanceof Zs==1?"/"+_:_}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Zs==0?Ey(y,this.objId,this.scope):y},set:function(_){_=_.toString(),y=this instanceof Zs==0?_.substr(0,1)==="("?$u(_.substr(1,_.length-2)):$u(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs==1?$u(y.substr(1,y.length-1)):y},set:function(_){_=_.toString(),y=this instanceof Zs==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(_){_=!!_,N=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(_){C=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,1)},set:function(_){_?this.Ff=fs(this.Ff,1):this.Ff=ps(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,2)},set:function(_){_?this.Ff=fs(this.Ff,2):this.Ff=ps(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,3)},set:function(_){_?this.Ff=fs(this.Ff,3):this.Ff=ps(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');E=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(E){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:E=2;break;case"center":case 1:E=1;break;default:E=0}}})};ba(GA,go);var ud=function(){GA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return U4(e,this.objId,this.scope)},set:function(t){var n,s;s=[],typeof(n=t)=="string"&&(s=(function(i,l,c){c||(c=1);for(var u,d=[];u=l.exec(i);)d.push(u[c]);return d})(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,18)},set:function(t){t?this.Ff=fs(this.Ff,18):this.Ff=ps(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=fs(this.Ff,19):this.Ff=ps(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,20)},set:function(t){t?(this.Ff=fs(this.Ff,20),e.sort()):this.Ff=ps(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,22)},set:function(t){t?this.Ff=fs(this.Ff,22):this.Ff=ps(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,23)},set:function(t){t?this.Ff=fs(this.Ff,23):this.Ff=ps(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,27)},set:function(t){t?this.Ff=fs(this.Ff,27):this.Ff=ps(this.Ff,27)}}),this.hasAppearanceStream=!1};ba(ud,GA);var dd=function(){ud.call(this),this.fontName="helvetica",this.combo=!1};ba(dd,ud);var hd=function(){dd.call(this),this.combo=!0};ba(hd,dd);var dm=function(){hd.call(this),this.edit=!0};ba(dm,hd);var Zs=function(){GA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,15)},set:function(t){t?this.Ff=fs(this.Ff,15):this.Ff=ps(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,16)},set:function(t){t?this.Ff=fs(this.Ff,16):this.Ff=ps(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,17)},set:function(t){t?this.Ff=fs(this.Ff,17):this.Ff=ps(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,26)},set:function(t){t?this.Ff=fs(this.Ff,26):this.Ff=ps(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+yu(t(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){sn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};ba(Zs,GA);var hm=function(){Zs.call(this),this.pushButton=!0};ba(hm,Zs);var fd=function(){Zs.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};ba(fd,Zs);var Ym=function(){var r,e;GA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(c){return c};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),n)l.push("/"+i+" ("+yu(s(n[i]))+")");return l.push(">>"),l.join(`
`)},set:function(s){sn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ba(Ym,GA),fd.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},fd.prototype.createOption=function(r){var e=new Ym;return e.Parent=this,e.optionName=r,this.Kids.push(e),jM.call(this.scope,e),e};var fm=function(){Zs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Vt.CheckBox.createAppearanceStream()};ba(fm,Zs);var su=function(){GA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,13)},set:function(e){e?this.Ff=fs(this.Ff,13):this.Ff=ps(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,21)},set:function(e){e?this.Ff=fs(this.Ff,21):this.Ff=ps(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,23)},set:function(e){e?this.Ff=fs(this.Ff,23):this.Ff=ps(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,24)},set:function(e){e?this.Ff=fs(this.Ff,24):this.Ff=ps(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,25)},set:function(e){e?this.Ff=fs(this.Ff,25):this.Ff=ps(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,26)},set:function(e){e?this.Ff=fs(this.Ff,26):this.Ff=ps(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ba(su,GA);var pm=function(){su.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!hs(this.Ff,14)},set:function(r){r?this.Ff=fs(this.Ff,14):this.Ff=ps(this.Ff,14)}}),this.password=!0};ba(pm,su);var Vt={CheckBox:{createAppearanceStream:function(){return{N:{On:Vt.CheckBox.YesNormal},D:{On:Vt.CheckBox.YesPushDown,Off:Vt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=mo(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,s=r.scope.__private__.encodeColorString(r.color),i=Rv(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+dr(Vt.internal.getWidth(r))+" "+dr(Vt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+dr(i.fontSize)+" Tf "+s),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=mo(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),s=[],i=Vt.internal.getHeight(r),l=Vt.internal.getWidth(r),c=Rv(r,r.caption);return s.push("1 g"),s.push("0 0 "+dr(l)+" "+dr(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+dr(l-1)+" "+dr(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+dr(c.fontSize)+" Tf "+n),s.push(c.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(r){var e=mo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+dr(Vt.internal.getWidth(r))+" "+dr(Vt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:Vt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=Vt.RadioButton.Circle.YesNormal,e.D[r]=Vt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=mo(r);e.scope=r.scope;var t=[],n=Vt.internal.getWidth(r)<=Vt.internal.getHeight(r)?Vt.internal.getWidth(r)/4:Vt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var s=Vt.internal.Bezier_C,i=Number((n*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Vl(Vt.internal.getWidth(r)/2)+" "+Vl(Vt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),t.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),t.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),t.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=mo(r);e.scope=r.scope;var t=[],n=Vt.internal.getWidth(r)<=Vt.internal.getHeight(r)?Vt.internal.getWidth(r)/4:Vt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Vt.internal.Bezier_C).toFixed(5)),l=Number((n*Vt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vl(Vt.internal.getWidth(r)/2)+" "+Vl(Vt.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Vl(Vt.internal.getWidth(r)/2)+" "+Vl(Vt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),t.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),t.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),t.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=mo(r);e.scope=r.scope;var t=[],n=Vt.internal.getWidth(r)<=Vt.internal.getHeight(r)?Vt.internal.getWidth(r)/4:Vt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Vt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vl(Vt.internal.getWidth(r)/2)+" "+Vl(Vt.internal.getHeight(r)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:Vt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=Vt.RadioButton.Cross.YesNormal,e.D[r]=Vt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=mo(r);e.scope=r.scope;var t=[],n=Vt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+dr(Vt.internal.getWidth(r)-2)+" "+dr(Vt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(dr(n.x1.x)+" "+dr(n.x1.y)+" m"),t.push(dr(n.x2.x)+" "+dr(n.x2.y)+" l"),t.push(dr(n.x4.x)+" "+dr(n.x4.y)+" m"),t.push(dr(n.x3.x)+" "+dr(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=mo(r);e.scope=r.scope;var t=Vt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+dr(Vt.internal.getWidth(r))+" "+dr(Vt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+dr(Vt.internal.getWidth(r)-2)+" "+dr(Vt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(dr(t.x1.x)+" "+dr(t.x1.y)+" m"),n.push(dr(t.x2.x)+" "+dr(t.x2.y)+" l"),n.push(dr(t.x4.x)+" "+dr(t.x4.y)+" m"),n.push(dr(t.x3.x)+" "+dr(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=mo(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+dr(Vt.internal.getWidth(r))+" "+dr(Vt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};Vt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=Vt.internal.getWidth(r),t=Vt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},Vt.internal.getWidth=function(r){var e=0;return sn(r)==="object"&&(e=RB(r.Rect[2])),e},Vt.internal.getHeight=function(r){var e=0;return sn(r)==="object"&&(e=RB(r.Rect[3])),e};var jM=rs.addField=function(r){if(UM(this,r),!(r instanceof GA))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};rs.AcroFormChoiceField=ud,rs.AcroFormListBox=dd,rs.AcroFormComboBox=hd,rs.AcroFormEditBox=dm,rs.AcroFormButton=Zs,rs.AcroFormPushButton=hm,rs.AcroFormRadioButton=fd,rs.AcroFormCheckBox=fm,rs.AcroFormTextField=su,rs.AcroFormPasswordField=pm,rs.AcroFormAppearance=Vt,rs.AcroForm={ChoiceField:ud,ListBox:dd,ComboBox:hd,EditBox:dm,Button:Zs,PushButton:hm,RadioButton:fd,CheckBox:fm,TextField:su,PasswordField:pm,Appearance:Vt},qt.AcroForm={ChoiceField:ud,ListBox:dd,ComboBox:hd,EditBox:dm,Button:Zs,PushButton:hm,RadioButton:fd,CheckBox:fm,TextField:su,PasswordField:pm,Appearance:Vt};qt.AcroForm;function Q4(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){var e="addImage_";r.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=r.__addimage__.getImageFileTypeByImageData=function(I,L){var F,ee,ge,ue,fe,ae=t;if((L=L||t)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(Z(I))for(fe in n)for(ge=n[fe],F=0;F<ge.length;F+=1){for(ue=!0,ee=0;ee<ge[F].length;ee+=1)if(ge[F][ee]!==void 0&&ge[F][ee]!==I[ee]){ue=!1;break}if(ue===!0){ae=fe;break}}else for(fe in n)for(ge=n[fe],F=0;F<ge.length;F+=1){for(ue=!0,ee=0;ee<ge[F].length;ee+=1)if(ge[F][ee]!==void 0&&ge[F][ee]!==I.charCodeAt(ee)){ue=!1;break}if(ue===!0){ae=fe;break}}return ae===t&&L!==t&&(ae=L),ae},i=function I(L){for(var F=this.internal.write,ee=this.internal.putStream,ge=(0,this.internal.getFilters)();ge.indexOf("FlateEncode")!==-1;)ge.splice(ge.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:L.width}),ue.push({key:"Height",value:L.height}),L.colorSpace===_.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===_.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)&&L.transparency.length>0){for(var fe="",ae=0,$=L.transparency.length;ae<$;ae++)fe+=L.transparency[ae]+" "+L.transparency[ae]+" ";ue.push({key:"Mask",value:"["+fe+"]"})}L.sMask!==void 0&&ue.push({key:"SMask",value:L.objectId+1+" 0 R"});var me=L.filter!==void 0?["/"+L.filter]:void 0;if(ee({data:L.data,additionalKeyValues:ue,alreadyAppliedFilters:me,objectId:L.objectId}),F("endobj"),"sMask"in L&&L.sMask!==void 0){var z,S=(z=L.sMaskBitsPerComponent)!==null&&z!==void 0?z:L.bitsPerComponent,K={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:S,data:L.sMask};"filter"in L&&(K.decodeParameters="/Predictor ".concat(L.predictor," /Colors 1 /BitsPerComponent ").concat(S," /Columns ").concat(L.width),K.filter=L.filter),I.call(this,K)}if(L.colorSpace===_.INDEXED){var Y=this.internal.newObject();ee({data:Q(new Uint8Array(L.palette)),objectId:Y}),F("endobj")}},l=function(){var I=this.internal.collections[e+"images"];for(var L in I)i.call(this,I[L])},c=function(){var I,L=this.internal.collections[e+"images"],F=this.internal.write;for(var ee in L)F("/I"+(I=L[ee]).index,I.objectId,"0","R")},u=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",c))},d=function(){var I=this.internal.collections[e+"images"];return u.call(this),I},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},v=function(I){return typeof r["process"+I.toUpperCase()]=="function"},x=function(I){return sn(I)==="object"&&I.nodeType===1},y=function(I,L){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var F=""+I.getAttribute("src");if(F.indexOf("data:image/")===0)return um(unescape(F).split("base64,").pop());var ee=r.loadFile(F,!0);if(ee!==void 0)return ee}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var ge;switch(L){case"PNG":ge="image/png";break;case"WEBP":ge="image/webp";break;default:ge="image/jpeg"}return um(I.toDataURL(ge,1).split("base64,").pop())}},C=function(I){var L=this.internal.collections[e+"images"];if(L){for(var F in L)if(I===L[F].alias)return L[F]}},N=function(I,L,F){return I||L||(I=-96,L=-96),I<0&&(I=-1*F.width*72/I/this.internal.scaleFactor),L<0&&(L=-1*F.height*72/L/this.internal.scaleFactor),I===0&&(I=L*F.width/F.height),L===0&&(L=I*F.height/F.width),[I,L]},E=function(I,L,F,ee,ge,ue){var fe=N.call(this,F,ee,ge),ae=this.internal.getCoordinateString,$=this.internal.getVerticalCoordinateString,me=d.call(this);if(F=fe[0],ee=fe[1],me[ge.index]=ge,ue){ue*=Math.PI/180;var z=Math.cos(ue),S=Math.sin(ue),K=function(G){return G.toFixed(4)},Y=[K(z),K(S),K(-1*S),K(z),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,ae(I),$(L+ee),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ae(F),"0","0",ae(ee),"0","0","cm"].join(" "))):this.internal.write([ae(F),"0","0",ae(ee),ae(I),$(L+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ge.index+" Do"),this.internal.write("Q")},_=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},H=r.__addimage__.sHashCode=function(I){var L,F,ee=0;if(typeof I=="string")for(F=I.length,L=0;L<F;L++)ee=(ee<<5)-ee+I.charCodeAt(L),ee|=0;else if(Z(I))for(F=I.byteLength/2,L=0;L<F;L++)ee=(ee<<5)-ee+I[L],ee|=0;return ee},D=r.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var L=!0;return I.length===0&&(L=!1),I.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(L=!1),L},J=r.__addimage__.extractImageFromDataUrl=function(I){if(I==null||!(I=I.trim()).startsWith("data:"))return null;var L=I.indexOf(",");return L<0?null:I.substring(0,L).trim().endsWith("base64")?I.substring(L+1):null};r.__addimage__.isArrayBuffer=function(I){return I instanceof ArrayBuffer};var Z=r.__addimage__.isArrayBufferView=function(I){return I instanceof Int8Array||I instanceof Uint8Array||I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array},O=r.__addimage__.binaryStringToUint8Array=function(I){for(var L=I.length,F=new Uint8Array(L),ee=0;ee<L;ee++)F[ee]=I.charCodeAt(ee);return F},Q=r.__addimage__.arrayBufferToBinaryString=function(I){for(var L="",F=Z(I)?I:new Uint8Array(I),ee=0;ee<F.length;ee+=8192)L+=String.fromCharCode.apply(null,F.subarray(ee,ee+8192));return L};r.addImage=function(){var I,L,F,ee,ge,ue,fe,ae,$;if(typeof arguments[1]=="number"?(L=t,F=arguments[1],ee=arguments[2],ge=arguments[3],ue=arguments[4],fe=arguments[5],ae=arguments[6],$=arguments[7]):(L=arguments[1],F=arguments[2],ee=arguments[3],ge=arguments[4],ue=arguments[5],fe=arguments[6],ae=arguments[7],$=arguments[8]),sn(I=arguments[0])==="object"&&!x(I)&&"imageData"in I){var me=I;I=me.imageData,L=me.format||L||t,F=me.x||F||0,ee=me.y||ee||0,ge=me.w||me.width||ge,ue=me.h||me.height||ue,fe=me.alias||fe,ae=me.compression||ae,$=me.rotation||me.angle||$}var z=this.internal.getFilters();if(ae===void 0&&z.indexOf("FlateEncode")!==-1&&(ae="SLOW"),isNaN(F)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var S=U.call(this,I,L,fe,ae);return E.call(this,F,ee,ge,ue,S,$),this};var U=function(I,L,F,ee){var ge,ue,fe;if(typeof I=="string"&&s(I)===t){I=unescape(I);var ae=V(I,!1);(ae!==""||(ae=r.loadFile(I,!0))!==void 0)&&(I=ae)}if(x(I)&&(I=y(I,L)),L=s(I,L),!v(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((fe=F)==null||fe.length===0)&&(F=(function($){return typeof $=="string"||Z($)?H($):Z($.data)?H($.data):null})(I)),(ge=C.call(this,F))||(I instanceof Uint8Array||L==="RGBA"||(ue=I,I=O(I)),ge=this["process"+L.toUpperCase()](I,f.call(this),F,(function($){return $&&typeof $=="string"&&($=$.toUpperCase()),$ in r.image_compression?$:P.NONE})(ee),ue)),!ge)throw new Error("An unknown error occurred whilst processing the image.");return ge},V=r.__addimage__.convertBase64ToBinaryString=function(I,L){L=typeof L!="boolean"||L;var F,ee="";if(typeof I=="string"){var ge;F=(ge=J(I))!==null&&ge!==void 0?ge:I;try{ee=um(F)}catch(ue){if(L)throw D(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};r.getImageProperties=function(I){var L,F,ee="";if(x(I)&&(I=y(I)),typeof I=="string"&&s(I)===t&&((ee=V(I,!1))===""&&(ee=r.loadFile(I)||""),I=ee),F=s(I),!v(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(I instanceof Uint8Array||(I=O(I)),!(L=this["process"+F.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=F,L}})(qt.API),(function(r){var e=function(t){if(t!==void 0&&t!="")return!0};qt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,s,i,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,f=!1,v=0;v<d.length&&!f;v++)switch((n=d[v]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){n=d[x];var y=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(N.objId),P=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(n.bounds.x)+" "+c(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y)+"] ")+"/Contents ("+y(_(n.contents))+")",i+=" /Popup "+E.objId+" 0 R",i+=" /P "+u.objId+" 0 R",i+=" /T ("+y(_(P))+") >>",N.content=i;var H=N.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(n.bounds.x+30)+" "+c(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+c(n.bounds.y)+"] ")+" /Parent "+H,n.open&&(i+=" /Open true"),i+=" >>",E.content=i,this.internal.write(N.objId,"0 R",E.objId,"0 R");break;case"freetext":s="/Rect ["+l(n.bounds.x)+" "+c(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+y(C(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var J=this.annotations._nameMap[n.options.name];n.options.pageNumber=J.page,n.options.top=J.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+y(C(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var Z=c(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+Z+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,s,i,l){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(t),y:d(n),w:u(t+s),h:d(n+i)},options:l,type:"link"})},r.textWithLink=function(t,n,s,i){var l,c,u=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){c=i.maxWidth;var f=this.splitTextToSize(t,c).length;l=Math.ceil(d*f)}else c=u,l=d;return this.text(t,n,s,i),s+=.2*d,i.align==="center"&&(n-=u/2),i.align==="right"&&(n-=u),this.link(n,s-d,c,l,i),u},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}})(qt.API),(function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];r.__arabicParser__={};var i=r.__arabicParser__.isInArabicSubstitutionA=function(N){return e[N.charCodeAt(0)]!==void 0},l=r.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},c=r.__arabicParser__.isArabicEndLetter=function(N){return l(N)&&i(N)&&e[N.charCodeAt(0)].length<=2},u=r.__arabicParser__.isArabicAlfLetter=function(N){return l(N)&&s.indexOf(N.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return l(N)&&i(N)&&e[N.charCodeAt(0)].length>=1};var d=r.__arabicParser__.arabicLetterHasFinalForm=function(N){return l(N)&&i(N)&&e[N.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(N){return l(N)&&i(N)&&e[N.charCodeAt(0)].length>=3};var f=r.__arabicParser__.arabicLetterHasMedialForm=function(N){return l(N)&&i(N)&&e[N.charCodeAt(0)].length==4},v=r.__arabicParser__.resolveLigatures=function(N){var E=0,_=t,P="",H=0;for(E=0;E<N.length;E+=1)_[N.charCodeAt(E)]!==void 0?(H++,typeof(_=_[N.charCodeAt(E)])=="number"&&(P+=String.fromCharCode(_),_=t,H=0),E===N.length-1&&(_=t,P+=N.charAt(E-(H-1)),E-=H-1,H=0)):(_=t,P+=N.charAt(E-H),E-=H,H=0);return P};r.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&n[N.charCodeAt(0)]!==void 0};var x=r.__arabicParser__.getCorrectForm=function(N,E,_){return l(N)?i(N)===!1?-1:!d(N)||!l(E)&&!l(_)||!l(_)&&c(E)||c(N)&&!l(E)||c(N)&&u(E)||c(N)&&c(E)?0:f(N)&&l(E)&&!c(E)&&l(_)&&d(_)?3:c(N)||!l(_)?1:2:-1},y=function(N){var E=0,_=0,P=0,H="",D="",J="",Z=(N=N||"").split("\\s+"),O=[];for(E=0;E<Z.length;E+=1){for(O.push(""),_=0;_<Z[E].length;_+=1)H=Z[E][_],D=Z[E][_-1],J=Z[E][_+1],l(H)?(P=x(H,D,J),O[E]+=P!==-1?String.fromCharCode(e[H.charCodeAt(0)][P]):H):O[E]+=H;O[E]=v(O[E])}return O.join(" ")},C=r.__arabicParser__.processArabic=r.processArabic=function(){var N,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(E)){var P=0;for(_=[],P=0;P<E.length;P+=1)Array.isArray(E[P])?_.push([y(E[P][0]),E[P][1],E[P][2]]):_.push([y(E[P])]);N=_}else N=y(E);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};r.events.push(["preProcessText",C])})(qt.API),qt.API.autoPrint=function(r){var e;return(r=r||{}).variant=r.variant||"non-conform",r.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(c){t=c}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(c){s=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(c){i=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var s;if((t=t||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(qt.API),(function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(N){u=N}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(N){d=N}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(N){v=N}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(N){x=N}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(N){C=N}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},r.getTextDimensions=function(u,d){n.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),v=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,y=0,C=0,N=0,E=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var _=d.maxWidth;_>0?typeof u=="string"?u=this.splitTextToSize(u,_):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(H,D){return H.concat(E.splitTextToSize(D,_))},[])):u=Array.isArray(u)?u:[u];for(var P=0;P<u.length;P++)y<(N=this.getStringUnitWidth(u[P],{font:v})*f)&&(y=N);return y!==0&&(C=u.length),{w:y/=x,h:Math.max((C*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/x,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=r.cell=function(){var u;u=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,x=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===u.lineNumber?(u.x=(d.x||0)+(d.width||0),u.y=d.y||0):d.y+d.height+u.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=v.top,y&&x&&(this.printHeaderRow(u.lineNumber,!0),u.y+=x[0].height)):u.y=d.y+d.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,t===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-f,u.y+f,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+f,{align:"center",baseline:"top",maxWidth:u.width-f-f}):this.text(u.text,u.x+f,u.y+f,{align:"left",baseline:"top",maxWidth:u.width-f-f})),this.internal.__cell__.lastCell=u,this};r.table=function(u,d,f,v,x){if(n.call(this),!f)throw new Error("No data for PDF table.");var y,C,N,E,_=[],P=[],H=[],D={},J={},Z=[],O=[],Q=(x=x||{}).autoSize||!1,U=x.printHeaders!==!1,V=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,I=x.margins||Object.assign({width:this.getPageWidth()},e),L=typeof x.padding=="number"?x.padding:3,F=x.headerBackgroundColor||"#c8c8c8",ee=x.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=F,this.internal.__cell__.headerTextColor=ee,this.setFontSize(V),v==null)P=_=Object.keys(f[0]),H=_.map(function(){return"left"});else if(Array.isArray(v)&&sn(v[0])==="object")for(_=v.map(function(me){return me.name}),P=v.map(function(me){return me.prompt||me.name||""}),H=v.map(function(me){return me.align||"left"}),y=0;y<v.length;y+=1)J[v[y].name]=.7499990551181103*v[y].width;else Array.isArray(v)&&typeof v[0]=="string"&&(P=_=v,H=_.map(function(){return"left"}));if(Q||Array.isArray(v)&&typeof v[0]=="string")for(y=0;y<_.length;y+=1){for(D[E=_[y]]=f.map(function(me){return me[E]}),this.setFont(void 0,"bold"),Z.push(this.getTextDimensions(P[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=D[E],this.setFont(void 0,"normal"),N=0;N<C.length;N+=1)Z.push(this.getTextDimensions(C[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[E]=Math.max.apply(null,Z)+L+L,Z=[]}if(U){var ge={};for(y=0;y<_.length;y+=1)ge[_[y]]={},ge[_[y]].text=P[y],ge[_[y]].align=H[y];var ue=c.call(this,ge,J);O=_.map(function(me){return new i(u,d,J[me],ue,ge[me].text,void 0,ge[me].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var fe=v.reduce(function(me,z){return me[z.name]=z.align,me},{});for(y=0;y<f.length;y+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:y,data:f[y]},this);var ae=c.call(this,f[y],J);for(N=0;N<_.length;N+=1){var $=f[y][_[N]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:y,col:N,data:$},this),l.call(this,new i(u,d,J[_[N]],ae,$,y+2,fe[_[N]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=d,this};var c=function(u,d){var f=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(u).map(function(y){var C=u[y];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,d[y]-f-f)},this).map(function(y){return this.getLineHeightFactor()*y.length*v/x+f+f},this).reduce(function(y,C){return Math.max(y,C)},0)};r.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},r.printHeaderRow=function(u,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){f=this.internal.__cell__.tableHeaderRow[y].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,x.push(f)),f.lineNumber=u;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,f),this.setTextColor(C)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}})(qt.API);var P4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},D4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ov=Q4(D4),R4=[100,200,300,400,500,600,700,800,900],LM=Q4(R4);function Iy(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=(function(i){return P4[i=i||"normal"]?i:"normal"})(r.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(r.weight),s=(function(i){return typeof Ov[i=i||"normal"]=="number"?i:"normal"})(r.stretch);return{family:e,style:t,weight:n,stretch:s,src:r.src||[],ref:r.ref||{name:e,style:[s,t,n].join(" ")}}}function OB(r,e,t,n){var s;for(s=t;s>=0&&s<e.length;s+=n)if(r[e[s]])return r[e[s]];for(s=t;s>=0&&s<e.length;s-=n)if(r[e[s]])return r[e[s]]}var QM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},MB={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function HB(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function VB(r){return r.trimLeft()}function PM(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function DM(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Gp,KB,zB,qu,$p,GB,$B,qB,_y=["times"];function WB(r,e,t,n,s){var i=4,l=JB;switch(s){case qt.API.image_compression.FAST:i=1,l=YB;break;case qt.API.image_compression.MEDIUM:i=6,l=XB;break;case qt.API.image_compression.SLOW:i=9,l=ZB}r=(function(u,d,f,v){for(var x,y=u.length/d,C=new Uint8Array(u.length+y),N=[RM,YB,JB,XB,ZB],E=0;E<y;E+=1){var _=E*d,P=u.subarray(_,_+d);if(v)C.set(v(P,f,x),_+E);else{for(var H=N.length,D=[],J=0;J<H;J+=1)D[J]=N[J](P,f,x);var Z=MM(D.concat());C.set(D[Z],_+E)}x=P}return C})(r,e,Math.ceil(t*n/8),l);var c=Uv(r,{level:i});return qt.API.__addimage__.arrayBufferToBinaryString(c)}function RM(r){var e=Array.apply([],r);return e.unshift(0),e}function YB(r,e){var t=r.length,n=[];n[0]=1;for(var s=0;s<t;s+=1){var i=r[s-e]||0;n[s+1]=r[s]-i+256&255}return n}function JB(r,e,t){var n=r.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var l=t&&t[i]||0;s[i+1]=r[i]-l+256&255}return s}function XB(r,e,t){var n=r.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var l=r[i-e]||0,c=t&&t[i]||0;s[i+1]=r[i]+256-(l+c>>>1)&255}return s}function ZB(r,e,t){var n=r.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var l=OM(r[i-e]||0,t&&t[i]||0,t&&t[i-e]||0);s[i+1]=r[i]-l+256&255}return s}function OM(r,e,t){if(r===e&&e===t)return r;var n=Math.abs(e-t),s=Math.abs(r-t),i=Math.abs(r+e-t-t);return n<=s&&n<=i?r:s<=i?e:t}function MM(r){var e=r.map(function(t){return t.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function Ny(r,e,t){var n=e*t,s=Math.floor(n/8),i=16-(n-8*s+t),l=(1<<t)-1;return O4(r,s)>>i&l}function e5(r,e,t,n){var s=t*n,i=Math.floor(s/8),l=16-(s-8*i+n),c=(1<<n)-1,u=(e&c)<<l;(function(d,f,v){if(f+1<d.byteLength)d.setUint16(f,v,!1);else{var x=v>>8&255;d.setUint8(f,x)}})(r,i,O4(r,i)&~(c<<l)&65535|u)}function O4(r,e){return e+1<r.byteLength?r.getUint16(e,!1):r.getUint8(e)<<8}function HM(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,s=r[e++],i=s>>7,l=1<<1+(7&s);r[e++],r[e++];var c=null,u=null;i&&(c=e,u=l,e+=3*l);var d=!0,f=[],v=0,x=null,y=0,C=null;for(this.width=t,this.height=n;d&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,C=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var N=r[e++];v=r[e++]|r[e++]<<8,x=r[e++],1&N||(x=null),y=N>>2&7,e++;break;case 254:for(;;){if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var E=r[e++]|r[e++]<<8,_=r[e++]|r[e++]<<8,P=r[e++]|r[e++]<<8,H=r[e++]|r[e++]<<8,D=r[e++],J=D>>6&1,Z=1<<1+(7&D),O=c,Q=u,U=!1;D>>7&&(U=!0,O=e,Q=Z,e+=3*Z);var V=e;for(e++;;){var I;if(!((I=r[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}f.push({x:E,y:_,width:P,height:H,has_local_palette:U,palette_offset:O,palette_size:Q,data_offset:V,data_length:e-V,transparent_index:x,interlaced:!!J,delay:v,disposal:y});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(L){if(L<0||L>=f.length)throw new Error("Frame index out of range.");return f[L]},this.decodeAndBlitFrameBGRA=function(L,F){var ee=this.frameInfo(L),ge=ee.width*ee.height,ue=new Uint8Array(ge);t5(r,ee.data_offset,ue,ge);var fe=ee.palette_offset,ae=ee.transparent_index;ae===null&&(ae=256);var $=ee.width,me=t-$,z=$,S=4*(ee.y*t+ee.x),K=4*((ee.y+ee.height)*t+ee.x),Y=S,G=4*me;ee.interlaced===!0&&(G+=4*t*7);for(var oe=8,ye=0,Le=ue.length;ye<Le;++ye){var be=ue[ye];if(z===0&&(z=$,(Y+=G)>=K&&(G=4*me+4*t*(oe-1),Y=S+($+me)*(oe<<1),oe>>=1)),be===ae)Y+=4;else{var je=r[fe+3*be],Ge=r[fe+3*be+1],tt=r[fe+3*be+2];F[Y++]=tt,F[Y++]=Ge,F[Y++]=je,F[Y++]=255}--z}},this.decodeAndBlitFrameRGBA=function(L,F){var ee=this.frameInfo(L),ge=ee.width*ee.height,ue=new Uint8Array(ge);t5(r,ee.data_offset,ue,ge);var fe=ee.palette_offset,ae=ee.transparent_index;ae===null&&(ae=256);var $=ee.width,me=t-$,z=$,S=4*(ee.y*t+ee.x),K=4*((ee.y+ee.height)*t+ee.x),Y=S,G=4*me;ee.interlaced===!0&&(G+=4*t*7);for(var oe=8,ye=0,Le=ue.length;ye<Le;++ye){var be=ue[ye];if(z===0&&(z=$,(Y+=G)>=K&&(G=4*me+4*t*(oe-1),Y=S+($+me)*(oe<<1),oe>>=1)),be===ae)Y+=4;else{var je=r[fe+3*be],Ge=r[fe+3*be+1],tt=r[fe+3*be+2];F[Y++]=je,F[Y++]=Ge,F[Y++]=tt,F[Y++]=255}--z}}}function t5(r,e,t,n){for(var s=r[e++],i=1<<s,l=i+1,c=l+1,u=s+1,d=(1<<u)-1,f=0,v=0,x=0,y=r[e++],C=new Int32Array(4096),N=null;;){for(;f<16&&y!==0;)v|=r[e++]<<f,f+=8,y===1?y=r[e++]:--y;if(f<u)break;var E=v&d;if(v>>=u,f-=u,E!==i){if(E===l)break;for(var _=E<c?E:N,P=0,H=_;H>i;)H=C[H]>>8,++P;var D=H;if(x+P+(_!==E?1:0)>n)return void un.log("Warning, gif stream longer than expected.");t[x++]=D;var J=x+=P;for(_!==E&&(t[x++]=D),H=_;P--;)H=C[H],t[--J]=255&H,H>>=8;N!==null&&c<4096&&(C[c++]=N<<8|D,c>=d+1&&u<12&&(++u,d=d<<1|1)),N=E}else c=l+1,d=(1<<(u=s+1))-1,N=null}return x!==n&&un.log("Warning, gif stream shorter than expected."),t}function Sy(r){var e,t,n,s,i,l=Math.floor,c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(64),v=new Array(65535),x=new Array(65535),y=new Array(64),C=new Array(64),N=[],E=0,_=7,P=new Array(64),H=new Array(64),D=new Array(64),J=new Array(256),Z=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ge=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(S,K){for(var Y=0,G=0,oe=new Array,ye=1;ye<=16;ye++){for(var Le=1;Le<=S[ye];Le++)oe[K[G]]=[],oe[K[G]][0]=Y,oe[K[G]][1]=ye,G++,Y++;Y*=2}return oe}function fe(S){for(var K=S[0],Y=S[1]-1;Y>=0;)K&1<<Y&&(E|=1<<_),Y--,--_<0&&(E==255?(ae(255),ae(0)):ae(E),_=7,E=0)}function ae(S){N.push(S)}function $(S){ae(S>>8&255),ae(255&S)}function me(S,K,Y,G,oe){for(var ye,Le=oe[0],be=oe[240],je=(function(he,Se){var Qe,X,ne,pe,Ie,se,Te,we,Be,Fe,De=0;for(Be=0;Be<8;++Be){Qe=he[De],X=he[De+1],ne=he[De+2],pe=he[De+3],Ie=he[De+4],se=he[De+5],Te=he[De+6];var At=Qe+(we=he[De+7]),_e=Qe-we,Pe=X+Te,Ye=X-Te,vt=ne+se,ke=ne-se,We=pe+Ie,Me=pe-Ie,rt=At+We,mt=At-We,bt=Pe+vt,dt=Pe-vt;he[De]=rt+bt,he[De+4]=rt-bt;var _t=.707106781*(dt+mt);he[De+2]=mt+_t,he[De+6]=mt-_t;var Wt=.382683433*((rt=Me+ke)-(dt=Ye+_e)),Ar=.5411961*rt+Wt,vn=1.306562965*dt+Wt,_r=.707106781*(bt=ke+Ye),Ot=_e+_r,yr=_e-_r;he[De+5]=yr+Ar,he[De+3]=yr-Ar,he[De+1]=Ot+vn,he[De+7]=Ot-vn,De+=8}for(De=0,Be=0;Be<8;++Be){Qe=he[De],X=he[De+8],ne=he[De+16],pe=he[De+24],Ie=he[De+32],se=he[De+40],Te=he[De+48];var _n=Qe+(we=he[De+56]),Nr=Qe-we,An=X+Te,Ur=X-Te,Xr=ne+se,Hr=ne-se,Hi=pe+Ie,ta=pe-Ie,ys=_n+Hi,yi=_n-Hi,Rn=An+Xr,Fs=An-Xr;he[De]=ys+Rn,he[De+32]=ys-Rn;var Nn=.707106781*(Fs+yi);he[De+16]=yi+Nn,he[De+48]=yi-Nn;var Ha=.382683433*((ys=ta+Hr)-(Fs=Ur+Nr)),vi=.5411961*ys+Ha,ra=1.306562965*Fs+Ha,Ba=.707106781*(Rn=Hr+Ur),Va=Nr+Ba,vA=Nr-Ba;he[De+40]=vA+vi,he[De+24]=vA-vi,he[De+8]=Va+ra,he[De+56]=Va-ra,De++}for(Be=0;Be<64;++Be)Fe=he[Be]*Se[Be],y[Be]=Fe>0?Fe+.5|0:Fe-.5|0;return y})(S,K),Ge=0;Ge<64;++Ge)C[O[Ge]]=je[Ge];var tt=C[0]-Y;Y=C[0],tt==0?fe(G[0]):(fe(G[x[ye=32767+tt]]),fe(v[ye]));for(var it=63;it>0&&C[it]==0;)it--;if(it==0)return fe(Le),Y;for(var It,le=1;le<=it;){for(var ft=le;C[le]==0&&le<=it;)++le;var ct=le-ft;if(ct>=16){It=ct>>4;for(var pt=1;pt<=It;++pt)fe(be);ct&=15}ye=32767+C[le],fe(oe[(ct<<4)+x[ye]]),fe(v[ye]),le++}return it!=63&&fe(Le),Y}function z(S){S=Math.min(Math.max(S,1),100),i!=S&&((function(K){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var oe=l((Y[G]*K+50)/100);oe=Math.min(Math.max(oe,1),255),c[O[G]]=oe}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var be=l((ye[Le]*K+50)/100);be=Math.min(Math.max(be,1),255),u[O[Le]]=be}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ge=0,tt=0;tt<8;tt++)for(var it=0;it<8;it++)d[Ge]=1/(c[O[Ge]]*je[tt]*je[it]*8),f[Ge]=1/(u[O[Ge]]*je[tt]*je[it]*8),Ge++})(S<50?Math.floor(5e3/S):Math.floor(200-2*S)),i=S)}this.encode=function(S,K){K&&z(K),N=new Array,E=0,_=7,$(65496),$(65504),$(16),ae(74),ae(70),ae(73),ae(70),ae(0),ae(1),ae(1),ae(0),$(1),$(1),ae(0),ae(0),(function(){$(65499),$(132),ae(0);for(var X=0;X<64;X++)ae(c[X]);ae(1);for(var ne=0;ne<64;ne++)ae(u[ne])})(),(function(X,ne){$(65472),$(17),ae(8),$(ne),$(X),ae(3),ae(1),ae(17),ae(0),ae(2),ae(17),ae(1),ae(3),ae(17),ae(1)})(S.width,S.height),(function(){$(65476),$(418),ae(0);for(var X=0;X<16;X++)ae(Q[X+1]);for(var ne=0;ne<=11;ne++)ae(U[ne]);ae(16);for(var pe=0;pe<16;pe++)ae(V[pe+1]);for(var Ie=0;Ie<=161;Ie++)ae(I[Ie]);ae(1);for(var se=0;se<16;se++)ae(L[se+1]);for(var Te=0;Te<=11;Te++)ae(F[Te]);ae(17);for(var we=0;we<16;we++)ae(ee[we+1]);for(var Be=0;Be<=161;Be++)ae(ge[Be])})(),$(65498),$(12),ae(3),ae(1),ae(0),ae(2),ae(17),ae(3),ae(17),ae(0),ae(63),ae(0);var Y=0,G=0,oe=0;E=0,_=7,this.encode.displayName="_encode_";for(var ye,Le,be,je,Ge,tt,it,It,le,ft=S.data,ct=S.width,pt=S.height,he=4*ct,Se=0;Se<pt;){for(ye=0;ye<he;){for(Ge=he*Se+ye,it=-1,It=0,le=0;le<64;le++)tt=Ge+(It=le>>3)*he+(it=4*(7&le)),Se+It>=pt&&(tt-=he*(Se+1+It-pt)),ye+it>=he&&(tt-=ye+it-he+4),Le=ft[tt++],be=ft[tt++],je=ft[tt++],P[le]=(Z[Le]+Z[be+256|0]+Z[je+512|0]>>16)-128,H[le]=(Z[Le+768|0]+Z[be+1024|0]+Z[je+1280|0]>>16)-128,D[le]=(Z[Le+1280|0]+Z[be+1536|0]+Z[je+1792|0]>>16)-128;Y=me(P,d,Y,e,n),G=me(H,f,G,t,s),oe=me(D,f,oe,t,s),ye+=32}Se+=8}if(_>=0){var Qe=[];Qe[1]=_+1,Qe[0]=(1<<_+1)-1,fe(Qe)}return $(65497),new Uint8Array(N)},r=r||50,(function(){for(var S=String.fromCharCode,K=0;K<256;K++)J[K]=S(K)})(),e=ue(Q,U),t=ue(L,F),n=ue(V,I),s=ue(ee,ge),(function(){for(var S=1,K=2,Y=1;Y<=15;Y++){for(var G=S;G<K;G++)x[32767+G]=Y,v[32767+G]=[],v[32767+G][1]=Y,v[32767+G][0]=G;for(var oe=-(K-1);oe<=-S;oe++)x[32767+oe]=Y,v[32767+oe]=[],v[32767+oe][1]=Y,v[32767+oe][0]=K-1+oe;S<<=1,K<<=1}})(),(function(){for(var S=0;S<256;S++)Z[S]=19595*S,Z[S+256|0]=38470*S,Z[S+512|0]=7471*S+32768,Z[S+768|0]=-11059*S,Z[S+1024|0]=-21709*S,Z[S+1280|0]=32768*S+8421375,Z[S+1536|0]=-27439*S,Z[S+1792|0]=-5329*S})(),z(r)}function PA(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function r5(r){function e(U){if(!U)throw Error("assert :P")}function t(U,V,I){for(var L=0;4>L;L++)if(U[V+L]!=I.charCodeAt(L))return!0;return!1}function n(U,V,I,L,F){for(var ee=0;ee<F;ee++)U[V+ee]=I[L+ee]}function s(U,V,I,L){for(var F=0;F<L;F++)U[V+F]=I}function i(U){return new Int32Array(U)}function l(U,V){for(var I=[],L=0;L<U;L++)I.push(new V);return I}function c(U,V){var I=[];return(function L(F,ee,ge){for(var ue=ge[ee],fe=0;fe<ue&&(F.push(ge.length>ee+1?[]:new V),!(ge.length<ee+1));fe++)L(F[fe],ee+1,ge)})(I,0,U),I}var u=function(){var U=this;function V(p,w){for(var k=1<<w-1>>>0;p&k;)k>>>=1;return k?(p&k-1)+k:p}function I(p,w,k,R,W){e(!(R%k));do p[w+(R-=k)]=W;while(0<R)}function L(p,w,k,R,W){if(e(2328>=W),512>=W)var re=i(512);else if((re=i(W))==null)return 0;return(function(ie,Ae,de,ve,Re,qe){var xe,He,$e=Ae,ot=1<<de,Xe=i(16),st=i(16);for(e(Re!=0),e(ve!=null),e(ie!=null),e(0<de),He=0;He<Re;++He){if(15<ve[He])return 0;++Xe[ve[He]]}if(Xe[0]==Re)return 0;for(st[1]=0,xe=1;15>xe;++xe){if(Xe[xe]>1<<xe)return 0;st[xe+1]=st[xe]+Xe[xe]}for(He=0;He<Re;++He)xe=ve[He],0<ve[He]&&(qe[st[xe]++]=He);if(st[15]==1)return(ve=new F).g=0,ve.value=qe[0],I(ie,$e,1,ot,ve),ot;var at,ut=-1,ht=ot-1,Gt=0,Lt=1,cr=1,Rt=1<<de;for(He=0,xe=1,Re=2;xe<=de;++xe,Re<<=1){if(Lt+=cr<<=1,0>(cr-=Xe[xe]))return 0;for(;0<Xe[xe];--Xe[xe])(ve=new F).g=xe,ve.value=qe[He++],I(ie,$e+Gt,Re,Rt,ve),Gt=V(Gt,xe)}for(xe=de+1,Re=2;15>=xe;++xe,Re<<=1){if(Lt+=cr<<=1,0>(cr-=Xe[xe]))return 0;for(;0<Xe[xe];--Xe[xe]){if(ve=new F,(Gt&ht)!=ut){for($e+=Rt,at=1<<(ut=xe)-de;15>ut&&!(0>=(at-=Xe[ut]));)++ut,at<<=1;ot+=Rt=1<<(at=ut-de),ie[Ae+(ut=Gt&ht)].g=at+de,ie[Ae+ut].value=$e-Ae-ut}ve.g=xe-de,ve.value=qe[He++],I(ie,$e+(Gt>>de),Re,Rt,ve),Gt=V(Gt,xe)}}return Lt!=2*st[15]-1?0:ot})(p,w,k,R,W,re)}function F(){this.value=this.g=0}function ee(){this.value=this.g=0}function ge(){this.G=l(5,F),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(oa,ee)}function ue(p,w,k,R){e(p!=null),e(w!=null),e(2147483648>R),p.Ca=254,p.I=0,p.b=-8,p.Ka=0,p.oa=w,p.pa=k,p.Jd=w,p.Yc=k+R,p.Zc=4<=R?k+R-4+1:k,Le(p)}function fe(p,w){for(var k=0;0<w--;)k|=je(p,128)<<w;return k}function ae(p,w){var k=fe(p,w);return be(p)?-k:k}function $(p,w,k,R){var W,re=0;for(e(p!=null),e(w!=null),e(4294967288>R),p.Sb=R,p.Ra=0,p.u=0,p.h=0,4<R&&(R=4),W=0;W<R;++W)re+=w[k+W]<<8*W;p.Ra=re,p.bb=R,p.oa=w,p.pa=k}function me(p){for(;8<=p.u&&p.bb<p.Sb;)p.Ra>>>=8,p.Ra+=p.oa[p.pa+p.bb]<<ro-8>>>0,++p.bb,p.u-=8;G(p)&&(p.h=1,p.u=0)}function z(p,w){if(e(0<=w),!p.h&&w<=qi){var k=Y(p)&$i[w];return p.u+=w,me(p),k}return p.h=1,p.u=0}function S(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function K(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(p){return p.Ra>>>(p.u&ro-1)>>>0}function G(p){return e(p.bb<=p.Sb),p.h||p.bb==p.Sb&&p.u>ro}function oe(p,w){p.u=w,p.h=G(p)}function ye(p){p.u>=rA&&(e(p.u>=rA),me(p))}function Le(p){e(p!=null&&p.oa!=null),p.pa<p.Zc?(p.I=(p.oa[p.pa++]|p.I<<8)>>>0,p.b+=8):(e(p!=null&&p.oa!=null),p.pa<p.Yc?(p.b+=8,p.I=p.oa[p.pa++]|p.I<<8):p.Ka?p.b=0:(p.I<<=8,p.b+=8,p.Ka=1))}function be(p){return fe(p,1)}function je(p,w){var k=p.Ca;0>p.b&&Le(p);var R=p.b,W=k*w>>>8,re=(p.I>>>R>W)+0;for(re?(k-=W,p.I-=W+1<<R>>>0):k=W+1,R=k,W=0;256<=R;)W+=8,R>>=8;return R=7^W+CA[R],p.b-=R,p.Ca=(k<<R)-1,re}function Ge(p,w,k){p[w+0]=k>>24&255,p[w+1]=k>>16&255,p[w+2]=k>>8&255,p[w+3]=255&k}function tt(p,w){return p[w+0]|p[w+1]<<8}function it(p,w){return tt(p,w)|p[w+2]<<16}function It(p,w){return tt(p,w)|tt(p,w+2)<<16}function le(p,w){var k=1<<w;return e(p!=null),e(0<w),p.X=i(k),p.X==null?0:(p.Mb=32-w,p.Xa=w,1)}function ft(p,w){e(p!=null),e(w!=null),e(p.Xa==w.Xa),n(w.X,0,p.X,0,1<<w.Xa)}function ct(){this.X=[],this.Xa=this.Mb=0}function pt(p,w,k,R){e(k!=null),e(R!=null);var W=k[0],re=R[0];return W==0&&(W=(p*re+w/2)/w),re==0&&(re=(w*W+p/2)/p),0>=W||0>=re?0:(k[0]=W,R[0]=re,1)}function he(p,w){return p+(1<<w)-1>>>w}function Se(p,w){return((4278255360&p)+(4278255360&w)>>>0&4278255360)+((16711935&p)+(16711935&w)>>>0&16711935)>>>0}function Qe(p,w){U[w]=function(k,R,W,re,ie,Ae,de){var ve;for(ve=0;ve<ie;++ve){var Re=U[p](Ae[de+ve-1],W,re+ve);Ae[de+ve]=Se(k[R+ve],Re)}}}function X(){this.ud=this.hd=this.jd=0}function ne(p,w){return((4278124286&(p^w))>>>1)+(p&w)>>>0}function pe(p){return 0<=p&&256>p?p:0>p?0:255<p?255:void 0}function Ie(p,w){return pe(p+(p-w+.5>>1))}function se(p,w,k){return Math.abs(w-k)-Math.abs(p-k)}function Te(p,w,k,R,W,re,ie){for(R=re[ie-1],k=0;k<W;++k)re[ie+k]=R=Se(p[w+k],R)}function we(p,w,k,R,W){var re;for(re=0;re<k;++re){var ie=p[w+re],Ae=ie>>8&255,de=16711935&(de=(de=16711935&ie)+((Ae<<16)+Ae));R[W+re]=(4278255360&ie)+de>>>0}}function Be(p,w){w.jd=255&p,w.hd=p>>8&255,w.ud=p>>16&255}function Fe(p,w,k,R,W,re){var ie;for(ie=0;ie<R;++ie){var Ae=w[k+ie],de=Ae>>>8,ve=Ae,Re=255&(Re=(Re=Ae>>>16)+((p.jd<<24>>24)*(de<<24>>24)>>>5));ve=255&(ve=(ve+=(p.hd<<24>>24)*(de<<24>>24)>>>5)+((p.ud<<24>>24)*(Re<<24>>24)>>>5)),W[re+ie]=(4278255360&Ae)+(Re<<16)+ve}}function De(p,w,k,R,W){U[w]=function(re,ie,Ae,de,ve,Re,qe,xe,He){for(de=qe;de<xe;++de)for(qe=0;qe<He;++qe)ve[Re++]=W(Ae[R(re[ie++])])},U[p]=function(re,ie,Ae,de,ve,Re,qe){var xe=8>>re.b,He=re.Ea,$e=re.K[0],ot=re.w;if(8>xe)for(re=(1<<re.b)-1,ot=(1<<xe)-1;ie<Ae;++ie){var Xe,st=0;for(Xe=0;Xe<He;++Xe)Xe&re||(st=R(de[ve++])),Re[qe++]=W($e[st&ot]),st>>=xe}else U["VP8LMapColor"+k](de,ve,$e,ot,Re,qe,ie,Ae,He)}}function At(p,w,k,R,W){for(k=w+k;w<k;){var re=p[w++];R[W++]=re>>16&255,R[W++]=re>>8&255,R[W++]=255&re}}function _e(p,w,k,R,W){for(k=w+k;w<k;){var re=p[w++];R[W++]=re>>16&255,R[W++]=re>>8&255,R[W++]=255&re,R[W++]=re>>24&255}}function Pe(p,w,k,R,W){for(k=w+k;w<k;){var re=(ie=p[w++])>>16&240|ie>>12&15,ie=240&ie|ie>>28&15;R[W++]=re,R[W++]=ie}}function Ye(p,w,k,R,W){for(k=w+k;w<k;){var re=(ie=p[w++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;R[W++]=re,R[W++]=ie}}function vt(p,w,k,R,W){for(k=w+k;w<k;){var re=p[w++];R[W++]=255&re,R[W++]=re>>8&255,R[W++]=re>>16&255}}function ke(p,w,k,R,W,re){if(re==0)for(k=w+k;w<k;)Ge(R,((re=p[w++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),W+=32;else n(R,W,p,w,k)}function We(p,w){U[w][0]=U[p+"0"],U[w][1]=U[p+"1"],U[w][2]=U[p+"2"],U[w][3]=U[p+"3"],U[w][4]=U[p+"4"],U[w][5]=U[p+"5"],U[w][6]=U[p+"6"],U[w][7]=U[p+"7"],U[w][8]=U[p+"8"],U[w][9]=U[p+"9"],U[w][10]=U[p+"10"],U[w][11]=U[p+"11"],U[w][12]=U[p+"12"],U[w][13]=U[p+"13"],U[w][14]=U[p+"0"],U[w][15]=U[p+"0"]}function Me(p){return p==El||p==Ro||p==Tc||p==Uc}function rt(){this.eb=[],this.size=this.A=this.fb=0}function mt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new mt,this.sd=null}function dt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function _t(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Wt(p){return alert("todo:WebPSamplerProcessPlane"),p.T}function Ar(p,w){var k=p.T,R=w.ba.f.RGBA,W=R.eb,re=R.fb+p.ka*R.A,ie=Ei[w.ba.S],Ae=p.y,de=p.O,ve=p.f,Re=p.N,qe=p.ea,xe=p.W,He=w.cc,$e=w.dc,ot=w.Mc,Xe=w.Nc,st=p.ka,at=p.ka+p.T,ut=p.U,ht=ut+1>>1;for(st==0?ie(Ae,de,null,null,ve,Re,qe,xe,ve,Re,qe,xe,W,re,null,null,ut):(ie(w.ec,w.fc,Ae,de,He,$e,ot,Xe,ve,Re,qe,xe,W,re-R.A,W,re,ut),++k);st+2<at;st+=2)He=ve,$e=Re,ot=qe,Xe=xe,Re+=p.Rc,xe+=p.Rc,re+=2*R.A,ie(Ae,(de+=2*p.fa)-p.fa,Ae,de,He,$e,ot,Xe,ve,Re,qe,xe,W,re-R.A,W,re,ut);return de+=p.fa,p.j+at<p.o?(n(w.ec,w.fc,Ae,de,ut),n(w.cc,w.dc,ve,Re,ht),n(w.Mc,w.Nc,qe,xe,ht),k--):1&at||ie(Ae,de,null,null,ve,Re,qe,xe,ve,Re,qe,xe,W,re+R.A,null,null,ut),k}function vn(p,w,k){var R=p.F,W=[p.J];if(R!=null){var re=p.U,ie=w.ba.S,Ae=ie==Fc||ie==Tc;w=w.ba.f.RGBA;var de=[0],ve=p.ka;de[0]=p.T,p.Kb&&(ve==0?--de[0]:(--ve,W[0]-=p.width),p.j+p.ka+p.T==p.o&&(de[0]=p.o-p.j-ve));var Re=w.eb;ve=w.fb+ve*w.A,p=Sc(R,W[0],p.width,re,de,Re,ve+(Ae?0:3),w.A),e(k==de),p&&Me(ie)&&Do(Re,ve,Ae,re,de,w.A)}return 0}function _r(p){var w=p.ma,k=w.ba.S,R=11>k,W=k==ao||k==kc||k==Fc||k==en||k==12||Me(k);if(w.memory=null,w.Ib=null,w.Jb=null,w.Nd=null,!yl(w.Oa,p,W?11:12))return 0;if(W&&Me(k)&&bi(),p.da)alert("todo:use_scaling");else{if(R){if(w.Ib=Wt,p.Kb){if(k=p.U+1>>1,w.memory=i(p.U+2*k),w.memory==null)return 0;w.ec=w.memory,w.fc=0,w.cc=w.ec,w.dc=w.fc+p.U,w.Mc=w.cc,w.Nc=w.dc+k,w.Ib=Ar,bi()}}else alert("todo:EmitYUV");W&&(w.Jb=vn,R&&xi())}if(R&&!Ds){for(p=0;256>p;++p)Ii[p]=89858*(p-128)+Sa>>NA,_i[p]=-22014*(p-128)+Sa,Sl[p]=-45773*(p-128),Vo[p]=113618*(p-128)+Sa>>NA;for(p=Kr;p<qr;++p)w=76283*(p-16)+Sa>>NA,Eu[p-Kr]=dn(w,255),Tf[p-Kr]=dn(w+8>>4,15);Ds=1}return 1}function Ot(p){var w=p.ma,k=p.U,R=p.T;return e(!(1&p.ka)),0>=k||0>=R?0:(k=w.Ib(p,w),w.Jb!=null&&w.Jb(p,w,k),w.Dc+=k,1)}function yr(p){p.ma.memory=null}function _n(p,w,k,R){return z(p,8)!=47?0:(w[0]=z(p,14)+1,k[0]=z(p,14)+1,R[0]=z(p,1),z(p,3)!=0?0:!p.h)}function Nr(p,w){if(4>p)return p+1;var k=p-2>>1;return(2+(1&p)<<k)+z(w,k)+1}function An(p,w){return 120<w?w-120:1<=(k=((k=Pg[w-1])>>4)*p+(8-(15&k)))?k:1;var k}function Ur(p,w,k){var R=Y(k),W=p[w+=255&R].g-8;return 0<W&&(oe(k,k.u+8),R=Y(k),w+=p[w].value,w+=R&(1<<W)-1),oe(k,k.u+p[w].g),p[w].value}function Xr(p,w,k){return k.g+=p.g,k.value+=p.value<<w>>>0,e(8>=k.g),p.g}function Hr(p,w,k){var R=p.xc;return e((w=R==0?0:p.vc[p.md*(k>>R)+(w>>R)])<p.Wb),p.Ya[w]}function Hi(p,w,k,R){var W=p.ab,re=p.c*w,ie=p.C;w=ie+w;var Ae=k,de=R;for(R=p.Ta,k=p.Ua;0<W--;){var ve=p.gc[W],Re=ie,qe=w,xe=Ae,He=de,$e=(de=R,Ae=k,ve.Ea);switch(e(Re<qe),e(qe<=ve.nc),ve.hc){case 2:Mn(xe,He,(qe-Re)*$e,de,Ae);break;case 0:var ot=Re,Xe=qe,st=de,at=Ae,ut=(Rt=ve).Ea;ot==0&&(EA(xe,He,null,null,1,st,at),Te(xe,He+1,0,0,ut-1,st,at+1),He+=ut,at+=ut,++ot);for(var ht=1<<Rt.b,Gt=ht-1,Lt=he(ut,Rt.b),cr=Rt.K,Rt=Rt.w+(ot>>Rt.b)*Lt;ot<Xe;){var xr=cr,jn=Rt,ur=1;for(nA(xe,He,st,at-ut,1,st,at);ur<ut;){var Qt=(ur&~Gt)+ht;Qt>ut&&(Qt=ut),(0,jo[xr[jn++]>>8&15])(xe,He+ +ur,st,at+ur-ut,Qt-ur,st,at+ur),ur=Qt}He+=ut,at+=ut,++ot&Gt||(Rt+=Lt)}qe!=ve.nc&&n(de,Ae-$e,de,Ae+(qe-Re-1)*$e,$e);break;case 1:for($e=xe,Xe=He,ut=(xe=ve.Ea)-(at=xe&~(st=(He=1<<ve.b)-1)),ot=he(xe,ve.b),ht=ve.K,ve=ve.w+(Re>>ve.b)*ot;Re<qe;){for(Gt=ht,Lt=ve,cr=new X,Rt=Xe+at,xr=Xe+xe;Xe<Rt;)Be(Gt[Lt++],cr),wl(cr,$e,Xe,He,de,Ae),Xe+=He,Ae+=He;Xe<xr&&(Be(Gt[Lt++],cr),wl(cr,$e,Xe,ut,de,Ae),Xe+=ut,Ae+=ut),++Re&st||(ve+=ot)}break;case 3:if(xe==de&&He==Ae&&0<ve.b){for(Xe=de,xe=$e=Ae+(qe-Re)*$e-(at=(qe-Re)*he(ve.Ea,ve.b)),He=de,st=Ae,ot=[],at=(ut=at)-1;0<=at;--at)ot[at]=He[st+at];for(at=ut-1;0<=at;--at)Xe[xe+at]=ot[at];To(ve,Re,qe,de,$e,de,Ae)}else To(ve,Re,qe,xe,He,de,Ae)}Ae=R,de=k}de!=k&&n(R,k,Ae,de,re)}function ta(p,w){var k=p.V,R=p.Ba+p.c*p.C,W=w-p.C;if(e(w<=p.l.o),e(16>=W),0<W){var re=p.l,ie=p.Ta,Ae=p.Ua,de=re.width;if(Hi(p,W,k,R),W=Ae=[Ae],e((k=p.C)<(R=w)),e(re.v<re.va),R>re.o&&(R=re.o),k<re.j){var ve=re.j-k;k=re.j,W[0]+=ve*de}if(k>=R?k=0:(W[0]+=4*re.v,re.ka=k-re.j,re.U=re.va-re.v,re.T=R-k,k=1),k){if(Ae=Ae[0],11>(k=p.ca).S){var Re=k.f.RGBA,qe=(R=k.S,W=re.U,re=re.T,ve=Re.eb,Re.A),xe=re;for(Re=Re.fb+p.Ma*Re.A;0<xe--;){var He=ie,$e=Ae,ot=W,Xe=ve,st=Re;switch(R){case xu:xl(He,$e,ot,Xe,st);break;case ao:IA(He,$e,ot,Xe,st);break;case El:IA(He,$e,ot,Xe,st),Do(Xe,st,0,ot,1,0);break;case _f:Lo(He,$e,ot,Xe,st);break;case kc:ke(He,$e,ot,Xe,st,1);break;case Ro:ke(He,$e,ot,Xe,st,1),Do(Xe,st,0,ot,1,0);break;case Fc:ke(He,$e,ot,Xe,st,0);break;case Tc:ke(He,$e,ot,Xe,st,0),Do(Xe,st,1,ot,1,0);break;case en:no(He,$e,ot,Xe,st);break;case Uc:no(He,$e,ot,Xe,st),Hd(Xe,st,ot,1,0);break;case bu:so(He,$e,ot,Xe,st);break;default:e(0)}Ae+=de,Re+=qe}p.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");e(p.Ma<=k.height)}}p.C=w,e(p.C<=p.i)}function ys(p){var w;if(0<p.ua)return 0;for(w=0;w<p.Wb;++w){var k=p.Ya[w].G,R=p.Ya[w].H;if(0<k[1][R[1]+0].g||0<k[2][R[2]+0].g||0<k[3][R[3]+0].g)return 0}return 1}function yi(p,w,k,R,W,re){if(p.Z!=0){var ie=p.qd,Ae=p.rd;for(e(zs[p.Z]!=null);w<k;++w)zs[p.Z](ie,Ae,R,W,R,W,re),ie=R,Ae=W,W+=re;p.qd=ie,p.rd=Ae}}function Rn(p,w){var k=p.l.ma,R=k.Z==0||k.Z==1?p.l.j:p.C;if(R=p.C<R?R:p.C,e(w<=p.l.o),w>R){var W=p.l.width,re=k.ca,ie=k.tb+W*R,Ae=p.V,de=p.Ba+p.c*R,ve=p.gc;e(p.ab==1),e(ve[0].hc==3),_a(ve[0],R,w,Ae,de,re,ie),yi(k,R,w,re,ie,W)}p.C=p.Ma=w}function Fs(p,w,k,R,W,re,ie){var Ae=p.$/R,de=p.$%R,ve=p.m,Re=p.s,qe=k+p.$,xe=qe;W=k+R*W;var He=k+R*re,$e=280+Re.ua,ot=p.Pb?Ae:16777216,Xe=0<Re.ua?Re.Wa:null,st=Re.wc,at=qe<He?Hr(Re,de,Ae):null;e(p.C<re),e(He<=W);var ut=!1;e:for(;;){for(;ut||qe<He;){var ht=0;if(Ae>=ot){var Gt=qe-k;e((ot=p).Pb),ot.wd=ot.m,ot.xd=Gt,0<ot.s.ua&&ft(ot.s.Wa,ot.s.vb),ot=Ae+Cu}if(de&st||(at=Hr(Re,de,Ae)),e(at!=null),at.Qb&&(w[qe]=at.qb,ut=!0),!ut)if(ye(ve),at.jc){ht=ve,Gt=w;var Lt=qe,cr=at.pd[Y(ht)&oa-1];e(at.jc),256>cr.g?(oe(ht,ht.u+cr.g),Gt[Lt]=cr.value,ht=0):(oe(ht,ht.u+cr.g-256),e(256<=cr.value),ht=cr.value),ht==0&&(ut=!0)}else ht=Ur(at.G[0],at.H[0],ve);if(ve.h)break;if(ut||256>ht){if(!ut)if(at.nd)w[qe]=(at.qb|ht<<8)>>>0;else{if(ye(ve),ut=Ur(at.G[1],at.H[1],ve),ye(ve),Gt=Ur(at.G[2],at.H[2],ve),Lt=Ur(at.G[3],at.H[3],ve),ve.h)break;w[qe]=(Lt<<24|ut<<16|ht<<8|Gt)>>>0}if(ut=!1,++qe,++de>=R&&(de=0,++Ae,ie!=null&&Ae<=re&&!(Ae%16)&&ie(p,Ae),Xe!=null))for(;xe<qe;)ht=w[xe++],Xe.X[(506832829*ht&4294967295)>>>Xe.Mb]=ht}else if(280>ht){if(ht=Nr(ht-256,ve),Gt=Ur(at.G[4],at.H[4],ve),ye(ve),Gt=An(R,Gt=Nr(Gt,ve)),ve.h)break;if(qe-k<Gt||W-qe<ht)break e;for(Lt=0;Lt<ht;++Lt)w[qe+Lt]=w[qe+Lt-Gt];for(qe+=ht,de+=ht;de>=R;)de-=R,++Ae,ie!=null&&Ae<=re&&!(Ae%16)&&ie(p,Ae);if(e(qe<=W),de&st&&(at=Hr(Re,de,Ae)),Xe!=null)for(;xe<qe;)ht=w[xe++],Xe.X[(506832829*ht&4294967295)>>>Xe.Mb]=ht}else{if(!(ht<$e))break e;for(ut=ht-280,e(Xe!=null);xe<qe;)ht=w[xe++],Xe.X[(506832829*ht&4294967295)>>>Xe.Mb]=ht;ht=qe,e(!(ut>>>(Gt=Xe).Xa)),w[ht]=Gt.X[ut],ut=!0}ut||e(ve.h==G(ve))}if(p.Pb&&ve.h&&qe<W)e(p.m.h),p.a=5,p.m=p.wd,p.$=p.xd,0<p.s.ua&&ft(p.s.vb,p.s.Wa);else{if(ve.h)break e;ie?.(p,Ae>re?re:Ae),p.a=0,p.$=qe-k}return 1}return p.a=3,0}function Nn(p){e(p!=null),p.vc=null,p.yc=null,p.Ya=null;var w=p.Wa;w!=null&&(w.X=null),p.vb=null,e(p!=null)}function Ha(){var p=new Zt;return p==null?null:(p.a=0,p.xb=_l,We("Predictor","VP8LPredictors"),We("Predictor","VP8LPredictors_C"),We("PredictorAdd","VP8LPredictorsAdd"),We("PredictorAdd","VP8LPredictorsAdd_C"),Mn=we,wl=Fe,xl=At,IA=_e,no=Pe,so=Ye,Lo=vt,U.VP8LMapColor32b=sA,U.VP8LMapColor8b=Uo,p)}function vi(p,w,k,R,W){var re=1,ie=[p],Ae=[w],de=R.m,ve=R.s,Re=null,qe=0;e:for(;;){if(k)for(;re&&z(de,1);){var xe=ie,He=Ae,$e=R,ot=1,Xe=$e.m,st=$e.gc[$e.ab],at=z(Xe,2);if($e.Oc&1<<at)re=0;else{switch($e.Oc|=1<<at,st.hc=at,st.Ea=xe[0],st.nc=He[0],st.K=[null],++$e.ab,e(4>=$e.ab),at){case 0:case 1:st.b=z(Xe,3)+2,ot=vi(he(st.Ea,st.b),he(st.nc,st.b),0,$e,st.K),st.K=st.K[0];break;case 3:var ut,ht=z(Xe,8)+1,Gt=16<ht?0:4<ht?1:2<ht?2:3;if(xe[0]=he(st.Ea,Gt),st.b=Gt,ut=ot=vi(ht,1,0,$e,st.K)){var Lt,cr=ht,Rt=st,xr=1<<(8>>Rt.b),jn=i(xr);if(jn==null)ut=0;else{var ur=Rt.K[0],Qt=Rt.w;for(jn[0]=Rt.K[0][0],Lt=1;Lt<1*cr;++Lt)jn[Lt]=Se(ur[Qt+Lt],jn[Lt-1]);for(;Lt<4*xr;++Lt)jn[Lt]=0;Rt.K[0]=null,Rt.K[0]=jn,ut=1}}ot=ut;break;case 2:break;default:e(0)}re=ot}}if(ie=ie[0],Ae=Ae[0],re&&z(de,1)&&!(re=1<=(qe=z(de,4))&&11>=qe)){R.a=3;break e}var kt;if(kt=re)t:{var Hn,nr,gr,on=R,bs=ie,Jn=Ae,Cn=qe,As=k,Bs=on.m,fn=on.s,Cr=[null],Qr=1,pn=0,Pr=Sf[Cn];r:for(;;){if(As&&z(Bs,1)){var Ln=z(Bs,3)+2,Qn=he(bs,Ln),tn=he(Jn,Ln),Gs=Qn*tn;if(!vi(Qn,tn,0,on,Cr))break r;for(Cr=Cr[0],fn.xc=Ln,Hn=0;Hn<Gs;++Hn){var Wr=Cr[Hn]>>8&65535;Cr[Hn]=Wr,Wr>=Qr&&(Qr=Wr+1)}}if(Bs.h)break r;for(nr=0;5>nr;++nr){var rn=Oo[nr];!nr&&0<Cn&&(rn+=1<<Cn),pn<rn&&(pn=rn)}var Xn=l(Qr*Pr,F),Rs=Qr,Ni=l(Rs,ge);if(Ni==null)var Vn=null;else e(65536>=Rs),Vn=Ni;var Kn=i(pn);if(Vn==null||Kn==null||Xn==null){on.a=1;break r}var $s=Xn;for(Hn=gr=0;Hn<Qr;++Hn){var nn=Vn[Hn],qs=nn.G,ua=nn.H,ka=0,Cs=1,zn=0;for(nr=0;5>nr;++nr){rn=Oo[nr],qs[nr]=$s,ua[nr]=gr,!nr&&0<Cn&&(rn+=1<<Cn);s:{var lo,kA=rn,kl=on,AA=Kn,jf=$s,eh=gr,cn=0,Fa=kl.m,th=z(Fa,1);if(s(AA,0,0,kA),th){var rh=z(Fa,1)+1,Iu=z(Fa,1),_u=z(Fa,Iu==0?1:8);AA[_u]=1,rh==2&&(AA[_u=z(Fa,8)]=1);var oA=1}else{var mn=i(19),Zn=z(Fa,4)+4;if(19<Zn){kl.a=3;var Gn=0;break s}for(lo=0;lo<Zn;++lo)mn[Qg[lo]]=z(Fa,3);var Fl=void 0,FA=void 0,Tl=kl,Hg=mn,os=kA,Nu=AA,Dc=0,lA=Tl.m,Ta=8,Wi=l(128,F);n:for(;L(Wi,0,7,Hg,19);){if(z(lA,1)){var Rc=2+2*z(lA,3);if((Fl=2+z(lA,Rc))>os)break n}else Fl=os;for(FA=0;FA<os&&Fl--;){ye(lA);var Su=Wi[0+(127&Y(lA))];oe(lA,lA.u+Su.g);var co=Su.value;if(16>co)Nu[FA++]=co,co!=0&&(Ta=co);else{var Lf=co==16,nh=co-16,Qf=Bu[nh],sh=z(lA,jc[nh])+Qf;if(FA+sh>os)break n;for(var Pf=Lf?Ta:0;0<sh--;)Nu[FA++]=Pf}}Dc=1;break n}Dc||(Tl.a=3),oA=Dc}(oA=oA&&!Fa.h)&&(cn=L(jf,eh,8,AA,kA)),oA&&cn!=0?Gn=cn:(kl.a=3,Gn=0)}if(Gn==0)break r;if(Cs&&Nf[nr]==1&&(Cs=$s[gr].g==0),ka+=$s[gr].g,gr+=Gn,3>=nr){var Ul,ku=Kn[0];for(Ul=1;Ul<rn;++Ul)Kn[Ul]>ku&&(ku=Kn[Ul]);zn+=ku}}if(nn.nd=Cs,nn.Qb=0,Cs&&(nn.qb=(qs[3][ua[3]+0].value<<24|qs[1][ua[1]+0].value<<16|qs[2][ua[2]+0].value)>>>0,ka==0&&256>qs[0][ua[0]+0].value&&(nn.Qb=1,nn.qb+=qs[0][ua[0]+0].value<<8)),nn.jc=!nn.Qb&&6>zn,nn.jc){var Oc,Yi=nn;for(Oc=0;Oc<oa;++Oc){var TA=Oc,Ua=Yi.pd[TA],zo=Yi.G[0][Yi.H[0]+TA];256<=zo.value?(Ua.g=zo.g+256,Ua.value=zo.value):(Ua.g=0,Ua.value=0,TA>>=Xr(zo,8,Ua),TA>>=Xr(Yi.G[1][Yi.H[1]+TA],16,Ua),TA>>=Xr(Yi.G[2][Yi.H[2]+TA],0,Ua),Xr(Yi.G[3][Yi.H[3]+TA],24,Ua))}}}fn.vc=Cr,fn.Wb=Qr,fn.Ya=Vn,fn.yc=Xn,kt=1;break t}kt=0}if(!(re=kt)){R.a=3;break e}if(0<qe){if(ve.ua=1<<qe,!le(ve.Wa,qe)){R.a=1,re=0;break e}}else ve.ua=0;var Fu=R,Tu=ie,Df=Ae,Uu=Fu.s,ju=Uu.xc;if(Fu.c=Tu,Fu.i=Df,Uu.md=he(Tu,ju),Uu.wc=ju==0?-1:(1<<ju)-1,k){R.xb=aA;break e}if((Re=i(ie*Ae))==null){R.a=1,re=0;break e}re=(re=Fs(R,Re,0,ie,Ae,Ae,null))&&!de.h;break e}return re?(W!=null?W[0]=Re:(e(Re==null),e(k)),R.$=0,k||Nn(ve)):Nn(ve),re}function ra(p,w){var k=p.c*p.i,R=k+w+16*w;return e(p.c<=w),p.V=i(R),p.V==null?(p.Ta=null,p.Ua=0,p.a=1,0):(p.Ta=p.V,p.Ua=p.Ba+k+w,1)}function Ba(p,w){var k=p.C,R=w-k,W=p.V,re=p.Ba+p.c*k;for(e(w<=p.l.o);0<R;){var ie=16<R?16:R,Ae=p.l.ma,de=p.l.width,ve=de*ie,Re=Ae.ca,qe=Ae.tb+de*k,xe=p.Ta,He=p.Ua;Hi(p,ie,W,re),Vd(xe,He,Re,qe,ve),yi(Ae,k,k+ie,Re,qe,de),R-=ie,W+=ie*p.c,k+=ie}e(k==w),p.C=p.Ma=w}function Va(){this.ub=this.yd=this.td=this.Rb=0}function vA(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ec(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Rr(){this.Yb=(function(){var p=[];return(function w(k,R,W){for(var re=W[R],ie=0;ie<re&&(k.push(W.length>R+1?[]:0),!(W.length<R+1));ie++)w(k[ie],R+1,W)})(p,0,[3,11]),p})()}function So(){this.jb=i(3),this.Wc=c([4,8],Rr),this.Xc=c([4,17],Rr)}function Ka(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function is(){this.ld=this.La=this.dd=this.tc=0}function Hs(){this.Na=this.la=0}function qA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function WA(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function za(){this.uc=this.M=this.Nb=0,this.wa=Array(new is),this.Y=0,this.ya=Array(new WA),this.aa=0,this.l=new Ga}function Vs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ko(){this.cb=this.a=0,this.sc="",this.m=new S,this.Od=new Va,this.Kc=new vA,this.ed=new Ka,this.Qa=new Ec,this.Ic=this.$c=this.Aa=0,this.D=new za,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,S),this.ia=0,this.pb=l(4,qA),this.Pa=new So,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vs),this.Hd=0,this.rb=Array(new Hs),this.sb=0,this.wa=Array(new is),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new WA),this.L=this.aa=0,this.gd=c([4,2],is),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function dn(p,w){return 0>p?0:p>w?w:p}function Ga(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hl(){var p=new ko;return p!=null&&(p.a=0,p.sc="OK",p.cb=0,p.Xb=0,Mo||(Mo=Vi)),p}function wn(p,w,k){return p.a==0&&(p.a=w,p.sc=k,p.cb=0),0}function wA(p,w,k){return 3<=k&&p[w+0]==157&&p[w+1]==1&&p[w+2]==42}function ri(p,w){if(p==null)return 0;if(p.a=0,p.sc="OK",w==null)return wn(p,2,"null VP8Io passed to VP8GetHeaders()");var k=w.data,R=w.w,W=w.ha;if(4>W)return wn(p,7,"Truncated header.");var re=k[R+0]|k[R+1]<<8|k[R+2]<<16,ie=p.Od;if(ie.Rb=!(1&re),ie.td=re>>1&7,ie.yd=re>>4&1,ie.ub=re>>5,3<ie.td)return wn(p,3,"Incorrect keyframe parameters.");if(!ie.yd)return wn(p,4,"Frame not displayable.");R+=3,W-=3;var Ae=p.Kc;if(ie.Rb){if(7>W)return wn(p,7,"cannot parse picture header");if(!wA(k,R,W))return wn(p,3,"Bad code word");Ae.c=16383&(k[R+4]<<8|k[R+3]),Ae.Td=k[R+4]>>6,Ae.i=16383&(k[R+6]<<8|k[R+5]),Ae.Ud=k[R+6]>>6,R+=7,W-=7,p.za=Ae.c+15>>4,p.Ub=Ae.i+15>>4,w.width=Ae.c,w.height=Ae.i,w.Da=0,w.j=0,w.v=0,w.va=w.width,w.o=w.height,w.da=0,w.ib=w.width,w.hb=w.height,w.U=w.width,w.T=w.height,s((re=p.Pa).jb,0,255,re.jb.length),e((re=p.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,s(re.Zb,0,0,re.Zb.length),s(re.Lb,0,0,re.Lb)}if(ie.ub>W)return wn(p,7,"bad partition length");ue(re=p.m,k,R,ie.ub),R+=ie.ub,W-=ie.ub,ie.Rb&&(Ae.Ld=be(re),Ae.Kd=be(re)),Ae=p.Qa;var de,ve=p.Pa;if(e(re!=null),e(Ae!=null),Ae.Cb=be(re),Ae.Cb){if(Ae.Bb=be(re),be(re)){for(Ae.Fb=be(re),de=0;4>de;++de)Ae.Zb[de]=be(re)?ae(re,7):0;for(de=0;4>de;++de)Ae.Lb[de]=be(re)?ae(re,6):0}if(Ae.Bb)for(de=0;3>de;++de)ve.jb[de]=be(re)?fe(re,8):255}else Ae.Bb=0;if(re.Ka)return wn(p,3,"cannot parse segment header");if((Ae=p.ed).zd=be(re),Ae.Tb=fe(re,6),Ae.wb=fe(re,3),Ae.Pc=be(re),Ae.Pc&&be(re)){for(ve=0;4>ve;++ve)be(re)&&(Ae.vd[ve]=ae(re,6));for(ve=0;4>ve;++ve)be(re)&&(Ae.od[ve]=ae(re,6))}if(p.L=Ae.Tb==0?0:Ae.zd?1:2,re.Ka)return wn(p,3,"cannot parse filter header");var Re=W;if(W=de=R,R=de+Re,Ae=Re,p.Xb=(1<<fe(p.m,2))-1,Re<3*(ve=p.Xb))k=7;else{for(de+=3*ve,Ae-=3*ve,Re=0;Re<ve;++Re){var qe=k[W+0]|k[W+1]<<8|k[W+2]<<16;qe>Ae&&(qe=Ae),ue(p.Jc[+Re],k,de,qe),de+=qe,Ae-=qe,W+=3}ue(p.Jc[+ve],k,de,Ae),k=de<R?0:5}if(k!=0)return wn(p,k,"cannot parse partitions");for(k=fe(de=p.m,7),W=be(de)?ae(de,4):0,R=be(de)?ae(de,4):0,Ae=be(de)?ae(de,4):0,ve=be(de)?ae(de,4):0,de=be(de)?ae(de,4):0,Re=p.Qa,qe=0;4>qe;++qe){if(Re.Cb){var xe=Re.Zb[qe];Re.Fb||(xe+=k)}else{if(0<qe){p.pb[qe]=p.pb[0];continue}xe=k}var He=p.pb[qe];He.Sc[0]=Il[dn(xe+W,127)],He.Sc[1]=Lc[dn(xe+0,127)],He.Eb[0]=2*Il[dn(xe+R,127)],He.Eb[1]=101581*Lc[dn(xe+Ae,127)]>>16,8>He.Eb[1]&&(He.Eb[1]=8),He.Qc[0]=Il[dn(xe+ve,117)],He.Qc[1]=Lc[dn(xe+de,127)],He.lc=xe+de}if(!ie.Rb)return wn(p,4,"Not a key frame.");for(be(re),ie=p.Pa,k=0;4>k;++k){for(W=0;8>W;++W)for(R=0;3>R;++R)for(Ae=0;11>Ae;++Ae)ve=je(re,Rg[k][W][R][Ae])?fe(re,8):Ff[k][W][R][Ae],ie.Wc[k][W].Yb[R][Ae]=ve;for(W=0;17>W;++W)ie.Xc[k][W]=ie.Wc[k][Jd[W]]}return p.kc=be(re),p.kc&&(p.Bd=fe(re,8)),p.cb=1}function Vi(p,w,k,R,W,re,ie){var Ae=w[W].Yb[k];for(k=0;16>W;++W){if(!je(p,Ae[k+0]))return W;for(;!je(p,Ae[k+1]);)if(Ae=w[++W].Yb[0],k=0,W==16)return 16;var de=w[W+1].Yb;if(je(p,Ae[k+2])){var ve=p,Re=0;if(je(ve,(xe=Ae)[(qe=k)+3]))if(je(ve,xe[qe+6])){for(Ae=0,qe=2*(Re=je(ve,xe[qe+8]))+(xe=je(ve,xe[qe+9+Re])),Re=0,xe=Wd[qe];xe[Ae];++Ae)Re+=Re+je(ve,xe[Ae]);Re+=3+(8<<qe)}else je(ve,xe[qe+7])?(Re=7+2*je(ve,165),Re+=je(ve,145)):Re=5+je(ve,159);else Re=je(ve,xe[qe+4])?3+je(ve,xe[qe+5]):2;Ae=de[2]}else Re=1,Ae=de[1];de=ie+Yd[W],0>(ve=p).b&&Le(ve);var qe,xe=ve.b,He=(qe=ve.Ca>>1)-(ve.I>>xe)>>31;--ve.b,ve.Ca+=He,ve.Ca|=1,ve.I-=(qe+1&He)<<xe,re[de]=((Re^He)-He)*R[(0<W)+0]}return 16}function $a(p){var w=p.rb[p.sb-1];w.la=0,w.Na=0,s(p.zc,0,0,p.zc.length),p.ja=0}function wi(p,w,k,R,W){W=p[w+k+32*R]+(W>>3),p[w+k+32*R]=-256&W?0>W?0:255:W}function Zr(p,w,k,R,W,re){wi(p,w,0,k,R+W),wi(p,w,1,k,R+re),wi(p,w,2,k,R-re),wi(p,w,3,k,R-W)}function On(p){return(20091*p>>16)+p}function qa(p,w,k,R){var W,re=0,ie=i(16);for(W=0;4>W;++W){var Ae=p[w+0]+p[w+8],de=p[w+0]-p[w+8],ve=(35468*p[w+4]>>16)-On(p[w+12]),Re=On(p[w+4])+(35468*p[w+12]>>16);ie[re+0]=Ae+Re,ie[re+1]=de+ve,ie[re+2]=de-ve,ie[re+3]=Ae-Re,re+=4,w++}for(W=re=0;4>W;++W)Ae=(p=ie[re+0]+4)+ie[re+8],de=p-ie[re+8],ve=(35468*ie[re+4]>>16)-On(ie[re+12]),wi(k,R,0,0,Ae+(Re=On(ie[re+4])+(35468*ie[re+12]>>16))),wi(k,R,1,0,de+ve),wi(k,R,2,0,de-ve),wi(k,R,3,0,Ae-Re),re++,R+=32}function Wa(p,w,k,R){var W=p[w+0]+4,re=35468*p[w+4]>>16,ie=On(p[w+4]),Ae=35468*p[w+1]>>16;Zr(k,R,0,W+ie,p=On(p[w+1]),Ae),Zr(k,R,1,W+re,p,Ae),Zr(k,R,2,W-re,p,Ae),Zr(k,R,3,W-ie,p,Ae)}function Ya(p,w,k,R,W){qa(p,w,k,R),W&&qa(p,w+16,k,R+4)}function vr(p,w,k,R){Qo(p,w+0,k,R,1),Qo(p,w+32,k,R+128,1)}function Ca(p,w,k,R){var W;for(p=p[w+0]+4,W=0;4>W;++W)for(w=0;4>w;++w)wi(k,R,w,W,p)}function pr(p,w,k,R){p[w+0]&&Lr(p,w+0,k,R),p[w+16]&&Lr(p,w+16,k,R+4),p[w+32]&&Lr(p,w+32,k,R+128),p[w+48]&&Lr(p,w+48,k,R+128+4)}function Ki(p,w,k,R){var W,re=i(16);for(W=0;4>W;++W){var ie=p[w+0+W]+p[w+12+W],Ae=p[w+4+W]+p[w+8+W],de=p[w+4+W]-p[w+8+W],ve=p[w+0+W]-p[w+12+W];re[0+W]=ie+Ae,re[8+W]=ie-Ae,re[4+W]=ve+de,re[12+W]=ve-de}for(W=0;4>W;++W)ie=(p=re[0+4*W]+3)+re[3+4*W],Ae=re[1+4*W]+re[2+4*W],de=re[1+4*W]-re[2+4*W],ve=p-re[3+4*W],k[R+0]=ie+Ae>>3,k[R+16]=ve+de>>3,k[R+32]=ie-Ae>>3,k[R+48]=ve-de>>3,R+=64}function Ja(p,w,k){var R,W=w-32,re=ii,ie=255-p[W-1];for(R=0;R<k;++R){var Ae,de=re,ve=ie+p[w-1];for(Ae=0;Ae<k;++Ae)p[w+Ae]=de[ve+p[W+Ae]];w+=32}}function YA(p,w){Ja(p,w,4)}function fl(p,w){Ja(p,w,8)}function pl(p,w){Ja(p,w,16)}function JA(p,w){var k;for(k=0;16>k;++k)n(p,w+32*k,p,w-32,16)}function XA(p,w){var k;for(k=16;0<k;--k)s(p,w,p[w-1],16),w+=32}function qn(p,w,k){var R;for(R=0;16>R;++R)s(w,k+32*R,p,16)}function as(p,w){var k,R=16;for(k=0;16>k;++k)R+=p[w-1+32*k]+p[w+k-32];qn(R>>5,p,w)}function Ts(p,w){var k,R=8;for(k=0;16>k;++k)R+=p[w-1+32*k];qn(R>>4,p,w)}function ni(p,w){var k,R=8;for(k=0;16>k;++k)R+=p[w+k-32];qn(R>>4,p,w)}function Xa(p,w){qn(128,p,w)}function Yt(p,w,k){return p+2*w+k+2>>2}function na(p,w){var k,R=w-32;for(R=new Uint8Array([Yt(p[R-1],p[R+0],p[R+1]),Yt(p[R+0],p[R+1],p[R+2]),Yt(p[R+1],p[R+2],p[R+3]),Yt(p[R+2],p[R+3],p[R+4])]),k=0;4>k;++k)n(p,w+32*k,R,0,R.length)}function Ic(p,w){var k=p[w-1],R=p[w-1+32],W=p[w-1+64],re=p[w-1+96];Ge(p,w+0,16843009*Yt(p[w-1-32],k,R)),Ge(p,w+32,16843009*Yt(k,R,W)),Ge(p,w+64,16843009*Yt(R,W,re)),Ge(p,w+96,16843009*Yt(W,re,re))}function ml(p,w){var k,R=4;for(k=0;4>k;++k)R+=p[w+k-32]+p[w-1+32*k];for(R>>=3,k=0;4>k;++k)s(p,w+32*k,R,4)}function Sn(p,w){var k=p[w-1+0],R=p[w-1+32],W=p[w-1+64],re=p[w-1-32],ie=p[w+0-32],Ae=p[w+1-32],de=p[w+2-32],ve=p[w+3-32];p[w+0+96]=Yt(R,W,p[w-1+96]),p[w+1+96]=p[w+0+64]=Yt(k,R,W),p[w+2+96]=p[w+1+64]=p[w+0+32]=Yt(re,k,R),p[w+3+96]=p[w+2+64]=p[w+1+32]=p[w+0+0]=Yt(ie,re,k),p[w+3+64]=p[w+2+32]=p[w+1+0]=Yt(Ae,ie,re),p[w+3+32]=p[w+2+0]=Yt(de,Ae,ie),p[w+3+0]=Yt(ve,de,Ae)}function Ea(p,w){var k=p[w+1-32],R=p[w+2-32],W=p[w+3-32],re=p[w+4-32],ie=p[w+5-32],Ae=p[w+6-32],de=p[w+7-32];p[w+0+0]=Yt(p[w+0-32],k,R),p[w+1+0]=p[w+0+32]=Yt(k,R,W),p[w+2+0]=p[w+1+32]=p[w+0+64]=Yt(R,W,re),p[w+3+0]=p[w+2+32]=p[w+1+64]=p[w+0+96]=Yt(W,re,ie),p[w+3+32]=p[w+2+64]=p[w+1+96]=Yt(re,ie,Ae),p[w+3+64]=p[w+2+96]=Yt(ie,Ae,de),p[w+3+96]=Yt(Ae,de,de)}function gl(p,w){var k=p[w-1+0],R=p[w-1+32],W=p[w-1+64],re=p[w-1-32],ie=p[w+0-32],Ae=p[w+1-32],de=p[w+2-32],ve=p[w+3-32];p[w+0+0]=p[w+1+64]=re+ie+1>>1,p[w+1+0]=p[w+2+64]=ie+Ae+1>>1,p[w+2+0]=p[w+3+64]=Ae+de+1>>1,p[w+3+0]=de+ve+1>>1,p[w+0+96]=Yt(W,R,k),p[w+0+64]=Yt(R,k,re),p[w+0+32]=p[w+1+96]=Yt(k,re,ie),p[w+1+32]=p[w+2+96]=Yt(re,ie,Ae),p[w+2+32]=p[w+3+96]=Yt(ie,Ae,de),p[w+3+32]=Yt(Ae,de,ve)}function Ia(p,w){var k=p[w+0-32],R=p[w+1-32],W=p[w+2-32],re=p[w+3-32],ie=p[w+4-32],Ae=p[w+5-32],de=p[w+6-32],ve=p[w+7-32];p[w+0+0]=k+R+1>>1,p[w+1+0]=p[w+0+64]=R+W+1>>1,p[w+2+0]=p[w+1+64]=W+re+1>>1,p[w+3+0]=p[w+2+64]=re+ie+1>>1,p[w+0+32]=Yt(k,R,W),p[w+1+32]=p[w+0+96]=Yt(R,W,re),p[w+2+32]=p[w+1+96]=Yt(W,re,ie),p[w+3+32]=p[w+2+96]=Yt(re,ie,Ae),p[w+3+64]=Yt(ie,Ae,de),p[w+3+96]=Yt(Ae,de,ve)}function sa(p,w){var k=p[w-1+0],R=p[w-1+32],W=p[w-1+64],re=p[w-1+96];p[w+0+0]=k+R+1>>1,p[w+2+0]=p[w+0+32]=R+W+1>>1,p[w+2+32]=p[w+0+64]=W+re+1>>1,p[w+1+0]=Yt(k,R,W),p[w+3+0]=p[w+1+32]=Yt(R,W,re),p[w+3+32]=p[w+1+64]=Yt(W,re,re),p[w+3+64]=p[w+2+64]=p[w+0+96]=p[w+1+96]=p[w+2+96]=p[w+3+96]=re}function ZA(p,w){var k=p[w-1+0],R=p[w-1+32],W=p[w-1+64],re=p[w-1+96],ie=p[w-1-32],Ae=p[w+0-32],de=p[w+1-32],ve=p[w+2-32];p[w+0+0]=p[w+2+32]=k+ie+1>>1,p[w+0+32]=p[w+2+64]=R+k+1>>1,p[w+0+64]=p[w+2+96]=W+R+1>>1,p[w+0+96]=re+W+1>>1,p[w+3+0]=Yt(Ae,de,ve),p[w+2+0]=Yt(ie,Ae,de),p[w+1+0]=p[w+3+32]=Yt(k,ie,Ae),p[w+1+32]=p[w+3+64]=Yt(R,k,ie),p[w+1+64]=p[w+3+96]=Yt(W,R,k),p[w+1+96]=Yt(re,W,R)}function Us(p,w){var k;for(k=0;8>k;++k)n(p,w+32*k,p,w-32,8)}function zi(p,w){var k;for(k=0;8>k;++k)s(p,w,p[w-1],8),w+=32}function js(p,w,k){var R;for(R=0;8>R;++R)s(w,k+32*R,p,8)}function Za(p,w){var k,R=8;for(k=0;8>k;++k)R+=p[w+k-32]+p[w-1+32*k];js(R>>4,p,w)}function zr(p,w){var k,R=4;for(k=0;8>k;++k)R+=p[w+k-32];js(R>>3,p,w)}function Fo(p,w){var k,R=4;for(k=0;8>k;++k)R+=p[w-1+32*k];js(R>>3,p,w)}function eo(p,w){js(128,p,w)}function si(p,w,k){var R=p[w-k],W=p[w+0],re=3*(W-R)+iA[1020+p[w-2*k]-p[w+k]],ie=Cl[112+(re+4>>3)];p[w-k]=ii[255+R+Cl[112+(re+3>>3)]],p[w+0]=ii[255+W-ie]}function eA(p,w,k,R){var W=p[w+0],re=p[w+k];return la[255+p[w-2*k]-p[w-k]]>R||la[255+re-W]>R}function tA(p,w,k,R){return 4*la[255+p[w-k]-p[w+0]]+la[255+p[w-2*k]-p[w+k]]<=R}function Ls(p,w,k,R,W){var re=p[w-3*k],ie=p[w-2*k],Ae=p[w-k],de=p[w+0],ve=p[w+k],Re=p[w+2*k],qe=p[w+3*k];return 4*la[255+Ae-de]+la[255+ie-ve]>R?0:la[255+p[w-4*k]-re]<=W&&la[255+re-ie]<=W&&la[255+ie-Ae]<=W&&la[255+qe-Re]<=W&&la[255+Re-ve]<=W&&la[255+ve-de]<=W}function ia(p,w,k,R){var W=2*R+1;for(R=0;16>R;++R)tA(p,w+R,k,W)&&si(p,w+R,k)}function vs(p,w,k,R){var W=2*R+1;for(R=0;16>R;++R)tA(p,w+R*k,1,W)&&si(p,w+R*k,1)}function to(p,w,k,R){var W;for(W=3;0<W;--W)ia(p,w+=4*k,k,R)}function xA(p,w,k,R){var W;for(W=3;0<W;--W)vs(p,w+=4,k,R)}function ws(p,w,k,R,W,re,ie,Ae){for(re=2*re+1;0<W--;){if(Ls(p,w,k,re,ie))if(eA(p,w,k,Ae))si(p,w,k);else{var de=p,ve=w,Re=k,qe=de[ve-2*Re],xe=de[ve-Re],He=de[ve+0],$e=de[ve+Re],ot=de[ve+2*Re],Xe=27*(at=iA[1020+3*(He-xe)+iA[1020+qe-$e]])+63>>7,st=18*at+63>>7,at=9*at+63>>7;de[ve-3*Re]=ii[255+de[ve-3*Re]+at],de[ve-2*Re]=ii[255+qe+st],de[ve-Re]=ii[255+xe+Xe],de[ve+0]=ii[255+He-Xe],de[ve+Re]=ii[255+$e-st],de[ve+2*Re]=ii[255+ot-at]}w+=R}}function Gi(p,w,k,R,W,re,ie,Ae){for(re=2*re+1;0<W--;){if(Ls(p,w,k,re,ie))if(eA(p,w,k,Ae))si(p,w,k);else{var de=p,ve=w,Re=k,qe=de[ve-Re],xe=de[ve+0],He=de[ve+Re],$e=Cl[112+(4+(ot=3*(xe-qe))>>3)],ot=Cl[112+(ot+3>>3)],Xe=$e+1>>1;de[ve-2*Re]=ii[255+de[ve-2*Re]+Xe],de[ve-Re]=ii[255+qe+ot],de[ve+0]=ii[255+xe-$e],de[ve+Re]=ii[255+He-Xe]}w+=R}}function Wn(p,w,k,R,W,re){ws(p,w,k,1,16,R,W,re)}function Qs(p,w,k,R,W,re){ws(p,w,1,k,16,R,W,re)}function bA(p,w,k,R,W,re){var ie;for(ie=3;0<ie;--ie)Gi(p,w+=4*k,k,1,16,R,W,re)}function b(p,w,k,R,W,re){var ie;for(ie=3;0<ie;--ie)Gi(p,w+=4,1,k,16,R,W,re)}function q(p,w,k,R,W,re,ie,Ae){ws(p,w,W,1,8,re,ie,Ae),ws(k,R,W,1,8,re,ie,Ae)}function Ce(p,w,k,R,W,re,ie,Ae){ws(p,w,1,W,8,re,ie,Ae),ws(k,R,1,W,8,re,ie,Ae)}function Ue(p,w,k,R,W,re,ie,Ae){Gi(p,w+4*W,W,1,8,re,ie,Ae),Gi(k,R+4*W,W,1,8,re,ie,Ae)}function Ke(p,w,k,R,W,re,ie,Ae){Gi(p,w+4,1,W,8,re,ie,Ae),Gi(k,R+4,1,W,8,re,ie,Ae)}function lt(){this.ba=new bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new _t,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ut(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Mt(){this.ua=0,this.Wa=new ct,this.vb=new ct,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ge,this.yc=new F}function Zt(){this.xb=this.a=0,this.l=new Ga,this.ca=new bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new K,this.Pb=0,this.wd=new K,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Mt,this.ab=0,this.gc=l(4,Ut),this.Oc=0}function rr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ga,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wr(p,w,k,R,W,re,ie){for(p=p==null?0:p[w+0],w=0;w<ie;++w)W[re+w]=p+k[R+w]&255,p=W[re+w]}function jr(p,w,k,R,W,re,ie){var Ae;if(p==null)wr(null,null,k,R,W,re,ie);else for(Ae=0;Ae<ie;++Ae)W[re+Ae]=p[w+Ae]+k[R+Ae]&255}function xn(p,w,k,R,W,re,ie){if(p==null)wr(null,null,k,R,W,re,ie);else{var Ae,de=p[w+0],ve=de,Re=de;for(Ae=0;Ae<ie;++Ae)ve=Re+(de=p[w+Ae])-ve,Re=k[R+Ae]+(-256&ve?0>ve?0:255:ve)&255,ve=de,W[re+Ae]=Re}}function Vr(p,w,k,R){var W=w.width,re=w.o;if(e(p!=null&&w!=null),0>k||0>=R||k+R>re)return null;if(!p.Cc){if(p.ga==null){var ie;if(p.ga=new rr,(ie=p.ga==null)||(ie=w.width*w.o,e(p.Gb.length==0),p.Gb=i(ie),p.Uc=0,p.Gb==null?ie=0:(p.mb=p.Gb,p.nb=p.Uc,p.rc=null,ie=1),ie=!ie),!ie){ie=p.ga;var Ae=p.Fa,de=p.P,ve=p.qc,Re=p.mb,qe=p.nb,xe=de+1,He=ve-1,$e=ie.l;if(e(Ae!=null&&Re!=null&&w!=null),zs[0]=null,zs[1]=wr,zs[2]=jr,zs[3]=xn,ie.ca=Re,ie.tb=qe,ie.c=w.width,ie.i=w.height,e(0<ie.c&&0<ie.i),1>=ve)w=0;else if(ie.$a=3&Ae[de+0],ie.Z=Ae[de+0]>>2&3,ie.Lc=Ae[de+0]>>4&3,de=Ae[de+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||de)w=0;else if($e.put=Ot,$e.ac=_r,$e.bc=yr,$e.ma=ie,$e.width=w.width,$e.height=w.height,$e.Da=w.Da,$e.v=w.v,$e.va=w.va,$e.j=w.j,$e.o=w.o,ie.$a)e:{e(ie.$a==1),w=Ha();t:for(;;){if(w==null){w=0;break e}if(e(ie!=null),ie.mc=w,w.c=ie.c,w.i=ie.i,w.l=ie.l,w.l.ma=ie,w.l.width=ie.c,w.l.height=ie.i,w.a=0,$(w.m,Ae,xe,He),!vi(ie.c,ie.i,1,w,null)||(w.ab==1&&w.gc[0].hc==3&&ys(w.s)?(ie.ic=1,Ae=w.c*w.i,w.Ta=null,w.Ua=0,w.V=i(Ae),w.Ba=0,w.V==null?(w.a=1,w=0):w=1):(ie.ic=0,w=ra(w,ie.c)),!w))break t;w=1;break e}ie.mc=null,w=0}else w=He>=ie.c*ie.i;ie=!w}if(ie)return null;p.ga.Lc!=1?p.Ga=0:R=re-k}e(p.ga!=null),e(k+R<=re);e:{if(w=(Ae=p.ga).c,re=Ae.l.o,Ae.$a==0){if(xe=p.rc,He=p.Vc,$e=p.Fa,de=p.P+1+k*w,ve=p.mb,Re=p.nb+k*w,e(de<=p.P+p.qc),Ae.Z!=0)for(e(zs[Ae.Z]!=null),ie=0;ie<R;++ie)zs[Ae.Z](xe,He,$e,de,ve,Re,w),xe=ve,He=Re,Re+=w,de+=w;else for(ie=0;ie<R;++ie)n(ve,Re,$e,de,w),xe=ve,He=Re,Re+=w,de+=w;p.rc=xe,p.Vc=He}else{if(e(Ae.mc!=null),w=k+R,e((ie=Ae.mc)!=null),e(w<=ie.i),ie.C>=w)w=1;else if(Ae.ic||xi(),Ae.ic){Ae=ie.V,xe=ie.Ba,He=ie.c;var ot=ie.i,Xe=($e=1,de=ie.$/He,ve=ie.$%He,Re=ie.m,qe=ie.s,ie.$),st=He*ot,at=He*w,ut=qe.wc,ht=Xe<at?Hr(qe,ve,de):null;e(Xe<=st),e(w<=ot),e(ys(qe));t:for(;;){for(;!Re.h&&Xe<at;){if(ve&ut||(ht=Hr(qe,ve,de)),e(ht!=null),ye(Re),256>(ot=Ur(ht.G[0],ht.H[0],Re)))Ae[xe+Xe]=ot,++Xe,++ve>=He&&(ve=0,++de<=w&&!(de%16)&&Rn(ie,de));else{if(!(280>ot)){$e=0;break t}ot=Nr(ot-256,Re);var Gt,Lt=Ur(ht.G[4],ht.H[4],Re);if(ye(Re),!(Xe>=(Lt=An(He,Lt=Nr(Lt,Re)))&&st-Xe>=ot)){$e=0;break t}for(Gt=0;Gt<ot;++Gt)Ae[xe+Xe+Gt]=Ae[xe+Xe+Gt-Lt];for(Xe+=ot,ve+=ot;ve>=He;)ve-=He,++de<=w&&!(de%16)&&Rn(ie,de);Xe<at&&ve&ut&&(ht=Hr(qe,ve,de))}e(Re.h==G(Re))}Rn(ie,de>w?w:de);break t}!$e||Re.h&&Xe<st?($e=0,ie.a=Re.h?5:3):ie.$=Xe,w=$e}else w=Fs(ie,ie.V,ie.Ba,ie.c,ie.i,w,Ba);if(!w){R=0;break e}}k+R>=re&&(p.Cc=1),R=1}if(!R)return null;if(p.Cc&&((R=p.ga)!=null&&(R.mc=null),p.ga=null,0<p.Ga))return alert("todo:WebPDequantizeLevels"),null}return p.nb+k*W}function kn(p,w,k,R,W,re){for(;0<W--;){var ie,Ae=p,de=w+(k?1:0),ve=p,Re=w+(k?0:3);for(ie=0;ie<R;++ie){var qe=ve[Re+4*ie];qe!=255&&(qe*=32897,Ae[de+4*ie+0]=Ae[de+4*ie+0]*qe>>23,Ae[de+4*ie+1]=Ae[de+4*ie+1]*qe>>23,Ae[de+4*ie+2]=Ae[de+4*ie+2]*qe>>23)}w+=re}}function hn(p,w,k,R,W){for(;0<R--;){var re;for(re=0;re<k;++re){var ie=p[w+2*re+0],Ae=15&(ve=p[w+2*re+1]),de=4369*Ae,ve=(240&ve|ve>>4)*de>>16;p[w+2*re+0]=(240&ie|ie>>4)*de>>16&240|(15&ie|ie<<4)*de>>16>>4&15,p[w+2*re+1]=240&ve|Ae}w+=W}}function Fn(p,w,k,R,W,re,ie,Ae){var de,ve,Re=255;for(ve=0;ve<W;++ve){for(de=0;de<R;++de){var qe=p[w+de];re[ie+4*de]=qe,Re&=qe}w+=k,ie+=Ae}return Re!=255}function bn(p,w,k,R,W){var re;for(re=0;re<W;++re)k[R+re]=p[w+re]>>8}function xi(){Do=kn,Hd=hn,Sc=Fn,Vd=bn}function aa(p,w,k){U[p]=function(R,W,re,ie,Ae,de,ve,Re,qe,xe,He,$e,ot,Xe,st,at,ut){var ht,Gt=ut-1>>1,Lt=Ae[de+0]|ve[Re+0]<<16,cr=qe[xe+0]|He[$e+0]<<16;e(R!=null);var Rt=3*Lt+cr+131074>>2;for(w(R[W+0],255&Rt,Rt>>16,ot,Xe),re!=null&&(Rt=3*cr+Lt+131074>>2,w(re[ie+0],255&Rt,Rt>>16,st,at)),ht=1;ht<=Gt;++ht){var xr=Ae[de+ht]|ve[Re+ht]<<16,jn=qe[xe+ht]|He[$e+ht]<<16,ur=Lt+xr+cr+jn+524296,Qt=ur+2*(xr+cr)>>3;Rt=Qt+Lt>>1,Lt=(ur=ur+2*(Lt+jn)>>3)+xr>>1,w(R[W+2*ht-1],255&Rt,Rt>>16,ot,Xe+(2*ht-1)*k),w(R[W+2*ht-0],255&Lt,Lt>>16,ot,Xe+(2*ht-0)*k),re!=null&&(Rt=ur+cr>>1,Lt=Qt+jn>>1,w(re[ie+2*ht-1],255&Rt,Rt>>16,st,at+(2*ht-1)*k),w(re[ie+2*ht+0],255&Lt,Lt>>16,st,at+(2*ht+0)*k)),Lt=xr,cr=jn}1&ut||(Rt=3*Lt+cr+131074>>2,w(R[W+ut-1],255&Rt,Rt>>16,ot,Xe+(ut-1)*k),re!=null&&(Rt=3*cr+Lt+131074>>2,w(re[ie+ut-1],255&Rt,Rt>>16,st,at+(ut-1)*k)))}}function bi(){Ei[xu]=Og,Ei[ao]=Ao,Ei[_f]=Mg,Ei[kc]=Nl,Ei[Fc]=Ho,Ei[en]=Qc,Ei[bu]=Xd,Ei[El]=Ao,Ei[Ro]=Nl,Ei[Tc]=Ho,Ei[Uc]=Qc}function m(p){return p&-16384?0>p?0:255:p>>oo}function T(p,w){return m((19077*p>>8)+(26149*w>>8)-14234)}function M(p,w,k){return m((19077*p>>8)-(6419*w>>8)-(13320*k>>8)+8708)}function ce(p,w){return m((19077*p>>8)+(33050*w>>8)-17685)}function ze(p,w,k,R,W){R[W+0]=T(p,k),R[W+1]=M(p,w,k),R[W+2]=ce(p,w)}function et(p,w,k,R,W){R[W+0]=ce(p,w),R[W+1]=M(p,w,k),R[W+2]=T(p,k)}function Nt(p,w,k,R,W){var re=M(p,w,k);w=re<<3&224|ce(p,w)>>3,R[W+0]=248&T(p,k)|re>>5,R[W+1]=w}function Br(p,w,k,R,W){var re=240&ce(p,w)|15;R[W+0]=240&T(p,k)|M(p,w,k)>>4,R[W+1]=re}function Bn(p,w,k,R,W){R[W+0]=255,ze(p,w,k,R,W+1)}function mr(p,w,k,R,W){et(p,w,k,R,W),R[W+3]=255}function kr(p,w,k,R,W){ze(p,w,k,R,W),R[W+3]=255}function Gr(p,w,k){U[p]=function(R,W,re,ie,Ae,de,ve,Re,qe){for(var xe=Re+(-2&qe)*k;Re!=xe;)w(R[W+0],re[ie+0],Ae[de+0],ve,Re),w(R[W+1],re[ie+0],Ae[de+0],ve,Re+k),W+=2,++ie,++de,Re+=2*k;1&qe&&w(R[W+0],re[ie+0],Ae[de+0],ve,Re)}}function Ps(p,w,k){return k==0?p==0?w==0?6:5:w==0?4:0:k}function Ks(p,w,k,R,W){switch(p>>>30){case 3:Qo(w,k,R,W,0);break;case 2:Tn(w,k,R,W);break;case 1:Lr(w,k,R,W)}}function xs(p,w){var k,R,W=w.M,re=w.Nb,ie=p.oc,Ae=p.pc+40,de=p.oc,ve=p.pc+584,Re=p.oc,qe=p.pc+600;for(k=0;16>k;++k)ie[Ae+32*k-1]=129;for(k=0;8>k;++k)de[ve+32*k-1]=129,Re[qe+32*k-1]=129;for(0<W?ie[Ae-1-32]=de[ve-1-32]=Re[qe-1-32]=129:(s(ie,Ae-32-1,127,21),s(de,ve-32-1,127,9),s(Re,qe-32-1,127,9)),R=0;R<p.za;++R){var xe=w.ya[w.aa+R];if(0<R){for(k=-1;16>k;++k)n(ie,Ae+32*k-4,ie,Ae+32*k+12,4);for(k=-1;8>k;++k)n(de,ve+32*k-4,de,ve+32*k+4,4),n(Re,qe+32*k-4,Re,qe+32*k+4,4)}var He=p.Gd,$e=p.Hd+R,ot=xe.ad,Xe=xe.Hc;if(0<W&&(n(ie,Ae-32,He[$e].y,0,16),n(de,ve-32,He[$e].f,0,8),n(Re,qe-32,He[$e].ea,0,8)),xe.Za){var st=ie,at=Ae-32+16;for(0<W&&(R>=p.za-1?s(st,at,He[$e].y[15],4):n(st,at,He[$e+1].y,0,4)),k=0;4>k;k++)st[at+128+k]=st[at+256+k]=st[at+384+k]=st[at+0+k];for(k=0;16>k;++k,Xe<<=2)st=ie,at=Ae+Zd[k],ca[xe.Ob[k]](st,at),Ks(Xe,ot,16*+k,st,at)}else if(st=Ps(R,W,xe.Ob[0]),ai[st](ie,Ae),Xe!=0)for(k=0;16>k;++k,Xe<<=2)Ks(Xe,ot,16*+k,ie,Ae+Zd[k]);for(k=xe.Gc,st=Ps(R,W,xe.Dd),Ci[st](de,ve),Ci[st](Re,qe),Xe=ot,st=de,at=ve,255&(xe=0|k)&&(170&xe?Bi(Xe,256,st,at):$r(Xe,256,st,at)),xe=Re,Xe=qe,255&(k>>=8)&&(170&k?Bi(ot,320,xe,Xe):$r(ot,320,xe,Xe)),W<p.Ub-1&&(n(He[$e].y,0,ie,Ae+480,16),n(He[$e].f,0,de,ve+224,8),n(He[$e].ea,0,Re,qe+224,8)),k=8*re*p.B,He=p.sa,$e=p.ta+16*R+16*re*p.R,ot=p.qa,xe=p.ra+8*R+k,Xe=p.Ha,st=p.Ia+8*R+k,k=0;16>k;++k)n(He,$e+k*p.R,ie,Ae+32*k,16);for(k=0;8>k;++k)n(ot,xe+k*p.B,de,ve+32*k,8),n(Xe,st+k*p.B,Re,qe+32*k,8)}}function Aa(p,w,k,R,W,re,ie,Ae,de){var ve=[0],Re=[0],qe=0,xe=de!=null?de.kd:0,He=de??new gt;if(p==null||12>k)return 7;He.data=p,He.w=w,He.ha=k,w=[w],k=[k],He.gb=[He.gb];e:{var $e=w,ot=k,Xe=He.gb;if(e(p!=null),e(ot!=null),e(Xe!=null),Xe[0]=0,12<=ot[0]&&!t(p,$e[0],"RIFF")){if(t(p,$e[0]+8,"WEBP")){Xe=3;break e}var st=It(p,$e[0]+4);if(12>st||4294967286<st){Xe=3;break e}if(xe&&st>ot[0]-8){Xe=7;break e}Xe[0]=st,$e[0]+=12,ot[0]-=12}Xe=0}if(Xe!=0)return Xe;for(st=0<He.gb[0],k=k[0];;){e:{var at=p;ot=w,Xe=k;var ut=ve,ht=Re,Gt=$e=[0];if((Rt=qe=[qe])[0]=0,8>Xe[0])Xe=7;else{if(!t(at,ot[0],"VP8X")){if(It(at,ot[0]+4)!=10){Xe=3;break e}if(18>Xe[0]){Xe=7;break e}var Lt=It(at,ot[0]+8),cr=1+it(at,ot[0]+12);if(2147483648<=cr*(at=1+it(at,ot[0]+15))){Xe=3;break e}Gt!=null&&(Gt[0]=Lt),ut!=null&&(ut[0]=cr),ht!=null&&(ht[0]=at),ot[0]+=18,Xe[0]-=18,Rt[0]=1}Xe=0}}if(qe=qe[0],$e=$e[0],Xe!=0)return Xe;if(ot=!!(2&$e),!st&&qe)return 3;if(re!=null&&(re[0]=!!(16&$e)),ie!=null&&(ie[0]=ot),Ae!=null&&(Ae[0]=0),ie=ve[0],$e=Re[0],qe&&ot&&de==null){Xe=0;break}if(4>k){Xe=7;break}if(st&&qe||!st&&!qe&&!t(p,w[0],"ALPH")){k=[k],He.na=[He.na],He.P=[He.P],He.Sa=[He.Sa];e:{Lt=p,Xe=w,st=k;var Rt=He.gb;ut=He.na,ht=He.P,Gt=He.Sa,cr=22,e(Lt!=null),e(st!=null),at=Xe[0];var xr=st[0];for(e(ut!=null),e(Gt!=null),ut[0]=null,ht[0]=null,Gt[0]=0;;){if(Xe[0]=at,st[0]=xr,8>xr){Xe=7;break e}var jn=It(Lt,at+4);if(4294967286<jn){Xe=3;break e}var ur=8+jn+1&-2;if(cr+=ur,0<Rt&&cr>Rt){Xe=3;break e}if(!t(Lt,at,"VP8 ")||!t(Lt,at,"VP8L")){Xe=0;break e}if(xr[0]<ur){Xe=7;break e}t(Lt,at,"ALPH")||(ut[0]=Lt,ht[0]=at+8,Gt[0]=jn),at+=ur,xr-=ur}}if(k=k[0],He.na=He.na[0],He.P=He.P[0],He.Sa=He.Sa[0],Xe!=0)break}k=[k],He.Ja=[He.Ja],He.xa=[He.xa];e:if(Rt=p,Xe=w,st=k,ut=He.gb[0],ht=He.Ja,Gt=He.xa,Lt=Xe[0],at=!t(Rt,Lt,"VP8 "),cr=!t(Rt,Lt,"VP8L"),e(Rt!=null),e(st!=null),e(ht!=null),e(Gt!=null),8>st[0])Xe=7;else{if(at||cr){if(Rt=It(Rt,Lt+4),12<=ut&&Rt>ut-12){Xe=3;break e}if(xe&&Rt>st[0]-8){Xe=7;break e}ht[0]=Rt,Xe[0]+=8,st[0]-=8,Gt[0]=cr}else Gt[0]=5<=st[0]&&Rt[Lt+0]==47&&!(Rt[Lt+4]>>5),ht[0]=st[0];Xe=0}if(k=k[0],He.Ja=He.Ja[0],He.xa=He.xa[0],w=w[0],Xe!=0)break;if(4294967286<He.Ja)return 3;if(Ae==null||ot||(Ae[0]=He.xa?2:1),ie=[ie],$e=[$e],He.xa){if(5>k){Xe=7;break}Ae=ie,xe=$e,ot=re,p==null||5>k?p=0:5<=k&&p[w+0]==47&&!(p[w+4]>>5)?(st=[0],Rt=[0],ut=[0],$(ht=new K,p,w,k),_n(ht,st,Rt,ut)?(Ae!=null&&(Ae[0]=st[0]),xe!=null&&(xe[0]=Rt[0]),ot!=null&&(ot[0]=ut[0]),p=1):p=0):p=0}else{if(10>k){Xe=7;break}Ae=$e,p==null||10>k||!wA(p,w+3,k-3)?p=0:(xe=p[w+0]|p[w+1]<<8|p[w+2]<<16,ot=16383&(p[w+7]<<8|p[w+6]),p=16383&(p[w+9]<<8|p[w+8]),1&xe||3<(xe>>1&7)||!(xe>>4&1)||xe>>5>=He.Ja||!ot||!p?p=0:(ie&&(ie[0]=ot),Ae&&(Ae[0]=p),p=1))}if(!p||(ie=ie[0],$e=$e[0],qe&&(ve[0]!=ie||Re[0]!=$e)))return 3;de!=null&&(de[0]=He,de.offset=w-de.w,e(4294967286>w-de.w),e(de.offset==de.ha-k));break}return Xe==0||Xe==7&&qe&&de==null?(re!=null&&(re[0]|=He.na!=null&&0<He.na.length),R!=null&&(R[0]=ie),W!=null&&(W[0]=$e),0):Xe}function yl(p,w,k){var R=w.width,W=w.height,re=0,ie=0,Ae=R,de=W;if(w.Da=p!=null&&0<p.Da,w.Da&&(Ae=p.cd,de=p.bd,re=p.v,ie=p.j,11>k||(re&=-2,ie&=-2),0>re||0>ie||0>=Ae||0>=de||re+Ae>R||ie+de>W))return 0;if(w.v=re,w.j=ie,w.va=re+Ae,w.o=ie+de,w.U=Ae,w.T=de,w.da=p!=null&&0<p.da,w.da){if(!pt(Ae,de,k=[p.ib],re=[p.hb]))return 0;w.ib=k[0],w.hb=re[0]}return w.ob=p!=null&&p.ob,w.Kb=p==null||!p.Sd,w.da&&(w.ob=w.ib<3*R/4&&w.hb<3*W/4,w.Kb=0),1}function vl(p){if(p==null)return 2;if(11>p.S){var w=p.f.RGBA;w.fb+=(p.height-1)*w.A,w.A=-w.A}else w=p.f.kb,p=p.height,w.O+=(p-1)*w.fa,w.fa=-w.fa,w.N+=(p-1>>1)*w.Ab,w.Ab=-w.Ab,w.W+=(p-1>>1)*w.Db,w.Db=-w.Db,w.F!=null&&(w.J+=(p-1)*w.lb,w.lb=-w.lb);return 0}function BA(p,w,k,R){if(R==null||0>=p||0>=w)return 2;if(k!=null){if(k.Da){var W=k.cd,re=k.bd,ie=-2&k.v,Ae=-2&k.j;if(0>ie||0>Ae||0>=W||0>=re||ie+W>p||Ae+re>w)return 2;p=W,w=re}if(k.da){if(!pt(p,w,W=[k.ib],re=[k.hb]))return 2;p=W[0],w=re[0]}}R.width=p,R.height=w;e:{var de=R.width,ve=R.height;if(p=R.S,0>=de||0>=ve||!(p>=xu&&13>p))p=2;else{if(0>=R.Rd&&R.sd==null){ie=re=W=w=0;var Re=(Ae=de*Pc[p])*ve;if(11>p||(re=(ve+1)/2*(w=(de+1)/2),p==12&&(ie=(W=de)*ve)),(ve=i(Re+2*re+ie))==null){p=1;break e}R.sd=ve,11>p?((de=R.f.RGBA).eb=ve,de.fb=0,de.A=Ae,de.size=Re):((de=R.f.kb).y=ve,de.O=0,de.fa=Ae,de.Fd=Re,de.f=ve,de.N=0+Re,de.Ab=w,de.Cd=re,de.ea=ve,de.W=0+Re+re,de.Db=w,de.Ed=re,p==12&&(de.F=ve,de.J=0+Re+2*re),de.Tc=ie,de.lb=W)}if(w=1,W=R.S,re=R.width,ie=R.height,W>=xu&&13>W)if(11>W)p=R.f.RGBA,w&=(Ae=Math.abs(p.A))*(ie-1)+re<=p.size,w&=Ae>=re*Pc[W],w&=p.eb!=null;else{p=R.f.kb,Ae=(re+1)/2,Re=(ie+1)/2,de=Math.abs(p.fa),ve=Math.abs(p.Ab);var qe=Math.abs(p.Db),xe=Math.abs(p.lb),He=xe*(ie-1)+re;w&=de*(ie-1)+re<=p.Fd,w&=ve*(Re-1)+Ae<=p.Cd,w=(w&=qe*(Re-1)+Ae<=p.Ed)&de>=re&ve>=Ae&qe>=Ae,w&=p.y!=null,w&=p.f!=null,w&=p.ea!=null,W==12&&(w&=xe>=re,w&=He<=p.Tc,w&=p.F!=null)}else w=0;p=w?0:2}}return p!=0||k!=null&&k.fd&&(p=vl(R)),p}var oa=64,$i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qi=24,ro=32,rA=8,CA=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(p){return p},U.Predictor2=function(p,w,k){return w[k+0]},U.Predictor3=function(p,w,k){return w[k+1]},U.Predictor4=function(p,w,k){return w[k-1]},U.Predictor5=function(p,w,k){return ne(ne(p,w[k+1]),w[k+0])},U.Predictor6=function(p,w,k){return ne(p,w[k-1])},U.Predictor7=function(p,w,k){return ne(p,w[k+0])},U.Predictor8=function(p,w,k){return ne(w[k-1],w[k+0])},U.Predictor9=function(p,w,k){return ne(w[k+0],w[k+1])},U.Predictor10=function(p,w,k){return ne(ne(p,w[k-1]),ne(w[k+0],w[k+1]))},U.Predictor11=function(p,w,k){var R=w[k+0];return 0>=se(R>>24&255,p>>24&255,(w=w[k-1])>>24&255)+se(R>>16&255,p>>16&255,w>>16&255)+se(R>>8&255,p>>8&255,w>>8&255)+se(255&R,255&p,255&w)?R:p},U.Predictor12=function(p,w,k){var R=w[k+0];return(pe((p>>24&255)+(R>>24&255)-((w=w[k-1])>>24&255))<<24|pe((p>>16&255)+(R>>16&255)-(w>>16&255))<<16|pe((p>>8&255)+(R>>8&255)-(w>>8&255))<<8|pe((255&p)+(255&R)-(255&w)))>>>0},U.Predictor13=function(p,w,k){var R=w[k-1];return(Ie((p=ne(p,w[k+0]))>>24&255,R>>24&255)<<24|Ie(p>>16&255,R>>16&255)<<16|Ie(p>>8&255,R>>8&255)<<8|Ie(255&p,255&R))>>>0};var EA=U.PredictorAdd0;U.PredictorAdd1=Te,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var nA=U.PredictorAdd2;De("ColorIndexInverseTransform","MapARGB","32b",function(p){return p>>8&255},function(p){return p}),De("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(p){return p},function(p){return p>>8&255});var Mn,To=U.ColorIndexInverseTransform,sA=U.MapARGB,_a=U.VP8LColorIndexInverseTransformAlpha,Uo=U.MapAlpha,jo=U.VP8LPredictorsAdd=[];jo.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var wl,xl,IA,no,so,Lo,io,Qo,Tn,Bi,Lr,$r,Un,Yn,Na,_c,bl,_A,vu,Bl,wu,Md,Nc,Po,Do,Hd,Sc,Vd,Kd=i(511),zd=i(2041),Gd=i(225),$d=i(767),qd=0,iA=zd,Cl=Gd,ii=$d,la=Kd,xu=0,ao=1,_f=2,kc=3,Fc=4,en=5,bu=6,El=7,Ro=8,Tc=9,Uc=10,jc=[2,3,7],Bu=[3,3,11],Oo=[280,256,256,256,40],Nf=[0,1,1,1,0],Qg=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Pg=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Sf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Cu=8,Il=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Lc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Mo=null,Wd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yd=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],kf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ff=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Dg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Rg=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Jd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ai=[],ca=[],Ci=[],aA=1,_l=2,zs=[],Ei=[];aa("UpsampleRgbLinePair",ze,3),aa("UpsampleBgrLinePair",et,3),aa("UpsampleRgbaLinePair",kr,4),aa("UpsampleBgraLinePair",mr,4),aa("UpsampleArgbLinePair",Bn,4),aa("UpsampleRgba4444LinePair",Br,2),aa("UpsampleRgb565LinePair",Nt,2);var Og=U.UpsampleRgbLinePair,Mg=U.UpsampleBgrLinePair,Ao=U.UpsampleRgbaLinePair,Nl=U.UpsampleBgraLinePair,Ho=U.UpsampleArgbLinePair,Qc=U.UpsampleRgba4444LinePair,Xd=U.UpsampleRgb565LinePair,NA=16,Sa=1<<NA-1,Kr=-227,qr=482,oo=6,Ds=0,Ii=i(256),Vo=i(256),Sl=i(256),_i=i(256),Eu=i(qr-Kr),Tf=i(qr-Kr);Gr("YuvToRgbRow",ze,3),Gr("YuvToBgrRow",et,3),Gr("YuvToRgbaRow",kr,4),Gr("YuvToBgraRow",mr,4),Gr("YuvToArgbRow",Bn,4),Gr("YuvToRgba4444Row",Br,2),Gr("YuvToRgb565Row",Nt,2);var Zd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ko=[0,2,8],Uf=[8,7,6,4,4,2,2,2,1,1,1,1],SA=1;this.WebPDecodeRGBA=function(p,w,k,R,W){var re=ao,ie=new lt,Ae=new bt;ie.ba=Ae,Ae.S=re,Ae.width=[Ae.width],Ae.height=[Ae.height];var de=Ae.width,ve=Ae.height,Re=new dt;if(Re==null||p==null)var qe=2;else e(Re!=null),qe=Aa(p,w,k,Re.width,Re.height,Re.Pd,Re.Qd,Re.format,null);if(qe!=0?de=0:(de!=null&&(de[0]=Re.width[0]),ve!=null&&(ve[0]=Re.height[0]),de=1),de){Ae.width=Ae.width[0],Ae.height=Ae.height[0],R!=null&&(R[0]=Ae.width),W!=null&&(W[0]=Ae.height);e:{if(R=new Ga,(W=new gt).data=p,W.w=w,W.ha=k,W.kd=1,w=[0],e(W!=null),((p=Aa(W.data,W.w,W.ha,null,null,null,w,null,W))==0||p==7)&&w[0]&&(p=4),(w=p)==0){if(e(ie!=null),R.data=W.data,R.w=W.w+W.offset,R.ha=W.ha-W.offset,R.put=Ot,R.ac=_r,R.bc=yr,R.ma=ie,W.xa){if((p=Ha())==null){ie=1;break e}if((function(xe,He){var $e=[0],ot=[0],Xe=[0];t:for(;;){if(xe==null)return 0;if(He==null)return xe.a=2,0;if(xe.l=He,xe.a=0,$(xe.m,He.data,He.w,He.ha),!_n(xe.m,$e,ot,Xe)){xe.a=3;break t}if(xe.xb=_l,He.width=$e[0],He.height=ot[0],!vi($e[0],ot[0],1,xe,null))break t;return 1}return e(xe.a!=0),0})(p,R)){if(R=(w=BA(R.width,R.height,ie.Oa,ie.ba))==0){t:{R=p;r:for(;;){if(R==null){R=0;break t}if(e(R.s.yc!=null),e(R.s.Ya!=null),e(0<R.s.Wb),e((k=R.l)!=null),e((W=k.ma)!=null),R.xb!=0){if(R.ca=W.ba,R.tb=W.tb,e(R.ca!=null),!yl(W.Oa,k,kc)){R.a=2;break r}if(!ra(R,k.width)||k.da)break r;if((k.da||Me(R.ca.S))&&xi(),11>R.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),R.ca.f.kb.F!=null&&xi()),R.Pb&&0<R.s.ua&&R.s.vb.X==null&&!le(R.s.vb,R.s.Wa.Xa)){R.a=1;break r}R.xb=0}if(!Fs(R,R.V,R.Ba,R.c,R.i,k.o,ta))break r;W.Dc=R.Ma,R=1;break t}e(R.a!=0),R=0}R=!R}R&&(w=p.a)}else w=p.a}else{if((p=new hl)==null){ie=1;break e}if(p.Fa=W.na,p.P=W.P,p.qc=W.Sa,ri(p,R)){if((w=BA(R.width,R.height,ie.Oa,ie.ba))==0){if(p.Aa=0,k=ie.Oa,e((W=p)!=null),k!=null){if(0<(de=0>(de=k.Md)?0:100<de?255:255*de/100)){for(ve=Re=0;4>ve;++ve)12>(qe=W.pb[ve]).lc&&(qe.ia=de*Uf[0>qe.lc?0:qe.lc]>>3),Re|=qe.ia;Re&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=k.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}(function(xe,He){if(xe==null)return 0;if(He==null)return wn(xe,2,"NULL VP8Io parameter in VP8Decode().");if(!xe.cb&&!ri(xe,He))return 0;if(e(xe.cb),He.ac==null||He.ac(He)){He.ob&&(xe.L=0);var $e=Ko[xe.L];if(xe.L==2?(xe.yb=0,xe.zb=0):(xe.yb=He.v-$e>>4,xe.zb=He.j-$e>>4,0>xe.yb&&(xe.yb=0),0>xe.zb&&(xe.zb=0)),xe.Va=He.o+15+$e>>4,xe.Hb=He.va+15+$e>>4,xe.Hb>xe.za&&(xe.Hb=xe.za),xe.Va>xe.Ub&&(xe.Va=xe.Ub),0<xe.L){var ot=xe.ed;for($e=0;4>$e;++$e){var Xe;if(xe.Qa.Cb){var st=xe.Qa.Lb[$e];xe.Qa.Fb||(st+=ot.Tb)}else st=ot.Tb;for(Xe=0;1>=Xe;++Xe){var at=xe.gd[$e][Xe],ut=st;if(ot.Pc&&(ut+=ot.vd[0],Xe&&(ut+=ot.od[0])),0<(ut=0>ut?0:63<ut?63:ut)){var ht=ut;0<ot.wb&&(ht=4<ot.wb?ht>>2:ht>>1)>9-ot.wb&&(ht=9-ot.wb),1>ht&&(ht=1),at.dd=ht,at.tc=2*ut+ht,at.ld=40<=ut?2:15<=ut?1:0}else at.tc=0;at.La=Xe}}}$e=0}else wn(xe,6,"Frame setup failed"),$e=xe.a;if($e=$e==0){if($e){xe.$c=0,0<xe.Aa||(xe.Ic=SA);t:{$e=xe.Ic,ot=4*(ht=xe.za);var Gt=32*ht,Lt=ht+1,cr=0<xe.L?ht*(0<xe.Aa?2:1):0,Rt=(xe.Aa==2?2:1)*ht;if((at=ot+832+(Xe=3*(16*$e+Ko[xe.L])/2*Gt)+(st=xe.Fa!=null&&0<xe.Fa.length?xe.Kc.c*xe.Kc.i:0))!=at)$e=0;else{if(at>xe.Vb){if(xe.Vb=0,xe.Ec=i(at),xe.Fc=0,xe.Ec==null){$e=wn(xe,1,"no memory during frame initialization.");break t}xe.Vb=at}at=xe.Ec,ut=xe.Fc,xe.Ac=at,xe.Bc=ut,ut+=ot,xe.Gd=l(Gt,Vs),xe.Hd=0,xe.rb=l(Lt+1,Hs),xe.sb=1,xe.wa=cr?l(cr,is):null,xe.Y=0,xe.D.Nb=0,xe.D.wa=xe.wa,xe.D.Y=xe.Y,0<xe.Aa&&(xe.D.Y+=ht),e(!0),xe.oc=at,xe.pc=ut,ut+=832,xe.ya=l(Rt,WA),xe.aa=0,xe.D.ya=xe.ya,xe.D.aa=xe.aa,xe.Aa==2&&(xe.D.aa+=ht),xe.R=16*ht,xe.B=8*ht,ht=(Gt=Ko[xe.L])*xe.R,Gt=Gt/2*xe.B,xe.sa=at,xe.ta=ut+ht,xe.qa=xe.sa,xe.ra=xe.ta+16*$e*xe.R+Gt,xe.Ha=xe.qa,xe.Ia=xe.ra+8*$e*xe.B+Gt,xe.$c=0,ut+=Xe,xe.mb=st?at:null,xe.nb=st?ut:null,e(ut+st<=xe.Fc+xe.Vb),$a(xe),s(xe.Ac,xe.Bc,0,ot),$e=1}}if($e){if(He.ka=0,He.y=xe.sa,He.O=xe.ta,He.f=xe.qa,He.N=xe.ra,He.ea=xe.Ha,He.Vd=xe.Ia,He.fa=xe.R,He.Rc=xe.B,He.F=null,He.J=0,!qd){for($e=-255;255>=$e;++$e)Kd[255+$e]=0>$e?-$e:$e;for($e=-1020;1020>=$e;++$e)zd[1020+$e]=-128>$e?-128:127<$e?127:$e;for($e=-112;112>=$e;++$e)Gd[112+$e]=-16>$e?-16:15<$e?15:$e;for($e=-255;510>=$e;++$e)$d[255+$e]=0>$e?0:255<$e?255:$e;qd=1}io=Ki,Qo=Ya,Bi=vr,Lr=Ca,$r=pr,Tn=Wa,Un=Wn,Yn=Qs,Na=q,_c=Ce,bl=bA,_A=b,vu=Ue,Bl=Ke,wu=ia,Md=vs,Nc=to,Po=xA,ca[0]=ml,ca[1]=YA,ca[2]=na,ca[3]=Ic,ca[4]=Sn,ca[5]=gl,ca[6]=Ea,ca[7]=Ia,ca[8]=ZA,ca[9]=sa,ai[0]=as,ai[1]=pl,ai[2]=JA,ai[3]=XA,ai[4]=Ts,ai[5]=ni,ai[6]=Xa,Ci[0]=Za,Ci[1]=fl,Ci[2]=Us,Ci[3]=zi,Ci[4]=Fo,Ci[5]=zr,Ci[6]=eo,$e=1}else $e=0}$e&&($e=(function(xr,jn){for(xr.M=0;xr.M<xr.Va;++xr.M){var ur,Qt=xr.Jc[xr.M&xr.Xb],kt=xr.m,Hn=xr;for(ur=0;ur<Hn.za;++ur){var nr=kt,gr=Hn,on=gr.Ac,bs=gr.Bc+4*ur,Jn=gr.zc,Cn=gr.ya[gr.aa+ur];if(gr.Qa.Bb?Cn.$b=je(nr,gr.Pa.jb[0])?2+je(nr,gr.Pa.jb[2]):je(nr,gr.Pa.jb[1]):Cn.$b=0,gr.kc&&(Cn.Ad=je(nr,gr.Bd)),Cn.Za=!je(nr,145)+0,Cn.Za){var As=Cn.Ob,Bs=0;for(gr=0;4>gr;++gr){var fn,Cr=Jn[0+gr];for(fn=0;4>fn;++fn){Cr=Dg[on[bs+fn]][Cr];for(var Qr=kf[je(nr,Cr[0])];0<Qr;)Qr=kf[2*Qr+je(nr,Cr[Qr])];Cr=-Qr,on[bs+fn]=Cr}n(As,Bs,on,bs,4),Bs+=4,Jn[0+gr]=Cr}}else Cr=je(nr,156)?je(nr,128)?1:3:je(nr,163)?2:0,Cn.Ob[0]=Cr,s(on,bs,Cr,4),s(Jn,0,Cr,4);Cn.Dd=je(nr,142)?je(nr,114)?je(nr,183)?1:3:2:0}if(Hn.m.Ka)return wn(xr,7,"Premature end-of-partition0 encountered.");for(;xr.ja<xr.za;++xr.ja){if(Hn=Qt,nr=(kt=xr).rb[kt.sb-1],on=kt.rb[kt.sb+kt.ja],ur=kt.ya[kt.aa+kt.ja],bs=kt.kc?ur.Ad:0)nr.la=on.la=0,ur.Za||(nr.Na=on.Na=0),ur.Hc=0,ur.Gc=0,ur.ia=0;else{var pn,Pr;if(nr=on,on=Hn,bs=kt.Pa.Xc,Jn=kt.ya[kt.aa+kt.ja],Cn=kt.pb[Jn.$b],gr=Jn.ad,As=0,Bs=kt.rb[kt.sb-1],Cr=fn=0,s(gr,As,0,384),Jn.Za)var Ln=0,Qn=bs[3];else{Qr=i(16);var tn=nr.Na+Bs.Na;if(tn=Mo(on,bs[1],tn,Cn.Eb,0,Qr,0),nr.Na=Bs.Na=(0<tn)+0,1<tn)io(Qr,0,gr,As);else{var Gs=Qr[0]+3>>3;for(Qr=0;256>Qr;Qr+=16)gr[As+Qr]=Gs}Ln=1,Qn=bs[0]}var Wr=15&nr.la,rn=15&Bs.la;for(Qr=0;4>Qr;++Qr){var Xn=1&rn;for(Gs=Pr=0;4>Gs;++Gs)Wr=Wr>>1|(Xn=(tn=Mo(on,Qn,tn=Xn+(1&Wr),Cn.Sc,Ln,gr,As))>Ln)<<7,Pr=Pr<<2|(3<tn?3:1<tn?2:gr[As+0]!=0),As+=16;Wr>>=4,rn=rn>>1|Xn<<7,fn=(fn<<8|Pr)>>>0}for(Qn=Wr,Ln=rn>>4,pn=0;4>pn;pn+=2){for(Pr=0,Wr=nr.la>>4+pn,rn=Bs.la>>4+pn,Qr=0;2>Qr;++Qr){for(Xn=1&rn,Gs=0;2>Gs;++Gs)tn=Xn+(1&Wr),Wr=Wr>>1|(Xn=0<(tn=Mo(on,bs[2],tn,Cn.Qc,0,gr,As)))<<3,Pr=Pr<<2|(3<tn?3:1<tn?2:gr[As+0]!=0),As+=16;Wr>>=2,rn=rn>>1|Xn<<5}Cr|=Pr<<4*pn,Qn|=Wr<<4<<pn,Ln|=(240&rn)<<pn}nr.la=Qn,Bs.la=Ln,Jn.Hc=fn,Jn.Gc=Cr,Jn.ia=43690&Cr?0:Cn.ia,bs=!(fn|Cr)}if(0<kt.L&&(kt.wa[kt.Y+kt.ja]=kt.gd[ur.$b][ur.Za],kt.wa[kt.Y+kt.ja].La|=!bs),Hn.Ka)return wn(xr,7,"Premature end-of-file encountered.")}if($a(xr),kt=jn,Hn=1,ur=(Qt=xr).D,nr=0<Qt.L&&Qt.M>=Qt.zb&&Qt.M<=Qt.Va,Qt.Aa==0)t:{if(ur.M=Qt.M,ur.uc=nr,xs(Qt,ur),Hn=1,ur=(Pr=Qt.D).Nb,nr=(Cr=Ko[Qt.L])*Qt.R,on=Cr/2*Qt.B,Qr=16*ur*Qt.R,Gs=8*ur*Qt.B,bs=Qt.sa,Jn=Qt.ta-nr+Qr,Cn=Qt.qa,gr=Qt.ra-on+Gs,As=Qt.Ha,Bs=Qt.Ia-on+Gs,rn=(Wr=Pr.M)==0,fn=Wr>=Qt.Va-1,Qt.Aa==2&&xs(Qt,Pr),Pr.uc)for(Xn=(tn=Qt).D.M,e(tn.D.uc),Pr=tn.yb;Pr<tn.Hb;++Pr){Ln=Pr,Qn=Xn;var Rs=(Ni=(zn=tn).D).Nb;pn=zn.R;var Ni=Ni.wa[Ni.Y+Ln],Vn=zn.sa,Kn=zn.ta+16*Rs*pn+16*Ln,$s=Ni.dd,nn=Ni.tc;if(nn!=0)if(e(3<=nn),zn.L==1)0<Ln&&Md(Vn,Kn,pn,nn+4),Ni.La&&Po(Vn,Kn,pn,nn),0<Qn&&wu(Vn,Kn,pn,nn+4),Ni.La&&Nc(Vn,Kn,pn,nn);else{var qs=zn.B,ua=zn.qa,ka=zn.ra+8*Rs*qs+8*Ln,Cs=zn.Ha,zn=zn.Ia+8*Rs*qs+8*Ln;Rs=Ni.ld,0<Ln&&(Yn(Vn,Kn,pn,nn+4,$s,Rs),_c(ua,ka,Cs,zn,qs,nn+4,$s,Rs)),Ni.La&&(_A(Vn,Kn,pn,nn,$s,Rs),Bl(ua,ka,Cs,zn,qs,nn,$s,Rs)),0<Qn&&(Un(Vn,Kn,pn,nn+4,$s,Rs),Na(ua,ka,Cs,zn,qs,nn+4,$s,Rs)),Ni.La&&(bl(Vn,Kn,pn,nn,$s,Rs),vu(ua,ka,Cs,zn,qs,nn,$s,Rs))}}if(Qt.ia&&alert("todo:DitherRow"),kt.put!=null){if(Pr=16*Wr,Wr=16*(Wr+1),rn?(kt.y=Qt.sa,kt.O=Qt.ta+Qr,kt.f=Qt.qa,kt.N=Qt.ra+Gs,kt.ea=Qt.Ha,kt.W=Qt.Ia+Gs):(Pr-=Cr,kt.y=bs,kt.O=Jn,kt.f=Cn,kt.N=gr,kt.ea=As,kt.W=Bs),fn||(Wr-=Cr),Wr>kt.o&&(Wr=kt.o),kt.F=null,kt.J=null,Qt.Fa!=null&&0<Qt.Fa.length&&Pr<Wr&&(kt.J=Vr(Qt,kt,Pr,Wr-Pr),kt.F=Qt.mb,kt.F==null&&kt.F.length==0)){Hn=wn(Qt,3,"Could not decode alpha data.");break t}Pr<kt.j&&(Cr=kt.j-Pr,Pr=kt.j,e(!(1&Cr)),kt.O+=Qt.R*Cr,kt.N+=Qt.B*(Cr>>1),kt.W+=Qt.B*(Cr>>1),kt.F!=null&&(kt.J+=kt.width*Cr)),Pr<Wr&&(kt.O+=kt.v,kt.N+=kt.v>>1,kt.W+=kt.v>>1,kt.F!=null&&(kt.J+=kt.v),kt.ka=Pr-kt.j,kt.U=kt.va-kt.v,kt.T=Wr-Pr,Hn=kt.put(kt))}ur+1!=Qt.Ic||fn||(n(Qt.sa,Qt.ta-nr,bs,Jn+16*Qt.R,nr),n(Qt.qa,Qt.ra-on,Cn,gr+8*Qt.B,on),n(Qt.Ha,Qt.Ia-on,As,Bs+8*Qt.B,on))}if(!Hn)return wn(xr,6,"Output aborted.")}return 1})(xe,He)),He.bc!=null&&He.bc(He),$e&=1}return $e?(xe.cb=0,$e):0})(p,R)||(w=p.a)}}else w=p.a}w==0&&ie.Oa!=null&&ie.Oa.fd&&(w=vl(ie.ba))}ie=w}re=ie!=0?null:11>re?Ae.f.RGBA.eb:Ae.f.kb.y}else re=null;return re};var Pc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(U,V){for(var I="",L=0;L<4;L++)I+=String.fromCharCode(U[V++]);return I}function f(U,V){return U[V+0]|U[V+1]<<8}function v(U,V){return(U[V+0]|U[V+1]<<8|U[V+2]<<16)>>>0}function x(U,V){return(U[V+0]|U[V+1]<<8|U[V+2]<<16|U[V+3]<<24)>>>0}new u;var y=[0],C=[0],N=[],E=new u,_=r,P=(function(U,V){var I={},L=0,F=!1,ee=0,ge=0;if(I.frames=[],!(function(S,K){for(var Y=0;Y<4;Y++)if(S[K+Y]!="RIFF".charCodeAt(Y))return!0;return!1})(U,V)){for(x(U,V+=4),V+=8;V<U.length;){var ue=d(U,V),fe=x(U,V+=4);V+=4;var ae=fe+(1&fe);switch(ue){case"VP8 ":case"VP8L":I.frames[L]===void 0&&(I.frames[L]={}),(z=I.frames[L]).src_off=F?ge:V-8,z.src_size=ee+fe+8,L++,F&&(F=!1,ee=0,ge=0);break;case"VP8X":(z=I.header={}).feature_flags=U[V];var $=V+4;z.canvas_width=1+v(U,$),$+=3,z.canvas_height=1+v(U,$),$+=3;break;case"ALPH":F=!0,ee=ae+8,ge=V-8;break;case"ANIM":(z=I.header).bgcolor=x(U,V),$=V+4,z.loop_count=f(U,$),$+=2;break;case"ANMF":var me,z;(z=I.frames[L]={}).offset_x=2*v(U,V),V+=3,z.offset_y=2*v(U,V),V+=3,z.width=1+v(U,V),V+=3,z.height=1+v(U,V),V+=3,z.duration=v(U,V),V+=3,me=U[V++],z.dispose=1&me,z.blend=me>>1&1}ue!="ANMF"&&(V+=ae)}return I}})(_,0);P.response=_,P.rgbaoutput=!0,P.dataurl=!1;var H=P.header?P.header:null,D=P.frames?P.frames:null;if(H){H.loop_counter=H.loop_count,y=[H.canvas_height],C=[H.canvas_width];for(var J=0;J<D.length&&D[J].blend!=0;J++);}var Z=D[0],O=E.WebPDecodeRGBA(_,Z.src_off,Z.src_size,C,y);Z.rgba=O,Z.imgwidth=C[0],Z.imgheight=y[0];for(var Q=0;Q<C[0]*y[0]*4;Q++)N[Q]=O[Q];return this.width=C,this.height=y,this.data=N,this}(function(r){var e,t,n,s,i,l,c,u,d,f=function(S){return S=S||{},this.isStrokeTransparent=S.isStrokeTransparent||!1,this.strokeOpacity=S.strokeOpacity||1,this.strokeStyle=S.strokeStyle||"#000000",this.fillStyle=S.fillStyle||"#000000",this.isFillTransparent=S.isFillTransparent||!1,this.fillOpacity=S.fillOpacity||1,this.font=S.font||"10px sans-serif",this.textBaseline=S.textBaseline||"alphabetic",this.textAlign=S.textAlign||"left",this.lineWidth=S.lineWidth||1,this.lineJoin=S.lineJoin||"miter",this.lineCap=S.lineCap||"butt",this.path=S.path||[],this.transform=S.transform!==void 0?S.transform.clone():new u,this.globalCompositeOperation=S.globalCompositeOperation||"normal",this.globalAlpha=S.globalAlpha||1,this.clip_path=S.clip_path||[],this.currentPoint=S.currentPoint||new l,this.miterLimit=S.miterLimit||10,this.lastPoint=S.lastPoint||new l,this.lineDashOffset=S.lineDashOffset||0,this.lineDash=S.lineDash||[],this.margin=S.margin||[0,0,0,0],this.prevPageLastElemOffset=S.prevPageLastElemOffset||0,this.ignoreClearRect=typeof S.ignoreClearRect!="boolean"||S.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,d=new f}]);var v=function(S){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=S;Object.defineProperty(this,"pdf",{get:function(){return K}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(le){Y=!!le}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(le){G=!!le}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(le){isNaN(le)||(oe=le)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(le){isNaN(le)||(ye=le)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(le){var ft;typeof le=="number"?ft=[le,le,le,le]:((ft=new Array(4))[0]=le[0],ft[1]=le.length>=2?le[1]:ft[0],ft[2]=le.length>=3?le[2]:ft[0],ft[3]=le.length>=4?le[3]:ft[1]),d.margin=ft}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(le){Le=le}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(le){be=le}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(le){je=le}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(le){le instanceof f&&(d=le)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(le){d.path=le}});var Ge=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ge},set:function(le){Ge=le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(le){var ft;ft=x(le),this.ctx.fillStyle=ft.style,this.ctx.isFillTransparent=ft.a===0,this.ctx.fillOpacity=ft.a,this.pdf.setFillColor(ft.r,ft.g,ft.b,{a:ft.a}),this.pdf.setTextColor(ft.r,ft.g,ft.b,{a:ft.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(le){var ft=x(le);this.ctx.strokeStyle=ft.style,this.ctx.isStrokeTransparent=ft.a===0,this.ctx.strokeOpacity=ft.a,ft.a===0?this.pdf.setDrawColor(255,255,255):(ft.a,this.pdf.setDrawColor(ft.r,ft.g,ft.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(le){["butt","round","square"].indexOf(le)!==-1&&(this.ctx.lineCap=le,this.pdf.setLineCap(le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(le){isNaN(le)||(this.ctx.lineWidth=le,this.pdf.setLineWidth(le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(le){["bevel","round","miter"].indexOf(le)!==-1&&(this.ctx.lineJoin=le,this.pdf.setLineJoin(le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(le){isNaN(le)||(this.ctx.miterLimit=le,this.pdf.setMiterLimit(le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(le){this.ctx.textBaseline=le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(le){["right","end","center","left","start"].indexOf(le)!==-1&&(this.ctx.textAlign=le)}});var tt=null,it=null,It=null;Object.defineProperty(this,"fontFaces",{get:function(){return It},set:function(le){tt=null,it=null,It=le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(le){var ft;if(this.ctx.font=le,(ft=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(le))!==null){var ct=ft[1];ft[2];var pt=ft[3],he=ft[4];ft[5];var Se=ft[6],Qe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(he)[2];he=Math.floor(Qe==="px"?parseFloat(he)*this.pdf.internal.scaleFactor:Qe==="em"?parseFloat(he)*this.pdf.getFontSize():parseFloat(he)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(he);var X=(function(De){var At,_e,Pe=[],Ye=De.trim();if(Ye==="")return _y;if(Ye in MB)return[MB[Ye]];for(;Ye!=="";){switch(_e=null,At=(Ye=VB(Ye)).charAt(0)){case'"':case"'":_e=PM(Ye.substring(1),At);break;default:_e=DM(Ye)}if(_e===null||(Pe.push(_e[0]),(Ye=VB(_e[1]))!==""&&Ye.charAt(0)!==","))return _y;Ye=Ye.replace(/^,/,"")}return Pe})(Se);if(this.fontFaces){var ne=(function(De,At){var _e=De.getFontList(),Pe=JSON.stringify(_e);if(tt===null||it!==Pe){var Ye=(function(vt){var ke=[];return Object.keys(vt).forEach(function(We){vt[We].forEach(function(Me){var rt=null;switch(Me){case"bold":rt={family:We,weight:"bold"};break;case"italic":rt={family:We,style:"italic"};break;case"bolditalic":rt={family:We,weight:"bold",style:"italic"};break;case"":case"normal":rt={family:We}}rt!==null&&(rt.ref={name:We,style:Me},ke.push(rt))})}),ke})(_e);tt=(function(vt){for(var ke={},We=0;We<vt.length;++We){var Me=Iy(vt[We]),rt=Me.family,mt=Me.stretch,bt=Me.style,dt=Me.weight;ke[rt]=ke[rt]||{},ke[rt][mt]=ke[rt][mt]||{},ke[rt][mt][bt]=ke[rt][mt][bt]||{},ke[rt][mt][bt][dt]=Me}return ke})(Ye.concat(At)),it=Pe}return tt})(this.pdf,this.fontFaces),pe=X.map(function(De){return{family:De,stretch:"normal",weight:pt,style:ct}}),Ie=(function(De,At,_e){for(var Pe=(_e=_e||{}).defaultFontFamily||"times",Ye=Object.assign({},QM,_e.genericFontFamilies||{}),vt=null,ke=null,We=0;We<At.length;++We)if(Ye[(vt=Iy(At[We])).family]&&(vt.family=Ye[vt.family]),De.hasOwnProperty(vt.family)){ke=De[vt.family];break}if(!(ke=ke||De[Pe]))throw new Error("Could not find a font-family for the rule '"+HB(vt)+"' and default family '"+Pe+"'.");if(ke=(function(Me,rt){if(rt[Me])return rt[Me];var mt=Ov[Me],bt=mt<=Ov.normal?-1:1,dt=OB(rt,D4,mt,bt);if(!dt)throw new Error("Could not find a matching font-stretch value for "+Me);return dt})(vt.stretch,ke),ke=(function(Me,rt){if(rt[Me])return rt[Me];for(var mt=P4[Me],bt=0;bt<mt.length;++bt)if(rt[mt[bt]])return rt[mt[bt]];throw new Error("Could not find a matching font-style for "+Me)})(vt.style,ke),!(ke=(function(Me,rt){if(rt[Me])return rt[Me];if(Me===400&&rt[500])return rt[500];if(Me===500&&rt[400])return rt[400];var mt=LM[Me],bt=OB(rt,R4,mt,Me<400?-1:1);if(!bt)throw new Error("Could not find a matching font-weight for value "+Me);return bt})(vt.weight,ke)))throw new Error("Failed to resolve a font for the rule '"+HB(vt)+"'.");return ke})(ne,pe);this.pdf.setFont(Ie.ref.name,Ie.ref.style)}else{var se="";(pt==="bold"||parseInt(pt,10)>=700||ct==="bold")&&(se="bold"),ct==="italic"&&(se+="italic"),se.length===0&&(se="normal");for(var Te="",we={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<X.length;Be++){if(this.pdf.internal.getFont(X[Be],se,{noFallback:!0,disableWarning:!0})!==void 0){Te=X[Be];break}if(se==="bolditalic"&&this.pdf.internal.getFont(X[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Te=X[Be],se="bold";else if(this.pdf.internal.getFont(X[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Te=X[Be],se="normal";break}}if(Te===""){for(var Fe=0;Fe<X.length;Fe++)if(we[X[Fe]]){Te=we[X[Fe]];break}}Te=Te===""?"Times":Te,this.pdf.setFont(Te,se)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(le){this.ctx.globalCompositeOperation=le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(le){this.ctx.globalAlpha=le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(le){this.ctx.lineDashOffset=le,z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(le){this.ctx.lineDash=le,z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(le){this.ctx.ignoreClearRect=!!le}})};v.prototype.setLineDash=function(S){this.lineDash=S},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){D.call(this,"fill",!1)},v.prototype.stroke=function(){D.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(S,K){if(isNaN(S)||isNaN(K))throw un.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new l(S,K));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new l(S,K)},v.prototype.closePath=function(){var S=new l(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&sn(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){S=new l(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(S.x,S.y)},v.prototype.lineTo=function(S,K){if(isNaN(S)||isNaN(K))throw un.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new l(S,K));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new l(Y.x,Y.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},v.prototype.quadraticCurveTo=function(S,K,Y,G){if(isNaN(Y)||isNaN(G)||isNaN(S)||isNaN(K))throw un.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new l(Y,G)),ye=this.ctx.transform.applyToPoint(new l(S,K));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new l(oe.x,oe.y)},v.prototype.bezierCurveTo=function(S,K,Y,G,oe,ye){if(isNaN(oe)||isNaN(ye)||isNaN(S)||isNaN(K)||isNaN(Y)||isNaN(G))throw un.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new l(oe,ye)),be=this.ctx.transform.applyToPoint(new l(S,K)),je=this.ctx.transform.applyToPoint(new l(Y,G));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:je.x,y2:je.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new l(Le.x,Le.y)},v.prototype.arc=function(S,K,Y,G,oe,ye){if(isNaN(S)||isNaN(K)||isNaN(Y)||isNaN(G)||isNaN(oe))throw un.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new l(S,K));S=Le.x,K=Le.y;var be=this.ctx.transform.applyToPoint(new l(0,Y)),je=this.ctx.transform.applyToPoint(new l(0,0));Y=Math.sqrt(Math.pow(be.x-je.x,2)+Math.pow(be.y-je.y,2))}Math.abs(oe-G)>=2*Math.PI&&(G=0,oe=2*Math.PI),this.path.push({type:"arc",x:S,y:K,radius:Y,startAngle:G,endAngle:oe,counterclockwise:ye})},v.prototype.arcTo=function(S,K,Y,G,oe){throw new Error("arcTo not implemented.")},v.prototype.rect=function(S,K,Y,G){if(isNaN(S)||isNaN(K)||isNaN(Y)||isNaN(G))throw un.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(S,K),this.lineTo(S+Y,K),this.lineTo(S+Y,K+G),this.lineTo(S,K+G),this.lineTo(S,K),this.lineTo(S+Y,K),this.lineTo(S,K)},v.prototype.fillRect=function(S,K,Y,G){if(isNaN(S)||isNaN(K)||isNaN(Y)||isNaN(G))throw un.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(S,K,Y,G),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},v.prototype.strokeRect=function(S,K,Y,G){if(isNaN(S)||isNaN(K)||isNaN(Y)||isNaN(G))throw un.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(S,K,Y,G),this.stroke())},v.prototype.clearRect=function(S,K,Y,G){if(isNaN(S)||isNaN(K)||isNaN(Y)||isNaN(G))throw un.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(S,K,Y,G))},v.prototype.save=function(S){S=typeof S!="boolean"||S;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),S){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},v.prototype.restore=function(S){S=typeof S!="boolean"||S;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(K),S&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(S){var K,Y,G,oe;if(S.isCanvasGradient===!0&&(S=S.getColor()),!S)return{r:0,g:0,b:0,a:0,style:S};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(S))K=0,Y=0,G=0,oe=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(S);if(ye!==null)K=parseInt(ye[1]),Y=parseInt(ye[2]),G=parseInt(ye[3]),oe=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(S))!==null)K=parseInt(ye[1]),Y=parseInt(ye[2]),G=parseInt(ye[3]),oe=parseFloat(ye[4]);else{if(oe=1,typeof S=="string"&&S.charAt(0)!=="#"){var Le=new k4(S);S=Le.ok?Le.toHex():"#000000"}S.length===4?(K=S.substring(1,2),K+=K,Y=S.substring(2,3),Y+=Y,G=S.substring(3,4),G+=G):(K=S.substring(1,3),Y=S.substring(3,5),G=S.substring(5,7)),K=parseInt(K,16),Y=parseInt(Y,16),G=parseInt(G,16)}}return{r:K,g:Y,b:G,a:oe,style:S}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(S,K,Y,G){if(isNaN(K)||isNaN(Y)||typeof S!="string")throw un.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!y.call(this)){var oe=ae(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;L.call(this,{text:S,x:K,y:Y,scale:ye,angle:oe,align:this.textAlign,maxWidth:G})}},v.prototype.strokeText=function(S,K,Y,G){if(isNaN(K)||isNaN(Y)||typeof S!="string")throw un.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){G=isNaN(G)?void 0:G;var oe=ae(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;L.call(this,{text:S,x:K,y:Y,scale:ye,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:G})}},v.prototype.measureText=function(S){if(typeof S!="string")throw un.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Y=this.pdf.internal.scaleFactor,G=K.internal.getFontSize(),oe=K.getStringUnitWidth(S)*G/K.internal.scaleFactor;return new function(ye){var Le=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:oe*=Math.round(96*Y/72*1e4)/1e4})},v.prototype.scale=function(S,K){if(isNaN(S)||isNaN(K))throw un.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new u(S,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},v.prototype.rotate=function(S){if(isNaN(S))throw un.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new u(Math.cos(S),Math.sin(S),-Math.sin(S),Math.cos(S),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},v.prototype.translate=function(S,K){if(isNaN(S)||isNaN(K))throw un.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new u(1,0,0,1,S,K);this.ctx.transform=this.ctx.transform.multiply(Y)},v.prototype.transform=function(S,K,Y,G,oe,ye){if(isNaN(S)||isNaN(K)||isNaN(Y)||isNaN(G)||isNaN(oe)||isNaN(ye))throw un.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new u(S,K,Y,G,oe,ye);this.ctx.transform=this.ctx.transform.multiply(Le)},v.prototype.setTransform=function(S,K,Y,G,oe,ye){S=isNaN(S)?1:S,K=isNaN(K)?0:K,Y=isNaN(Y)?0:Y,G=isNaN(G)?1:G,oe=isNaN(oe)?0:oe,ye=isNaN(ye)?0:ye,this.ctx.transform=new u(S,K,Y,G,oe,ye)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(S,K,Y,G,oe,ye,Le,be,je){var Ge=this.pdf.getImageProperties(S),tt=1,it=1,It=1,le=1;G!==void 0&&be!==void 0&&(It=be/G,le=je/oe,tt=Ge.width/G*be/G,it=Ge.height/oe*je/oe),ye===void 0&&(ye=K,Le=Y,K=0,Y=0),G!==void 0&&be===void 0&&(be=G,je=oe),G===void 0&&be===void 0&&(be=Ge.width,je=Ge.height);var ft=this.ctx.transform.decompose(),ct=ae(ft.rotate.shx),pt=new u,he=(pt=(pt=(pt=pt.multiply(ft.translate)).multiply(ft.skew)).multiply(ft.scale)).applyToRectangle(new c(ye-K*It,Le-Y*le,G*tt,oe*it));if(this.autoPaging){for(var Se,Qe=E.call(this,he),X=[],ne=0;ne<Qe.length;ne+=1)X.indexOf(Qe[ne])===-1&&X.push(Qe[ne]);H(X);for(var pe=X[0],Ie=X[X.length-1],se=pe;se<Ie+1;se++){this.pdf.setPage(se);var Te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],we=se===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],De=se===1?0:Be+(se-2)*Fe;if(this.ctx.clip_path.length!==0){var At=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Se,this.posX+this.margin[3],-De+we+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=At}var _e=JSON.parse(JSON.stringify(he));_e=P([_e],this.posX+this.margin[3],-De+we+this.ctx.prevPageLastElemOffset)[0];var Pe=(se>pe||se<Ie)&&N.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Te,Fe,null).clip().discardPath()),this.pdf.addImage(S,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,ct),Pe&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(S,"JPEG",he.x,he.y,he.w,he.h,null,null,ct)};var E=function(S,K,Y){var G=[];K=K||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(S.type){default:case"mt":case"lt":G.push(Math.floor((S.y+oe)/Y)+1);break;case"arc":G.push(Math.floor((S.y+oe-S.radius)/Y)+1),G.push(Math.floor((S.y+oe+S.radius)/Y)+1);break;case"qct":var ye=$(this.ctx.lastPoint.x,this.ctx.lastPoint.y,S.x1,S.y1,S.x,S.y);G.push(Math.floor((ye.y+oe)/Y)+1),G.push(Math.floor((ye.y+ye.h+oe)/Y)+1);break;case"bct":var Le=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,S.x1,S.y1,S.x2,S.y2,S.x,S.y);G.push(Math.floor((Le.y+oe)/Y)+1),G.push(Math.floor((Le.y+Le.h+oe)/Y)+1);break;case"rect":G.push(Math.floor((S.y+oe)/Y)+1),G.push(Math.floor((S.y+S.h+oe)/Y)+1)}for(var be=0;be<G.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<G[be];)_.call(this);return G},_=function(){var S=this.fillStyle,K=this.strokeStyle,Y=this.font,G=this.lineCap,oe=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=S,this.strokeStyle=K,this.font=Y,this.lineCap=G,this.lineWidth=oe,this.lineJoin=ye},P=function(S,K,Y){for(var G=0;G<S.length;G++)switch(S[G].type){case"bct":S[G].x2+=K,S[G].y2+=Y;case"qct":S[G].x1+=K,S[G].y1+=Y;default:S[G].x+=K,S[G].y+=Y}return S},H=function(S){return S.sort(function(K,Y){return K-Y})},D=function(S,K){var Y=this.fillStyle,G=this.strokeStyle,oe=this.lineCap,ye=this.lineWidth,Le=Math.abs(ye*this.ctx.transform.scaleX),be=this.lineJoin;if(this.autoPaging){for(var je,Ge,tt=JSON.parse(JSON.stringify(this.path)),it=JSON.parse(JSON.stringify(this.path)),It=[],le=0;le<it.length;le++)if(it[le].x!==void 0)for(var ft=E.call(this,it[le]),ct=0;ct<ft.length;ct+=1)It.indexOf(ft[ct])===-1&&It.push(ft[ct]);for(var pt=0;pt<It.length;pt++)for(;this.pdf.internal.getNumberOfPages()<It[pt];)_.call(this);H(It);for(var he=It[0],Se=It[It.length-1],Qe=he;Qe<Se+1;Qe++){this.pdf.setPage(Qe),this.fillStyle=Y,this.strokeStyle=G,this.lineCap=oe,this.lineWidth=Le,this.lineJoin=be;var X=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ne=Qe===1?this.posY+this.margin[0]:this.margin[0],pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],se=Qe===1?0:pe+(Qe-2)*Ie;if(this.ctx.clip_path.length!==0){var Te=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(je,this.posX+this.margin[3],-se+ne+this.ctx.prevPageLastElemOffset),J.call(this,S,!0),this.path=Te}if(Ge=JSON.parse(JSON.stringify(tt)),this.path=P(Ge,this.posX+this.margin[3],-se+ne+this.ctx.prevPageLastElemOffset),K===!1||Qe===0){var we=(Qe>he||Qe<Se)&&N.call(this);we&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],X,Ie,null).clip().discardPath()),J.call(this,S,K),we&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}this.path=tt}else this.lineWidth=Le,J.call(this,S,K),this.lineWidth=ye},J=function(S,K){if((S!=="stroke"||K||!C.call(this))&&(S==="stroke"||K||!y.call(this))){for(var Y,G,oe=[],ye=this.path,Le=0;Le<ye.length;Le++){var be=ye[Le];switch(be.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:be,deltas:[],abs:[]});break;case"lt":var je=oe.length;if(ye[Le-1]&&!isNaN(ye[Le-1].x)&&(Y=[be.x-ye[Le-1].x,be.y-ye[Le-1].y],je>0)){for(;je>=0;je--)if(oe[je-1].close!==!0&&oe[je-1].begin!==!0){oe[je-1].deltas.push(Y),oe[je-1].abs.push(be);break}}break;case"bct":Y=[be.x1-ye[Le-1].x,be.y1-ye[Le-1].y,be.x2-ye[Le-1].x,be.y2-ye[Le-1].y,be.x-ye[Le-1].x,be.y-ye[Le-1].y],oe[oe.length-1].deltas.push(Y);break;case"qct":var Ge=ye[Le-1].x+2/3*(be.x1-ye[Le-1].x),tt=ye[Le-1].y+2/3*(be.y1-ye[Le-1].y),it=be.x+2/3*(be.x1-be.x),It=be.y+2/3*(be.y1-be.y),le=be.x,ft=be.y;Y=[Ge-ye[Le-1].x,tt-ye[Le-1].y,it-ye[Le-1].x,It-ye[Le-1].y,le-ye[Le-1].x,ft-ye[Le-1].y],oe[oe.length-1].deltas.push(Y);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(be)}}G=K?null:S==="stroke"?"stroke":"fill";for(var ct=!1,pt=0;pt<oe.length;pt++)if(oe[pt].arc)for(var he=oe[pt].abs,Se=0;Se<he.length;Se++){var Qe=he[Se];Qe.type==="arc"?Q.call(this,Qe.x,Qe.y,Qe.radius,Qe.startAngle,Qe.endAngle,Qe.counterclockwise,void 0,K,!ct):F.call(this,Qe.x,Qe.y),ct=!0}else if(oe[pt].close===!0)this.pdf.internal.out("h"),ct=!1;else if(oe[pt].begin!==!0){var X=oe[pt].start.x,ne=oe[pt].start.y;ee.call(this,oe[pt].deltas,X,ne),ct=!0}G&&U.call(this,G),K&&V.call(this)}},Z=function(S){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return S-Y;case"top":return S+K-Y;case"hanging":return S+K-2*Y;case"middle":return S+K/2-Y;default:return S}},O=function(S){return S+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var S=function(){};return S.colorStops=[],S.addColorStop=function(K,Y){this.colorStops.push([K,Y])},S.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},S.isCanvasGradient=!0,S},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Q=function(S,K,Y,G,oe,ye,Le,be,je){for(var Ge=ue.call(this,Y,G,oe,ye),tt=0;tt<Ge.length;tt++){var it=Ge[tt];tt===0&&(je?I.call(this,it.x1+S,it.y1+K):F.call(this,it.x1+S,it.y1+K)),ge.call(this,S,K,it.x2,it.y2,it.x3,it.y3,it.x4,it.y4)}be?V.call(this):U.call(this,Le)},U=function(S){switch(S){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(S,K){this.pdf.internal.out(t(S)+" "+n(K)+" m")},L=function(S){var K;switch(S.align){case"right":case"end":K="right";break;case"center":K="center";break;default:K="left"}var Y,G,oe,ye=this.pdf.getTextDimensions(S.text),Le=Z.call(this,S.y),be=O.call(this,Le)-ye.h,je=this.ctx.transform.applyToPoint(new l(S.x,Le));if(this.autoPaging){var Ge=this.ctx.transform.decompose(),tt=new u;tt=(tt=(tt=tt.multiply(Ge.translate)).multiply(Ge.skew)).multiply(Ge.scale);for(var it=this.ctx.transform.applyToRectangle(new c(S.x,Le,ye.w,ye.h)),It=tt.applyToRectangle(new c(S.x,be,ye.w,ye.h)),le=E.call(this,It),ft=[],ct=0;ct<le.length;ct+=1)ft.indexOf(le[ct])===-1&&ft.push(le[ct]);H(ft);for(var pt=ft[0],he=ft[ft.length-1],Se=pt;Se<he+1;Se++){this.pdf.setPage(Se);var Qe=Se===1?this.posY+this.margin[0]:this.margin[0],X=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ne=this.pdf.internal.pageSize.height-this.margin[2],pe=ne-this.margin[0],Ie=this.pdf.internal.pageSize.width-this.margin[1],se=Ie-this.margin[3],Te=Se===1?0:X+(Se-2)*pe;if(this.ctx.clip_path.length!==0){var we=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=P(Y,this.posX+this.margin[3],-1*Te+Qe),J.call(this,"fill",!0),this.path=we}var Be=P([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-Te+Qe+this.ctx.prevPageLastElemOffset)[0];S.scale>=.01&&(G=this.pdf.internal.getFontSize(),this.pdf.setFontSize(G*S.scale),oe=this.lineWidth,this.lineWidth=oe*S.scale);var Fe=this.autoPaging!=="text";if(Fe||Be.y+Be.h<=ne){if(Fe||Be.y>=Qe&&Be.x<=Ie){var De=Fe?S.text:this.pdf.splitTextToSize(S.text,S.maxWidth||Ie-Be.x)[0],At=P([JSON.parse(JSON.stringify(it))],this.posX+this.margin[3],-Te+Qe+this.ctx.prevPageLastElemOffset)[0],_e=Fe&&(Se>pt||Se<he)&&N.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],se,pe,null).clip().discardPath()),this.pdf.text(De,At.x,At.y,{angle:S.angle,align:K,renderingMode:S.renderingMode}),_e&&this.pdf.restoreGraphicsState()}}else Be.y<ne&&(this.ctx.prevPageLastElemOffset+=ne-Be.y);S.scale>=.01&&(this.pdf.setFontSize(G),this.lineWidth=oe)}}else S.scale>=.01&&(G=this.pdf.internal.getFontSize(),this.pdf.setFontSize(G*S.scale),oe=this.lineWidth,this.lineWidth=oe*S.scale),this.pdf.text(S.text,je.x+this.posX,je.y+this.posY,{angle:S.angle,align:K,renderingMode:S.renderingMode,maxWidth:S.maxWidth}),S.scale>=.01&&(this.pdf.setFontSize(G),this.lineWidth=oe)},F=function(S,K,Y,G){Y=Y||0,G=G||0,this.pdf.internal.out(t(S+Y)+" "+n(K+G)+" l")},ee=function(S,K,Y){return this.pdf.lines(S,K,Y,null,null)},ge=function(S,K,Y,G,oe,ye,Le,be){this.pdf.internal.out([e(s(Y+S)),e(i(G+K)),e(s(oe+S)),e(i(ye+K)),e(s(Le+S)),e(i(be+K)),"c"].join(" "))},ue=function(S,K,Y,G){for(var oe=2*Math.PI,ye=Math.PI/2;K>Y;)K-=oe;var Le=Math.abs(Y-K);Le<oe&&G&&(Le=oe-Le);for(var be=[],je=G?-1:1,Ge=K;Le>1e-5;){var tt=Ge+je*Math.min(Le,ye);be.push(fe.call(this,S,Ge,tt)),Le-=Math.abs(tt-Ge),Ge=tt}return be},fe=function(S,K,Y){var G=(Y-K)/2,oe=S*Math.cos(G),ye=S*Math.sin(G),Le=oe,be=-ye,je=Le*Le+be*be,Ge=je+Le*oe+be*ye,tt=4/3*(Math.sqrt(2*je*Ge)-Ge)/(Le*ye-be*oe),it=Le-tt*be,It=be+tt*Le,le=it,ft=-It,ct=G+K,pt=Math.cos(ct),he=Math.sin(ct);return{x1:S*Math.cos(K),y1:S*Math.sin(K),x2:it*pt-It*he,y2:it*he+It*pt,x3:le*pt-ft*he,y3:le*he+ft*pt,x4:S*Math.cos(Y),y4:S*Math.sin(Y)}},ae=function(S){return 180*S/Math.PI},$=function(S,K,Y,G,oe,ye){var Le=S+.5*(Y-S),be=K+.5*(G-K),je=oe+.5*(Y-oe),Ge=ye+.5*(G-ye),tt=Math.min(S,oe,Le,je),it=Math.max(S,oe,Le,je),It=Math.min(K,ye,be,Ge),le=Math.max(K,ye,be,Ge);return new c(tt,It,it-tt,le-It)},me=function(S,K,Y,G,oe,ye,Le,be){var je,Ge,tt,it,It,le,ft,ct,pt,he,Se,Qe,X,ne,pe=Y-S,Ie=G-K,se=oe-Y,Te=ye-G,we=Le-oe,Be=be-ye;for(Ge=0;Ge<41;Ge++)pt=(ft=(tt=S+(je=Ge/40)*pe)+je*((It=Y+je*se)-tt))+je*(It+je*(oe+je*we-It)-ft),he=(ct=(it=K+je*Ie)+je*((le=G+je*Te)-it))+je*(le+je*(ye+je*Be-le)-ct),Ge==0?(Se=pt,Qe=he,X=pt,ne=he):(Se=Math.min(Se,pt),Qe=Math.min(Qe,he),X=Math.max(X,pt),ne=Math.max(ne,he));return new c(Math.round(Se),Math.round(Qe),Math.round(X-Se),Math.round(ne-Qe))},z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var S,K,Y=(S=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:S,lineDashOffset:K}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(qt.API),(function(r){var e=function(l){var c,u,d,f,v,x,y,C,N,E;for(u=[],d=0,f=(l+=c="\0\0\0\0".slice(l.length%4||4)).length;f>d;d+=4)(v=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(x=(v=((v=((v=((v=(v-(E=v%85))/85)-(N=v%85))/85)-(C=v%85))/85)-(y=v%85))/85)%85,u.push(x+33,y+33,C+33,N+33,E+33)):u.push(122);return(function(_,P){for(var H=P;H>0;H--)_.pop()})(u,c.length),String.fromCharCode.apply(String,u)+"~>"},t=function(l){var c,u,d,f,v,x=String,y="length",C=255,N="charCodeAt",E="slice",_="replace";for(l[E](-2),l=l[E](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),d=[],f=0,v=(l+=c="uuuuu"[E](l[y]%5||5))[y];v>f;f+=5)u=52200625*(l[N](f)-33)+614125*(l[N](f+1)-33)+7225*(l[N](f+2)-33)+85*(l[N](f+3)-33)+(l[N](f+4)-33),d.push(C&u>>24,C&u>>16,C&u>>8,C&u);return(function(P,H){for(var D=H;D>0;D--)P.pop()})(d,c[y]),x.fromCharCode.apply(x,d)},n=function(l){return l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(l){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),c.test(l)===!1)return"";for(var u="",d=0;d<l.length;d+=2)u+=String.fromCharCode("0x"+(l[d]+l[d+1]));return u},i=function(l){for(var c=new Uint8Array(l.length),u=l.length;u--;)c[u]=l.charCodeAt(u);return(c=Uv(c)).reduce(function(d,f){return d+String.fromCharCode(f)},"")};r.processDataByFilters=function(l,c){var u=0,d=l||"",f=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":d=t(d),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=e(d),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:d,reverseChain:f.reverse().join(" ")}}})(qt.API),(function(r){r.loadFile=function(e,t,n){return(function(s,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=(function(u,d,f){var v=new XMLHttpRequest,x=0,y=function(C){var N=C.length,E=[],_=String.fromCharCode;for(x=0;x<N;x+=1)E.push(_(255&C.charCodeAt(x)));return E.join("")};if(v.open("GET",u,!d),v.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(v.onload=function(){v.status===200?f(y(this.responseText)):f(void 0)}),v.send(null),d&&v.status===200)return y(v.responseText)})(s,i,l)}catch{}return c})(e,t,n)},r.allowFsRead=void 0,r.loadImageFile=r.loadFile})(qt.API),(function(r){function e(){return(ar.html2canvas?Promise.resolve(ar.html2canvas):oy(()=>Promise.resolve().then(()=>h8),void 0)).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function t(){return(ar.DOMPurify?Promise.resolve(ar.DOMPurify):oy(()=>import("./purify.es-SQuBl5wZ.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=sn(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},s=function(c,u){var d=document.createElement(c);for(var f in u.className&&(d.className=u.className),u.innerHTML&&u.dompurify&&(d.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)d.style[f]=u.style[f];return d},i=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),v=u.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||f.appendChild(c(v,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f},l=function c(u){var d=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),f=c.convert(Promise.resolve(),d);return(f=f.setProgress(1,c,1,[c])).set(u)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(c,u){return c.__proto__=u||l.prototype,c},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(c,u){return this.then(function(){switch(u=u||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),u){case"string":return this.then(t).then(function(d){return this.set({src:s("div",{innerHTML:c,dompurify:d})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},l.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,u(this.prop.container,d)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(e).then(function(u){var d=this.opt.jsPDF,f=this.opt.fontFaces,v=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:v,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=f,f)for(var y=0;y<f.length;++y){var C=f[y],N=C.src.find(function(E){return E.format==="truetype"});N&&d.addFont(N.url,C.ref.name,C.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,d.context2d.save(!0),u(this.prop.container,x)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(c,u,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},l.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},l.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},l.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=c[d]};switch(d){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[d]=c[d]}}},this);return this.then(function(){return this.thenList(u)})},l.prototype.get=function(c,u){return this.then(function(){var d=c in l.template.prop?this.prop[c]:this.opt[c];return u?u(d):d})},l.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},l.prototype.setPageSize=function(c){function u(d,f){return Math.floor(d*f/72*96)}return this.then(function(){(c=c||qt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},l.prototype.setProgress=function(c,u,d,f){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),d!=null&&(this.progress.n=d),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(c,u,d,f){return this.setProgress(c?this.progress.val+c:null,u||null,d?this.progress.n+d:null,f?this.progress.stack.concat(f):null)},l.prototype.then=function(c,u){var d=this;return this.thenCore(c,u,function(f,v){return d.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(x){return d.updateProgress(null,f),x}).then(f,v).then(function(x){return d.updateProgress(1),x})})},l.prototype.thenCore=function(c,u,d){d=d||Promise.prototype.then;var f=this;c&&(c=c.bind(f)),u&&(u=u.bind(f));var v=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:l.convert(Object.assign({},f),Promise.prototype),x=d.call(v,c,u);return l.convert(x,f.__proto__)},l.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},l.prototype.thenList=function(c){var u=this;return c.forEach(function(d){u=u.thenCore(d)}),u},l.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return l.convert(u,this)},l.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},l.prototype.error=function(c){return this.then(function(){throw new Error(c)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,qt.getPageSize=function(c,u,d){if(sn(c)==="object"){var f=c;c=f.orientation,u=f.unit||u,d=f.format||d}u=u||"mm",d=d||"a4",c=(""+(c||"P")).toLowerCase();var v,x=(""+d).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":v=1;break;case"mm":v=72/25.4;break;case"cm":v=72/2.54;break;case"in":v=72;break;case"px":v=.75;break;case"pc":case"em":v=12;break;case"ex":v=6;break;default:throw"Invalid unit: "+u}var C,N=0,E=0;if(y.hasOwnProperty(x))N=y[x][1]/v,E=y[x][0]/v;else try{N=d[1],E=d[0]}catch{throw new Error("Invalid format: "+d)}if(c==="p"||c==="portrait")c="p",E>N&&(C=E,E=N,N=C);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",N>E&&(C=E,E=N,N=C)}return{width:E,height:N,unit:u,k:v,orientation:c}},r.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(Iy):null;var d=new l(u);return u.worker?d:d.from(c).doCallback()}})(qt.API),qt.API.addJS=function(r){return zB=r,this.internal.events.subscribe("postPutResources",function(){Gp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Gp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),KB=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zB+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Gp!==void 0&&KB!==void 0&&this.internal.out("/Names <</JavaScript "+Gp+" 0 R>>")}),this},(function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),i=0;i<s.length;i++){var l=s[i],c=n.exec(l);if(c!=null){var u=c[1];t.internal.newObjectDeferredBegin(u,!1)}t.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(i=0;i<d;i++){var v=t.internal.newObject();f.push(v);var x=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<f.length;i++)t.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,s,i){var l={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(l),l},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var l=n.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var u=t.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])})(qt.API),(function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,s,i,l,c){var u,d=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=l||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,u=(function(v){for(var x,y=256*v.charCodeAt(4)+v.charCodeAt(5),C=v.length,N={width:0,height:0,numcomponents:1},E=4;E<C;E+=2){if(E+=y,e.indexOf(v.charCodeAt(E+1))!==-1){x=256*v.charCodeAt(E+5)+v.charCodeAt(E+6),N={width:256*v.charCodeAt(E+7)+v.charCodeAt(E+8),height:x,numcomponents:v.charCodeAt(E+9)};break}y=256*v.charCodeAt(E+2)+v.charCodeAt(E+3)}return N})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),u.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}f={data:t,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:d,index:n,alias:s}}return f}})(qt.API),qt.API.processPNG=function(r,e,t,n){if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){var s,i=xM(r,{checkCrc:!0}),l=i.width,c=i.height,u=i.channels,d=i.palette,f=i.depth;s=d&&u===1?(function(Q){for(var U=Q.width,V=Q.height,I=Q.data,L=Q.palette,F=Q.depth,ee=!1,ge=[],ue=[],fe=void 0,ae=!1,$=0,me=0;me<L.length;me++){var z=Wb(L[me],4),S=z[0],K=z[1],Y=z[2],G=z[3];ge.push(S,K,Y),G!=null&&(G===0?($++,ue.length<1&&ue.push(me)):G<255&&(ae=!0))}if(ae||$>1){ee=!0,ue=void 0;var oe=U*V;fe=new Uint8Array(oe);for(var ye=new DataView(I.buffer),Le=0;Le<oe;Le++){var be=Ny(ye,Le,F),je=Wb(L[be],4)[3];fe[Le]=je}}else $===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:I,alphaBytes:fe,needSMask:ee,palette:ge,mask:ue}})(i):u===2||u===4?(function(Q){for(var U=Q.data,V=Q.width,I=Q.height,L=Q.channels,F=Q.depth,ee=L===2?"DeviceGray":"DeviceRGB",ge=L-1,ue=V*I,fe=ge,ae=ue*fe,$=1*ue,me=Math.ceil(ae*F/8),z=Math.ceil($*F/8),S=new Uint8Array(me),K=new Uint8Array(z),Y=new DataView(U.buffer),G=new DataView(S.buffer),oe=new DataView(K.buffer),ye=!1,Le=0;Le<ue;Le++){for(var be=Le*L,je=0;je<fe;je++)e5(G,Ny(Y,be+je,F),Le*fe+je,F);var Ge=Ny(Y,be+fe,F);Ge<(1<<F)-1&&(ye=!0),e5(oe,Ge,1*Le,F)}return{colorSpace:ee,colorsPerPixel:ge,sMaskBitsPerComponent:ye?F:void 0,colorBytes:S,alphaBytes:K,needSMask:ye}})(i):(function(Q){var U=Q.data,V=Q.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:U instanceof Uint16Array?(function(I){for(var L=I.length,F=new Uint8Array(2*L),ee=new DataView(F.buffer,F.byteOffset,F.byteLength),ge=0;ge<L;ge++)ee.setUint16(2*ge,I[ge],!1);return F})(U):U,needSMask:!1}})(i);var v,x,y,C=s,N=C.colorSpace,E=C.colorsPerPixel,_=C.sMaskBitsPerComponent,P=C.colorBytes,H=C.alphaBytes,D=C.needSMask,J=C.palette,Z=C.mask,O=null;return n!==qt.API.image_compression.NONE&&typeof Uv=="function"?(O=(function(Q){var U;switch(Q){case qt.API.image_compression.FAST:U=11;break;case qt.API.image_compression.MEDIUM:U=13;break;case qt.API.image_compression.SLOW:U=14;break;default:U=12}return U})(n),v=this.decode.FLATE_DECODE,x="/Predictor ".concat(O," /Colors ").concat(E," /BitsPerComponent ").concat(f," /Columns ").concat(l),r=WB(P,Math.ceil(l*E*f/8),E,f,n),D&&(y=WB(H,Math.ceil(l*_/8),1,_,n))):(v=void 0,x=void 0,r=P,D&&(y=H)),(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(y&&this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),{alias:t,data:r,index:e,filter:v,decodeParameters:x,transparency:Z,palette:J,sMask:y,predictor:O,width:l,height:c,bitsPerComponent:f,sMaskBitsPerComponent:_,colorSpace:N}}},(function(r){r.processGIF89A=function(e,t,n,s){var i=new HM(e),l=i.width,c=i.height,u=[];i.decodeAndBlitFrameRGBA(0,u);var d={data:u,width:l,height:c},f=new Sy(100).encode(d,100);return r.processJPEG.call(this,f,t,n,s)},r.processGIF87A=r.processGIF89A})(qt.API),PA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},PA.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){un.log("bit decode error:"+t)}},PA.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*s*4,c=0;c<8&&8*s+c<this.width;c++){var u=this.palette[i>>7-c&1];this.data[l+4*c]=u.blue,this.data[l+4*c+1]=u.green,this.data[l+4*c+2]=u.red,this.data[l+4*c+3]=255}t!==0&&(this.pos+=4-t)}},PA.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<r;s++){var i=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*s*4,c=i>>4,u=15&i,d=this.palette[c];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*s+1>=this.width)break;d=this.palette[u],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},PA.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;if(s<this.palette.length){var l=this.palette[s];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}r!==0&&(this.pos+=4-r)}},PA.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&e)/e*255|0,c=(i>>5&e)/e*255|0,u=(i>>10&e)/e*255|0,d=i>>15?255:0,f=n*this.width*4+4*s;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=d}this.pos+=r}},PA.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&e)/e*255|0,u=(l>>5&t)/t*255|0,d=(l>>11)/e*255|0,f=s*this.width*4+4*i;this.data[f]=d,this.data[f+1]=u,this.data[f+2]=c,this.data[f+3]=255}this.pos+=r}},PA.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},PA.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=e*this.width*4+4*t;this.data[c]=i,this.data[c+1]=s,this.data[c+2]=n,this.data[c+3]=l}},PA.prototype.getData=function(){return this.data},(function(r){r.processBMP=function(e,t,n,s){var i=new PA(e,!1),l=i.width,c=i.height,u={data:i.getData(),width:l,height:c},d=new Sy(100).encode(u,100);return r.processJPEG.call(this,d,t,n,s)}})(qt.API),r5.prototype.getData=function(){return this.data},(function(r){r.processWEBP=function(e,t,n,s){var i=new r5(e),l=i.width,c=i.height,u={data:i.getData(),width:l,height:c},d=new Sy(100).encode(u,100);return r.processJPEG.call(this,d,t,n,s)}})(qt.API),qt.API.processRGBA=function(r,e,t){for(var n=r.data,s=n.length,i=new Uint8Array(s/4*3),l=new Uint8Array(s/4),c=0,u=0,d=0;d<s;d+=4){var f=n[d],v=n[d+1],x=n[d+2],y=n[d+3];i[c++]=f,i[c++]=v,i[c++]=x,l[u++]=y}var C=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},qt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},qu=qt.API,$p=qu.getCharWidthsArray=function(r,e){var t,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),c=e.widths?e.widths:s.metadata.Unicode.widths,u=c.fof?c.fof:1,d=e.kerning?e.kerning:s.metadata.Unicode.kerning,f=d.fof?d.fof:1,v=e.doKerning!==!1,x=0,y=r.length,C=0,N=c[0]||u,E=[];for(t=0;t<y;t++)n=r.charCodeAt(t),typeof s.metadata.widthOfString=="function"?E.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+l*(1e3/i)||0)/1e3):(x=v&&sn(d[n])==="object"&&!isNaN(parseInt(d[n][C],10))?d[n][C]/f:0,E.push((c[n]||N)/u+x)),C=n;return E},GB=qu.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return qu.processArabic&&(r=qu.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,s)/t:$p.apply(this,arguments).reduce(function(i,l){return i+l},0)},$B=function(r,e,t,n){for(var s=[],i=0,l=r.length,c=0;i!==l&&c+e[i]<t;)c+=e[i],i++;s.push(r.slice(0,i));var u=i;for(c=0;i!==l;)c+e[i]>n&&(s.push(r.slice(u,i)),c=0,u=i),c+=e[i],i++;return u!==i&&s.push(r.slice(u,i)),s},qB=function(r,e,t){t||(t={});var n,s,i,l,c,u,d,f=[],v=[f],x=t.textIndent||0,y=0,C=0,N=r.split(" "),E=$p.apply(this,[" ",t])[0];if(u=t.lineIndent===-1?N[0].length+2:t.lineIndent||0){var _=Array(u).join(" "),P=[];N.map(function(D){(D=D.split(/\s*\n/)).length>1?P=P.concat(D.map(function(J,Z){return(Z&&J.length?`
`:"")+J})):P.push(D[0])}),N=P,u=GB.apply(this,[_,t])}for(i=0,l=N.length;i<l;i++){var H=0;if(n=N[i],u&&n[0]==`
`&&(n=n.substr(1),H=1),x+y+(C=(s=$p.apply(this,[n,t])).reduce(function(D,J){return D+J},0))>e||H){if(C>e){for(c=$B.apply(this,[n,s,e-(x+y),e]),f.push(c.shift()),f=[c.pop()];c.length;)v.push([c.shift()]);C=s.slice(n.length-(f[0]?f[0].length:0)).reduce(function(D,J){return D+J},0)}else f=[n];v.push(f),x=C+u,y=E}else f.push(n),x+=y+C,y=E}return d=u?function(D,J){return(J?_:"")+D.join(" ")}:function(D){return D.join(" ")},v.map(d)},qu.splitTextToSize=function(r,e,t){var n,s=(t=t||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var v=this.internal.getFont(f.fontName,f.fontStyle),x="Unicode";return v.metadata[x]?{widths:v.metadata[x].widths||{0:1},kerning:v.metadata[x].kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/s;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=t.lineIndent;var c,u,d=[];for(c=0,u=n.length;c<u;c++)d=d.concat(qB.apply(this,[n[c],l,i]));return d},(function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[t[i]]=e[i],s[e[i]]=t[i];var l=function(x){return"0x"+parseInt(x,10).toString(16)},c=r.__fontmetrics__.compress=function(x){var y,C,N,E,_=["{"];for(var P in x){if(y=x[P],isNaN(parseInt(P,10))?C="'"+P+"'":(P=parseInt(P,10),C=(C=l(P).slice(2)).slice(0,-1)+s[C.slice(-1)]),typeof y=="number")y<0?(N=l(y).slice(3),E="-"):(N=l(y).slice(2),E=""),N=E+N.slice(0,-1)+s[N.slice(-1)];else{if(sn(y)!=="object")throw new Error("Don't know what to do with value type "+sn(y)+".");N=c(y)}_.push(C+N)}return _.push("}"),_.join("")},u=r.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,C,N,E,_={},P=1,H=_,D=[],J="",Z="",O=x.length-1,Q=1;Q<O;Q+=1)(E=x[Q])=="'"?y?(N=y.join(""),y=void 0):y=[]:y?y.push(E):E=="{"?(D.push([H,N]),H={},N=void 0):E=="}"?((C=D.pop())[0][C[1]]=H,N=void 0,H=C[0]):E=="-"?P=-1:N===void 0?n.hasOwnProperty(E)?(J+=n[E],N=parseInt(J,16)*P,P=1,J=""):J+=E:n.hasOwnProperty(E)?(Z+=n[E],H[N]=parseInt(Z,16)*P,P=1,N=void 0,Z=""):Z+=E;return _},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},v={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(x){var y=x.font,C=v.Unicode[y.postScriptName];C&&(y.metadata.Unicode={},y.metadata.Unicode.widths=C.widths,y.metadata.Unicode.kerning=C.kerning);var N=f.Unicode[y.postScriptName];N&&(y.metadata.Unicode.encoding=N,y.encoding=N.codePages[0])}])})(qt.API),(function(r){var e=function(t){for(var n=t.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=t.charCodeAt(i);return s};r.API.events.push(["addFont",function(t){var n=void 0,s=t.font,i=t.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?e(c):e(um(c)),l.metadata=r.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,n)}}])})(qt),qt.API.addSvgAsImage=function(r,e,t,n,s,i,l,c){if(isNaN(e)||isNaN(t))throw un.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw un.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=n,u.height=s;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return(ar.canvg?Promise.resolve(ar.canvg):oy(()=>import("./index.es-ByNMzkzP.js"),[])).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(d,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(f)}).then(function(){v.addImage(u.toDataURL("image/jpeg",1),e,t,n,s,l,c)})},qt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,t);return this},qt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,s,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),u=[],d=0,f=0,v=0;function x(C,N){var E,_=!1;for(E=0;E<C.length;E+=1)C[E]===N&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var y=c.length;for(v=0;v<y;v+=1)t[c[v]].value=t[c[v]].defaultValue,t[c[v]].explicitSet=!1}if(sn(r)==="object"){for(s in r)if(i=r[s],x(c,s)&&i!==void 0){if(t[s].type==="boolean"&&typeof i=="boolean")t[s].value=i;else if(t[s].type==="name"&&x(t[s].valueSet,i))t[s].value=i;else if(t[s].type==="integer"&&Number.isInteger(i))t[s].value=i;else if(t[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")u.push(String(i[d]-1));else if(i[d].length>1){for(f=0;f<i[d].length;f+=1)typeof i[d][f]!="number"&&(n=!1);n===!0&&u.push([i[d][0]-1,i[d][1]-1].join(" "))}t[s].value="["+u.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,N=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?N.push("/"+C+" /"+t[C].value):N.push("/"+C+" "+t[C].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+l.length+c.length+s.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+l+c+u),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(qt.API),(function(r){var e=r.API,t=e.pdfEscape16=function(i,l){for(var c,u=l.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],v=0,x=i.length;v<x;++v){if(c=l.metadata.characterToGlyph(i.charCodeAt(v)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=i.charCodeAt(v),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return f.join("");c=c.toString(16),f.push(d[4-c.length],c)}return f.join("")},n=function(i){var l,c,u,d,f,v,x;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],v=0,x=(c=Object.keys(i).sort(function(y,C){return y-C})).length;v<x;v++)l=c[v],u.length>=100&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(d=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),u.push("<"+l+"><"+d+">"));return u.length&&(f+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(l){var c=l.font,u=l.out,d=l.newObject,f=l.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="Identity-H"){for(var v=c.metadata.Unicode.widths,x=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),y="",C=0;C<x.length;C++)y+=String.fromCharCode(x[C]);var N=d();f({data:y,addLength1:!0,objectId:N}),u("endobj");var E=d();f({data:n(c.metadata.toUnicode),addLength1:!0,objectId:E}),u("endobj");var _=d();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+td(c.fontName)),u("/FontFile2 "+N+" 0 R"),u("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var P=d();u("<<"),u("/Type /Font"),u("/BaseFont /"+td(c.fontName)),u("/FontDescriptor "+_+" 0 R"),u("/W "+r.API.PDFObject.convert(v)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=d(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+E+" 0 R"),u("/BaseFont /"+td(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+P+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(l){var c=l.font,u=l.out,d=l.newObject,f=l.putStream;if(c.metadata instanceof r.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var v=c.metadata.rawData,x="",y=0;y<v.length;y++)x+=String.fromCharCode(v[y]);var C=d();f({data:x,addLength1:!0,objectId:C}),u("endobj");var N=d();f({data:n(c.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var E=d();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+C+" 0 R"),u("/Flags 96"),u("/FontBBox "+r.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+td(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=d();for(var _=0;_<c.metadata.hmtx.widths.length;_++)c.metadata.hmtx.widths[_]=parseInt(c.metadata.hmtx.widths[_]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+td(c.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]);var s=function(i){var l,c=i.text||"",u=i.x,d=i.y,f=i.options||{},v=i.mutex||{},x=v.pdfEscape,y=v.activeFontKey,C=v.fonts,N=y,E="",_=0,P="",H=C[N].encoding;if(C[N].encoding!=="Identity-H")return{text:c,x:u,y:d,options:f,mutex:v};for(P=c,N=y,Array.isArray(c)&&(P=c[0]),_=0;_<P.length;_+=1)C[N].metadata.hasOwnProperty("cmap")&&(l=C[N].metadata.cmap.unicode.codeMap[P[_].charCodeAt(0)]),l||P[_].charCodeAt(0)<256&&C[N].metadata.hasOwnProperty("Unicode")?E+=P[_]:E+="";var D="";return parseInt(N.slice(1))<14||H==="WinAnsiEncoding"?D=x(E,N).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):H==="Identity-H"&&(D=t(E,C[N])),v.isHex=!0,{text:D,x:u,y:d,options:f,mutex:v}};e.events.push(["postProcessText",function(i){var l=i.text||"",c=[],u={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?c.push([s(Object.assign({},u,{text:l[d][0]})).text,l[d][1],l[d][2]]):c.push(s(Object.assign({},u,{text:l[d]})).text);i.text=c}else i.text=s(Object.assign({},u,{text:l})).text}])})(qt),(function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(qt.API),(function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var s,i,l,c,u,d,f,v=e,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),P=!1,H=0;this.__bidiEngine__={};var D=function(I){var L=I.charCodeAt(),F=L>>8,ee=N[F];return ee!==void 0?v[256*ee+(255&L)]:F===252||F===253?"AL":_.test(F)?"L":F===8?"R":"N"},J=function(I){for(var L,F=0;F<I.length;F++){if((L=D(I.charAt(F)))==="L")return!1;if(L==="R")return!0}return!1},Z=function(I,L,F,ee){var ge,ue,fe,ae,$=L[ee];switch($){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":P=!1;break;case"N":case"AN":break;case"EN":P&&($="AN");break;case"AL":P=!0,$="R";break;case"WS":case"BN":$="N";break;case"CS":ee<1||ee+1>=L.length||(ge=F[ee-1])!=="EN"&&ge!=="AN"||(ue=L[ee+1])!=="EN"&&ue!=="AN"?$="N":P&&(ue="AN"),$=ue===ge?ue:"N";break;case"ES":$=(ge=ee>0?F[ee-1]:"B")==="EN"&&ee+1<L.length&&L[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&F[ee-1]==="EN"){$="EN";break}if(P){$="N";break}for(fe=ee+1,ae=L.length;fe<ae&&L[fe]==="ET";)fe++;$=fe<ae&&L[fe]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(ae=L.length,fe=ee+1;fe<ae&&L[fe]==="NSM";)fe++;if(fe<ae){var me=I[ee],z=me>=1425&&me<=2303||me===64286;if(ge=L[fe],z&&(ge==="R"||ge==="AL")){$="R";break}}}$=ee<1||(ge=L[ee-1])==="B"?"N":F[ee-1];break;case"B":P=!1,s=!0,$=H;break;case"S":i=!0,$="N"}return $},O=function(I,L,F){var ee=I.split("");return F&&Q(ee,F,{hiLevel:H}),ee.reverse(),L&&L.reverse(),ee.join("")},Q=function(I,L,F){var ee,ge,ue,fe,ae,$=-1,me=I.length,z=0,S=[],K=H?y:x,Y=[];for(P=!1,s=!1,i=!1,ge=0;ge<me;ge++)Y[ge]=D(I[ge]);for(ue=0;ue<me;ue++){if(ae=z,S[ue]=Z(I,Y,S,ue),ee=240&(z=K[ae][C[S[ue]]]),z&=15,L[ue]=fe=K[z][5],ee>0)if(ee===16){for(ge=$;ge<ue;ge++)L[ge]=1;$=-1}else $=-1;if(K[z][6])$===-1&&($=ue);else if($>-1){for(ge=$;ge<ue;ge++)L[ge]=fe;$=-1}Y[ue]==="B"&&(L[ue]=0),F.hiLevel|=fe}i&&(function(G,oe,ye){for(var Le=0;Le<ye;Le++)if(G[Le]==="S"){oe[Le]=H;for(var be=Le-1;be>=0&&G[be]==="WS";be--)oe[be]=H}})(Y,L,me)},U=function(I,L,F,ee,ge){if(!(ge.hiLevel<I)){if(I===1&&H===1&&!s)return L.reverse(),void(F&&F.reverse());for(var ue,fe,ae,$,me=L.length,z=0;z<me;){if(ee[z]>=I){for(ae=z+1;ae<me&&ee[ae]>=I;)ae++;for($=z,fe=ae-1;$<fe;$++,fe--)ue=L[$],L[$]=L[fe],L[fe]=ue,F&&(ue=F[$],F[$]=F[fe],F[fe]=ue);z=ae}z++}}},V=function(I,L,F){var ee=I.split(""),ge={hiLevel:H};return F||(F=[]),Q(ee,F,ge),(function(ue,fe,ae){if(ae.hiLevel!==0&&f)for(var $,me=0;me<ue.length;me++)fe[me]===1&&($=E.indexOf(ue[me]))>=0&&(ue[me]=E[$+1])})(ee,F,ge),U(2,ee,L,F,ge),U(1,ee,L,F,ge),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(I,L,F){if((function(ge,ue){if(ue)for(var fe=0;fe<ge.length;fe++)ue[fe]=fe;c===void 0&&(c=J(ge)),d===void 0&&(d=J(ge))})(I,L),l||!u||d)if(l&&u&&c^d)H=c?1:0,I=O(I,L,F);else if(!l&&u&&d)H=c?1:0,I=V(I,L,F),I=O(I,L);else if(!l||c||u||d){if(l&&!u&&c^d)I=O(I,L),c?(H=0,I=V(I,L,F)):(H=1,I=V(I,L,F),I=O(I,L));else if(l&&c&&!u&&d)H=1,I=V(I,L,F),I=O(I,L);else if(!l&&!u&&c^d){var ee=f;c?(H=1,I=V(I,L,F),H=0,f=!1,I=V(I,L,F),f=ee):(H=0,I=V(I,L,F),I=O(I,L),H=1,f=!1,I=V(I,L,F),f=ee,I=O(I,L))}}else H=0,I=V(I,L,F);else H=c?1:0,I=V(I,L,F);return I},this.__bidiEngine__.setOptions=function(I){I&&(l=I.isInputVisual,u=I.isOutputVisual,c=I.isInputRtl,d=I.isOutputRtl,f=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var c=0;for(l=[],c=0;c<s.length;c+=1)Object.prototype.toString.call(s[c])==="[object Array]"?l.push([t.doBidiReorder(s[c][0]),s[c][1],s[c][2]]):l.push([t.doBidiReorder(s[c])]);n.text=l}else n.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])})(qt),qt.API.TTFFont=(function(){function r(e){var t;if(this.rawData=e,t=this.contents=new yc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new nH(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new VM(this.contents),this.head=new zM(this),this.name=new YM(this),this.cmap=new M4(this),this.toUnicode={},this.hhea=new GM(this),this.maxp=new JM(this),this.hmtx=new XM(this),this.post=new qM(this),this.os2=new $M(this),this.loca=new rH(this),this.glyf=new ZM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,u,d;for(d=[],l=0,c=(u=this.bbox).length;l<c;l++)e=u[l],d.push(Math.round(e*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(t=s>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var s,i,l,c;for(l=0,i=0,c=(e=""+e).length;0<=c?i<c:i>c;i=0<=c?++i:--i)s=e.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/t)||0;return l*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r})();var $A,yc=(function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,s;for(s=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,s,i,l,c,u;return e=this.readByte(),t=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),l=this.readByte(),c=this.readByte(),u=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^l)+256*(255^c)+(255^u)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*s+16777216*i+65536*l+256*c+u},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)t=e[n],i.push(this.writeByte(t));return i},r})(),VM=(function(){var r;function e(t){var n,s,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,s,i,l,c,u,d,f,v,x,y,C,N;for(N in y=Object.keys(t).length,u=Math.log(2),v=16*Math.floor(Math.log(y)/u),l=Math.floor(v/u),f=16*y-v,(s=new yc).writeInt(this.scalarType),s.writeShort(y),s.writeShort(v),s.writeShort(l),s.writeShort(f),i=16*y,d=s.pos+i,c=null,C=[],t)for(x=t[N],s.writeString(N),s.writeInt(r(x)),s.writeInt(d),s.writeInt(x.length),C=C.concat(x),N==="head"&&(c=d),d+=x.length;d%4;)C.push(0),d++;return s.write(C),n=2981146554-r(s.data),s.pos=c+8,s.writeUInt32(n),s.data},r=function(t){var n,s,i,l;for(t=H4.call(t);t.length%4;)t.push(0);for(i=new yc(t),s=0,n=0,l=t.length;n<l;n=n+=4)s+=i.readUInt32();return 4294967295&s},e})(),KM={}.hasOwnProperty,No=function(r,e){for(var t in e)KM.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};$A=(function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r})();var zM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="head",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},r.prototype.encode=function(e){var t;return(t=new yc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},r})(),n5=(function(){function r(e,t){var n,s,i,l,c,u,d,f,v,x,y,C,N,E,_,P,H;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=e.readByte();break;case 4:for(y=e.readUInt16(),x=y/2,e.pos+=6,i=(function(){var D,J;for(J=[],u=D=0;0<=x?D<x:D>x;u=0<=x?++D:--D)J.push(e.readUInt16());return J})(),e.pos+=2,N=(function(){var D,J;for(J=[],u=D=0;0<=x?D<x:D>x;u=0<=x?++D:--D)J.push(e.readUInt16());return J})(),d=(function(){var D,J;for(J=[],u=D=0;0<=x?D<x:D>x;u=0<=x?++D:--D)J.push(e.readUInt16());return J})(),f=(function(){var D,J;for(J=[],u=D=0;0<=x?D<x:D>x;u=0<=x?++D:--D)J.push(e.readUInt16());return J})(),s=(this.length-e.pos+this.offset)/2,c=(function(){var D,J;for(J=[],u=D=0;0<=s?D<s:D>s;u=0<=s?++D:--D)J.push(e.readUInt16());return J})(),u=_=0,H=i.length;_<H;u=++_)for(E=i[u],n=P=C=N[u];C<=E?P<=E:P>=E;n=C<=E?++P:--P)f[u]===0?l=n+d[u]:(l=c[f[u]/2+(n-C)-(x-u)]||0)!==0&&(l+=d[u]),this.codeMap[n]=65535&l}e.pos=v}return r.encode=function(e,t){var n,s,i,l,c,u,d,f,v,x,y,C,N,E,_,P,H,D,J,Z,O,Q,U,V,I,L,F,ee,ge,ue,fe,ae,$,me,z,S,K,Y,G,oe,ye,Le,be,je,Ge,tt;switch(ee=new yc,l=Object.keys(e).sort(function(it,It){return it-It}),t){case"macroman":for(N=0,E=(function(){var it=[];for(C=0;C<256;++C)it.push(0);return it})(),P={0:0},i={},ge=0,$=l.length;ge<$;ge++)P[be=e[s=l[ge]]]==null&&(P[be]=++N),i[s]={old:e[s],new:P[e[s]]},E[s]=P[e[s]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(E),{charMap:i,subtable:ee.data,maxGlyphID:N+1};case"unicode":for(L=[],v=[],H=0,P={},n={},_=d=null,ue=0,me=l.length;ue<me;ue++)P[J=e[s=l[ue]]]==null&&(P[J]=++H),n[s]={old:J,new:P[J]},c=P[J]-s,_!=null&&c===d||(_&&v.push(_),L.push(s),d=c),_=s;for(_&&v.push(_),v.push(65535),L.push(65535),V=2*(U=L.length),Q=2*Math.pow(Math.log(U)/Math.LN2,2),x=Math.log(Q/2)/Math.LN2,O=2*U-Q,u=[],Z=[],y=[],C=fe=0,z=L.length;fe<z;C=++fe){if(I=L[C],f=v[C],I===65535){u.push(0),Z.push(0);break}if(I-(F=n[I].new)>=32768)for(u.push(0),Z.push(2*(y.length+U-C)),s=ae=I;I<=f?ae<=f:ae>=f;s=I<=f?++ae:--ae)y.push(n[s].new);else u.push(F-I),Z.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*U+2*y.length),ee.writeUInt16(0),ee.writeUInt16(V),ee.writeUInt16(Q),ee.writeUInt16(x),ee.writeUInt16(O),ye=0,S=v.length;ye<S;ye++)s=v[ye],ee.writeUInt16(s);for(ee.writeUInt16(0),Le=0,K=L.length;Le<K;Le++)s=L[Le],ee.writeUInt16(s);for(je=0,Y=u.length;je<Y;je++)c=u[je],ee.writeUInt16(c);for(Ge=0,G=Z.length;Ge<G;Ge++)D=Z[Ge],ee.writeUInt16(D);for(tt=0,oe=y.length;tt<oe;tt++)N=y[tt],ee.writeUInt16(N);return{charMap:n,subtable:ee.data,maxGlyphID:H+1}}},r})(),M4=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="cmap",r.prototype.parse=function(e){var t,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)t=new n5(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},r.encode=function(e,t){var n,s;return t==null&&(t="macroman"),n=n5.encode(e,t),(s=new yc).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},r})(),GM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="hhea",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},r})(),$M=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="OS/2",r.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n})(),this.charRange=(function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},r})(),qM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="post",r.prototype.parse=function(e){var t,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)t=e.readByte(),s.push(this.names.push(e.readString(t)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var l,c,u;for(u=[],i=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;i=0<=c?++l:--l)u.push(e.readUInt32());return u}).call(this)}},r})(),WM=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},YM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="name",r.prototype.parse=function(e){var t,n,s,i,l,c,u,d,f,v,x;for(e.pos=this.offset,e.readShort(),t=e.readShort(),c=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(u={},i=f=0,v=n.length;f<v;i=++f)s=n[i],e.pos=s.offset,d=e.readString(s.length),l=new WM(d,s),u[x=s.nameID]==null&&(u[x]=[]),u[s.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},r})(),JM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="maxp",r.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},r})(),XM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="hmtx",r.prototype.parse=function(e){var t,n,s,i,l,c,u;for(e.pos=this.offset,this.metrics=[],t=0,c=this.file.hhea.numberOfMetrics;0<=c?t<c:t>c;t=0<=c?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,f;for(f=[],t=d=0;0<=s?d<s:d>s;t=0<=s?++d:--d)f.push(e.readInt16());return f})(),this.widths=(function(){var d,f,v,x;for(x=[],d=0,f=(v=this.metrics).length;d<f;d++)i=v[d],x.push(i.advance);return x}).call(this),n=this.widths[this.widths.length-1],u=[],t=l=0;0<=s?l<s:l>s;t=0<=s?++l:--l)u.push(this.widths.push(n));return u},r.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},r})(),H4=[].slice,ZM=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="glyf",r.prototype.parse=function(){return this.cache={}},r.prototype.glyphFor=function(e){var t,n,s,i,l,c,u,d,f,v;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+n,l=(c=new yc(t.read(s))).readShort(),d=c.readShort(),v=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[e]=l===-1?new tH(c,d,v,u,f):new eH(c,l,d,v,u,f),this.cache[e]))},r.prototype.encode=function(e,t,n){var s,i,l,c,u;for(l=[],i=[],c=0,u=t.length;c<u;c++)s=e[t[c]],i.push(l.length),s&&(l=l.concat(s.encode(n)));return i.push(l.length),{table:l,offsets:i}},r})(),eH=(function(){function r(e,t,n,s,i,l){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=l,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r})(),tH=(function(){function r(e,t,n,s,i){var l,c;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new yc(H4.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r})(),rH=(function(){function r(){return r.__super__.constructor.apply(this,arguments)}return No(r,$A),r.prototype.tag="loca",r.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(e.readUInt32());return i}).call(this)},r.prototype.indexOf=function(e){return this.offsets[e]},r.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},r.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,l=0;l<n.length;++l)if(n[l]=s,i<t.length&&t[i]==l){++i,n[l]=s;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(s+=u)}for(var d=new Array(4*n.length),f=0;f<n.length;++f)d[4*f+3]=255&n[f],d[4*f+2]=(65280&n[f])>>8,d[4*f+1]=(16711680&n[f])>>16,d[4*f]=(4278190080&n[f])>>24;return d},r})(),nH=(function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,s,i;for(t in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=s[n];return e},r.prototype.glyphsFor=function(e){var t,n,s,i,l,c,u;for(s={},l=0,c=e.length;l<c;l++)s[i=e[l]]=this.font.glyf.glyphFor(i);for(i in t=[],s)(n=s[i])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in u=this.glyphsFor(t))n=u[i],s[i]=n;return s},r.prototype.encode=function(e,t){var n,s,i,l,c,u,d,f,v,x,y,C,N,E,_;for(s in n=M4.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),y={0:0},_=n.charMap)y[(u=_[s]).old]=u.new;for(C in x=n.maxGlyphID,l)C in y||(y[C]=x++);return f=(function(P){var H,D;for(H in D={},P)D[P[H]]=H;return D})(y),v=Object.keys(f).sort(function(P,H){return P-H}),N=(function(){var P,H,D;for(D=[],P=0,H=v.length;P<H;P++)c=v[P],D.push(f[c]);return D})(),i=this.font.glyf.encode(l,N,y),d=this.font.loca.encode(i.offsets,N),E={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},r})();qt.API.PDFObject=(function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,s,i,l;if(Array.isArray(t))return"["+(function(){var c,u,d;for(d=[],c=0,u=t.length;c<u;c++)n=t[c],d.push(e.convert(n));return d})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in i=["<<"],t)l=t[s],i.push("/"+s+" "+e.convert(l));return i.push(">>"),i.join(`
`)}return""+t},e})();const V4=({teacher:r,schedule:e,subjects:t,classes:n})=>{const s=(f,v)=>{const x=e.schedule[f]?.[v];if(!x?.classId)return null;if(x.classId==="KULP"||x.classId.startsWith("kulup-virtual-class-")||x.classId.startsWith("generic-class-kulup"))return{classItem:{name:"KULP"},subjectItem:{name:"KULP"}};const y=n.find(N=>N.id===x.classId),C=t.find(N=>N.id===x.subjectId);return{classItem:y,subjectItem:C}},i=()=>{let f=0,v=0;return Tr.forEach(x=>{gn.forEach(y=>{const C=e.schedule[x]?.[y];C?.classId&&C.classId!=="fixed-period"&&(C.subjectId==="auto-subject-kulup"?v++:f++)})}),{regular:f,club:v}},l=f=>{const v=Dd(f,r.level);return v?mu(v.startTime,v.endTime):`${f}. Ders`},{regular:c,club:u}=i(),d=u>0||r.isClubTeacher;return A.jsxs("div",{style:{width:"297mm",height:"210mm",padding:"15mm",fontSize:"12px",lineHeight:"1.2",fontFamily:'"Segoe UI", Tahoma, Geneva, Verdana, sans-serif',backgroundColor:"white",color:"#000000",position:"relative"},children:[A.jsx("div",{style:{position:"absolute",top:"15mm",right:"15mm",textAlign:"right"},children:A.jsx("div",{style:{fontWeight:"bold",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px"},children:A.jsx("img",{src:"https://cv.ide.k12.tr/images/ideokullari_logo.png",alt:"ide okullar",style:{height:"50px",objectFit:"contain"}})})}),A.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[A.jsx("p",{style:{margin:0,fontSize:"14px",fontWeight:"bold",color:"#333"},children:"ide okullar"}),A.jsx("p",{style:{margin:"4px 0",fontSize:"16px",fontWeight:"bold"},children:"2025  2026 Akademik Yl Haftalk Ders Program"})]}),A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",marginBottom:"10px"},children:[A.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",columnGap:"20px",rowGap:"4px"},children:[A.jsx("div",{style:{fontWeight:"bold",color:"#555",fontSize:"11px"},children:"DERS"}),A.jsx("div",{style:{fontWeight:"bold",fontSize:"13px"},children:r.branch.toUpperCase()}),A.jsx("div",{style:{fontWeight:"bold",color:"#555",fontSize:"11px"},children:"RETMEN"}),A.jsx("div",{style:{fontWeight:"bold",fontSize:"13px"},children:r.name.toUpperCase()})]}),A.jsx("div",{style:{fontSize:"12px",fontWeight:"bold"},children:new Date().toLocaleDateString("tr-TR")})]}),A.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1.5px solid #000"},children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{style:{border:"1.5px solid #000",padding:"6px",backgroundColor:"#fff",width:"100px",fontWeight:"bold"},children:"DERSLER"}),A.jsx("th",{style:{border:"1.5px solid #000",padding:"6px",backgroundColor:"#fff",width:"100px",fontWeight:"bold"},children:"SAATLER"}),Tr.map(f=>A.jsx("th",{style:{border:"1.5px solid #000",padding:"6px",backgroundColor:"#fff",fontWeight:"bold"},children:f.toUpperCase()},f))]})}),A.jsxs("tbody",{style:{textAlign:"center"},children:[A.jsxs("tr",{style:{backgroundColor:"#FFFF00",height:"30px"},children:[A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px",fontWeight:"bold"},children:r.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI"}),A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px"},children:r.level==="Ortaokul"?"08.30-08.40":"08.30-08.50"}),A.jsx("td",{colSpan:5,style:{border:"1.5px solid #000",padding:"6px",fontWeight:"bold"},children:r.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI / breakfast (20')"})]}),gn.map(f=>{const v=l(f),x=(r.level==="lkokul"||r.level==="Anaokulu")&&f==="5"||r.level==="Ortaokul"&&f==="6",y=r.level==="Ortaokul"&&f==="1",C=f==="8";return A.jsxs(gA.Fragment,{children:[A.jsxs("tr",{style:{height:"35px"},children:[A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px",fontWeight:"bold",backgroundColor:x?"#FFFF00":"transparent"},children:x?"5. DERS YEMEK":`${f}. DERS`}),A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px",backgroundColor:x?"#FFFF00":"transparent"},children:x?r.level==="lkokul"||r.level==="Anaokulu"?"11.50-12.25":"12.30-13.05":v.replace("-"," . ")}),x?A.jsx("td",{colSpan:5,style:{border:"1.5px solid #000",backgroundColor:"#FFFF00",padding:"6px",fontWeight:"bold"},children:"LE YEME/LUNCH"}):Tr.map(N=>{const E=s(N,f),_=E?.classItem?.name==="KULP"||E?.classItem?.name?.includes("KULP");return A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px",backgroundColor:_?"#f0f0f0":"transparent",backgroundImage:_?"radial-gradient(#999 0.5px, transparent 0.5px)":"none",backgroundSize:_?"3px 3px":"none"},children:A.jsxs("div",{style:{fontWeight:"bold",fontSize:"11px"},children:[E?.classItem?.name||"",E?.subjectItem&&E.subjectItem.name!=="KULP"&&A.jsxs("span",{style:{fontWeight:"normal",color:"#666",fontSize:"10px",marginLeft:"4px"},children:["(",E.subjectItem.name,")"]})]})},`${N}-${f}`)})]}),y&&A.jsxs("tr",{style:{backgroundColor:"#FFFF00",height:"30px"},children:[A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px",fontWeight:"bold"},children:"KAHVALTI"}),A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px"},children:"09.15-09.35"}),A.jsx("td",{colSpan:5,style:{border:"1.5px solid #000",padding:"6px",fontWeight:"bold"},children:"KAHVALTI / breakfast (20')"})]}),C&&A.jsxs("tr",{style:{backgroundColor:"#FFFF00",height:"30px"},children:[A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px",fontWeight:"bold"},children:"KAHVALTI"}),A.jsx("td",{style:{border:"1.5px solid #000",padding:"6px"},children:"14.35-14.45"}),A.jsx("td",{colSpan:5,style:{border:"1.5px solid #000",padding:"6px",fontWeight:"bold"},children:"KAHVALTI / snack (10')"})]})]},f)})]})]}),A.jsxs("div",{style:{marginTop:"10px",fontSize:"10px",color:"#666",borderTop:"1px dotted #ccc",paddingTop:"4px"},children:["* Toplam Yk: ",c," Saat ",d?`+ ${u||2} Kulp`:""]})]})},K4=({type:r="default"})=>{const e="animate-pulse bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded";return r==="wizard"?A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[A.jsxs("div",{className:"mb-8",children:[A.jsx("div",{className:`h-8 w-64 ${e} mb-3`}),A.jsx("div",{className:`h-4 w-96 ${e}`})]}),A.jsx("div",{className:"flex space-x-4 mb-8",children:[1,2,3,4,5].map(t=>A.jsx("div",{className:`h-12 w-32 ${e}`},t))}),A.jsx("div",{className:`h-96 w-full ${e}`})]}):r==="cards"?A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("div",{children:[A.jsx("div",{className:`h-8 w-48 ${e} mb-2`}),A.jsx("div",{className:`h-4 w-32 ${e}`})]}),A.jsx("div",{className:`h-10 w-32 ${e}`})]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[1,2,3,4,5,6,7,8].map(t=>A.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[A.jsx("div",{className:`h-12 w-12 ${e} mb-4`}),A.jsx("div",{className:`h-5 w-3/4 ${e} mb-2`}),A.jsx("div",{className:`h-4 w-full ${e} mb-4`}),A.jsx("div",{className:`h-4 w-1/2 ${e}`})]},t))})]}):r==="table"?A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[A.jsxs("div",{className:"flex justify-between items-center mb-8",children:[A.jsxs("div",{children:[A.jsx("div",{className:`h-8 w-48 ${e} mb-2`}),A.jsx("div",{className:`h-4 w-64 ${e}`})]}),A.jsx("div",{className:`h-10 w-32 ${e}`})]}),A.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[A.jsx("div",{className:"bg-gray-50 px-6 py-4 flex space-x-6",children:[1,2,3,4,5].map(t=>A.jsx("div",{className:`h-4 w-24 ${e}`},t))}),[1,2,3,4,5,6].map(t=>A.jsx("div",{className:"px-6 py-4 flex space-x-6 border-t border-gray-100",children:[1,2,3,4,5].map(n=>A.jsx("div",{className:`h-4 w-24 ${e}`},n))},t))]})]}):A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[A.jsxs("div",{className:"mb-8",children:[A.jsx("div",{className:`h-10 w-72 ${e} mb-3`}),A.jsx("div",{className:`h-5 w-96 ${e}`})]}),A.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(t=>A.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200",children:[A.jsx("div",{className:`h-8 w-8 ${e} mb-4`}),A.jsx("div",{className:`h-6 w-16 ${e} mb-2`}),A.jsx("div",{className:`h-4 w-24 ${e}`})]},t))}),A.jsx("div",{className:`h-64 w-full ${e}`})]})},sH=()=>{const{teachers:r,classes:e,subjects:t,schedules:n,loading:s,removeSchedule:i}=LE(),l=xc(),{success:c,error:u,warning:d}=xa(),{confirmation:f,hideConfirmation:v,confirmDelete:x}=Eo(),[y,C]=Ee.useState(""),[N,E]=Ee.useState(""),[_,P]=Ee.useState(""),[H,D]=Ee.useState(""),[J,Z]=Ee.useState(""),[O,Q]=Ee.useState(!1),[U,V]=Ee.useState(!1),I=Ee.useRef({}),L=be=>{y===be?C(""):(C(be),setTimeout(()=>{const je=document.getElementById(`teacher-card-${be}`);je&&je.scrollIntoView({behavior:"smooth",block:"start"})},100))},F=[...r].sort((be,je)=>be.name.localeCompare(je.name,"tr"));[...e].sort((be,je)=>be.name.localeCompare(je.name,"tr"));const ee=()=>F.filter(be=>{const je=!N||be.level===N,Ge=J.toLocaleLowerCase("tr-TR"),tt=!J||be.name.toLocaleLowerCase("tr-TR").includes(Ge)||be.branch.toLocaleLowerCase("tr-TR").includes(Ge);return je&&tt}),ge=be=>n.find(je=>je.teacherId===be),ue=(be,je,Ge)=>{const it=ge(be)?.schedule[je]?.[Ge];if(!it?.classId)return null;if(it.classId==="KULP"||it.classId.startsWith("kulup-virtual-class-")||it.classId.startsWith("generic-class-kulup"))return{classItem:{name:"KULP"},subjectItem:{name:"KULP"}};const It=e.find(ft=>ft.id===it.classId),le=t.find(ft=>ft.id===it.subjectId);return{classItem:It,subjectItem:le}},fe=(be,je)=>{const Ge={};return n.forEach(tt=>{const it=tt.schedule[be]?.[je];if(it?.classId&&it.classId!=="fixed-period"){const It=r.find(le=>le.id===tt.teacherId);It&&(Ge[it.classId]={teacher:It})}}),Ge},ae=()=>{const be=[];return Tr.forEach(je=>{gn.forEach(Ge=>{const tt=fe(je,Ge),it=Object.keys(tt);it.filter((le,ft)=>it.indexOf(le)!==ft).forEach(le=>{const ft=e.find(ct=>ct.id===le)?.name||"Bilinmeyen Snf";be.push(`${je} ${Ge}. ders: ${ft} snf akyor`)})})}),[...new Set(be)]},$=(be,je)=>{const Ge=Dd(be,je);return Ge?mu(Ge.startTime,Ge.endTime):`${be}. Ders`},me=()=>{const be=oe.filter(je=>n.some(Ge=>Ge.teacherId===je.id));if(be.length===0){d(" Silinecek Program Yok","Filtrelenen retmenler arasnda silinecek program bulunamad");return}x(`${be.length} retmen Program`,async()=>{V(!0);try{let je=0;const Ge=n.filter(tt=>be.some(it=>it.id===tt.teacherId));for(const tt of Ge)try{await i(tt.id),je++}catch(it){console.error(` Program silinemedi: ${tt.id}`,it)}je>0?c(" Programlar Silindi",`${je} retmen program baaryla silindi`):u(" Silme Hatas","Hibir program silinemedi")}catch(je){console.error(" Toplu silme hatas:",je),u(" Silme Hatas","Programlar silinirken bir hata olutu")}finally{V(!1)}})},z=async(be,je)=>{const Ge=I.current[be.id];if(!Ge)return null;try{await new Promise(pt=>setTimeout(pt,100));const tt=await Sd(Ge,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:Ge.scrollWidth,height:Ge.scrollHeight,scrollX:0,scrollY:0,logging:!1,removeContainer:!0,imageTimeout:0,onclone:pt=>{const he=pt.querySelector('[data-teacher-id="'+be.id+'"]');he&&(he.style.transform="none",he.style.position="static")}}),it=new qt({orientation:"landscape",unit:"mm",format:"a4"}),It=tt.toDataURL("image/png",1),le=297,ft=tt.height*le/tt.width,ct=ft<210?(210-ft)/2:0;return it.addImage(It,"PNG",0,ct,le,ft),it}catch(tt){return console.error(`${be.name} iin PDF oluturma hatas:`,tt),null}},S=async be=>{if(!ge(be.id))return;const Ge=await z(be);if(Ge){const it=`${be.name.replace(//g,"g").replace(//g,"G").replace(//g,"u").replace(//g,"U").replace(//g,"s").replace(//g,"S").replace(//g,"i").replace(//g,"I").replace(//g,"o").replace(//g,"O").replace(//g,"c").replace(//g,"C").replace(/[^a-zA-Z\s]/g,"").replace(/\s+/g,"_")}_Ders_Programi_${new Date().getFullYear()}.pdf`;Ge.save(it)}},K=async()=>{const be=oe.filter(je=>n.some(Ge=>Ge.teacherId===je.id));if(be.length===0){alert("ndirilecek program bulunamad");return}Q(!0);try{let je=null;for(let Ge=0;Ge<be.length;Ge++){const tt=be[Ge],it=n.find(It=>It.teacherId===tt.id);if(it){const It=await z(tt,it);if(It){if(Ge===0)je=It;else if(je){je.addPage();const le=I.current[tt.id];if(le){await new Promise(Qe=>setTimeout(Qe,100));const ft=await Sd(le,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1}),ct=ft.toDataURL("image/png",1),pt=297,he=ft.height*pt/ft.width,Se=he<210?(210-he)/2:0;je.addImage(ct,"PNG",0,Se,pt,he)}}}}}if(je){const Ge=`Tum_Ders_Programlari_${new Date().getFullYear()}.pdf`;je.save(Ge)}}catch(je){console.error("Toplu PDF oluturma hatas:",je),alert("PDF oluturulurken bir hata olutu")}finally{Q(!1)}},Y=()=>{Z("")},G=be=>{be.key==="Enter"&&(be.preventDefault(),be.target.blur()),be.key==="Escape"&&(Y(),be.target.blur())},oe=ee(),ye=ae(),Le=oe.filter(be=>n.some(je=>je.teacherId===be.id));return s?A.jsx(K4,{type:"table"}):A.jsxs("div",{className:"container-mobile",children:[A.jsxs("div",{className:"header-mobile",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(fi,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-semibold text-gray-900",children:"retmen Ders Programlar"}),A.jsx("p",{className:"text-responsive-sm text-gray-600",children:"Okuldaki tm retmen programlarn grntleyin"})]})]}),A.jsxs("div",{className:"button-group-mobile",children:[Le.length>0&&A.jsx(Ct,{onClick:me,icon:Ss,variant:"danger",disabled:U,className:"w-full sm:w-auto",children:U?"Siliniyor...":`Tm Programlar Sil (${Le.length})`}),A.jsx(Ct,{onClick:K,icon:Id,variant:"primary",disabled:Le.length===0||O,className:"w-full sm:w-auto",children:O?"PDF Oluturuluyor...":`Tm Programlar ndir (${Le.length})`})]})]}),A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 overflow-hidden",children:[A.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-4 py-2.5",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Qm,{className:"w-4 h-4 text-white/80"}),A.jsx("span",{className:"text-sm font-medium text-white",children:"retmen Ara ve Filtrele"})]}),(J||N||_||H)&&A.jsxs("span",{className:"text-xs bg-white/20 text-white px-2.5 py-1 rounded-full backdrop-blur-sm",children:[oe.length," sonu"]})]})}),A.jsx("div",{className:"p-4 bg-gray-50/50",children:A.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[A.jsx("div",{className:"flex-1 min-w-0",children:A.jsxs("div",{className:"relative group",children:[A.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:A.jsx(Qm,{className:"w-4 h-4 text-gray-400 group-focus-within:text-blue-500 transition-colors"})}),A.jsx("input",{type:"text",value:J,onChange:be=>Z(be.target.value),onKeyDown:G,placeholder:"sim veya bran yazarak arayn...",className:"w-full pl-10 pr-10 py-2.5 text-sm bg-white border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all shadow-sm hover:border-gray-300"}),J&&A.jsx("button",{onClick:Y,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-red-500 hover:bg-red-50 p-1 rounded-full transition-all",children:A.jsx(di,{className:"w-4 h-4"})})]})}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-1.5 hover:border-blue-300 transition-colors",children:[A.jsx(ms,{className:"w-4 h-4 text-blue-500"}),A.jsxs("select",{value:N,onChange:be=>E(be.target.value),className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer pr-1",children:[A.jsx("option",{value:"",children:"Kademe"}),A.jsx("option",{value:"Anaokulu",children:"Anaokulu"}),A.jsx("option",{value:"lkokul",children:"lkokul"}),A.jsx("option",{value:"Ortaokul",children:"Ortaokul"})]})]}),A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-1.5 hover:border-emerald-300 transition-colors",children:[A.jsx(fi,{className:"w-4 h-4 text-emerald-500"}),A.jsxs("select",{value:_,onChange:be=>P(be.target.value),className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer pr-1",children:[A.jsx("option",{value:"",children:"Gn"}),A.jsx("option",{value:"Pazartesi",children:"Pazartesi"}),A.jsx("option",{value:"Sal",children:"Sal"}),A.jsx("option",{value:"aramba",children:"aramba"}),A.jsx("option",{value:"Perembe",children:"Perembe"}),A.jsx("option",{value:"Cuma",children:"Cuma"})]})]}),A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-1.5 hover:border-orange-300 transition-colors",children:[A.jsx(ti,{className:"w-4 h-4 text-orange-500"}),A.jsxs("select",{value:H,onChange:be=>D(be.target.value),className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer pr-1",children:[A.jsx("option",{value:"",children:"Saat"}),gn.map(be=>A.jsxs("option",{value:be,children:[be,". Ders"]},be))]})]})]})]})}),(J||N||_||H)&&A.jsxs("div",{className:"px-4 py-2.5 bg-blue-50/50 border-t border-blue-100 flex flex-wrap items-center gap-2",children:[A.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Aktif:"}),J&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-gray-100 text-gray-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:['"',J,'"',A.jsx("button",{onClick:Y,className:"hover:bg-gray-200 p-0.5 rounded-full transition-colors",children:A.jsx(di,{className:"w-3 h-3"})})]}),N&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-blue-100 text-blue-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(ms,{className:"w-3 h-3"})," ",N,A.jsx("button",{onClick:()=>E(""),className:"hover:bg-blue-200 p-0.5 rounded-full transition-colors",children:A.jsx(di,{className:"w-3 h-3"})})]}),_&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-emerald-100 text-emerald-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(fi,{className:"w-3 h-3"})," ",_,A.jsx("button",{onClick:()=>P(""),className:"hover:bg-emerald-200 p-0.5 rounded-full transition-colors",children:A.jsx(di,{className:"w-3 h-3"})})]}),H&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-orange-100 text-orange-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(ti,{className:"w-3 h-3"})," ",H,". Ders",A.jsx("button",{onClick:()=>D(""),className:"hover:bg-orange-200 p-0.5 rounded-full transition-colors",children:A.jsx(di,{className:"w-3 h-3"})})]}),A.jsxs("button",{onClick:()=>{E(""),P(""),D(""),Z("")},className:"ml-auto text-xs text-red-600 hover:text-red-700 font-medium flex items-center gap-1 hover:bg-red-50 px-2 py-1 rounded-lg transition-colors",children:[A.jsx(di,{className:"w-3 h-3"})," Tmn Temizle"]})]})]}),ye.length>0&&A.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:A.jsxs("div",{className:"flex items-start",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(Zc,{className:"w-5 h-5 text-red-600 mt-0.5"})}),A.jsxs("div",{className:"ml-3",children:[A.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Program akmalar Tespit Edildi"}),A.jsx("div",{className:"mt-2 text-sm text-red-700",children:A.jsx("ul",{className:"list-disc list-inside space-y-1",children:ye.map((be,je)=>A.jsx("li",{children:be},je))})})]})]})}),A.jsxs("div",{className:"responsive-grid mb-6",children:[A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(ei,{className:"w-8 h-8 text-blue-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Toplam retmen"}),A.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.length})]})]})}),A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(ms,{className:"w-8 h-8 text-emerald-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Snf"}),A.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(wa,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Ders"}),A.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.length})]})]})}),A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(fi,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Hazr Program"}),A.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.length})]})]})})]}),A.jsxs("div",{className:"space-y-6",children:[oe.map(be=>{const je=ge(be.id),Ge=y===be.id;return A.jsxs("div",{id:`teacher-card-${be.id}`,className:`mobile-card mobile-spacing hover:shadow-md transition-shadow scroll-mt-20 ${Ge?"ring-2 ring-emerald-500 shadow-lg":""}`,children:[A.jsx("div",{className:"p-4 bg-gray-50 border-b",children:A.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{className:`w-3 h-3 rounded-full ${je?"bg-emerald-500":"bg-gray-300"}`}),A.jsxs("div",{className:"flex flex-col",children:[A.jsx("span",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:be.name}),A.jsx("span",{className:"text-xs text-gray-500",children:be.branch})]})]}),A.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[je&&(()=>{let tt=0,it=0;Object.values(je.schedule).forEach(le=>{Object.values(le||{}).forEach(ft=>{ft&&ft.classId!=="fixed-period"&&(ft.subjectId==="auto-subject-kulup"?it++:tt++)})});const It=it>0||be.isClubTeacher;return A.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-[11px] font-semibold bg-blue-50 text-blue-700 border border-blue-100 shadow-sm",children:[A.jsx(ti,{className:"w-3 h-3 mr-1"}),tt," S. ",It?`+ ${it||2} K.`:""]})})(),je&&A.jsxs(A.Fragment,{children:[A.jsx(Ct,{onClick:()=>L(be.id),variant:Ge?"primary":"secondary",size:"sm",className:"font-bold whitespace-nowrap",children:Ge?"Gizle":"Grntle"}),A.jsx(Ct,{onClick:()=>S(be),icon:Id,variant:"primary",size:"sm",className:"font-bold bg-ide-primary-500 hover:bg-ide-primary-600 text-white shadow-md",children:"PDF"}),A.jsx(Ct,{onClick:()=>l(`/schedules?teacherId=${be.id}`),icon:Co,variant:"primary",size:"sm",className:"font-bold bg-ide-accent-500 hover:bg-ide-accent-600 text-white shadow-md",children:"Dzenle"})]})]})]})}),Ge&&je&&A.jsxs("div",{className:"border-t border-gray-200",children:[A.jsxs("div",{className:"p-4 bg-emerald-50 border-b border-emerald-100 font-medium text-emerald-900",children:[" ",be.name," retmen Program - ",be.branch]}),A.jsx("div",{className:"table-responsive schedule-mobile",children:A.jsxs("table",{className:"min-w-full schedule-table",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:"Dersler"}),A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:"Saatler"}),Tr.map(tt=>(!_||tt===_)&&A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:tt},tt))]})}),A.jsxs("tbody",{className:"divide-y divide-gray-200",children:[!H&&A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border text-xs text-center border-black tracking-wide",children:be.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border text-xs text-center border-black whitespace-nowrap",children:be.level==="Ortaokul"?"08:30-08:40":"08:30-08:50"}),A.jsx("td",{colSpan:_?1:5,className:"px-3 py-2 font-semibold text-gray-900 border text-sm text-center border-black tracking-wide",children:be.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI / breakfast (20')"})]}),gn.map(tt=>{if(H&&tt!==H)return null;const it=(be.level==="lkokul"||be.level==="Anaokulu")&&tt==="5"||be.level==="Ortaokul"&&tt==="6",It=tt==="8";return A.jsxs(gA.Fragment,{children:[A.jsxs("tr",{className:it?"bg-yellow-400":"",children:[A.jsx("td",{className:`px-3 py-2 font-semibold text-gray-900 text-xs text-center border-black border tracking-wide ${it?"":"bg-gray-50"}`,children:it?"YEMEK":`${tt}. DERS`}),A.jsx("td",{className:`px-3 py-2 font-medium text-gray-900 text-xs text-center border-black border whitespace-nowrap ${it?"":"bg-gray-50"}`,children:it?be.level==="lkokul"||be.level==="Anaokulu"?"11:50-12:25":"12:30-13:05":$(tt,be.level)}),it?A.jsx("td",{colSpan:_?1:5,className:"px-3 py-2 font-semibold text-gray-900 border-black border text-sm text-center tracking-wide",children:"LE YEME/LUNCH"}):Tr.map(le=>{if(_&&le!==_)return null;const ft=ue(be.id,le,tt);return A.jsx("td",{className:"px-2 py-2 border-black border",children:ft?A.jsx("div",{className:"text-center p-2 rounded",children:A.jsxs("div",{className:"font-semibold text-gray-900 text-sm",children:[ft.classItem?.name,ft.subjectItem&&ft.subjectItem.name!=="KULP"&&A.jsxs("span",{className:"text-xs font-normal text-gray-500 ml-1",children:["(",ft.subjectItem.name,")"]})]})}):A.jsx("div",{className:"text-center p-2",children:A.jsx("div",{className:"text-gray-400 text-xs",children:"-"})})},`${le}-${tt}`)})]}),be.level==="Ortaokul"&&tt==="1"&&!H&&A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border border-black text-xs text-center tracking-wide",children:"KAHVALTI"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border border-black text-xs text-center",children:"09:15-09:35"}),A.jsx("td",{colSpan:_?1:5,className:"px-3 py-2 font-semibold text-gray-900 border border-black text-sm text-center tracking-wide",children:"KAHVALTI / breakfast (20')"})]}),It&&!H&&A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border border-black text-xs text-center tracking-wide",children:"KND"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border border-black text-xs text-center",children:"14:35-14:45"}),A.jsx("td",{colSpan:_?1:5,className:"px-3 py-2 font-semibold text-gray-900 border border-black text-sm text-center tracking-wide",children:"KND KAHVALTISI / snack (10')"})]})]},tt)})]})]})})]}),!Ge&&je&&A.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px",zIndex:-1,opacity:0,pointerEvents:"none"},children:A.jsx("div",{ref:tt=>I.current[be.id]=tt,"data-teacher-id":be.id,style:{transform:"none",position:"static"},children:A.jsx(V4,{teacher:be,schedule:je,classes:e,subjects:t})})})]},be.id)}),oe.length===0&&A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(ei,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:J?"Arama Sonucu Bulunamad":"retmen Bulunamad"}),A.jsx("p",{className:"text-gray-500 mb-4",children:J?`"${J}" aramas iin sonu bulunamad`:"Seilen filtrelere uygun retmen bulunmuyor"}),(J||N)&&A.jsxs("div",{className:"button-group-mobile flex justify-center",children:[J&&A.jsx(Ct,{onClick:Y,variant:"secondary",children:"Aramay Temizle"}),N&&A.jsx(Ct,{onClick:()=>E(""),variant:"secondary",children:"Filtreleri Temizle"})]})]})]}),A.jsx(KA,{...f,onClose:v})]})},iH=({classItem:r,schedule:e,teachers:t,subjects:n})=>{const s=()=>{let u=0;return e?(Tr.forEach(d=>{e[d]&&gn.forEach(f=>{const v=e[d][f];v&&!v.isFixed&&u++})}),u):0},i=u=>{const d=Dd(u,r.level);return d?mu(d.startTime,d.endTime):`${u}. Ders`},l=u=>{const d=r.level==="Ortaokul"?"6":"5";return u==="prep"?{title:r.level==="Ortaokul"?"Hazrlk":"Kahvalt",time:r.level==="Ortaokul"?"08:30-08:40":"08:30-08:50",isFixed:!0,bg:"#e6f3ff"}:u==="breakfast"?{title:"Kahvalt",time:"09:15-09:35",isFixed:!0,bg:"#fff8f0"}:u===d?{title:"Yemek",time:i(u),isFixed:!0,bg:"#e6ffe6"}:u==="afternoon-breakfast"?{title:"kindi Kahvalts",time:"14:35-14:45",isFixed:!0,bg:"#fffbf0"}:{title:`${u}.`,time:i(u),isFixed:!1,bg:"#e6f3ff"}},c=["prep","1","2","3","4","5","6","7","8","9","10","breakfast","afternoon-breakfast"].filter(u=>e?.[Tr[0]]?.[u]!==void 0).sort((u,d)=>{const f=v=>v==="prep"?0:isNaN(parseInt(v))?v==="breakfast"?1.5:v==="afternoon-breakfast"?8.5:99:parseInt(v);return f(u)-f(d)});return A.jsxs("div",{style:{width:"297mm",height:"210mm",padding:"10mm",fontSize:"12px",lineHeight:"1.4",fontFamily:'"Segoe UI", Tahoma, Geneva, Verdana, sans-serif',backgroundColor:"white",color:"#000000"},children:[A.jsxs("div",{style:{marginBottom:"8mm",paddingBottom:"4mm",borderBottom:"2px solid #000000"},children:[A.jsxs("h1",{style:{fontSize:"18px",fontWeight:"bold",margin:0},children:[r.name," Snf Ders Program"]}),A.jsxs("p",{style:{fontSize:"14px",margin:"4px 0 0 0"},children:[r.level,"  Haftalk Toplam: ",s()," ders saati"]})]}),A.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{style:{border:"1px solid #000000",padding:"8px 4px",textAlign:"center",fontWeight:"bold",backgroundColor:"#e6f3ff",width:"80px"},children:"SAAT"}),Tr.map(u=>A.jsx("th",{style:{border:"1px solid #000000",padding:"8px 4px",textAlign:"center",fontWeight:"bold",backgroundColor:"#e6f3ff"},children:u.toUpperCase()},u))]})}),A.jsx("tbody",{children:c.map((u,d)=>{const f=l(u),v=f.isFixed?f.bg:d%2===0?"#ffffff":"#f8f9fa";return A.jsxs("tr",{style:{backgroundColor:v},children:[A.jsxs("td",{style:{border:"1px solid #000000",padding:"8px 4px",textAlign:"center",fontWeight:"bold",backgroundColor:f.bg},children:[A.jsx("div",{style:{fontSize:"10px",fontWeight:"bold"},children:f.title}),A.jsx("div",{style:{fontSize:"8px",color:"#666666",marginTop:"2px"},children:f.time})]}),Tr.map(x=>{const y=e?.[x]?.[u];if(!y)return A.jsx("td",{style:{border:"1px solid #000000",padding:"8px 4px",textAlign:"center"},children:A.jsx("span",{style:{color:"#999999",fontSize:"9px"},children:"-"})},`${x}-${u}`);if(y.isFixed)return A.jsx("td",{style:{border:"1px solid #000000",padding:"8px 4px",textAlign:"center",backgroundColor:f.bg},children:y.subjectId},`${x}-${u}`);const C=y.teacher?.id==="KULP"||y.teacher?.id.startsWith("kulup-virtual-teacher-")||y.teacher?.id.startsWith("generic-teacher-kulup")?{name:"KULP"}:t.find(E=>E.id===y.teacher?.id),N=y.subject;return A.jsx("td",{style:{border:"1px solid #000000",padding:"8px 4px",textAlign:"center"},children:C?A.jsxs("div",{children:[A.jsx("div",{style:{fontWeight:"bold",fontSize:"10px",marginBottom:"2px"},children:C.name}),C.name!=="KULP"&&A.jsx("div",{style:{fontSize:"9px",color:"#666666"},children:N?.name||N?.branch||""})]}):A.jsx("span",{style:{color:"#999999",fontSize:"9px"},children:"Bo"})},`${x}-${u}`)})]},u)})})]}),A.jsxs("div",{style:{marginTop:"10mm",display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#666666"},children:[A.jsxs("div",{children:["Haftalk Toplam: ",s()," ders saati"]}),A.jsx("div",{children:"ide okullar Ders Program"})]})]})},aH=()=>{const r=Bo(),{teachers:e,classes:t,subjects:n,schedules:s,loading:i,removeSchedule:l}=LE(),{success:c,error:u,warning:d}=xa(),{confirmation:f,hideConfirmation:v,confirmDelete:x}=Eo(),[y,C]=Ee.useState(""),[N,E]=Ee.useState(""),[_,P]=Ee.useState(!1),[H,D]=Ee.useState(!1),[J,Z]=Ee.useState(!1),O=Ee.useRef({});Ee.useEffect(()=>{const S=new URLSearchParams(r.search).get("classId");S&&t.length>0&&t.find(Y=>Y.id===S)&&C(S)},[r.search,t]);const Q=[...t].sort((z,S)=>z.name.localeCompare(S.name,"tr"));Ee.useEffect(()=>{if(!i&&s.length>0){const z={};s.forEach(Y=>{Object.values(Y.schedule||{}).forEach(G=>{Object.values(G||{}).forEach(oe=>{oe&&oe.classId&&(z[oe.classId]=(z[oe.classId]||0)+1)})})});const S={};t.forEach(Y=>{Y.level==="Ortaokul"||Y.level==="lkokul"?S[Y.id]=44:S[Y.id]=30});let K=0;Object.entries(S).forEach(([Y,G])=>{(z[Y]||0)<G-5&&(t.find(ye=>ye.id===Y)?.name,K++)}),K>0&&console.error(` [ZET] ${K} snfta eksik ders var!`)}},[s,t,i]);const U=()=>Q.filter(z=>!N||z.level===N),V=z=>{const S={};return Tr.forEach(K=>{S[K]={},gn.forEach(Y=>{S[K][Y]=null,s.forEach(G=>{const oe=G.schedule[K]?.[Y];if(oe?.classId===z){let ye=e.find(be=>be.id===G.teacherId);const Le=n.find(be=>be.id===oe.subjectId);(G.teacherId==="KULP"||G.teacherId.startsWith("kulup-virtual-teacher-")||G.teacherId.startsWith("generic-teacher-kulup"))&&(ye={id:"KULP",name:"KULP"}),ye&&(S[K][Y]={teacher:ye,subject:Le})}})})}),S},I=(z,S,K)=>S==="prep"||S==="afternoon-breakfast",L=z=>{let S=0;const K=V(z);return Tr.forEach(Y=>{gn.forEach(G=>{K[Y][G]&&!I(Y,G)&&S++})}),S},F=(z,S)=>{let K=0;const Y=V(z);return gn.forEach(G=>{Y[S][G]&&!I(S,G)&&K++}),K},ee=z=>{t.find(K=>K.id===z)&&(y===z?C(""):(C(z),setTimeout(()=>{const K=document.getElementById(`class-card-${z}`);K&&K.scrollIntoView({behavior:"smooth",block:"start"})},100)))},ge=()=>{const z=$.filter(S=>L(S.id)>0);if(z.length===0){d(" Silinecek Program Yok","Filtrelenen snflar arasnda silinecek program bulunamad");return}x(`${z.length} Snf Program`,async()=>{Z(!0);try{let S=0;const K=s.filter(Y=>Object.values(Y.schedule).some(G=>Object.values(G).some(oe=>oe?.classId&&z.some(ye=>ye.id===oe.classId))));for(const Y of K)try{await l(Y.id),S++}catch(G){console.error(` Program silinemedi: ${Y.id}`,G)}S>0?(c(" Programlar Silindi",`${S} snf program baaryla silindi`),y&&z.some(Y=>Y.id===y)&&C("")):u(" Silme Hatas","Hibir program silinemedi")}catch(S){console.error(" Toplu silme hatas:",S),u(" Silme Hatas","Programlar silinirken bir hata olutu")}finally{Z(!1)}})},ue=async z=>{const S=O.current[z.id];if(!S)return null;try{await new Promise(be=>setTimeout(be,200));const K=await Sd(S,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:S.scrollWidth,height:S.scrollHeight,scrollX:0,scrollY:0,logging:!1,removeContainer:!0,imageTimeout:0}),Y=new qt({orientation:"landscape",unit:"mm",format:"a4"}),G=K.toDataURL("image/png",1),oe=297,ye=K.height*oe/K.width,Le=ye<210?(210-ye)/2:0;return Y.addImage(G,"PNG",0,Le,oe,ye),Y}catch(K){return console.error(`${z.name} iin PDF oluturma hatas:`,K),null}},fe=async z=>{P(!0);try{const S=await ue(z);if(S){const Y=`${z.name.replace(//g,"g").replace(//g,"G").replace(//g,"u").replace(//g,"U").replace(//g,"s").replace(//g,"S").replace(//g,"i").replace(//g,"I").replace(//g,"o").replace(//g,"O").replace(//g,"c").replace(//g,"C").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"_")}_Sinif_Programi_${new Date().getFullYear()}.pdf`;S.save(Y),c("PDF ndirildi",`${z.name} snf program baaryla indirildi`)}else u("PDF Hatas","PDF oluturulurken bir hata olutu")}catch{u("PDF Hatas","PDF oluturulurken bir hata olutu")}finally{P(!1)}},ae=async()=>{const S=U().filter(K=>L(K.id)>0);if(S.length===0){u("Program Bulunamad","ndirilecek snf program bulunamad");return}D(!0);try{let K=null;for(let Y=0;Y<S.length;Y++){const G=S[Y],oe=await ue(G);if(oe){if(Y===0)K=oe;else if(K){K.addPage();const ye=O.current[G.id];if(ye){await new Promise(it=>setTimeout(it,100));const Le=await Sd(ye,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",logging:!1}),be=Le.toDataURL("image/png",1),je=297,Ge=Le.height*je/Le.width,tt=Ge<210?(210-Ge)/2:0;K.addImage(be,"PNG",0,tt,je,Ge)}}}}if(K){const Y=`Tum_Sinif_Programlari_${new Date().getFullYear()}.pdf`;K.save(Y),c("Toplu PDF ndirildi",`${S.length} snf program baaryla indirildi`)}}catch{u("PDF Hatas","Toplu PDF oluturulurken bir hata olutu")}finally{D(!1)}},$=U(),me=$.filter(z=>L(z.id)>0);return i?A.jsx(K4,{type:"table"}):A.jsxs("div",{className:"container-mobile",children:[A.jsxs("div",{className:"header-mobile",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(ms,{className:"w-8 h-8 text-emerald-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-bold text-gray-900",children:"Snf Ders Programlar"}),A.jsx("p",{className:"text-responsive-sm text-gray-600",children:"Snf baznda ders programlarn grntleyin"})]})]}),A.jsxs("div",{className:"button-group-mobile",children:[me.length>0&&A.jsx(Ct,{onClick:ge,icon:Ss,variant:"danger",disabled:J,className:"w-full sm:w-auto",children:J?"Siliniyor...":`Tm Programlar Sil (${me.length})`}),A.jsx(Ct,{onClick:ae,icon:Id,variant:"primary",disabled:me.length===0||H,className:"w-full sm:w-auto",children:H?"PDF Oluturuluyor...":`Tm Programlar ndir (${me.length})`})]})]}),A.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 overflow-hidden",children:[A.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 px-4 py-2.5",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(ld,{className:"w-4 h-4 text-white/80"}),A.jsx("span",{className:"text-sm font-medium text-white",children:"Snf Se ve Filtrele"})]}),y&&A.jsxs("span",{className:"text-xs bg-white/20 text-white px-2.5 py-1 rounded-full backdrop-blur-sm",children:[$.length," snf"]})]})}),A.jsx("div",{className:"p-4 bg-gray-50/50",children:A.jsxs("div",{className:"flex flex-col lg:flex-row gap-3",children:[A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-2 hover:border-emerald-300 transition-colors flex-1 lg:flex-none lg:w-48",children:[A.jsx(ms,{className:"w-4 h-4 text-emerald-500 flex-shrink-0"}),A.jsxs("select",{value:N,onChange:z=>E(z.target.value),className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer flex-1 pr-1",children:[A.jsx("option",{value:"",children:"Tm Kademeler"}),A.jsx("option",{value:"Anaokulu",children:"Anaokulu"}),A.jsx("option",{value:"lkokul",children:"lkokul"}),A.jsx("option",{value:"Ortaokul",children:"Ortaokul"})]})]}),A.jsxs("div",{className:"flex items-center gap-1 bg-white border-2 border-gray-200 rounded-xl px-3 py-2 hover:border-blue-300 transition-colors flex-1",children:[A.jsx(wa,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),A.jsxs("select",{value:y,onChange:z=>{C(z.target.value)},className:"bg-transparent text-sm text-gray-700 font-medium focus:outline-none cursor-pointer flex-1 pr-1",children:[A.jsx("option",{value:"",children:"Snf Seiniz..."}),$.map(z=>A.jsxs("option",{value:z.id,children:[z.name," (",z.level,")"]},z.id))]})]})]})}),(N||y)&&A.jsxs("div",{className:"px-4 py-2.5 bg-emerald-50/50 border-t border-emerald-100 flex flex-wrap items-center gap-2",children:[A.jsx("span",{className:"text-xs text-gray-500 mr-1",children:"Seili:"}),N&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-emerald-100 text-emerald-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(ms,{className:"w-3 h-3"})," ",N,A.jsx("button",{onClick:()=>E(""),className:"hover:bg-emerald-200 p-0.5 rounded-full transition-colors",children:A.jsx("span",{className:"text-xs",children:""})})]}),y&&A.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs bg-blue-100 text-blue-700 pl-2.5 pr-1.5 py-1 rounded-full font-medium",children:[A.jsx(wa,{className:"w-3 h-3"})," ",$.find(z=>z.id===y)?.name,A.jsx("button",{onClick:()=>C(""),className:"hover:bg-blue-200 p-0.5 rounded-full transition-colors",children:A.jsx("span",{className:"text-xs",children:""})})]}),A.jsx("button",{onClick:()=>{E(""),C("")},className:"ml-auto text-xs text-red-600 hover:text-red-700 font-medium hover:bg-red-50 px-2 py-1 rounded-lg transition-colors",children:"Temizle"})]})]}),A.jsxs("div",{className:"responsive-grid gap-responsive mb-6",children:[A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(ms,{className:"w-8 h-8 text-emerald-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Snf"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(fi,{className:"w-8 h-8 text-blue-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Programl Snf"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900",children:me.length})]})]})}),A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(ei,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Aktif retmen"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})}),A.jsx("div",{className:"mobile-card mobile-spacing",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(wa,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Ders"}),A.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})})]}),A.jsxs("div",{className:"space-y-4",children:[A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[A.jsx(ld,{className:"w-6 h-6 mr-2 text-emerald-600"}),"Tm Snf Programlar"]}),A.jsxs("p",{className:"text-sm text-gray-600",children:[$.length," snf  ",me.length," programl"]})]}),$.map(z=>{const S=L(z.id),K=y===z.id;return A.jsxs("div",{id:`class-card-${z.id}`,className:`mobile-card mobile-spacing hover:shadow-md transition-shadow scroll-mt-20 ${K?"ring-2 ring-emerald-500 shadow-lg":""}`,children:[A.jsx("div",{className:"p-4 bg-gray-50 border-b",children:A.jsxs("div",{className:"flex items-center justify-between",children:[A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("div",{className:`w-3 h-3 rounded-full ${S>0?"bg-emerald-500":"bg-gray-300"}`}),A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:z.name}),A.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[A.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z.level==="Anaokulu"?"bg-green-100 text-green-800":z.level==="lkokul"?"bg-blue-100 text-blue-800":"bg-ide-primary-100 text-ide-accent-800"}`,children:z.level}),A.jsx("span",{className:"text-sm text-gray-600",children:S>0?`${S} ders saati`:"Program yok"})]})]})]}),A.jsx("div",{className:"flex items-center space-x-2",children:S>0?A.jsxs(A.Fragment,{children:[A.jsx(Ct,{onClick:()=>ee(z.id),variant:K?"primary":"secondary",size:"sm",children:K?"Grntleniyor":"Grntle"}),A.jsx(Ct,{onClick:()=>fe(z),icon:Id,variant:"primary",size:"sm",disabled:_,children:"PDF ndir"})]}):A.jsx("span",{className:"inline-flex px-3 py-2 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Program Yok"})})]})}),K&&S>0&&(()=>{const Y=(G,oe)=>{const ye=Dd(G,oe);return ye?mu(ye.startTime,ye.endTime):`${G}. Ders`};return A.jsxs("div",{className:"border-t border-emerald-200 bg-white",children:[A.jsx("div",{className:"p-4 bg-emerald-50",children:A.jsx("div",{className:"flex items-center justify-between",children:A.jsxs("div",{children:[A.jsxs("h3",{className:"font-bold text-emerald-900 text-lg",children:[" ",z.name," Snf Ders Program"]}),A.jsxs("p",{className:"text-emerald-700 mt-1",children:[A.jsx("span",{className:"font-medium",children:z.level})," ",A.jsxs("span",{className:"ml-2",children:["Haftalk toplam: ",A.jsxs("strong",{children:[S," ders saati"]})]})]})]})})}),A.jsx("div",{className:"table-responsive schedule-mobile",children:A.jsxs("table",{className:"min-w-full schedule-table",children:[A.jsx("thead",{className:"bg-gray-50",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:"Dersler"}),A.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:"Saatler"}),Tr.map(G=>A.jsxs("th",{className:"px-3 py-2 text-center text-[10px] font-semibold text-gray-700 uppercase border bg-gray-50 tracking-wider",children:[A.jsx("div",{children:G}),A.jsx("div",{className:"text-[9px] mt-1",children:A.jsxs("span",{className:"inline-flex px-2 py-0.5 text-[9px] font-semibold rounded-full bg-emerald-100 text-emerald-700",children:[F(z.id,G)," ders"]})})]},G))]})}),A.jsxs("tbody",{className:"divide-y divide-gray-200",children:[A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border text-xs text-center border-black tracking-wide",children:z.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border text-xs text-center border-black whitespace-nowrap",children:z.level==="Ortaokul"?"08:30-08:40":"08:30-08:50"}),A.jsx("td",{colSpan:5,className:"px-3 py-2 font-semibold text-gray-900 border text-sm text-center border-black tracking-wide",children:z.level==="Ortaokul"?"HAZIRLIK":"KAHVALTI / breakfast (20')"})]}),gn.map(G=>{const oe=V(z.id),ye=(z.level==="lkokul"||z.level==="Anaokulu")&&G==="5"||z.level==="Ortaokul"&&G==="6",Le=G==="8";return A.jsxs(gA.Fragment,{children:[A.jsxs("tr",{className:ye?"bg-yellow-400":"",children:[A.jsx("td",{className:`px-3 py-2 font-semibold text-gray-900 text-xs text-center border-black border tracking-wide ${ye?"":"bg-gray-50"}`,children:ye?"YEMEK":`${G}. DERS`}),A.jsx("td",{className:`px-3 py-2 font-medium text-gray-900 text-xs text-center border-black border whitespace-nowrap ${ye?"":"bg-gray-50"}`,children:ye?z.level==="lkokul"||z.level==="Anaokulu"?"11:50-12:25":"12:30-13:05":Y(G,z.level)}),ye?A.jsx("td",{colSpan:5,className:"px-3 py-2 font-semibold text-gray-900 border-black border text-sm text-center tracking-wide",children:"LE YEME / LUNCH"}):Tr.map(be=>{const je=oe[be][G];return A.jsx("td",{className:"px-2 py-2 border-black border",children:je?A.jsxs("div",{className:"text-center p-2 rounded",children:[A.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:je.teacher.name==="KULP"?"KULP":je.teacher.name.length>20?je.teacher.name.substring(0,20)+"...":je.teacher.name}),je.teacher.name!=="KULP"&&je.subject?.name&&A.jsxs("span",{className:"text-xs font-normal text-gray-500",children:["(",je.subject.name,")"]})]}):A.jsx("div",{className:"text-center text-gray-300 text-xs",children:""})},`${be}-${G}`)})]}),Le&&A.jsxs("tr",{className:"bg-yellow-400",children:[A.jsx("td",{className:"px-3 py-2 font-semibold text-gray-900 border text-xs text-center border-black tracking-wide",children:"KND"}),A.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 border text-xs text-center border-black whitespace-nowrap",children:"14:35-14:45"}),A.jsx("td",{colSpan:5,className:"px-3 py-2 font-semibold text-gray-900 border text-sm text-center border-black tracking-wide",children:"KND KAHVALTISI / afternoon snack (10')"})]})]},G)})]})]})})]})})(),S>0&&A.jsx(A.Fragment,{children:A.jsx("div",{style:{position:"absolute",left:"-9999px",top:"-9999px",zIndex:-1,opacity:0,pointerEvents:"none"},children:A.jsx("div",{ref:Y=>O.current[z.id]=Y,"data-class-id":z.id,style:{transform:"none",position:"static"},children:A.jsx(iH,{classItem:z,schedule:V(z.id),teachers:e,subjects:n})})})})]},z.id)})]}),$.length===0&&A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(ms,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Snf Bulunamad"}),A.jsx("p",{className:"text-gray-500 mb-4",children:"Seilen filtrelere uygun snf bulunmuyor"}),A.jsx(Ct,{onClick:()=>E(""),variant:"secondary",children:"Filtreleri Temizle"})]}),A.jsx(KA,{isOpen:f.isOpen,onClose:v,onConfirm:f.onConfirm,title:f.title,message:f.message,type:f.type,confirmText:f.confirmText,cancelText:f.cancelText,confirmVariant:f.confirmVariant})]})},AH=()=>{const{data:r}=or("teachers"),{data:e}=or("classes"),{data:t}=or("subjects"),{data:n}=or("schedules"),[s,i]=Ee.useState(""),[l,c]=Ee.useState(!1),[u,d]=Ee.useState(!1),f=Ee.useRef(null),v=[...r].sort((E,_)=>E.name.localeCompare(_.name,"tr")),x=async()=>{if(!s||!f.current)return;const E=r.find(P=>P.id===s),_=n.find(P=>P.teacherId===s);if(!E||!_){alert("Seilen retmen iin program bulunamad");return}d(!0);try{const P=l;P||(c(!0),await new Promise(I=>setTimeout(I,200)));const H=await Sd(f.current,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:f.current.scrollWidth,height:f.current.scrollHeight,scrollX:0,scrollY:0,logging:!1,removeContainer:!0,imageTimeout:0}),D=new qt({orientation:"landscape",unit:"mm",format:"a4"}),J=H.toDataURL("image/png",1),Z=297,O=H.height*Z/H.width,Q=O<210?(210-O)/2:0;D.addImage(J,"PNG",0,Q,Z,O);const V=`${E.name.replace(//g,"g").replace(//g,"G").replace(//g,"u").replace(//g,"U").replace(//g,"s").replace(//g,"S").replace(//g,"i").replace(//g,"I").replace(//g,"o").replace(//g,"O").replace(//g,"c").replace(//g,"C").replace(/[^a-zA-Z\s]/g,"").replace(/\s+/g,"_")}_Ders_Programi_${new Date().getFullYear()}.pdf`;D.save(V),P||c(!1)}catch(P){console.error("PDF oluturma hatas:",P),alert("PDF oluturulurken bir hata olutu")}finally{d(!1)}},y=v.map(E=>({value:E.id,label:`${E.name} (${E.branch} - ${E.level})`})),C=r.find(E=>E.id===s),N=n.find(E=>E.teacherId===s);return A.jsxs("div",{className:"container-mobile",children:[A.jsx("div",{className:"header-mobile",children:A.jsxs("div",{className:"flex items-center",children:[A.jsx(Zc,{className:"w-8 h-8 text-orange-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-bold text-gray-900",children:"PDF kt"}),A.jsx("p",{className:"text-responsive-sm text-gray-600",children:"retmen ders programlarn PDF olarak indirin"})]})]})}),A.jsxs("div",{className:"mobile-card mobile-spacing",children:[A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 items-center",children:[A.jsx("div",{className:"lg:col-span-4",children:A.jsx(Wc,{label:"retmen Sein",placeholder:"retmen ara veya se...",value:s,onChange:i,options:y,required:!0})}),A.jsx("div",{className:"lg:col-span-4 flex items-end justify-center",children:C&&N&&A.jsx(Ct,{onClick:()=>c(!l),icon:Bg,variant:"secondary",className:"w-full",children:l?"nizlemeyi Gizle":"nizleme Gster"})}),A.jsx("div",{className:"lg:col-span-4 flex items-end justify-end",children:C&&N&&A.jsx(Ct,{onClick:x,icon:Id,variant:"primary",disabled:u,className:"w-full",children:u?"PDF Oluturuluyor...":"PDF ndir"})})]}),A.jsxs("div",{className:"mt-6",children:[C&&!N&&A.jsx("div",{className:"ide-notification ide-notification-warning",children:A.jsxs("div",{className:"flex items-start",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(Zc,{className:"w-5 h-5 text-ide-accent-600 mt-0.5"})}),A.jsxs("div",{className:"ml-3",children:[A.jsx("h3",{className:"text-sm font-medium text-ide-accent-800",children:"Program Bulunamad"}),A.jsxs("p",{className:"text-sm text-ide-accent-700 mt-1",children:[A.jsx("strong",{children:C.name}),' iin henz program oluturulmam. nce "Program Olutur\\" blmnden program oluturun, sonra PDF olarak indirebilirsiniz.']})]})]})}),C&&N&&A.jsx("div",{className:"ide-notification ide-notification-success",children:A.jsxs("div",{className:"flex items-start",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(Zc,{className:"w-5 h-5 text-ide-secondary-600 mt-0.5"})}),A.jsxs("div",{className:"ml-3",children:[A.jsx("h3",{className:"text-sm font-medium text-ide-secondary-800",children:"Program Hazr"}),A.jsxs("p",{className:"text-sm text-ide-secondary-700 mt-1",children:[A.jsx("strong",{children:C.name})," iin program hazr. nizleme gsterip PDF olarak indirebilirsiniz."]}),A.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-xs text-ide-secondary-600",children:[A.jsxs("div",{children:[A.jsx("p",{children:" Gerek ekran grnts"}),A.jsx("p",{children:" Tam Trke karakter destei"}),A.jsx("p",{children:" Yksek znrlk"}),A.jsx("p",{children:" Renkli grnm"})]}),A.jsxs("div",{children:[A.jsx("p",{children:" Profesyonel tasarm"}),A.jsx("p",{children:" Yazdrma dostu"}),A.jsx("p",{children:" Okul logosu"}),A.jsx("p",{children:" mza alanlar"})]})]})]})]})})]})]}),!C&&A.jsxs("div",{className:"text-center py-12 mobile-card mt-6",children:[A.jsx(Zc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"PDF ndirmek in retmen Sein"}),A.jsx("p",{className:"text-gray-500 mb-4",children:"Bir retmen seerek ders programn PDF olarak indirebilirsiniz"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-400 max-w-md mx-auto",children:[A.jsxs("div",{className:"space-y-1",children:[A.jsx("p",{children:" Gerek ekran grnts"}),A.jsx("p",{children:" Tam Trke karakter destei"}),A.jsx("p",{children:" Yksek znrlk"}),A.jsx("p",{children:" Renkli grnm"})]}),A.jsxs("div",{className:"space-y-1",children:[A.jsx("p",{children:" Profesyonel tasarm"}),A.jsx("p",{children:" Yazdrma dostu"}),A.jsx("p",{children:" Okul logosu"}),A.jsx("p",{children:" mza alanlar"})]})]})]}),C&&N&&A.jsx("div",{className:`mt-8 ${l?"block":"hidden"}`,children:A.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Program nizlemesi"}),A.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:A.jsx("div",{ref:f,children:A.jsx(V4,{teacher:C,schedule:N,subjects:t,classes:e})})})]})})]})},s5=r=>{if(typeof r!="string"||!r.trim())return null;const e=r.trim().toLocaleLowerCase("tr-TR");return e.includes("anaokul")?"Anaokulu":e.includes("ilkokul")?"lkokul":e.includes("ortaokul")?"Ortaokul":null},oH=r=>{const e=new Map,t=new Map,n=new Map,s=[],l=r.split(`
`).filter(d=>d.trim()&&!d.startsWith(";")).slice(1),c=new Map;l.forEach((d,f)=>{const x=d.replace(/^\uFEFF/,"").replace(/\r$/,"").split(";").map(Q=>(Q||"").trim().replace(/^"|"$/g,""));if(x.length<6){d.trim().length>5&&s.push(`${f+2}. satrda eksik stun var.`);return}const[y,C,N,E,_,P,H,D,J]=x,Z=parseInt(P,10)||0;_.split(/[/,|]|\s+-\s+/).map(Q=>Q.trim()).filter(Q=>!!Q).forEach(Q=>{c.has(Q)||c.set(Q,new Map);const U=c.get(Q),V=y;U.has(V)||U.set(V,new Map);const I=U.get(V),L=E;I.has(L)||I.set(L,{hours:0,branch:C,level:N,pattern:H,isClubTeacher:D?.toLowerCase()==="x",isClubClass:J?.toLowerCase()==="x"}),I.get(L).hours+=Z})}),c.forEach((d,f)=>{const v=SL(f);if(!t.has(v)){const C=Array.from(d.values())[0],N=C?Array.from(C.values())[0]:null,E=N?s5(N.level):"lkokul";t.set(v,{id:v,name:f,level:E||"lkokul",levels:E?[E]:["lkokul"],createdAt:new Date,assignments:[],teacherIds:[],classTeacherId:null,isClubClass:N?.isClubClass||!1})}const x=t.get(v),y=new Set(x.levels||[]);d.forEach((C,N)=>{const E=N.split(/[/,|]/).map(_=>_.trim()).filter(_=>!!_);C.forEach((_,P)=>{const H=_.level.split("|").map(Z=>s5(Z.trim())).filter(Z=>!!Z),D=_.branch.split(/[/,|]/).map(Z=>Z.trim()).filter(Z=>!!Z);H.forEach(Z=>y.add(Z));const J=kL(f,N,P);n.has(J)||n.set(J,{id:J,name:P,branch:D.join(" / "),level:H[0]||"lkokul",levels:H,weeklyHours:_.hours,distributionPattern:_.pattern||null,className:f,createdAt:new Date}),E.forEach(Z=>{const O=NL(Z);e.has(O)||e.set(O,{id:O,name:Z,branch:D.join(" / "),branches:D,level:H[0]||"lkokul",levels:H,totalWeeklyHours:0,isClubTeacher:_.isClubTeacher,createdAt:new Date});const Q=e.get(O);Q.totalWeeklyHours=(Q.totalWeeklyHours||0)+_.hours;const U=new Set(Q.branches);D.forEach(L=>U.add(L)),Q.branches=Array.from(U);const V=new Set(Q.levels);H.forEach(L=>V.add(L)),Q.levels=Array.from(V);let I=x.assignments.find(L=>L.teacherId===O);I||(I={teacherId:O,subjectIds:[]},x.assignments.push(I),x.teacherIds.includes(O)||x.teacherIds.push(O)),I.subjectIds.includes(J)||I.subjectIds.push(J)})})}),x.levels=Array.from(y)});const u=Array.from(e.values());return u.forEach(d=>{d.isClubTeacher&&(d.totalWeeklyHours=(d.totalWeeklyHours||0)+2)}),{teachers:u,classes:Array.from(t.values()),subjects:[...Array.from(n.values()),{id:"auto-subject-kulup",name:"KULP",branch:"KULP",level:"lkokul",levels:["lkokul","Ortaokul"],weeklyHours:2,createdAt:new Date}],errors:s}},lH=(r,e,t,n)=>{const s=["Pazartesi","Sal","aramba","Perembe","Cuma"],i=[],l=r.find(d=>d.teacherId===n);if(!l)return[];const c=fA(e),u=fA(t);for(const d of s){const f=l.schedule[d];if(!f)continue;let v=0;for(const x of Object.keys(f)){const y=f[x];if(y&&y.subjectId&&y.classId){const C=fA(y.subjectId),N=fA(y.classId);C===c&&N===u&&v++}}v>0&&i.push(v)}return i.sort((d,f)=>f-d)},cH=r=>!r||typeof r!="string"?[]:r.split("+").map(e=>parseInt(e.trim(),10)).filter(e=>!isNaN(e)&&e>0).sort((e,t)=>t-e),uH=(r,e)=>{if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0},dH=(r,e,t,n)=>{const s=[],i=new Map(t.map(c=>[c.id,c])),l=new Map(n.map(c=>[c.id,c]));for(const c of r){let u="",d=c.className||"";if(d){const J=n.find(Z=>Z.name===d);J&&(u=J.id)}const f=c.id.split("-");if(f.length>=3&&!u){const J=f[1]?.toUpperCase(),Z=n.find(O=>O.name.toUpperCase()===J||O.id.toUpperCase().includes(J));Z&&(u=Z.id,d=Z.name)}if(!u)continue;const v=l.get(u);if(!v||!v.assignments)continue;let x="";for(const J of v.assignments)if(J.subjectIds.some(Z=>fA(Z)===fA(c.id))){x=J.teacherId;break}if(!x)continue;const C=i.get(x)?.name||"Bilinmeyen",N=c.distributionPattern||"",E=cH(N),_=lH(e,c.id,u,x),P=_.length>0?_.join("+"):"";let H;_.length===0?H="no-schedule":E.length===0?H="no-expected":uH(E,_)?H="match":H="mismatch";const D=c.level||v?.level||"lkokul";s.push({subjectId:c.id,subjectName:c.name,className:d,teacherName:C,level:D,expectedPattern:N,actualPattern:P,status:H})}return s},hH=r=>({total:r.length,matches:r.filter(e=>e.status==="match").length,mismatches:r.filter(e=>e.status==="mismatch").length,noExpected:r.filter(e=>e.status==="no-expected").length,noSchedule:r.filter(e=>e.status==="no-schedule").length}),fH=(r,e)=>{const t=new Uint8Array([239,187,191]),n=new Blob([t,r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(n);s.setAttribute("href",i),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},pH=()=>{const r=xc(),{data:e}=or("teachers"),{data:t}=or("classes"),{data:n}=or("subjects"),{data:s}=or("schedules"),{data:i}=or("schedule-templates"),{data:l}=or("classrooms"),{success:c,error:u,warning:d,info:f}=xa(),{confirmation:v,hideConfirmation:x,confirmDelete:y}=Eo(),C=i.flatMap(se=>(se.wizardData?.constraints?.timeConstraints||[]).map(Te=>({...Te,templateName:se.name}))),[N,E]=Ee.useState(!1),_=Ee.useRef(null),[P,H]=Ee.useState(!1),[D,J]=Ee.useState(null),[Z,O]=Ee.useState([]),[Q,U]=Ee.useState(!1),[V,I]=Ee.useState(null),[L,F]=Ee.useState(""),[ee,ge]=Ee.useState(!1),[ue,fe]=Ee.useState({overbookedTeachers:[]}),[ae,$]=Ee.useState(!1),[me,z]=Ee.useState([]),[S,K]=Ee.useState(!1),[Y,G]=Ee.useState("all"),[oe,ye]=Ee.useState("all"),[Le,be]=Ee.useState(!1),[je,Ge]=Ee.useState("all"),[tt,it]=Ee.useState("all"),It=()=>{const se=new Map;t.forEach(we=>{we.assignments?.forEach(Be=>{const Fe=Be.teacherId;Be.subjectIds.forEach(De=>{const At=n.find(_e=>_e.id===De);if(At){const _e=se.get(Fe)||0;se.set(Fe,_e+At.weeklyHours)}})})});const Te=[];se.forEach((we,Be)=>{if(we>45){const Fe=e.find(De=>De.id===Be);Fe&&Te.push({name:Fe.name,totalHours:we})}}),fe({overbookedTeachers:Te}),$(!0)},le=()=>{if(s.length===0){d(" Program Bulunamad","Henz oluturulmu bir program yok. nce bir program oluturun.");return}if(n.length===0){d(" Ders Bulunamad","Sistemde kaytl ders yok.");return}const se=dH(n,s,e,t);z(se),G("all"),K(!0)},ft=se=>{const Te=se.target.files?.[0];if(!Te)return;const we=new FileReader;we.onload=Be=>{const Fe=Be.target?.result;if(!Fe){u(" Dosya Hatas","Dosya ierii okunamad");return}try{const De=oH(Fe);J(De),O(De.errors),H(!0)}catch(De){console.error("CSV processing error:",De),u(" CSV Hatas","Dosya ilenirken hata olutu.")}finally{_.current&&(_.current.value="")}},we.readAsText(Te,"UTF-8")},ct=()=>{fH(`retmen ad; bran;eitim seviyesi;ders Ad;snf ve ube;haftalk saat
"retmen 1"; "SINIF RETMENL"; "LKOKUL"; "TRKE"; "1A"; "10"
"retmen 1"; "SINIF RETMENL"; "LKOKUL"; "MATEMATK"; "1A"; "5"`,"kapsamli_veri_sablonu.csv"),c(" ablon ndirildi","CSV ablonu baaryla indirildi")},pt=se=>{const Te={};return Object.keys(se).forEach(we=>{se[we]!==void 0?Te[we]=se[we]:Te[we]=null}),Te},he=async()=>{if(D){U(!0),f("Veri aktarm balad...","Ltfen bekleyin.");try{const{teachers:se,classes:Te,subjects:we}=D;let Be=ho(ts),Fe=0;for(const Ye of we){const vt=Zo(ts,"subjects",Ye.id);Be.set(vt,pt({...Ye,createdAt:new Date}),{merge:!0}),Fe++,Fe===450&&(await Be.commit(),Be=ho(ts),Fe=0)}Fe>0&&await Be.commit();let De=ho(ts),At=0;for(const Ye of se){const vt=new Set;Te.forEach(We=>{We.assignments?.forEach(Me=>{Me.teacherId===Ye.id&&Me.subjectIds.forEach(rt=>vt.add(rt))})});const ke=Zo(ts,"teachers",Ye.id);De.set(ke,pt({...Ye,subjectIds:Array.from(vt),createdAt:new Date}),{merge:!0}),At++,At===450&&(await De.commit(),De=ho(ts),At=0)}At>0&&await De.commit();let _e=ho(ts),Pe=0;for(const Ye of Te){const vt=Zo(ts,"classes",Ye.id);_e.set(vt,pt({...Ye,createdAt:new Date}),{merge:!0}),Pe++,Pe===450&&(await _e.commit(),_e=ho(ts),Pe=0)}Pe>0&&await _e.commit(),c(" Aktarm Tamamland!",`${we.length} ders, ${se.length} retmen ve ${Te.length} snf aktarld.`)}catch(se){console.error("Import error:",se),u(" Aktarm Hatas",`Hata: ${se.message}`)}finally{U(!1),H(!1)}}},Se=()=>{const se=[{name:"teachers",data:e},{name:"classes",data:t},{name:"subjects",data:n},{name:"schedules",data:s},{name:"schedule-templates",data:i},{name:"classrooms",data:l}],Te=se.reduce((we,Be)=>we+Be.data.length,0);if(Te===0){d(" Silinecek Veri Yok","Silinecek veri bulunamad.");return}y(`Tm Veriler (${Te} e)`,async()=>{E(!0),f("Temizlik balad...","Ekranda grnen veriler siliniyor.");try{let we=ho(ts),Be=0;for(const Fe of se)for(const De of Fe.data)we.delete(Zo(ts,Fe.name,De.id)),Be++,Be===450&&(await we.commit(),we=ho(ts),Be=0);Be>0&&await we.commit(),c(" Temizlik Tamamland",`${Te} veri esi silindi.`)}catch(we){u(" Hata",we.message)}finally{E(!1)}})},Qe=async()=>{const se=["teachers","classes","subjects","schedules","schedule-templates","classrooms","constraints","timeConstraints"];y("TM VERTABANI (Sert Sfrlama)",async()=>{E(!0),f("Derin temizlik balad...","Dorudan veritaban taranyor.");try{let Te=0;for(const we of se){const Be=await FE(iv(rm(ts,we)));let Fe=ho(ts),De=0;for(const At of Be.docs)Fe.delete(At.ref),De++,Te++,De===450&&(await Fe.commit(),Fe=ho(ts),De=0);De>0&&await Fe.commit()}c(" Derin Temizlik Tamamland",`${Te} kayt silindi.`)}catch(Te){u(" Hata",Te.message)}finally{E(!1)}})},X=async(se,Te,we)=>{y(`${we} (${Te})`,async()=>{try{await TE(Zo(ts,se,Te)),c(" Silindi",`${we} kaldrld.`)}catch(Be){u(" Hata",Be.message)}})},ne=()=>{if(!V)return[];let se=[];switch(V.id){case"teachers":se=e;break;case"classes":se=t;break;case"subjects":se=n;break;case"classrooms":se=l;break;case"schedules":se=s;break;case"schedule-templates":se=i;break}if(L){const Te=L.toLocaleLowerCase("tr-TR");return se.filter(we=>we.name?.toLocaleLowerCase("tr-TR").includes(Te)||we.id?.toLocaleLowerCase("tr-TR").includes(Te))}return se},pe=e.length+t.length+n.length+s.length+i.length+l.length,Ie=[{title:"retmenler",count:e.length,icon:ei,color:"blue",path:"/teachers"},{title:"Snflar",count:t.length,icon:ms,color:"emerald",path:"/classes"},{title:"Dersler",count:n.length,icon:wa,color:"indigo",path:"/subjects"},{title:"Derslikler",count:l.length,icon:_d,color:"teal",path:"/classrooms"},{title:"Programlar",count:s.length,icon:fi,color:"purple",path:"/all-schedules"},{title:"ablonlar",count:i.length,icon:ME,color:"orange",path:"/"}];return A.jsxs("div",{className:"min-h-screen bg-gray-50",children:[A.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(jm,{className:"w-8 h-8 text-ide-primary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Veri Ynetimi"}),A.jsx("p",{className:"text-sm text-gray-600",children:"Sistem verilerini ynetin ve temizleyin"})]})]}),A.jsx(Ct,{onClick:()=>r("/"),variant:"secondary",children:"Ana Sayfaya Dn"})]})}),A.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[A.jsxs("div",{className:"flex items-center mb-4",children:[A.jsx(O2,{className:"w-6 h-6 text-blue-500 mr-3"}),A.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Akll Veri Ykleme"})]}),A.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Verilen CSV ablonunu tek seferde ykleyerek tm verileri sisteme otomatik olarak ekleyin."}),A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx("input",{type:"file",accept:".csv",onChange:ft,ref:_,className:"hidden"}),A.jsx(Ct,{onClick:()=>_.current?.click(),icon:O2,variant:"primary",children:"CSV Ykle"}),A.jsx(Ct,{onClick:ct,icon:Id,variant:"secondary",children:"ablon ndir"})]})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[A.jsxs("div",{className:"flex items-center mb-4",children:[A.jsx(D2,{className:"w-6 h-6 text-green-500 mr-3"}),A.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Veri Sal"})]}),A.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"retmenlerin ders ykleri gibi olas mantk hatalarn kontrol edin."}),A.jsx(Ct,{onClick:It,icon:D2,variant:"secondary",className:"bg-green-50 text-green-700",children:"Kontrol Balat"})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[A.jsxs("div",{className:"flex items-center mb-4",children:[A.jsx(P2,{className:"w-6 h-6 text-blue-500 mr-3"}),A.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Datm ekli Dorulama"})]}),A.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"CSV'den yklenen datm ekillerini oluturulan programlarla karlatrn."}),A.jsx(Ct,{onClick:le,icon:P2,variant:"secondary",className:"bg-blue-50 text-blue-700",children:"Dorulamay Balat"})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[A.jsxs("div",{className:"flex items-center mb-4",children:[A.jsx(ti,{className:"w-6 h-6 text-purple-500 mr-3"}),A.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Kstlamalar"})]}),A.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Sistemde kaytl tm retmen, snf ve ders kstlamalarn grntleyin."}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(Ct,{onClick:()=>be(!0),icon:ti,variant:"secondary",className:"bg-purple-50 text-purple-700",children:"Kstlamalar Grntle"}),A.jsxs("span",{className:"text-sm text-gray-500 font-medium",children:[C.length," kstlama"]})]})]})]}),A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:[A.jsxs("div",{className:"flex items-center justify-between mb-6",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(Q2,{className:"w-6 h-6 text-ide-primary-600 mr-2"}),A.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Veri statistikleri"})]}),A.jsxs("div",{className:"text-sm text-gray-600",children:["Toplam ",pe," e"]})]}),A.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:Ie.map(se=>A.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 flex flex-col items-center justify-between min-h-[180px] shadow-sm",children:[A.jsxs("div",{className:"flex flex-col items-center text-center",children:[A.jsx(se.icon,{className:"w-8 h-8 text-gray-600 mb-2"}),A.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:se.title})]}),A.jsx("span",{className:"text-3xl font-semibold text-gray-800 my-2",children:se.count}),A.jsxs("div",{className:"flex flex-col gap-2 w-full mt-auto",children:[A.jsx(Ct,{onClick:()=>r(se.path),variant:"secondary",size:"sm",className:"w-full text-xs whitespace-nowrap",children:"Ynet"}),A.jsx(Ct,{onClick:()=>I({id:se.path.replace("/","").replace("all-schedules","schedules"),title:se.title}),variant:"primary",size:"sm",className:"w-full text-xs whitespace-nowrap",children:"Gzat"})]})]},se.title))})]}),V&&A.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-ide-primary-200 p-6 mb-8 overflow-hidden",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(Q2,{className:"w-6 h-6 text-ide-primary-600 mr-2"}),A.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[V.title," Gezgini"]}),A.jsxs("span",{className:"ml-3 bg-ide-primary-100 text-ide-primary-700 text-xs font-semibold px-2 py-1 rounded-full",children:[ne().length," e"]})]}),A.jsxs("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[A.jsx("input",{type:"text",placeholder:"Ara...",className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm w-full",value:L,onChange:se=>F(se.target.value)}),A.jsx(Ct,{onClick:()=>I(null),variant:"secondary",size:"sm",children:"Kapat"})]})]}),A.jsx("div",{className:"max-h-[500px] overflow-y-auto border border-gray-200 rounded-lg text-sm",children:A.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[A.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-6 py-3 text-left font-semibold text-gray-500 uppercase tracking-wider",children:"sim / Balk"}),A.jsx("th",{className:"px-6 py-3 text-left font-semibold text-gray-500 uppercase tracking-wider",children:"ID"}),A.jsx("th",{className:"px-6 py-3 text-right font-semibold text-gray-500 tracking-wider",children:"lem"})]})}),A.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ne().map(se=>A.jsxs("tr",{className:"hover:bg-gray-50",children:[A.jsx("td",{className:"px-6 py-4 truncate max-w-[200px]",children:se.name||se.title||"simsiz e"}),A.jsx("td",{className:"px-6 py-4",children:A.jsx("code",{className:"text-xs bg-gray-100 px-1 rounded",children:se.id})}),A.jsx("td",{className:"px-6 py-4 text-right",children:A.jsx(Ct,{onClick:()=>X(V.id,se.id,se.name||se.title||"simsiz"),variant:"danger",size:"sm",icon:Ss,children:"Sil"})})]},se.id))})]})})]}),A.jsxs("div",{className:"bg-red-50 rounded-lg shadow-sm border border-red-200 p-6",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(cu,{className:"w-6 h-6 text-red-600 mr-2"}),A.jsx("h2",{className:"text-lg font-semibold text-red-900 uppercase tracking-wider",children:"Tehlikeli Blge"})]}),A.jsxs("label",{className:"flex items-center space-x-3 bg-red-100 px-4 py-2 rounded-xl border border-red-200 cursor-pointer hover:bg-red-200 transition-colors group",children:[A.jsx("span",{className:"text-sm font-semibold text-red-800 select-none uppercase tracking-wider",children:"Tehlikeli lemleri Kilidini A"}),A.jsxs("div",{className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none",children:[A.jsx("input",{type:"checkbox",className:"sr-only peer",checked:ee,onChange:se=>ge(se.target.checked)}),A.jsx("div",{className:"w-11 h-6 bg-red-300 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]})]}),ee?A.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-top-2 duration-300",children:[A.jsxs("div",{className:"p-5 bg-white rounded-lg border border-red-100 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 shadow-sm",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-red-900",children:"Tm Verileri Sil (Hzl)"}),A.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Sadece sistemde ykl olan (ekranda grnen) verileri siler."})]}),A.jsx(Ct,{onClick:Se,icon:Ss,variant:"danger",disabled:N||pe===0,className:"w-full sm:w-auto shadow-md",children:N?"Siliniyor...":`Tmn Sil (${pe})`})]}),A.jsxs("div",{className:"p-5 bg-red-100 rounded-lg border border-red-200 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 shadow-sm",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-semibold text-red-900",children:"Derin Temizlik (Kritik lem)"}),A.jsx("p",{className:"text-sm text-red-800 mt-1",children:"Veritabanndaki TM koleksiyonlar tarar ve gizli/kopya kaytlar temizler. 712 ders hatas gibi durumlarda kullann."})]}),A.jsx(Ct,{onClick:Qe,icon:jm,variant:"danger",disabled:N,className:"!bg-red-700 w-full sm:w-auto shadow-lg hover:!bg-red-800",children:N?"Sprlyor...":"Derin Temizlik Balat"})]})]}):A.jsxs("div",{className:"bg-white rounded-lg border border-red-100 p-8 text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4",children:A.jsx(cu,{className:"w-8 h-8 text-red-400"})}),A.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2 uppercase tracking-tight",children:"Veri Silme lemleri Kilitli"}),A.jsx("p",{className:"text-sm text-red-700 max-w-md mx-auto",children:"Kazara veri kaybn nlemek iin silme butonlar gizlenmitir. lem yapmak iin yukardaki anahtar kullann."})]})]})]}),A.jsx(Oa,{isOpen:P,onClose:()=>H(!1),title:"e Aktarma nizlemesi",size:"xl",children:A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200 grid grid-cols-3 gap-4 text-center",children:[A.jsxs("div",{children:[A.jsx("p",{className:"text-2xl font-semibold text-green-700",children:D?.teachers.length||0}),A.jsx("p",{className:"text-xs text-green-600 lowercase tracking-wider",children:"retmen"})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-2xl font-semibold text-green-700",children:D?.classes.length||0}),A.jsx("p",{className:"text-xs text-green-600 lowercase tracking-wider",children:"snf"})]}),A.jsxs("div",{children:[A.jsx("p",{className:"text-2xl font-semibold text-green-700",children:D?.subjects.length||0}),A.jsx("p",{className:"text-xs text-green-600 lowercase tracking-wider",children:"ders"})]})]}),Z.length>0&&A.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200 max-h-40 overflow-y-auto",children:[A.jsx("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Hatalar:"}),A.jsx("ul",{className:"list-disc list-inside text-xs text-red-700",children:Z.map((se,Te)=>A.jsx("li",{children:se},Te))})]}),A.jsxs("div",{className:"flex justify-end space-x-3",children:[A.jsx(Ct,{onClick:()=>H(!1),variant:"secondary",children:"ptal"}),A.jsx(Ct,{onClick:he,variant:"primary",disabled:Q,children:Q?"Aktarlyor...":"Onayla ve e Aktar"})]})]})}),A.jsxs(Oa,{isOpen:ae,onClose:()=>$(!1),title:"Veri Sal Kontrol",children:[ue.overbookedTeachers.length===0?A.jsxs("div",{className:"text-center p-6",children:[A.jsx(il,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Her ey Yolunda!"})]}):A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-red-700 mb-4 font-medium italic",children:"Aadaki retmenlerin haftalk ders ykleri 45 saati ayor:"}),A.jsx("ul",{className:"divide-y divide-gray-200 border rounded-lg overflow-hidden",children:ue.overbookedTeachers.map(se=>A.jsxs("li",{className:"py-2 px-4 flex justify-between items-center text-sm",children:[A.jsx("span",{className:"font-semibold",children:se.name}),A.jsxs("span",{className:"text-red-600 font-semibold",children:[se.totalHours," saat"]})]},se.name))})]}),A.jsx("div",{className:"mt-6 flex justify-end",children:A.jsx(Ct,{onClick:()=>$(!1),variant:"primary",children:"Kapat"})})]}),A.jsx(Oa,{isOpen:S,onClose:()=>K(!1),title:"Datm ekli Dorulama Sonular",size:"4xl",children:(()=>{const se=hH(me),Te=me.filter(we=>oe!=="all"&&we.level!==oe?!1:Y==="mismatch"?we.status==="mismatch":Y==="match"?we.status==="match":!0);return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[A.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200 text-center shadow-sm",children:[A.jsx("p",{className:"text-3xl font-bold text-gray-700",children:se.total}),A.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Toplam Ders"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200 text-center shadow-sm",children:[A.jsx("p",{className:"text-3xl font-bold text-green-600",children:se.matches}),A.jsx("p",{className:"text-sm text-green-600 mt-1",children:" Eleen"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-5 border border-red-200 text-center shadow-sm",children:[A.jsx("p",{className:"text-3xl font-bold text-red-600",children:se.mismatches}),A.jsx("p",{className:"text-sm text-red-600 mt-1",children:" Uyumsuz"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 border border-gray-200 text-center shadow-sm",children:[A.jsx("p",{className:"text-3xl font-bold text-gray-400",children:se.noSchedule+se.noExpected}),A.jsx("p",{className:"text-sm text-gray-400 mt-1",children:" Veri Yok"})]})]}),A.jsxs("div",{className:"flex flex-wrap items-center gap-6 p-4 bg-gray-50 rounded-xl border border-gray-200",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:"Durum:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>G("all"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-all ${Y==="all"?"bg-gray-800 text-white shadow-md":"bg-white text-gray-600 border border-gray-300 hover:bg-gray-100"}`,children:"Tm"}),A.jsx("button",{onClick:()=>G("mismatch"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-all ${Y==="mismatch"?"bg-red-600 text-white shadow-md":"bg-white text-red-600 border border-red-200 hover:bg-red-50"}`,children:"Uyumsuz"}),A.jsx("button",{onClick:()=>G("match"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-all ${Y==="match"?"bg-green-600 text-white shadow-md":"bg-white text-green-600 border border-green-200 hover:bg-green-50"}`,children:"Eleen"})]})]}),A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("span",{className:"text-sm text-gray-700 font-semibold",children:"Seviye:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>ye("all"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-all ${oe==="all"?"bg-indigo-600 text-white shadow-md":"bg-white text-indigo-600 border border-indigo-200 hover:bg-indigo-50"}`,children:"Tm"}),A.jsx("button",{onClick:()=>ye("Anaokulu"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-all ${oe==="Anaokulu"?"bg-pink-600 text-white shadow-md":"bg-white text-pink-600 border border-pink-200 hover:bg-pink-50"}`,children:"Anaokulu"}),A.jsx("button",{onClick:()=>ye("lkokul"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-all ${oe==="lkokul"?"bg-blue-600 text-white shadow-md":"bg-white text-blue-600 border border-blue-200 hover:bg-blue-50"}`,children:"lkokul"}),A.jsx("button",{onClick:()=>ye("Ortaokul"),className:`px-4 py-2 text-sm rounded-lg font-medium transition-all ${oe==="Ortaokul"?"bg-orange-600 text-white shadow-md":"bg-white text-orange-600 border border-orange-200 hover:bg-orange-50"}`,children:"Ortaokul"})]})]})]}),A.jsx("div",{className:"max-h-[500px] overflow-y-auto border border-gray-200 rounded-xl shadow-sm",children:A.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[A.jsx("thead",{className:"bg-gray-100 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-5 py-3 text-left text-sm font-bold text-gray-600 uppercase tracking-wider w-28",children:"Durum"}),A.jsx("th",{className:"px-5 py-3 text-left text-sm font-bold text-gray-600 uppercase tracking-wider w-40",children:"Ders"}),A.jsx("th",{className:"px-5 py-3 text-left text-sm font-bold text-gray-600 uppercase tracking-wider w-20",children:"Snf"}),A.jsx("th",{className:"px-5 py-3 text-left text-sm font-bold text-gray-600 uppercase tracking-wider w-36",children:"retmen"}),A.jsx("th",{className:"px-5 py-3 text-left text-sm font-bold text-gray-600 uppercase tracking-wider",children:"Datm Detay"})]})}),A.jsxs("tbody",{className:"bg-white divide-y divide-gray-100",children:[Te.map((we,Be)=>A.jsxs("tr",{className:`hover:bg-blue-50 transition-colors ${Be%2===0?"bg-white":"bg-gray-50"}`,children:[A.jsxs("td",{className:"px-5 py-3 whitespace-nowrap",children:[we.status==="match"&&A.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:" Eleme"}),we.status==="mismatch"&&A.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800",children:" Uyumsuz"}),we.status==="no-expected"&&A.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-600",children:" Beklenen Yok"}),we.status==="no-schedule"&&A.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-600",children:" Program Yok"})]}),A.jsx("td",{className:"px-5 py-3 font-semibold text-gray-800 text-sm",title:we.subjectName,children:we.subjectName}),A.jsx("td",{className:"px-5 py-3 text-sm font-medium text-gray-600",children:we.className}),A.jsx("td",{className:"px-5 py-3 text-sm text-gray-600",title:we.teacherName,children:we.teacherName}),A.jsxs("td",{className:"px-5 py-3 text-sm",children:[we.status==="match"&&A.jsxs("span",{className:"text-green-700 flex items-center gap-2",children:[A.jsx("code",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-md font-mono text-xs",children:we.expectedPattern}),A.jsx("span",{className:"text-green-600",children:"olarak datld "})]}),we.status==="mismatch"&&A.jsxs("span",{className:"text-red-700 flex flex-wrap items-center gap-2",children:[A.jsx("span",{className:"text-red-600",children:"Beklenen:"}),A.jsx("code",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-md font-mono text-xs",children:we.expectedPattern}),A.jsx("span",{className:"text-gray-500",children:""}),A.jsx("span",{className:"text-red-600",children:"Gerek:"}),A.jsx("code",{className:"bg-red-100 text-red-800 px-2 py-1 rounded-md font-mono text-xs",children:we.actualPattern})]}),we.status==="no-expected"&&A.jsxs("span",{className:"text-gray-500 flex items-center gap-2",children:[A.jsx("span",{children:"CSV'de belirtilmemi, programda:"}),A.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded-md font-mono text-xs",children:we.actualPattern})]}),we.status==="no-schedule"&&A.jsxs("span",{className:"text-gray-500 flex items-center gap-2",children:[A.jsx("span",{children:"Henz program yok. Beklenen:"}),A.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded-md font-mono text-xs",children:we.expectedPattern||"-"})]})]})]},Be)),Te.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:5,className:"px-5 py-12 text-center text-gray-500",children:"Bu filtreye uygun sonu bulunamad."})})]})]})}),A.jsx("div",{className:"flex justify-end pt-2",children:A.jsx(Ct,{onClick:()=>K(!1),variant:"primary",children:"Kapat"})})]})})()}),A.jsx(Oa,{isOpen:Le,onClose:()=>be(!1),title:"Sistemde Kaytl Kstlamalar",size:"4xl",children:(()=>{const se=(Pe,Ye)=>Pe==="teacher"?e.find(ke=>ke.id===Ye)?.name||Ye:Pe==="class"?t.find(ke=>ke.id===Ye)?.name||Ye:Pe==="subject"&&n.find(ke=>ke.id===Ye)?.name||Ye,Te=C.filter(Pe=>!(je!=="all"&&Pe.entityType!==je||tt!=="all"&&Pe.constraintType!==tt)),we=C.filter(Pe=>Pe.entityType==="teacher").length,Be=C.filter(Pe=>Pe.entityType==="class").length,Fe=C.filter(Pe=>Pe.entityType==="subject").length,De=C.filter(Pe=>Pe.constraintType==="unavailable").length,At=C.filter(Pe=>Pe.constraintType==="preferred").length,_e=C.filter(Pe=>Pe.constraintType==="restricted").length;return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:[A.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 text-center border border-purple-200",children:[A.jsx("div",{className:"text-2xl font-bold text-purple-700",children:C.length}),A.jsx("div",{className:"text-xs font-medium text-purple-600",children:"Toplam"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 text-center border border-blue-200",children:[A.jsx("div",{className:"text-2xl font-bold text-blue-700",children:we}),A.jsx("div",{className:"text-xs font-medium text-blue-600",children:"retmen"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-xl p-4 text-center border border-emerald-200",children:[A.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:Be}),A.jsx("div",{className:"text-xs font-medium text-emerald-600",children:"Snf"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-xl p-4 text-center border border-indigo-200",children:[A.jsx("div",{className:"text-2xl font-bold text-indigo-700",children:Fe}),A.jsx("div",{className:"text-xs font-medium text-indigo-600",children:"Ders"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 text-center border border-red-200",children:[A.jsx("div",{className:"text-2xl font-bold text-red-700",children:De}),A.jsx("div",{className:"text-xs font-medium text-red-600",children:"Msait Deil"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 text-center border border-green-200",children:[A.jsx("div",{className:"text-2xl font-bold text-green-700",children:At}),A.jsx("div",{className:"text-xs font-medium text-green-600",children:"Tercih"})]}),A.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-4 text-center border border-yellow-200",children:[A.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:_e}),A.jsx("div",{className:"text-xs font-medium text-yellow-600",children:"Kstl"})]})]}),A.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-gray-50 rounded-lg p-4",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx(ld,{className:"w-4 h-4 text-gray-500"}),A.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Varlk Tipi:"}),A.jsx("div",{className:"flex gap-1",children:["all","teacher","class","subject"].map(Pe=>A.jsx("button",{onClick:()=>Ge(Pe),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${je===Pe?"bg-purple-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:Pe==="all"?"Tm":Pe==="teacher"?"retmen":Pe==="class"?"Snf":"Ders"},Pe))})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Kstlama Tipi:"}),A.jsx("div",{className:"flex gap-1",children:["all","unavailable","preferred","restricted"].map(Pe=>A.jsx("button",{onClick:()=>it(Pe),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${tt===Pe?"bg-purple-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:Pe==="all"?"Tm":el[Pe].label},Pe))})]})]}),A.jsx("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg",children:A.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[A.jsx("thead",{className:"bg-gray-50 sticky top-0",children:A.jsxs("tr",{children:[A.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Varlk Tipi"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Varlk Ad"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Gn"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Ders Saati"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Kstlama"}),A.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Aklama"})]})}),A.jsxs("tbody",{className:"bg-white divide-y divide-gray-100",children:[Te.map((Pe,Ye)=>A.jsxs("tr",{className:Ye%2===0?"bg-white":"bg-gray-50",children:[A.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:A.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Pe.entityType==="teacher"?"bg-blue-100 text-blue-800":Pe.entityType==="class"?"bg-emerald-100 text-emerald-800":"bg-indigo-100 text-indigo-800"}`,children:Pe.entityType==="teacher"?"retmen":Pe.entityType==="class"?"Snf":"Ders"})}),A.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:se(Pe.entityType,Pe.entityId)}),A.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Pe.day}),A.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[Pe.period,". Ders"]}),A.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:A.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${el[Pe.constraintType].color}`,children:[el[Pe.constraintType].icon," ",el[Pe.constraintType].label]})}),A.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:Pe.reason||"-"})]},Pe.id)),Te.length===0&&A.jsx("tr",{children:A.jsx("td",{colSpan:6,className:"px-4 py-12 text-center text-gray-500",children:"Bu filtreye uygun kstlama bulunamad."})})]})]})}),A.jsxs("div",{className:"flex justify-between items-center pt-2",children:[A.jsxs("span",{className:"text-sm text-gray-500",children:[Te.length," / ",C.length," kstlama gsteriliyor"]}),A.jsx(Ct,{onClick:()=>be(!1),variant:"primary",children:"Kapat"})]})]})})()}),A.jsx(KA,{isOpen:v.isOpen,onClose:x,onConfirm:v.onConfirm,title:v.title,message:v.message,type:v.type,confirmVariant:v.confirmVariant})]})},mH=()=>{const r=xc(),{data:e,loading:t,add:n,update:s,remove:i}=or("classrooms"),{success:l,error:c,warning:u}=xa(),{confirmation:d,hideConfirmation:f,confirmDelete:v}=Eo(),[x,y]=Ee.useState(!1),[C,N]=Ee.useState(null),[E,_]=Ee.useState(""),[P,H]=Ee.useState(""),[D,J]=Ee.useState(!1),[Z,O]=Ee.useState({name:"",shortName:"",type:"",capacity:"",floor:"",building:"",equipment:[],color:""}),Q=G=>G?G.substring(0,2).toUpperCase():"",U=()=>{const G=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4"];return G[Math.floor(Math.random()*G.length)]},V=[{value:"normal",label:"Normal Snf"},{value:"laboratory",label:"Laboratuvar"},{value:"workshop",label:"Atlye"},{value:"gym",label:"Spor Salonu"},{value:"library",label:"Ktphane"},{value:"computer",label:"Bilgisayar Snf"}],I=[{id:"projector",label:"Projeksiyon",icon:Lm},{id:"computer",label:"Bilgisayar",icon:Lm},{id:"wifi",label:"WiFi",icon:KE},{id:"sound",label:"Ses Sistemi",icon:VE}],L=[{value:"Ana Bina",label:"Ana Bina"},{value:"Ek Bina",label:"Ek Bina"},{value:"Spor Kompleksi",label:"Spor Kompleksi"},{value:"Laboratuvar Binas",label:"Laboratuvar Binas"}],ee=e.filter(G=>{const oe=!E||G.type===E,ye=!P||G.building===P;return oe&&ye}).sort((G,oe)=>G.name.localeCompare(oe.name,"tr")),ge=()=>{if(e.length===0){u(" Silinecek Derslik Yok","Sistemde silinecek derslik bulunamad");return}v(`${e.length} Derslik`,async()=>{J(!0);try{let G=0;for(const oe of e)try{await i(oe.id),G++}catch(ye){console.error(` Derslik silinemedi: ${oe.name}`,ye)}G>0?(l(" Derslikler Silindi",`${G} derslik baaryla silindi`),_(""),H("")):c(" Silme Hatas","Hibir derslik silinemedi")}catch(G){console.error(" Toplu silme hatas:",G),c(" Silme Hatas","Derslikler silinirken bir hata olutu")}finally{J(!1)}})},ue=async G=>{G.preventDefault();const oe={name:Z.name,type:Z.type||"normal",capacity:parseInt(Z.capacity)||30,floor:Z.floor||"1",building:Z.building||"Ana Bina",equipment:Z.equipment,shortName:Z.shortName||Q(Z.name),color:Z.color||U()};try{C?(await s(C.id,oe),l(" Gncellendi",`${Z.name} baaryla gncellendi`)):(await n(oe),l(" Eklendi",`${Z.name} baaryla eklendi`)),fe()}catch{c(" Hata","Derslik kaydedilirken bir hata olutu")}},fe=()=>{O({name:"",shortName:"",type:"",capacity:"",floor:"",building:"",equipment:[],color:""}),N(null),y(!1)},ae=G=>{O({name:G.name,shortName:G.shortName||Q(G.name),type:G.type,capacity:G.capacity.toString(),floor:G.floor,building:G.building,equipment:G.equipment||[],color:G.color||U()}),N(G),y(!0)},$=async G=>{const oe=e.find(ye=>ye.id===G);oe&&v(oe.name,async()=>{await i(G),l(" Derslik Silindi",`${oe.name} baaryla silindi`)})},me=(G,oe)=>{O(oe?ye=>({...ye,equipment:[...ye.equipment,G]}):ye=>({...ye,equipment:ye.equipment.filter(Le=>Le!==G)}))};gA.useEffect(()=>{Z.name&&!C&&O(G=>({...G,shortName:Q(G.name)}))},[Z.name,C]),gA.useEffect(()=>{Z.name&&!C&&!Z.color&&O(G=>({...G,color:U()}))},[Z.name,C]);const z=G=>V.find(oe=>oe.value===G)?.label||G,S=G=>({normal:"bg-blue-100 text-blue-800",laboratory:"bg-ide-accent-100 text-ide-accent-800",workshop:"bg-orange-100 text-orange-800",gym:"bg-green-100 text-green-800",library:"bg-ide-primary-100 text-ide-primary-800",computer:"bg-red-100 text-red-800"})[G]||"bg-gray-100 text-gray-800",K=[{value:"",label:"Tm Trler"},...V],Y=[{value:"",label:"Tm Binalar"},...L];return t?A.jsx("div",{className:"flex items-center justify-center h-64",children:A.jsxs("div",{className:"mobile-loading",children:[A.jsx("div",{className:"mobile-loading-spinner"}),A.jsx("div",{className:"mobile-loading-text",children:"Ykleniyor..."})]})}):A.jsxs("div",{className:"container-mobile",children:[A.jsxs("div",{className:"header-mobile",children:[A.jsxs("div",{className:"flex items-center",children:[A.jsx(_d,{className:"w-8 h-8 text-ide-secondary-600 mr-3"}),A.jsxs("div",{children:[A.jsx("h1",{className:"text-responsive-xl font-bold text-gray-900",children:"Derslik Ynetimi"}),A.jsxs("p",{className:"text-responsive-sm text-gray-600",children:[e.length," derslik kaytl (",ee.length," gsteriliyor)"]})]})]}),A.jsxs("div",{className:"button-group-mobile",children:[A.jsx(Ct,{onClick:()=>r("/data-management"),variant:"secondary",className:"w-full sm:w-auto",children:"Veri Ynetimine Dn"}),e.length>0&&A.jsx(Ct,{onClick:ge,icon:Ss,variant:"danger",disabled:D,className:"w-full sm:w-auto",children:D?"Siliniyor...":`Tmn Sil (${e.length})`}),A.jsx(Ct,{onClick:()=>y(!0),icon:ea,variant:"primary",className:"w-full sm:w-auto",children:"Yeni Derslik"})]})]}),A.jsx("div",{className:"mobile-card mobile-spacing mb-6",children:A.jsxs("div",{className:"responsive-grid-2 gap-responsive",children:[A.jsx(ns,{label:"Tr Filtresi",value:E,onChange:_,options:K}),A.jsx(ns,{label:"Bina Filtresi",value:P,onChange:H,options:Y})]})}),ee.length===0?A.jsxs("div",{className:"text-center py-12 mobile-card",children:[A.jsx(_d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),A.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.length===0?"Henz derslik eklenmemi":"Filtrelere uygun derslik bulunamad"}),A.jsx("p",{className:"text-gray-500 mb-4",children:e.length===0?"lk dersliinizi ekleyerek balayn":"Farkl filtre kriterleri deneyin"}),A.jsx("div",{className:"button-group-mobile",children:e.length===0&&A.jsx(Ct,{onClick:()=>y(!0),icon:ea,variant:"primary",children:"Derslik Ekle"})})]}):A.jsx("div",{className:"responsive-grid gap-responsive",children:ee.map(G=>A.jsxs("div",{className:"mobile-card mobile-spacing hover:shadow-md transition-shadow",children:[A.jsxs("div",{className:"flex items-start justify-between mb-3",children:[A.jsxs("div",{children:[A.jsx("h4",{className:"font-semibold text-gray-900",children:G.name}),A.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${S(G.type)}`,children:z(G.type)})]}),A.jsxs("div",{className:"flex space-x-1",children:[A.jsx("button",{onClick:()=>ae(G),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",children:A.jsx(Co,{size:16})}),A.jsx("button",{onClick:()=>$(G.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",children:A.jsx(Ss,{size:16})})]})]}),A.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{children:"Kapasite:"}),A.jsxs("span",{className:"font-medium",children:[G.capacity," kii"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{children:"Konum:"}),A.jsxs("span",{className:"font-medium",children:[G.building," - ",G.floor,". Kat"]})]}),G.equipment&&G.equipment.length>0&&A.jsxs("div",{children:[A.jsx("span",{className:"text-xs text-gray-500",children:"Ekipmanlar:"}),A.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:G.equipment.map(oe=>{const ye=I.find(Le=>Le.id===oe);return ye?A.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:[A.jsx(ye.icon,{size:12,className:"mr-1"}),ye.label]},oe):null})})]})]})]},G.id))}),A.jsx(Oa,{isOpen:x,onClose:fe,title:C?"Derslik Dzenle":"Yeni Derslik Ekle",size:"lg",children:A.jsxs("form",{onSubmit:ue,children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(Jr,{label:"sim",value:Z.name,onChange:G=>O({...Z,name:G}),placeholder:"rn: A101, Fen Lab 1",required:!0}),A.jsx(Jr,{label:"Ksaltma",value:Z.shortName,onChange:G=>O({...Z,shortName:G}),placeholder:"Otomatik oluturulur",disabled:!0})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(ns,{label:"Derslik Tr",value:Z.type,onChange:G=>O({...Z,type:G}),options:V}),A.jsx(Jr,{label:"Kapasite",type:"number",value:Z.capacity,onChange:G=>O({...Z,capacity:G}),placeholder:"30"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A.jsx(ns,{label:"Bina",value:Z.building,onChange:G=>O({...Z,building:G}),options:L}),A.jsx(Jr,{label:"Kat",value:Z.floor,onChange:G=>O({...Z,floor:G}),placeholder:"1"})]}),A.jsx(Jr,{label:"Renk",value:Z.color,onChange:G=>O({...Z,color:G}),placeholder:"Otomatik atanr",disabled:!0}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Ekipmanlar"}),A.jsx("div",{className:"grid grid-cols-2 gap-3",children:I.map(G=>A.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[A.jsx("input",{type:"checkbox",checked:Z.equipment.includes(G.id),onChange:oe=>me(G.id,oe.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),A.jsx(G.icon,{size:16,className:"text-gray-500"}),A.jsx("span",{className:"text-sm text-gray-700",children:G.label})]},G.id))})]}),A.jsxs("div",{className:"button-group-mobile mt-6",children:[A.jsx(Ct,{type:"button",onClick:fe,variant:"secondary",children:"ptal"}),A.jsx(Ct,{type:"submit",variant:"primary",children:C?"Gncelle":"Kaydet"})]})]})}),A.jsx(KA,{...d,onClose:f})]})},gH=({id:r,type:e,title:t,message:n,duration:s=5e3,onClose:i})=>{const[l,c]=Ee.useState(!1),[u,d]=Ee.useState(!1),[f,v]=Ee.useState(100);Ee.useEffect(()=>{const H=setTimeout(()=>{c(!0)},e==="error"?50:100);return()=>clearTimeout(H)},[e]),Ee.useEffect(()=>{if(s>0){const P=setInterval(()=>{v(D=>{const J=D-100/(s/100);return J<=0?0:J})},100),H=setTimeout(()=>{x()},s);return()=>{clearInterval(P),clearTimeout(H)}}},[s]);const x=()=>{d(!0),setTimeout(()=>{i(r)},300)},y={success:il,error:zE,warning:Ed,info:RE},C={success:"bg-ide-secondary-50 border-ide-secondary-500 text-ide-secondary-800",error:"bg-ide-accent-50 border-ide-accent-500 text-ide-accent-800",warning:"bg-ide-orange-50 border-ide-orange-500 text-ide-orange-800",info:"bg-ide-primary-50 border-ide-primary-500 text-ide-primary-800"},N={success:"text-ide-secondary-600",error:"text-ide-accent-600",warning:"text-ide-orange-600",info:"text-ide-primary-600"},E={success:"bg-ide-secondary-500",error:"bg-ide-accent-600",warning:"bg-ide-orange-500",info:"bg-ide-primary-500"},_=y[e];return A.jsxs("div",{className:`
        w-full bg-white pointer-events-auto transform transition-all duration-500 ease-out relative overflow-hidden
        ${C[e]}
        ${l&&!u?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}
        ${e==="error"?"ring-8 ring-ide-accent-400 ring-opacity-75 shadow-ide-2xl":"shadow-ide-xl"}
        hover:shadow-ide-2xl hover:scale-105 rounded-xl border-l-8
      `,style:{minHeight:e==="error"?"120px":"90px",maxWidth:"400px",zIndex:2147483647,position:"relative",...e==="error"&&{animation:"fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards, subtleGlow 3s ease-in-out infinite",boxShadow:"0 15px 30px -10px rgba(220, 38, 38, 0.3), 0 0 0 1px rgba(220, 38, 38, 0.1)"}},children:[e==="error"&&A.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-100 via-white to-red-100 opacity-40"}),A.jsx("div",{className:"p-6 relative z-10",children:A.jsxs("div",{className:"flex items-start",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(_,{className:`h-8 w-8 ${N[e]} ${e==="error"?"animate-bounce-subtle":""}`})}),A.jsxs("div",{className:"ml-4 w-0 flex-1",children:[A.jsx("p",{className:`text-lg font-bold leading-tight ${e==="error"?"text-ide-accent-900":"text-ide-gray-900"}`,children:t}),n&&A.jsx("p",{className:`mt-3 text-sm leading-relaxed whitespace-pre-line ${e==="error"?"text-ide-accent-800 font-semibold":"text-ide-gray-700"}`,children:n})]}),A.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:A.jsx("button",{onClick:x,className:`rounded-full p-2 inline-flex transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 ${e==="error"?"text-ide-accent-600 hover:text-ide-accent-800 hover:bg-ide-accent-200 focus:ring-ide-accent-500":"text-ide-gray-400 hover:text-ide-gray-600 hover:bg-ide-gray-100 focus:ring-ide-primary-500"}`,children:A.jsx(di,{className:"h-6 w-6"})})})]})}),s>0&&A.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-3 bg-ide-gray-200 overflow-hidden",children:A.jsx("div",{className:`h-full transition-all ease-linear ${E[e]}`,style:{width:`${f}%`,transition:"width 100ms linear"}})})]})},yH=({toasts:r,onClose:e})=>r.length===0?null:A.jsx("div",{className:"space-y-4 w-full",style:{pointerEvents:"auto",position:"relative",zIndex:2147483647},children:r.map((t,n)=>A.jsx("div",{style:{transform:`translateY(${n*10}px) scale(${1-n*.02})`,zIndex:2147483647-n,position:"relative",opacity:1-n*.1},children:A.jsx(gH,{...t,onClose:e})},t.id))});function vH(){const{user:r,loading:e}=D1(),{toasts:t,removeToast:n}=xa();return e?A.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:A.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),A.jsx("div",{className:"text-gray-600 font-medium",children:"Ykleniyor..."})]})}):A.jsxs(A.Fragment,{children:[A.jsx("div",{id:"toast-portal-root",style:{position:"fixed",top:"20px",right:"20px",zIndex:2147483647,pointerEvents:"none",width:"420px",maxWidth:"90vw"},children:A.jsx(yH,{toasts:t,onClose:n})}),r?A.jsx(Rj,{children:A.jsx(jN,{children:A.jsx(IN,{children:A.jsxs(Qa,{path:"/",element:A.jsx(iL,{}),children:[A.jsx(Qa,{index:!0,element:A.jsx(AL,{})}),A.jsx(Qa,{path:"teachers",element:A.jsx(cL,{})}),A.jsx(Qa,{path:"classes",element:A.jsx(uL,{})}),A.jsx(Qa,{path:"subjects",element:A.jsx(dL,{})}),A.jsx(Qa,{path:"schedules",element:A.jsx(yL,{})}),A.jsx(Qa,{path:"schedule-wizard",element:A.jsx(HL,{})}),A.jsx(Qa,{path:"class-schedules",element:A.jsx(aH,{})}),A.jsx(Qa,{path:"all-schedules",element:A.jsx(sH,{})}),A.jsx(Qa,{path:"pdf",element:A.jsx(AH,{})}),A.jsx(Qa,{path:"data-management",element:A.jsx(pH,{})}),A.jsx(Qa,{path:"classrooms",element:A.jsx(mH,{})})]})})})}):A.jsx(aL,{})]})}U_.createRoot(document.getElementById("root")).render(A.jsx(Ee.StrictMode,{children:A.jsx(vH,{})}));export{sn as _,wH as c,C_ as g};
